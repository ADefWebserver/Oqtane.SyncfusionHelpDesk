!function(e){var t={};function i(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(s,a,function(t){return e[t]}.bind(null,a));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="_content/Syncfusion.Blazor/scripts/",i(i.s="./bundles/filemanager.js")}({"./bundles/filemanager.js":function(e,t,i){"use strict";i.r(t);i("./modules/filemanager.js")},"./modules/filemanager.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.filemanager=sf.base.extend({},sf.filemanager,function(e){"use strict";var t,s,a,n,r,o,l,h,d=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}),p=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),p([sf.base.Property(null)],t.prototype,"downloadUrl",void 0),p([sf.base.Property(null)],t.prototype,"getImageUrl",void 0),p([sf.base.Property(null)],t.prototype,"uploadUrl",void 0),p([sf.base.Property(null)],t.prototype,"url",void 0),t}(sf.base.ChildProperty),f=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),u=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},g=["NewFolder","Upload","Cut","Copy","Paste","Delete","Download","Rename","SortBy","Refresh","Selection","View","Details"],b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),u([sf.base.Property(g)],t.prototype,"items",void 0),u([sf.base.Property(!0)],t.prototype,"visible",void 0),t}(sf.base.ChildProperty),m=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),y=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),y([sf.base.Property(!0)],t.prototype,"allowSearchOnTyping",void 0),y([sf.base.Property("contains")],t.prototype,"filterType",void 0),y([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),t}(sf.base.ChildProperty),O=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),w=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},I=[{field:"name",headerText:"Name",minWidth:120,template:'<span class="e-fe-text">${name}</span>',customAttributes:{class:"e-fe-grid-name"}},{field:"_fm_modified",headerText:"DateModified",type:"dateTime",format:"MMMM dd, yyyy HH:mm",minWidth:120,width:"190"},{field:"size",headerText:"Size",minWidth:90,width:"110",template:'<span class="e-fe-size">${size}</span>'}],D=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),w([sf.base.Property(!0)],t.prototype,"columnResizing",void 0),w([sf.base.Property(I)],t.prototype,"columns",void 0),t}(sf.base.ChildProperty),S=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),C=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},j=["Open","|","Cut","Copy","|","Delete","Download","Rename","|","Details"],x=["Open","|","Cut","Copy","Paste","|","Delete","Rename","Download","|","Details"],P=["SortBy","View","Refresh","|","Paste","|","NewFolder","Upload","|","Details","|","SelectAll"],N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),C([sf.base.Property(j)],t.prototype,"file",void 0),C([sf.base.Property(x)],t.prototype,"folder",void 0),C([sf.base.Property(P)],t.prototype,"layout",void 0),C([sf.base.Property(!0)],t.prototype,"visible",void 0),t}(sf.base.ChildProperty),E=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),R=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),R([sf.base.Property("650px")],t.prototype,"maxWidth",void 0),R([sf.base.Property("240px")],t.prototype,"minWidth",void 0),R([sf.base.Property(!0)],t.prototype,"visible",void 0),t}(sf.base.ChildProperty),k=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),L=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),L([sf.base.Property("")],t.prototype,"allowedExtensions",void 0),L([sf.base.Property(!0)],t.prototype,"autoUpload",void 0),L([sf.base.Property(!1)],t.prototype,"autoClose",void 0),L([sf.base.Property(0)],t.prototype,"minFileSize",void 0),L([sf.base.Property(3e7)],t.prototype,"maxFileSize",void 0),t}(sf.base.ChildProperty),A=(h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),F=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return A(t,e),F([sf.base.Property("")],t.prototype,"field",void 0),F([sf.base.Property("")],t.prototype,"headerText",void 0),F([sf.base.Property("")],t.prototype,"width",void 0),F([sf.base.Property("")],t.prototype,"minWidth",void 0),F([sf.base.Property("")],t.prototype,"maxWidth",void 0),F([sf.base.Property("Left")],t.prototype,"textAlign",void 0),F([sf.base.Property(null)],t.prototype,"headerTextAlign",void 0),F([sf.base.Property(null)],t.prototype,"type",void 0),F([sf.base.Property(null)],t.prototype,"format",void 0),F([sf.base.Property(null)],t.prototype,"template",void 0),F([sf.base.Property(null)],t.prototype,"headerTemplate",void 0),F([sf.base.Property(!0)],t.prototype,"allowSorting",void 0),F([sf.base.Property(!0)],t.prototype,"allowResizing",void 0),F([sf.base.Property(null)],t.prototype,"customAttributes",void 0),F([sf.base.Property("")],t.prototype,"hideAtMedia",void 0),F([sf.base.Property(null)],t.prototype,"customFormat",void 0),t}(sf.base.ChildProperty),U="e-fe-popup e-fe-mobile",V="e-fe-m-filter",B="e-list-item",H="e-icons e-fe-tick",z="e-icons e-fe-dot",q="e-blur",W="e-active",K="e-hover",G="e-focus",Y="e-check",Q="e-checkbox-wrapper",J="e-row",X="e-empty",$="e-fe-clone",Z="e-fe-drop-folder",ee="e-fe-folder",te="e-menu-icon",ie="e-icons e-fe-cut",se="e-icons e-fe-grid",ae="e-icons e-fe-large",ne="e-rtl",re="e-display-none",oe="e-fe-value",le="model-changed",he="initial-end",de="finalize-end",pe="create-end",ce="delete-end",fe="refresh-end",ue="resize-end",ge="path-changed",be="destroy",me="open-init",ye="open-end",ve="selection-changed",Oe="layout-change",we="sort-by-change",Ie="details-init",De="menu-item-data",Se="rename-init",Ce="rename-end",je="cut-copy-init",xe="paste-init",Pe="paste-end",Ne="drop-init",Ee="drop-path",Re="method-call";function Me(e,t,i){var s=sf.base.getValue("name",t),a=e.getAttribute("data-id"),n=sf.base.isNullOrUndefined(a)?s:a;i.setProperties({path:ke(e,n,i.hasId)},!0),i.pathId=function(e){for(var t=Le(e,e.getAttribute("data-uid"),!0),i=[],s=t.length-1;s>=0;s--)i.push(t[s]);return i}(e),i.pathNames=function(e,t){for(var i=Le(e,t,!1),s=[],a=i.length-1;a>=0;a--)s.push(i[a]);return s}(e,s)}function ke(e,t,i){for(var s=Le(e,t,!1,i),a=i?"":"/",n=s.length-(i?1:2);n>=0;n--)a+=s[n]+"/";return a}function Le(e,t,i,s){for(var a=[t],n=e.parentNode;!sf.base.isNullOrUndefined(n);){if(sf.base.matches(n,"."+B)){var r=i?n.getAttribute("data-uid"):s?n.getAttribute("data-id"):sf.base.select(".e-list-text",n).textContent;a.push(r)}if((n=n.parentNode).classList.contains("e-treeview"))break}return a}function Te(e){e.isCut&&(_e(e),e.selectedNodes=[],e.actionRecords=[],e.enablePaste=!1,e.notify("hide-paste",{}))}function Ae(e,t){if(t.isSearchCut=!1,t.actionRecords=[],t.activeElements=[],t.notify(je,{}),0===t.activeElements.length)return!1;_e(t);var i=t.activeElements;"navigationpane"!==t.activeModule?t.targetPath=t.path:t.targetPath=ht(t.path);var s=0;if(i&&(Ue(t,i[0]),"cut"===e))for(;s<i.length;)Fe(i[s]),s++;for(s=0,t.selectedNodes=[],t.enablePaste=!0,t.notify("show-paste",{});s<t.activeRecords.length;)t.actionRecords.push(t.activeRecords[s]),t.selectedNodes.push(sf.base.getValue("name",t.activeRecords[s])),s++;if((""!==t.breadcrumbbarModule.searchObj.element.value||t.isFiltered)&&"navigationpane"!==t.activeModule){t.selectedNodes=[],t.isSearchCut=!0;for(var a=0;a<t.selectedItems.length;)t.selectedNodes.push(t.selectedItems[a]),a++}return!0}function Fe(e){e.classList.add(q)}function _e(e,t){for(var i=t?e.element.querySelectorAll("."+K):e.element.querySelectorAll("."+q),s=0;s<i.length;)t?i[s].classList.remove(K):i[s].classList.remove(q),s++}function Ue(e,t){t&&(t.classList.contains(J)?e.activeModule="detailsview":sf.base.closest(t,".e-large-icon")?e.activeModule="largeiconsview":e.activeModule="navigationpane")}function Ve(e,t,i){var s;if(0!==t.length||e.isFiltered||e.notify("path-column",{args:e}),s="startsWith"===e.searchSettings.filterType?t+"*":"endsWith"===e.searchSettings.filterType?"*"+t:"*"+t+"*",e.searchWord=s,e.itemData=[We(e)],t.length>0){var a=e.searchSettings.ignoreCase,n=e.showHiddenItems;$t(e,i?Oe:"search",e.path,s,n,!a)}else e.isFiltered?Ft(e,Oe):Tt(e,i?Oe:"search",e.path)}function Be(e,t){e.setProperties({view:t},!0),(""!==e.breadcrumbbarModule.searchObj.element.value||e.isFiltered)&&(e.layoutSelectedItems=e.selectedItems);var i="";e.breadcrumbbarModule.searchObj.element.value&&(i=e.breadcrumbbarModule.searchObj.element.value),e.isLayoutChange=!0,Ve(e,i,!0)}function He(e,t){var i="";t&&(i=sf.base.closest(t,".e-gridcontent")?"detailsview":sf.base.closest(t,".e-large-icons")?"largeiconsview":t.classList.contains("e-fullrow")||t.classList.contains("e-icon-expandable")?"navigationpane":sf.base.closest(t,".e-address-list-item")?"breadcrumbbar":""),e.targetModule=i}function ze(e){e.itemData=[We(e)],Pt(e.itemData[0])?Tt(e,fe,e.path):jt(e,e.itemData[0],"read")}function qe(e){Tt(e,ye,e.path)}function We(e){return sf.base.getValue(e.pathId[e.pathId.length-1],e.feParent)}function Ke(e){Ae("copy",e)&&(e.fileAction="copy")}function Ge(e){Ae("cut",e)&&(e.isCut=!0,e.fileAction="move")}function Ye(e){if(!sf.base.getValue("isFile",e))return ee;var t=sf.base.getValue("type",e);return-1!==(t=t.toLowerCase()).indexOf(".")&&(t=t.split(".").join("")),-1!==["bmp","dib","jpg","jpeg","jpe","jfif","gif","tif","tiff","png","ico"].indexOf(t)?"e-fe-image":-1!==["mp3","wav","aac","ogg","wma","aif","fla","m4a"].indexOf(t)?"e-fe-music":-1!==["webm","mkv","flv","vob","ogv","ogg","avi","wmv","mp4","3gp"].indexOf(t)?"e-fe-video":-1!==["css","exe","html","js","msi","pdf","pptx","ppt","rar","zip","txt","docx","doc","xlsx","xls","xml","rtf","php"].indexOf(t)?"e-fe-"+t:"e-fe-unknown e-fe-"+t}function Qe(e,t){var i,s=e.ajaxSettings.getImageUrl?e.ajaxSettings.getImageUrl:e.ajaxSettings.url,a=sf.base.getValue("name",t),n=sf.base.getValue("filterPath",t);if(e.hasId){var r=sf.base.getValue("id",t);i=s+"?path="+e.path+"&id="+r}else i=sf.base.isNullOrUndefined(n)?s+"?path="+e.path+a:s+"?path="+n.replace(/\\/g,"/")+a;var o={fileDetails:[t],imageUrl:i=i+"&time="+(new Date).getTime().toString()};return e.trigger("beforeImageLoad",o),o.imageUrl}function Je(e,t,i){var s=sf.base.getValue(e.hasId?"id":"name",t)+"/",a=sf.base.getValue(e.hasId?"filterId":"filterPath",t);return sf.base.isNullOrUndefined(a)?i+s:a.replace(/\\/g,"/")+s}function Xe(e,t){var i=sf.base.getValue("name",t),s=sf.base.getValue("filterPath",t);return""===e.breadcrumbbarModule.searchObj.element.value&&!e.isFiltered||sf.base.isNullOrUndefined(s)||(i=(s=s.replace(/\\/g,"/")).replace(e.path,"")+i),i}function $e(e,t){if(0===t.length)return t;var i;i="None"!==e.sortOrder?(new sf.data.Query).sortBy(e.sortBy,e.sortOrder.toLowerCase(),!0).group("isFile"):(new sf.data.Query).group("isFile");var s=new sf.data.DataManager(t).executeLocal(i);return sf.base.getValue("records",s)}function Ze(e,t,i){var s=sf.base.getValue(e.pathId[e.pathId.length-1],e.feFiles),a=(new sf.data.Query).where(t,"equal",i);return new sf.data.DataManager(s).executeLocal(a)[0]}function et(e,t,i){var s,a=sf.base.select("#"+e.element.id+"_layout",e.element),n=sf.base.select("#"+e.element.id+"_breadcrumbbar",a).offsetHeight;if(s=a.offsetHeight-n,"Details"===e.view&&(s-=sf.base.select(".e-gridheader",a).offsetHeight),sf.base.isNullOrUndefined(t.querySelector("."+X))){var r=sf.base.createElement("div",{className:X}),o=sf.base.createElement("div",{className:"e-empty-icon e-fe-folder"}),l=sf.base.createElement("div",{className:"e-empty-content"}),h=sf.base.createElement("div",{className:"e-empty-inner-content"});"Details"===e.view?t.querySelector(".e-content").appendChild(r):t.appendChild(r),r.appendChild(o),r.appendChild(l),r.appendChild(h)}t.querySelector("."+X)&&(sf.base.isNullOrUndefined(i.error)?e.isFiltered?(t.querySelector(".e-empty-content").innerHTML=it(e,"Filter-Empty"),t.querySelector(".e-empty-inner-content").innerHTML=it(e,"Filter-Key")):""!==e.breadcrumbbarModule.searchObj.element.value?(t.querySelector(".e-empty-content").innerHTML=it(e,"Search-Empty"),t.querySelector(".e-empty-inner-content").innerHTML=it(e,"Search-Key")):(t.querySelector(".e-empty-content").innerHTML=it(e,"Folder-Empty"),t.querySelector(".e-empty-inner-content").innerHTML=it(e,"File-Upload")):(t.querySelector(".e-empty-content").innerHTML=it(e,"Access-Denied"),t.querySelector(".e-empty-inner-content").innerHTML=it(e,"Access-Details")));var d=sf.base.select("."+X,t);s=(s-d.offsetHeight)/2,d.style.marginTop=s+"px"}function tt(e){return new sf.data.DataManager(e).executeLocal((new sf.data.Query).where("isFile","equal",!1,!1))}function it(e,t){var i=e.localeObj.getConstant(t);return""===i?t:i}function st(e,t){var i=e.cssClass;return i=sf.base.isNullOrUndefined(i)||""===i?t:i+" "+t}function at(e,t){-1!==t.item.id.indexOf("ascending")||-1!==t.item.id.indexOf("descending")||-1!==t.item.id.indexOf("none")?e.sortOrder=nt(t.item.id):e.sortBy=nt(t.item.id),e.itemData=[We(e)],"Details"===e.view&&(e.isMobile?Be(e,"Details"):e.notify("sort-column",{module:"detailsview"})),"LargeIcons"===e.view&&Be(e,"LargeIcons"),e.notify(we,{})}function nt(e){var t=e.substring(e.lastIndexOf("_")+1),i=t;switch(t){case"date":i="_fm_modified";break;case"ascending":i="Ascending";break;case"descending":i="Descending";break;case"none":i="None"}return i}function rt(e,t){e.notify("clear-path-init",{selectedNode:e.pathId[e.pathId.length-1]}),e.originalPath=Je(e,t,e.path),Tt(e,e.path!==e.originalPath?he:de,e.path)}function ot(e){if(e.isDragDrop=!1,0!==e.selectedNodes.length&&e.enablePaste){var t=""===e.folderPath?e.path:e.folderPath;lt(e,e.actionRecords,t,e.path)||("move"===e.fileAction&&e.targetPath!==t||"copy"===e.fileAction?(e.notify(xe,{}),Ut(e,e.targetPath,e.selectedNodes,t,e.fileAction,[],e.actionRecords)):(e.enablePaste=!1,e.notify("hide-paste",{}),_e(e)))}}function lt(e,t,i,s){for(var a=!1,n=0;n<t.length;n++)if(!sf.base.getValue("isFile",t[n])){var r=Je(e,t[n],s);if(0===i.indexOf(r)){ti(e,"Error",{files:null,error:{code:"402",message:it(e,"Sub-Folder-Error"),fileExists:null}}),a=!0;break}}return a}function ht(e){for(var t=e.split("/"),i=t[0]+"/",s=1;s<t.length-2;s++)i+=t[s]+"/";return i}function dt(e,t){var i=sf.base.getValue(e.hasId?"id":"name",t.cwd)+"/",s=sf.base.getValue(e.hasId?"filterId":"filterPath",t.cwd);return sf.base.isNullOrUndefined(s)?e.path+i:""===s?e.hasId?i:"/":s.replace(/\\/g,"/")+i}function pt(e,t,i){"move"===t&&(e.isDragDrop?e.notify("drag-end",i):(e.enablePaste=!1,e.notify("hide-paste",{}),e.notify("cut-end",i))),0===e.duplicateItems.length&&(e.pasteNodes=[]);for(var s=0;s<i.files.length;s++)e.pasteNodes.push(i.files[s][e.hasId?"id":"name"]),e.isDragDrop&&e.droppedObjects.push(i.files[s]);e.duplicateItems=[],e.duplicateRecords=[],e.isDragDrop&&!e.isPasteError?e.isDropEnd=!0:e.isDropEnd=!1,!e.isDragDrop||e.path===e.dragPath||e.path===e.dropPath||e.isSearchDrag?(e.isPathDrag=!1,Tt(e,Pe,e.path)):ct(e),e.trigger("success",{action:t,result:i})}function ct(e){var t=sf.base.getValue("_fm_id",e.dropData);if(e.expandedId=t,e.itemData=[e.dropData],e.isPathDrag)e.notify("path-drag",e.itemData);else{if(e.navigationpaneModule)Me(sf.base.select('[data-uid="'+t+'"]',e.navigationpaneModule.treeObj.element),e.dropData,e);Tt(e,Ee,e.dropPath)}}function ft(e){if(e.isSearchDrag=!1,""!==e.breadcrumbbarModule.searchObj.element.value&&(e.isSearchDrag=!0),"navigationpane"!==e.activeModule){e.dragNodes=[];for(var t=0;t<e.selectedItems.length;)e.dragNodes.push(e.selectedItems[t]),t++}var i=e.createElement("div",{className:"e-fe-icon "+Ye(e.dragData[0])}),s=e.createElement("div",{className:"e-fe-name",innerHTML:e.dragData[0].name}),a=e.createElement("div",{className:"e-fe-content"});a.appendChild(i),a.appendChild(s);var n=e.createElement("div",{className:$});if(n.appendChild(a),e.dragNodes.length>1){var r=e.createElement("span",{className:"e-fe-count",innerHTML:e.dragNodes.length.toString(10)});n.appendChild(r)}e.virtualDragElement=n,e.element.appendChild(e.virtualDragElement)}function ut(e,t){var i=t;i.cancel=!1,null!=e.treeExpandTimer&&(window.clearTimeout(e.treeExpandTimer),e.treeExpandTimer=null),mt(e),e.element.classList.remove("e-fe-drop","e-no-drop"),_e(e),e.uploadObj.dropArea=sf.base.select("#"+e.element.id+"_content",e.element);var s=sf.base.select("."+$,e.element);s&&sf.base.detach(s),He(e,t.target),e.notify(Ne,t),_e(e,"hover"),i.fileDetails=e.dragData,e.trigger("fileDragStop",i,(function(t){t.cancel||sf.base.isNullOrUndefined(e.targetModule)||""===e.targetModule||function(e){e.isDragDrop=!0,0!==e.dragData.length&&(e.dragPath=e.dragPath.replace(/\\/g,"/"),e.dropPath=e.dropPath.replace(/\\/g,"/"),lt(e,e.dragData,e.dropPath,e.dragPath)||e.dragPath===e.dropPath||(e.itemData=[e.dropData],Ut(e,e.dragPath,e.dragNodes,e.dropPath,"move",[],e.dragData),e.notify(xe,{})))}(e)}))}function gt(e,t,i){var s=t;if(s.cancel=!1,s.fileDetails=e.dragData,e.droppedObjects=[],(!e.allowDragAndDrop||"navigationpane"===e.activeModule&&sf.base.closest(t.element,"li").getAttribute("data-uid")===e.pathId[0])&&(s.cancel=!0),"navigationpane"===e.activeModule&&-1!==e.pathId.indexOf(sf.base.closest(t.element,"li").getAttribute("data-uid"))?e.isPathDrag=!0:e.isPathDrag=!1,_e(e),s.cancel)i.intDestroy(t.event),bt(e);else if(!s.cancel){for(var a=0;a<e.activeElements.length;)Fe(e.activeElements[a]),a++;e.trigger("fileDragStart",s,(function(s){s.cancel?(i.intDestroy(t.event),bt(e)):(e.uploadObj.dropArea=null,sf.base.isBlazor()&&s.bindEvents(s.dragElement))}))}}function bt(e){_e(e);var t=sf.base.select("."+$,e.element);t&&sf.base.detach(t)}function mt(e){yt(e,Z),yt(e,"e-fe-drop-file")}function yt(e,t){for(var i=e.element.querySelectorAll("."+t),s=0;s<i.length;s++)i[s].classList.remove(t)}function vt(e,t){var i=t;i.fileDetails=e.dragData;var s=!1;He(e,t.target),mt(e),null!=e.treeExpandTimer&&(window.clearTimeout(e.treeExpandTimer),e.treeExpandTimer=null),_e(e,"hover");var a=null;"navigationpane"===e.targetModule?((a=sf.base.closest(t.target,"li")).classList.add(K,Z),s=!0,e.treeExpandTimer=window.setTimeout((function(){e.notify("dragging",t)}),800)):"detailsview"===e.targetModule?((a=sf.base.closest(t.target,"tr"))&&a.querySelector("."+ee)&&!a.classList.contains(q)?a.classList.add(Z):!a||a.querySelector("."+ee)||a.classList.contains(q)||a.classList.add("e-fe-drop-file"),s=!0):"largeiconsview"===e.targetModule?((a=sf.base.closest(t.target,"li"))&&a.querySelector("."+ee)&&!a.classList.contains(q)&&a.classList.add(K,Z),s=!0):"breadcrumbbar"===e.targetModule&&(s=!0),e.element.classList.remove("e-fe-drop","e-no-drop"),e.element.classList.add(s?"e-fe-drop":"e-no-drop"),e.trigger("fileDragging",i)}function Ot(e,t){return e.hasId?sf.base.getValue("id",t):Xe(e,t)}function wt(e,t){e.itemData=[t],e.currentItemText=sf.base.getValue("name",t),e.isFile=sf.base.getValue("isFile",t),e.filterPath=sf.base.getValue("filterPath",t)}function It(e){Nt(e.itemData[0])?ti(e,"Rename"):jt(e,e.itemData[0],"write")}function Dt(e){for(var t=e.itemData,i=0;i<t.length;i++)if(!Mt(t[i]))return void jt(e,t[i],"download");e.selectedItems.length>0&&ei(e,e.path,e.selectedItems)}function St(e,t,i){for(var s=0;s<t.length;s++)if(!Nt(t[s]))return void jt(e,t[s],"write");e.itemData=t,Vt(e,i,e.path,"delete")}function Ct(e,t,i){for(var s=0;s<t.length;s++)if(!Mt(t[s]))return void jt(e,t[s],"download");e.itemData=t,i.length>0&&ei(e,e.path,i)}function jt(e,t,i){var s=sf.base.getValue("message",sf.base.getValue("permission",t));""===s&&(s=it(e,"Access-Message").replace("{0}",sf.base.getValue("name",t)).replace("{1}",i)),ti(e,"Error",{error:{code:"401",fileExists:null,message:s}})}function xt(e){return Pt(e)?"e-fe-locked":"e-fe-locked e-fe-hidden"}function Pt(e){var t=sf.base.getValue("permission",e);return!(t&&!sf.base.getValue("read",t))}function Nt(e){var t=sf.base.getValue("permission",e);return!t||sf.base.getValue("read",t)&&sf.base.getValue("write",t)}function Et(e){var t=sf.base.getValue("permission",e);return!t||sf.base.getValue("read",t)&&sf.base.getValue("writeContents",t)}function Rt(e){var t=sf.base.getValue("permission",e);return!t||sf.base.getValue("read",t)&&sf.base.getValue("upload",t)}function Mt(e){var t=sf.base.getValue("permission",e);return!t||sf.base.getValue("read",t)&&sf.base.getValue("download",t)}function kt(e){var t=e.itemData[0];Et(t)?ti(e,"NewFolder"):jt(e,t,"writeContents")}function Lt(e){var t=e.itemData[0];if(Rt(t)){var i="#"+e.element.id+"_upload";document.querySelector(i).click()}else jt(e,t,"upload")}function Tt(e,t,i){for(var s=e.itemData,a=0;a<s.length;a++)sf.base.isNullOrUndefined(sf.base.getValue("hasChild",s[a]))&&sf.base.setValue("hasChild",!1,s[a]);Ht(e,{action:"read",path:i,showHiddenItems:e.showHiddenItems,data:s},qt,t)}function At(e,t){Ht(e,{action:"create",path:e.path,name:t,data:e.itemData},Kt,t)}function Ft(e,t){var i,s={action:"filter",path:e.path,showHiddenItems:e.showHiddenItems,data:[We(e)]};Ht(e,i=e.filterData?sf.base.extend(i,s,e.filterData):s,Wt,t,sf.base.getValue("action",i))}function _t(e,t,i){var s,a;if(""!==e.breadcrumbbarModule.searchObj.element.value||e.isFiltered){var n=e.filterPath;e.hasId?(s=e.currentItemText,a=i):(s=(n=n.replace(/\\/g,"/")).replace(t,"")+e.currentItemText,a=n.replace(t,"")+i)}else s=e.currentItemText,a=i;Ht(e,{action:"rename",path:t,name:s,newName:a,data:e.itemData},Gt,t)}function Ut(e,t,i,s,a,n,r){var o={action:a,path:t,targetData:e.itemData[0],targetPath:s,names:i,renameFiles:n,data:r};e.destinationPath=s,Ht(e,o,Yt,t,a,s)}function Vt(e,t,i,s){Ht(e,{action:s,path:i,names:t,data:e.itemData},Qt,i)}function Bt(e,t,i,s){Ht(e,{action:s,path:i,names:t,data:e.itemData},Jt,i,s)}function Ht(e,t,i,s,a,n){var r={url:e.ajaxSettings.url,type:"POST",mode:!0,dataType:"json",contentType:"application/json",data:JSON.stringify(t),onSuccess:null,onFailure:null,beforeSend:null},o={action:sf.base.getValue("action",t),ajaxSettings:r,cancel:!1};e.trigger("beforeSend",o,(function(r){r.cancel||(e.notify("before-request",{}),new sf.base.Ajax({url:sf.base.getValue("url",r.ajaxSettings),type:sf.base.getValue("type",r.ajaxSettings),mode:sf.base.getValue("mode",r.ajaxSettings),dataType:sf.base.getValue("dataType",r.ajaxSettings),contentType:sf.base.getValue("contentType",r.ajaxSettings),data:sf.base.getValue("data",r.ajaxSettings),beforeSend:sf.base.getValue("beforeSend",r.ajaxSettings),onSuccess:function(o){if(sf.base.isNullOrUndefined(o)){var l={error:{fileExists:null,message:it(e,"Server-Error")+" "+e.ajaxSettings.url,code:"406"},files:null};zt(e,r,i,l,s,a,n)}else{"string"==typeof o&&(o=JSON.parse(o)),e.notify("after-request",{action:"success"});var h=e.expandedId?e.expandedId:e.pathId[e.pathId.length-1];if(!sf.base.isNullOrUndefined(o.cwd)&&"read"===sf.base.getValue("action",t)&&(o.cwd.name=1===e.pathId.length&&e.rootAliasName||o.cwd.name,sf.base.setValue("_fm_id",h,o.cwd),sf.base.setValue(h,o.cwd,e.feParent),!sf.base.isNullOrUndefined(o.files)||"401"===o.error.code)){if(("finalize-end"===s||"initial-end"===s)&&0===e.pathNames.length){var d=sf.base.getValue(e.pathId[0],e.feParent);e.pathNames[0]=sf.base.getValue("name",d),e.hasId=!sf.base.isNullOrUndefined(sf.base.getValue("id",d))}"finalize-end"===s&&function(e){for(var t=e.hasId?"id":"name",i=e.hasId?"":"/",s=e.hasId?0:1;s<e.pathId.length;s++){var a=sf.base.getValue(e.pathId[s],e.feParent);i+=sf.base.getValue(t,a)+"/"}e.setProperties({path:i},!0)}(e)}if(!sf.base.isNullOrUndefined(o.files)){!function(e){for(var t=0;t<e.length;t++)sf.base.setValue("_fm_created",new Date(sf.base.getValue("dateCreated",e[t])),e[t]),sf.base.setValue("_fm_modified",new Date(sf.base.getValue("dateModified",e[t])),e[t])}(o.files);for(var p=0,c=o.files.length;p<c;p++){var f=o.files[p];sf.base.setValue("_fm_iconClass",Ye(f),f)}"read"===sf.base.getValue("action",t)&&(!function(e,t){for(var i=tt(e.files),s=0,a=i.length;s<a;s++)sf.base.setValue("_fm_id",t+"_"+s,i[s])}(o,h),sf.base.setValue(h,o.files,e.feFiles))}if(!sf.base.isNullOrUndefined(o.details)&&!sf.base.isNullOrUndefined(e.rootAliasName)){var u=e.rootAliasName||sf.base.getValue("name",o.details),g=sf.base.getValue("location",o.details).replace(new RegExp("/","g"),"\\");("/"===sf.base.getValue("path",t)||e.hasId&&1===sf.base.getValue("path",t).match(/[/]/g).length)&&0===sf.base.getValue("names",t).length?(sf.base.setValue("name",u,o.details),g=u):g=g.replace(g.substring(0,g.indexOf("\\")),u),sf.base.setValue("location",g,o.details)}i(e,o,s,a,n),sf.base.isNullOrUndefined(o.files)||"path-changed"!==s&&"finalize-end"!==s&&"open-end"!==s||e.notify("search-change",o),"function"==typeof sf.base.getValue("onSuccess",r.ajaxSettings)&&sf.base.getValue("onSuccess",r.ajaxSettings)()}},onFailure:function(){var t={files:null,error:{code:"404",message:it(e,"Network-Error")+" "+e.ajaxSettings.url,fileExists:null}};zt(e,r,i,t,s,a,n)}}).send())}))}function zt(e,t,i,s,a,n,r){e.notify("after-request",{action:"failure"}),i(e,s,a,n,r),"function"==typeof sf.base.getValue("onFailure",t.ajaxSettings)&&sf.base.getValue("onFailure",t.ajaxSettings)()}function qt(e,t,i){if(sf.base.isNullOrUndefined(t.files))"401"===t.error.code&&(t.files=[],e.notify(i,t),e.notify(ve,{})),Xt(e,t,"read");else{e.notify(i,t),e.notify(ve,{});var s={action:"read",result:t};e.trigger("success",s)}if(e.isDragDrop&&e.isDropEnd){if(0!==e.droppedObjects.length){s={fileDetails:e.droppedObjects};e.trigger("fileDropped",s)}e.isDropEnd=e.isDragDrop=!1}}function Wt(e,t,i,s){if(sf.base.isNullOrUndefined(t.files))Xt(e,t,s);else{e.notify(i,t);var a={action:s,result:t};e.trigger("success",a)}}function Kt(e,t,i){if(sf.base.isNullOrUndefined(t.files))if("400"===t.error.code){if(e.dialogObj&&e.dialogObj.visible){var s=sf.base.select("#newname",e.dialogObj.element),a=it(e,"Validation-NewFolder-Exists").replace("{0}",'"'+s.value+'"');s.parentElement.nextElementSibling.innerHTML=a}else{ti(e,"Error",{files:null,error:{code:"400",message:it(e,"Validation-NewFolder-Exists").replace("{0}",'"'+i+'"'),fileExists:null}})}n={action:"create",error:t.error};e.trigger("failure",n)}else e.dialogObj&&e.dialogObj.visible&&e.dialogObj.hide(),Xt(e,t,"create");else{e.dialogObj&&e.dialogObj.visible&&e.dialogObj.hide(),e.createdItem=t.files[0],e.breadcrumbbarModule.searchObj.value="";var n={action:"create",result:t};e.trigger("success",n),e.itemData=[We(e)],Tt(e,pe,e.path)}}function Gt(e,t,i){if(sf.base.isNullOrUndefined(t.files))if("400"===t.error.code&&e.dialogObj&&e.dialogObj.visible){var s=sf.base.select("#rename",e.dialogObj.element),a=it(e,"Validation-Rename-Exists").replace("{0}",'"'+e.currentItemText+'"');a=a.replace("{1}",'"'+s.value+'"'),s.parentElement.nextElementSibling.innerHTML=a;n={action:"rename",error:t.error};e.trigger("failure",n)}else sf.base.isNullOrUndefined(e.dialogObj)||e.dialogObj.hide(),Xt(e,t,"rename");else{sf.base.isNullOrUndefined(e.dialogObj)||e.dialogObj.hide();var n={action:"rename",result:t};e.trigger("success",n),e.renamedItem=t.files[0],"navigationpane"===e.activeModule?(e.pathId.pop(),e.itemData=[sf.base.getValue(e.pathId[e.pathId.length-1],e.feParent)],Tt(e,"rename-end-parent",ht(e.path))):(e.itemData=[We(e)],""!==e.breadcrumbbarModule.searchObj.value?$t(e,Ce,e.path,e.searchWord,e.showHiddenItems,!e.searchSettings.ignoreCase):e.isFiltered?Ft(e,Ce):Tt(e,Ce,e.path))}}function Yt(e,t,i,s){t.error&&t.error.fileExists?(e.fileLength=0,sf.base.isNullOrUndefined(t.files)||(e.isPasteError=!0,pt(e,s,t)),ii(e,"DuplicateItems",t.error.fileExists),"404"===t.error.code&&ti(e,"Error",t)):t.error||sf.base.isNullOrUndefined(t.files)?t.error&&!sf.base.isNullOrUndefined(t.files)?(e.isPasteError=!0,pt(e,s,t),ti(e,"Error",t)):Xt(e,t,s):(e.isPasteError=!1,pt(e,s,t))}function Qt(e,t,i){if(sf.base.isNullOrUndefined(t.files))Xt(e,t,"delete");else if(e.setProperties({path:i},!0),e.itemData=[We(e)],Tt(e,ce,e.path),t.error)Xt(e,t,"delete");else{var s={action:"delete",result:t};e.trigger("success",s)}}function Jt(e,t,i,s){if(sf.base.isNullOrUndefined(t.details))Xt(e,t,"details");else{ti(e,s,null,t.details);var a={action:"details",result:t};e.trigger("success",a)}}function Xt(e,t,i){ti(e,"Error",t);var s={action:i,error:t.error};e.trigger("failure",s)}function $t(e,t,i,s,a,n){Ht(e,{action:"search",path:i,searchString:s,showHiddenItems:a,caseSensitive:n,data:e.itemData},Zt,t)}function Zt(e,t,i){if(sf.base.isNullOrUndefined(t.files))Xt(e,t,"search");else{e.notify(i,t);var s={action:"search",result:t};e.trigger("success",s)}}function ei(e,t,i){var s=e.ajaxSettings.downloadUrl?e.ajaxSettings.downloadUrl:e.ajaxSettings.url,a={data:{action:"download",path:t,names:i,data:e.itemData},cancel:!1};e.trigger("beforeDownload",a,(function(t){if(!t.cancel){var i=sf.base.createElement("form",{id:e.element.id+"_downloadForm",attrs:{action:s,method:"post",name:"downloadForm",download:""}}),a=sf.base.createElement("input",{id:e.element.id+"_hiddenForm",attrs:{name:"downloadInput",value:JSON.stringify(t.data),type:"hidden"}});i.appendChild(a),e.element.appendChild(i),document.forms.namedItem("downloadForm").submit(),e.element.removeChild(i)}}))}function ti(e,t,i,s,a){var n=function(e,t,i,s,a){var n={header:"",content:"",buttons:[],dialogName:""};switch(n.open=function(){ni(e,e.dialogObj,n.dialogName)},n.close=function(){ri(e,e.dialogObj,n.dialogName)},t=s&&!0===s.multipleFiles?"MultipleFileDetails":t){case"NewFolder":n.dialogName="Create Folder",n.header=it(e,"Header-NewFolder"),n.content='<input type="text" value="New folder" id="newname"><div class="e-fe-error"></div>',n.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Create")},click:function(t){"keydown"!==t.type&&bi(e)}}],n.open=di.bind(this,e);break;case"Delete":n.dialogName="Delete",e.selectedItems.length>1?(n.content=("<div>"+it(e,"Content-Multiple-Delete")+"</div>").replace("{0}",e.selectedItems.length.toString()),n.header=it(e,"Header-Multiple-Delete")):(n.content="<div>"+it(e,e.isFile?"Content-Delete":"Content-Folder-Delete")+"</div>",n.header=it(e,e.isFile?"Header-Delete":"Header-Folder-Delete")),n.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Yes")},click:function(t){!function(e){e.dialogObj.hide(),e.notify("delete-init",{})}(e)}},{buttonModel:{content:it(e,"Button-No")},click:function(){e.dialogObj.hide()}}];break;case"Rename":n.dialogName="Rename",n.header=it(e,"Header-Rename"),n.content='<input type="text" class="e-input" id="rename"><div class="e-fe-error"></div>',n.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Save")},click:function(t){"keydown"!==t.type&&mi(e)}}],n.open=pi.bind(this,e);break;case"details":n.dialogName="File Details";var r=new sf.base.Internationalization(e.locale).formatDate(new Date(s.modified),{format:"MMMM dd, yyyy HH:mm:ss"}),o="";sf.base.isNullOrUndefined(s.permission)||(o="<tr><td>"+it(e,"Permission")+'</td><td class="'+oe+'" >'+function(e){for(var t="",i=Object.keys(e),s=0;s<i.length;s++)"message"!==i[s]&&(t+=(0===s?"":", ")+i[s]+": "+sf.base.getValue(i[s],e));return t}(s.permission)+"</td></tr>"),n.header=s.name,n.content="<table><tr><td>"+it(e,"Type")+'</td><td class="'+oe+'" title="'+(s.isFile?"File":"Folder")+'">'+(s.isFile?"File":"Folder")+"</td></tr><tr><td>"+it(e,"Size")+'</td><td><span class="'+oe+'" title ="'+s.size+'">'+s.size+"</span></td></tr><tr><td>"+it(e,"Location")+'</td><td class="'+oe+'" title="'+s.location+'">'+s.location+"</td></tr><tr><td>"+it(e,"Modified")+'</td><td class="'+oe+'" >'+r+"</td></tr>"+o+"</table>",n.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Ok")},click:function(t){e.dialogObj.hide()}}];break;case"MultipleFileDetails":n.dialogName="File Details";var l=s.name.split(",").map((function(e){var t=e.indexOf(".")+1;return 0===t?"Folder":e.substr(t).replace(" ","")})),h=l.every((function(e,t,i){return e===i[0]}))?"Folder"===l[0]?"Folder":l[0].toLocaleUpperCase()+" Type":"Multiple Types",d=s.location;n.header=s.name,n.content="<table><tr><td>"+it(e,"Type")+':</td><td class="'+oe+'">'+h+"</td></tr><tr><td>"+it(e,"Size")+":</td><td>"+s.size+'<span class="'+oe+'" title ="'+s.size+'"></span></td></tr><tr><td>'+it(e,"Location")+':</td><td class="'+oe+'" title="'+d+'">'+d+"</td></tr></table>",n.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Ok")},click:function(t){"keydown"!==t.type&&e.dialogObj.hide()}}];break;case"Error":e.notify("actionFailure",{}),n.dialogName="Error";var p=i;"401"===p.error.code?n.header='<span class="e-fe-icon e-fe-access-error"></span><div class="e-fe-access-header">'+it(e,"Access-Denied")+"</div>":n.header=it(e,"Error"),n.content='<div class="e-fe-errorcontent">'+p.error.message+"</div>",n.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Ok")},click:function(t){e.dialogObj.hide()}}]}return n}(e,t,i,s);sf.base.isNullOrUndefined(e.dialogObj)?(e.dialogObj=new sf.popups.Dialog({beforeOpen:fi.bind(this,e,n.dialogName),beforeClose:function(t){ai(e,e.dialogObj,t,n.dialogName)},header:n.header,content:n.content,buttons:n.buttons,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,allowDragging:!0,isModal:!0,target:e.popupTarget?e.popupTarget:"#"+e.element.id,cssClass:st(e,e.isMobile?U:"e-fe-popup"),width:"350px",open:n.open,close:n.close,enableRtl:e.enableRtl,enableHtmlSanitizer:e.enableHtmlSanitizer,locale:e.locale}),e.dialogObj.isStringTemplate=!0,e.dialogObj.appendTo("#"+e.element.id+"_dialog")):function(e,t){e.dialogObj.header=t.header,e.dialogObj.content=t.content,e.dialogObj.buttons=t.buttons,e.dialogObj.enableRtl=e.enableRtl,e.dialogObj.open=t.open,e.dialogObj.close=t.close,e.dialogObj.beforeOpen=fi.bind(this,e,t.dialogName),e.dialogObj.beforeClose=function(i){ai(e,e.dialogObj,i,t.dialogName)},e.dialogObj.dataBind(),e.dialogObj.show()}(e,n)}function ii(e,t,i,s){var a=function(e,t,i,s){var a={header:"",content:"",buttons:[],dialogName:""};switch(a.open=function(){ni(e,e.extDialogObj,a.dialogName)},a.close=function(){ri(e,e.extDialogObj,a.dialogName)},t){case"Extension":a.header=it(e,"Header-Rename-Confirmation"),a.content="<div>"+it(e,"Content-Rename-Confirmation")+"</div>",a.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Yes")},click:function(){e.extDialogObj.hide(),_t(e,s,e.renameText)}},{buttonModel:{content:it(e,"Button-No")},click:function(){e.extDialogObj.hide(),e.dialogObj.hide()}}],a.dialogName="Extension Change";break;case"DuplicateItems":a.dialogName="Duplicate Items",e.replaceItems=i;var n=e.replaceItems[e.fileLength],r=n.lastIndexOf("/");n=-1===r?n:n.substring(r),a.header=it(e,"Header-Duplicate");var o="<div>"+it(e,"Content-Duplicate")+"</div>";a.content=o.replace("{0}",n),a.close=function(){if(!e.isDropEnd&&0===e.duplicateItems.length){var t={fileDetails:e.droppedObjects};e.trigger("fileDropped",t),e.isDropEnd=e.isDragDrop=!1}ri(e,e.extDialogObj,a.dialogName)},a.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Yes")},click:function(){if(e.duplicateItems.push(e.replaceItems[e.fileLength]),e.duplicateRecords.push(function(e,t){for(var i=null,s=e.isDragDrop?e.dragData:e.actionRecords,a=0;a<s.length;a++)if(sf.base.getValue("name",s[a])===t){i=s[a];break}return i}(e,e.replaceItems[e.fileLength])),e.fileLength++,i[e.fileLength]){var t=e.replaceItems[e.fileLength],s=t.lastIndexOf("/");t=-1===s?t:t.substring(s),e.extDialogObj.content=o.replace("{0}",t),e.extDialogObj.show()}else{e.extDialogObj.hide();var a=e.isDragDrop?e.dragPath:e.targetPath,n=e.isDragDrop?e.dropPath:""===e.folderPath?e.path:e.folderPath,r=e.isDragDrop?"move":e.fileAction;Ut(e,a,e.duplicateItems,n,r,e.duplicateItems,e.duplicateRecords)}}},{buttonModel:{content:it(e,"Button-No")},click:function(){if(e.fileLength++,i[e.fileLength]){var t=e.replaceItems[e.fileLength],s=t.lastIndexOf("/");t=-1===s?t:t.substring(s),e.extDialogObj.content=o.replace("{0}",t),e.extDialogObj.show()}else if(e.extDialogObj.hide(),0!==e.duplicateItems.length){var a=e.isDragDrop?"move":e.fileAction,n=e.isDragDrop?e.dragPath:e.targetPath,r=e.isDragDrop?e.dropPath:""===e.folderPath?e.path:e.folderPath;Ut(e,n,e.duplicateItems,r,a,e.duplicateItems,e.duplicateRecords)}}}];break;case"UploadRetry":a.dialogName="Retry Upload",a.header=it(e,"Header-Retry"),a.content=e.retryFiles[0].name+'<div class="e-fe-retrycontent">'+it(e,"Content-Retry")+"</div>",a.open=hi.bind(this,e),a.close=function(){e.isRetryOpened=!1,li(e),ri(e,e.extDialogObj,a.dialogName)},a.buttons=[{buttonModel:{isPrimary:!0,content:it(e,"Button-Keep-Both")},click:function(){oi(e,!0)}},{buttonModel:{isPrimary:!0,content:it(e,"Button-Replace")},click:function(){oi(e,!1)}},{buttonModel:{isPrimary:!0,content:it(e,"Button-Skip")},click:function(){var t=0;e.isApplySame?(t=e.retryFiles.length,e.retryFiles=[],li(e)):(t=1,e.retryFiles.splice(0,1),0!==e.retryFiles.length?ii(e,"UploadRetry"):li(e)),e.notify("skip-upload",{count:t})}}]}return a}(e,t,i,s);e.isApplySame=!1,sf.base.isNullOrUndefined(e.extDialogObj)?(e.extDialogObj=new sf.popups.Dialog({beforeOpen:ui.bind(this,e,a.dialogName),beforeClose:function(t){ai(e,e.extDialogObj,t,a.dialogName)},content:a.content,header:a.header,closeOnEscape:!0,allowDragging:!0,animationSettings:{effect:"None"},target:e.popupTarget?e.popupTarget:"#"+e.element.id,cssClass:st(e,e.isMobile?U:"e-fe-popup"),enableRtl:e.enableRtl,showCloseIcon:!0,isModal:!0,width:350,buttons:a.buttons,open:a.open,close:a.close,enableHtmlSanitizer:e.enableHtmlSanitizer,locale:e.locale}),e.extDialogObj.isStringTemplate=!0,e.extDialogObj.appendTo("#"+e.element.id+"_extn_dialog")):(e.extDialogObj.header=a.header,e.extDialogObj.close=a.close,e.extDialogObj.open=a.open,e.extDialogObj.close=a.close,e.extDialogObj.content=a.content,e.extDialogObj.buttons=a.buttons,e.extDialogObj.enableRtl=e.enableRtl,e.extDialogObj.locale=e.locale,e.extDialogObj.beforeOpen=ui.bind(this,e,a.dialogName),e.extDialogObj.beforeClose=function(t){ai(e,e.extDialogObj,t,a.dialogName)},e.extDialogObj.dataBind(),e.extDialogObj.show())}function si(e,t,i,s){var a={cancel:i.cancel,popupName:s,popupModule:t};sf.base.isBlazor()&&delete a.popupModule,e.trigger("beforePopupOpen",a,(function(e){i.cancel=e.cancel}))}function ai(e,t,i,s){var a={cancel:i.cancel,popupModule:t,popupName:s};sf.base.isBlazor()&&delete a.popupModule,e.trigger("beforePopupClose",a,(function(t){i.cancel=t.cancel,i.cancel||!i.isInteracted||"Rename"!==s&&"Create Folder"!==s||e.trigger("actionFailure",{})}))}function ni(e,t,i){var s={popupModule:t,element:t.element,popupName:i};sf.base.isBlazor()&&delete s.popupModule,e.trigger("popupOpen",s)}function ri(e,t,i){var s={popupModule:t,element:t.element,popupName:i};sf.base.isBlazor()&&delete s.popupModule,e.trigger("popupClose",s)}function oi(e,t){e.isApplySame?(t?function(e){for(;0!==e.retryFiles.length;)e.retryArgs.push({action:"keepboth",file:e.retryFiles[0]}),e.uploadObj.retry(e.retryFiles[0]),e.retryFiles.splice(0,1)}(e):function(e){for(;0!==e.retryFiles.length;)e.retryArgs.push({action:"replace",file:e.retryFiles[0]}),e.uploadObj.retry(e.retryFiles[0]),e.retryFiles.splice(0,1)}(e),li(e)):(e.retryArgs.push({action:t?"keepboth":"replace",file:e.retryFiles[0]}),e.uploadObj.retry(e.retryFiles[0]),e.retryFiles.splice(0,1),0!==e.retryFiles.length?ii(e,"UploadRetry"):li(e))}function li(e){var t=!0;e.isRetryOpened?e.isRetryOpened=!1:t=!1;var i=sf.base.select(".e-dlg-checkbox",e.extDialogObj.element);i&&sf.base.remove(i),t?e.extDialogObj.hide():e.retryFiles=[]}function hi(e,t){e.isRetryOpened=!0;var i=sf.base.getValue("element",t),s=sf.base.select(".e-dlg-content",i),a=e.createElement("div",{className:"e-dlg-checkbox"}),n=e.createElement("input",{id:e.element.id+"_applyall"});a.appendChild(n),s.appendChild(a),new sf.buttons.CheckBox({label:it(e,"ApplyAll-Label"),change:function(t){e.isApplySame=t.checked}}).appendTo("#"+e.element.id+"_applyall"),ni(e,e.extDialogObj,"Retry Upload")}function di(e){var t=sf.base.select("#newname",e.dialogObj.element);t.parentElement.classList.contains("e-control-wrapper")||ci(t,it(e,"Content-NewFolder")),t.parentElement.nextElementSibling.innerHTML="",t.oninput=function(){yi(e,t)},t.onkeyup=function(t){13===wi(t)&&bi(e)},function(e){var t=sf.base.select("#newname",e.dialogObj.element);t.focus(),t.value="";var i=t.value.length;t.setSelectionRange(0,i)}(e),ni(e,e.dialogObj,"Create Folder")}function pi(e){var t=sf.base.select("#rename",e.dialogObj.element);t.parentElement.classList.contains("e-control-wrapper")||ci(t,it(e,"Content-Rename")),t.parentElement.nextElementSibling.innerHTML="",t.oninput=function(){yi(e,t)},t.onkeyup=function(t){13===wi(t)&&mi(e)},function(e,t){t.focus();var i="";if(e.isFile&&!e.showFileExtension){var s=e.currentItemText.lastIndexOf(".");i=-1===s?e.currentItemText:e.currentItemText.substring(0,s)}else i=e.currentItemText;t.value=i,e.isFile&&e.showFileExtension&&-1!==t.value.indexOf(".")?t.setSelectionRange(0,t.value.lastIndexOf(".")):t.setSelectionRange(0,t.value.length)}(e,t),ni(e,e.dialogObj,"Rename")}function ci(e,t){sf.inputs.Input.createInput({element:e,properties:{placeholder:t}})}function fi(e,t,i){gi(sf.base.selectAll(".e-btn",e.dialogObj.element)),si(e,e.dialogObj,i,t)}function ui(e,t,i){gi(sf.base.selectAll(".e-btn",e.extDialogObj.element)),si(e,e.extDialogObj,i,t)}function gi(e){for(var t=function(t){e[t].onkeydown=function(e){13===e.keyCode&&e.preventDefault()},e[t].onkeyup=function(i){13===i.keyCode&&e[t].click()}},i=0;i<e.length;i++)t(i)}function bi(e){var t=sf.base.select("#newname",e.dialogObj.element);vi(e,t),""===t.parentElement.nextElementSibling.innerHTML&&At(e,t.value)}function mi(e){var t=sf.base.select("#rename",e.dialogObj.element);if(vi(e,t),""===t.parentElement.nextElementSibling.innerHTML){var i=t.value,s=e.currentItemText.lastIndexOf(".");if(e.isFile&&!e.showFileExtension)i+=-1===s?"":e.currentItemText.substr(s);if(e.renameText=i,e.currentItemText!==i){var a="navigationpane"===e.activeModule?ht(e.path):e.path;if(e.renamedId=sf.base.getValue("id",e.itemData[0]),e.isFile){var n=-1===s?"":e.currentItemText.substr(s),r=i.lastIndexOf("."),o=-1===r?"":i.substr(r);e.showFileExtension&&n!==o?ii(e,"Extension",null,a):_t(e,a,i)}else _t(e,a,i)}else e.dialogObj.hide()}}function yi(e,t){/[/\\|*?"<>:]/.test(t.value)?Oi(e,t):""===t.value?t.parentElement.nextElementSibling.innerHTML=it(e,"Validation-Empty"):t.parentElement.nextElementSibling.innerHTML=""}function vi(e,t){yi(e,t);var i=t.value.length-1;""===t.value||t.value.lastIndexOf(".")!==i&&t.value.lastIndexOf(" ")!==i||!e.showFileExtension&&-1!==e.currentItemText.lastIndexOf(".")||Oi(e,t)}function Oi(e,t){var i=it(e,"Validation-Invalid").replace("{0}",'"'+t.value+'"');t.parentElement.nextElementSibling.innerHTML=i}function wi(e){return e.keyCode?e.keyCode:e.which?e.which:e.charCode}function Ii(e,t,i){var s=sf.base.createElement("div",{className:"e-image-wrap"}),a=sf.base.createElement("img",{className:"e-image",attrs:{src:i,alt:t}});s.appendChild(a),sf.base.isNullOrUndefined(e.viewerObj)?(e.viewerObj=new sf.popups.Dialog({header:t,content:s,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!0,isModal:!0,width:"350px",height:"350px",target:e.popupTarget?e.popupTarget:"#"+e.element.id,cssClass:st(e,e.isMobile?U:"e-fe-popup"),locale:e.locale,enableResize:!0,allowDragging:!0,enableHtmlSanitizer:e.enableHtmlSanitizer,position:{X:"center",Y:"center"},enableRtl:e.enableRtl,open:Di.bind(this,e),close:function(){ri(e,e.viewerObj,"Image Preview")},beforeOpen:function(t){si(e,e.viewerObj,t,"Image Preview")},beforeClose:function(t){ai(e,e.viewerObj,t,"Image Preview")},resizing:Si.bind(this,e),resizeStop:Si.bind(this,e)}),e.viewerObj.isStringTemplate=!0,e.viewerObj.appendTo("#"+e.element.id+"_img_dialog")):(e.viewerObj.refresh(),e.viewerObj.header=t,e.viewerObj.content=s,e.viewerObj.enableRtl=e.enableRtl,e.viewerObj.dataBind(),e.viewerObj.show())}function Di(e){setTimeout((function(){e.viewerObj&&e.viewerObj.element.focus()})),Si(e),ni(e,e.viewerObj,"Image Preview")}function Si(e){var t=sf.base.select(".e-dlg-content",e.viewerObj.element),i=sf.base.select(".e-image-wrap",e.viewerObj.element),s=window.getComputedStyle(t,null),a=s?2*parseFloat(s.paddingRight):36,n=s?2*parseFloat(s.paddingBottom):20;i.style.width=t.offsetWidth-a+"px",i.style.height=t.offsetHeight-n+"px"}var Ci,ji=function(){function e(e){this.isInteraction=!0,this.uploadOperation=!1,this.count=0,this.isRendered=!0,this.tapCount=0,this.isPasteOperation=!1,this.isInteracted=!0,this.parent=e,this.element=sf.base.select("#"+this.parent.element.id+"_largeicons",this.parent.element),sf.base.addClass([this.element],"e-large-icons"),this.addEventListener(),this.keyConfigs={end:"end",home:"home",tab:"tab",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",ctrlUp:"ctrl+uparrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftLeft:"shift+leftarrow",shiftRight:"shift+rightarrow",shiftUp:"shift+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csLeft:"ctrl+shift+leftarrow",csRight:"ctrl+shift+rightarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",ctrlA:"ctrl+a",enter:"enter",altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",f2:"f2",shiftdel:"shift+delete",back:"backspace",ctrlD:"ctrl+d"}}return e.prototype.render=function(e){if(this.parent.visitedItem=null,this.startItem=null,sf.popups.showSpinner(this.parent.element),"LargeIcons"===this.parent.view){this.resetMultiSelect(),this.element.setAttribute("tabindex","0"),this.listObj&&(this.unWireEvents(),this.removeEventListener()),this.parent.notify("hide-layout",{});var t=sf.base.select("#"+this.parent.element.id+"_largeicons",this.parent.element),i=sf.base.select("ul",t);if(i&&sf.base.remove(i),this.listObj={ariaAttributes:{itemRole:"option",listRole:"listbox",itemText:"",groupItemRole:"group",wrapperRole:""},showIcon:!0,fields:{text:"name",iconCss:"_fm_icon",imageUrl:"_fm_imageUrl",htmlAttributes:"_fm_htmlAttr"},sortOrder:this.parent.sortOrder,itemCreated:this.onItemCreated.bind(this),enableHtmlSanitizer:this.parent.enableHtmlSanitizer},this.items=[],this.items=this.renderList(e),this.items=$e(this.parent,this.items),this.listElements=sf.lists.ListBase.createListFromJson(sf.base.createElement,this.items,this.listObj),this.itemList=Array.prototype.slice.call(sf.base.selectAll("."+B,this.listElements)),this.element.appendChild(this.listElements),this.preventImgDrag(),this.createDragObj(),t.classList.remove(re),0===this.itemList.length){var s=this.element.querySelector(".e-list-parent");this.element.removeChild(s),et(this.parent,this.element,e)}else 0!==this.itemList.length&&this.element.querySelector("."+X)&&this.element.removeChild(this.element.querySelector("."+X));!0===this.isPasteOperation&&(this.selectItems(this.parent.pasteNodes),this.isPasteOperation=!1),!0===this.uploadOperation&&(this.selectItems(this.parent.uploadItem),this.parent.setProperties({selectedItems:[]},!0),this.count++,this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[]));var a=this.element.querySelectorAll("."+W);0!==a.length&&(this.parent.activeModule="largeiconsview");for(var n=0;n<a.length;n++)a[n].setAttribute("aria-selected","true");this.adjustHeight(),this.element.style.maxHeight="100%",this.getItemCount(),this.addEventListener(),this.wireEvents(),this.isRendered=!0,sf.popups.hideSpinner(this.parent.element),this.parent.selectedItems.length&&this.checkItem()}},e.prototype.preventImgDrag=function(){for(var e=0;e<this.itemList.length;)this.itemList[e].querySelector("img")&&(this.itemList[e].ondragstart=function(){return!1}),e++},e.prototype.createDragObj=function(){var e=this;!this.parent.isMobile&&this.listObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new sf.base.Draggable(this.listElements,{enableTailMode:!0,enableAutoScroll:!0,dragTarget:".e-large-icon",helper:this.dragHelper.bind(this),cursorAt:this.parent.dragCursorPosition,dragArea:this.parent.element,dragStop:ut.bind(this,this.parent),drag:vt.bind(this,this.parent),clone:!0,dragStart:function(t){gt(e.parent,t,e.dragObj)}})):this.dragObj&&!this.parent.allowDragAndDrop&&this.dragObj.destroy())},e.prototype.dragHelper=function(e){var t=e.sender.target,i=sf.base.closest(t,".e-list-item");if(!i)return null;i&&!i.classList.contains("e-active")&&this.setFocus(i);var s=this.element.querySelectorAll("."+W);this.parent.activeElements=[],this.parent.dragData=[];for(var a=0;a<s.length;a++)this.parent.dragData.push(this.getItemObject(s[a])),this.parent.activeElements.push(s[a]);return Ue(this.parent,i),this.parent.dragPath=this.parent.path,ft(this.parent),this.parent.virtualDragElement},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var t=sf.base.closest(e.target,".e-list-item"),i=sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent);if(t){var s=this.getItemObject(t);this.parent.dropPath=s.isFile?this.parent.path:Je(this.parent,s,this.parent.path),this.parent.dropData=s.isFile?i:s}else this.parent.dropPath=this.parent.path,this.parent.dropData=i}},e.prototype.getModuleName=function(){return"largeiconsview"},e.prototype.adjustHeight=function(){var e=sf.base.select("#"+this.parent.element.id+"_content",this.parent.element),t=sf.base.select("#"+this.parent.element.id+"_breadcrumbbar",this.parent.element);this.element.style.height=e.offsetHeight-t.offsetHeight+"px"},e.prototype.onItemCreated=function(e){if(e.item.removeAttribute("aria-level"),!this.parent.showFileExtension&&sf.base.getValue("isFile",e.curData)){var t=e.item.querySelector(".e-list-text"),i=sf.base.getValue("name",e.curData),s=sf.base.getValue("type",e.curData);t.innerHTML=i.substr(0,i.length-s.length)}this.renderCheckbox(e);var a={element:e.item,fileDetails:e.curData,module:"LargeIconsView"};this.parent.trigger("fileLoad",a)},e.prototype.renderCheckbox=function(e){var t;this.parent.allowMultiSelection&&((t=sf.buttons.createCheckBox(sf.base.createElement,!1,{checked:!1,cssClass:"e-small"})).setAttribute("role","checkbox"),t.setAttribute("aria-checked","false"),e.item.firstElementChild.insertBefore(t,e.item.firstElementChild.childNodes[0]))},e.prototype.onLayoutChange=function(e){if("LargeIcons"===this.parent.view){if(this.destroy(),this.render(e),"layout-change"===sf.base.getValue("name",e)&&"move"===this.parent.fileAction&&this.parent.isCut&&this.parent.selectedNodes&&0!==this.parent.selectedNodes.length)for(var t=this.getIndexes(this.parent.selectedNodes),i=0;i<t.length;)Fe(this.itemList[t[i]]),i++;0!==this.element.querySelectorAll("."+W).length&&this.element.focus(),this.checkItem(),this.parent.isLayoutChange=!1}else this.element.setAttribute("tabindex","-1")},e.prototype.checkItem=function(){var e=this.element.querySelectorAll("."+W);if(e)for(var t=0;t<e.length;)this.checkState(e[t],!0),t++},e.prototype.renderList=function(e){for(var t=0,i=JSON.parse(JSON.stringify(e.files));t<i.length;){var s=Ye(i[t]),a=sf.base.getValue("name",i[t]),n=Ot(this.parent,i[t]),r=this.parent.selectedItems&&-1!==this.parent.selectedItems.indexOf(n)?"e-large-icon e-active":"e-large-icon";if(Nt(i[t])||(r+=" "+xt(i[t])),"e-fe-image"===s&&this.parent.showThumbnail&&Pt(i[t])){var o=Qe(this.parent,i[t]);sf.base.setValue("_fm_imageUrl",o,i[t]),sf.base.setValue("_fm_imageAttr",{alt:a},i[t])}else sf.base.setValue("_fm_icon",s,i[t]);sf.base.setValue("_fm_htmlAttr",{class:r,title:a},i[t]),t++}return i},e.prototype.onFinalizeEnd=function(e){this.render(e)},e.prototype.onCreateEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.clearSelect(),this.selectItems([sf.base.getValue(this.parent.hasId?"id":"name",this.parent.createdItem)]),this.parent.createdItem=null,this.parent.largeiconsviewModule.element.focus())},e.prototype.onSelectedData=function(){"largeiconsview"===this.parent.activeModule&&this.updateSelectedData()},e.prototype.onDeleteInit=function(){"largeiconsview"===this.parent.activeModule&&Vt(this.parent,this.parent.selectedItems,this.parent.path,"delete")},e.prototype.onDeleteEnd=function(e){"LargeIcons"===this.parent.view&&(this.onLayoutChange(e),this.parent.setProperties({selectedItems:[]},!0),this.clearSelect())},e.prototype.onRefreshEnd=function(e){"LargeIcons"===this.parent.view&&this.onLayoutChange(e)},e.prototype.onRenameInit=function(){"largeiconsview"===this.parent.activeModule&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onPathChanged=function(e){this.parent.isCut=!1,""===this.parent.breadcrumbbarModule.searchObj.element.value&&(this.parent.searchedItems=[]),"LargeIcons"===this.parent.view&&(_e(this.parent),this.parent.setProperties({selectedItems:[]},!0),this.onLayoutChange(e),this.parent.renamedItem&&(this.clearSelect(),this.addSelection(this.parent.renamedItem),this.parent.renamedItem=null))},e.prototype.onOpenInit=function(e){"largeiconsview"===this.parent.activeModule&&this.doOpenAction(e.target)},e.prototype.onHideLayout=function(){"LargeIcons"!==this.parent.view&&this.element&&this.element.classList.add(re)},e.prototype.onSelectAllInit=function(){if("LargeIcons"===this.parent.view){this.startItem=this.getFirstItem();var e=this.getLastItem();this.doSelection(e,{ctrlKey:!0,shiftKey:!0}),this.isInteraction=!0,this.isInteracted=!0}},e.prototype.onClearAllInit=function(){"LargeIcons"===this.parent.view&&(this.clearSelection(),this.isInteraction=!0,this.isInteracted=!0)},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(){this.isRendered=!0},e.prototype.onSearch=function(e){"LargeIcons"===this.parent.view&&(this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(ve,{}),this.parent.searchedItems=e.files,this.onLayoutChange(e))},e.prototype.onLayoutRefresh=function(){"LargeIcons"===this.parent.view&&this.adjustHeight()},e.prototype.onUpdateSelectionData=function(){"LargeIcons"===this.parent.view&&this.updateSelectedData()},e.prototype.onPathColumn=function(){"LargeIcons"!==this.parent.view||sf.base.isNullOrUndefined(this.listObj)||""!==this.parent.breadcrumbbarModule.searchObj.element.value||this.parent.isFiltered||"filterPath"!==this.parent.sortBy||(this.parent.sortBy="name",this.parent.notify(we,{}))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("path-column",this.onPathColumn),this.parent.off(de,this.onFinalizeEnd),this.parent.off(pe,this.onCreateEnd),this.parent.off("selected-data",this.onSelectedData),this.parent.off("delete-init",this.onDeleteInit),this.parent.off(ce,this.onDeleteEnd),this.parent.off(fe,this.onRefreshEnd),this.parent.off(ge,this.onPathChanged),this.parent.off(Oe,this.onLayoutChange),this.parent.off("search",this.onSearch),this.parent.off(me,this.onOpenInit),this.parent.off(ye,this.onPathChanged),this.parent.off(le,this.onPropertyChanged),this.parent.off(Re,this.onMethodCall),this.parent.off("actionFailure",this.onActionFailure),this.parent.off(Se,this.onRenameInit),this.parent.off(Ce,this.onPathChanged),this.parent.off("hide-layout",this.onHideLayout),this.parent.off("select-all-init",this.onSelectAllInit),this.parent.off("clear-all-init",this.onClearAllInit),this.parent.off(De,this.onMenuItemData),this.parent.off("before-request",this.onBeforeRequest),this.parent.off("after-request",this.onAfterRequest),this.parent.off("splitter-resize",this.splitterResizeHandler),this.parent.off(ue,this.resizeHandler),this.parent.off(xe,this.onpasteInit),this.parent.off(Pe,this.onpasteEnd),this.parent.off(je,this.oncutCopyInit),this.parent.off(Ne,this.onDropInit),this.parent.off(Ie,this.onDetailsInit),this.parent.off("layout-refresh",this.onLayoutRefresh),this.parent.off(Ee,this.onDropPath),this.parent.off("update-selection-data",this.onUpdateSelectionData),this.parent.off("filter-end",this.onPathChanged))},e.prototype.addEventListener=function(){this.parent.on("path-column",this.onPathColumn,this),this.parent.on(de,this.onFinalizeEnd,this),this.parent.on(pe,this.onCreateEnd,this),this.parent.on(fe,this.onRefreshEnd,this),this.parent.on("selected-data",this.onSelectedData,this),this.parent.on(ge,this.onPathChanged,this),this.parent.on("delete-init",this.onDeleteInit,this),this.parent.on(xe,this.onpasteInit,this),this.parent.on(ce,this.onDeleteEnd,this),this.parent.on(Oe,this.onLayoutChange,this),this.parent.on("search",this.onSearch,this),this.parent.on(me,this.onOpenInit,this),this.parent.on(Se,this.onRenameInit,this),this.parent.on(Ce,this.onPathChanged,this),this.parent.on(ye,this.onPathChanged,this),this.parent.on(le,this.onPropertyChanged,this),this.parent.on(Re,this.onMethodCall,this),this.parent.on("actionFailure",this.onActionFailure,this),this.parent.on("hide-layout",this.onHideLayout,this),this.parent.on("select-all-init",this.onSelectAllInit,this),this.parent.on("clear-all-init",this.onClearAllInit,this),this.parent.on(De,this.onMenuItemData,this),this.parent.on("before-request",this.onBeforeRequest,this),this.parent.on("after-request",this.onAfterRequest,this),this.parent.on(Ne,this.onDropInit,this),this.parent.on(Ie,this.onDetailsInit,this),this.parent.on("splitter-resize",this.splitterResizeHandler,this),this.parent.on(ue,this.resizeHandler,this),this.parent.on(Pe,this.onpasteEnd,this),this.parent.on(je,this.oncutCopyInit,this),this.parent.on("layout-refresh",this.onLayoutRefresh,this),this.parent.on(Ee,this.onDropPath,this),this.parent.on("update-selection-data",this.onUpdateSelectionData,this),this.parent.on("filter-end",this.onPathChanged,this)},e.prototype.onActionFailure=function(){this.isInteraction=!0,this.isInteracted=!0},e.prototype.onMenuItemData=function(e){if(this.parent.activeModule===this.getModuleName()){var t=sf.base.closest(e.target,"li");this.parent.itemData=[this.getItemObject(t)]}},e.prototype.onDetailsInit=function(){this.parent.activeModule===this.getModuleName()&&(0!==this.parent.selectedItems.length?this.updateSelectedData():this.parent.itemData=[sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent)])},e.prototype.onpasteInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=""===this.parent.folderPath?[We(this.parent)]:[this.getItemObject(sf.base.select(".e-active",this.element))])},e.prototype.oncutCopyInit=function(){if(this.parent.activeModule===this.getModuleName()){var e=this.element.querySelectorAll("."+W);this.parent.activeRecords=[],this.parent.activeElements=[];for(var t=0;t<e.length;t++)this.parent.activeElements.push(e[t]),this.parent.activeRecords.push(this.getItemObject(e[t]))}},e.prototype.onpasteEnd=function(e){"LargeIcons"===this.parent.view&&(this.isPasteOperation=!0,this.parent.path!==this.parent.destinationPath&&this.parent.path!==dt(this.parent,e)||this.onPathChanged(e))},e.prototype.onDropPath=function(e){"LargeIcons"===this.parent.view&&(this.isPasteOperation=!0,this.onPathChanged(e))},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"allowDragAndDrop":this.createDragObj();break;case"height":this.adjustHeight();break;case"selectedItems":this.isInteraction=!1,this.isInteracted=!1;var s=sf.base.isNullOrUndefined(this.parent.selectedItems)?[]:this.parent.selectedItems.slice(0);s=this.parent.allowMultiSelection?s:s.slice(s.length-1),this.parent.setProperties({selectedItems:[]},!0),this.onClearAllInit(),s.length&&this.selectItems(s),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0),this.isInteraction=!0,this.isInteracted=!0;break;case"showThumbnail":ze(this.parent);break;case"showFileExtension":case"showHiddenItems":Tt(this.parent,ge,this.parent.path);break;case"allowMultiSelection":if("LargeIcons"!==this.parent.view)break;ze(this.parent);break;case"view":Be(this.parent,"LargeIcons")}}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.listObj&&this.unWireEvents())},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keydownActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),sf.base.EventHandler.add(this.element,"mouseover",this.onMouseOver,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),sf.base.EventHandler.remove(this.element,"mouseover",this.onMouseOver),this.keyboardModule.destroy(),this.keyboardDownModule.destroy()},e.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");_e(this.parent,"hover"),null!==t&&t.classList.add(K)},e.prototype.wireClickEvent=function(e){if(e){var t=this;this.clickObj=new sf.base.Touch(this.element,{tap:function(e){e.originalEvent.preventDefault(),t.parent.isDevice?(t.tapCount=e.tapCount,t.tapEvent=e,setTimeout((function(){t.tapCount>0&&t.doTapAction(t.tapEvent),t.tapCount=0}),350)):2===e.tapCount&&3!==e.originalEvent.which?t.dblClickHandler(e):t.clickHandler(e)},tapHold:function(e){t.parent.isDevice&&(t.multiSelect=!!t.parent.allowMultiSelection,t.parent.allowMultiSelection&&sf.base.addClass([t.parent.element],"e-fe-m-select"),t.clickHandler(e))}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.doTapAction=function(e){var t=e.originalEvent.target,i=sf.base.closest(t,"."+B);this.multiSelect||t.classList.contains("e-list-parent")||sf.base.isNullOrUndefined(i)?this.clickHandler(e):(this.parent.isFile=!1,this.updateType(i),this.parent.isFile?2===e.tapCount?(this.clickHandler(e),this.dblClickHandler(e)):this.clickHandler(e):this.dblClickHandler(e))},e.prototype.clickHandler=function(e){var t=e.originalEvent.target;_e(this.parent,"hover"),this.doSelection(t,e.originalEvent),this.parent.activeModule="largeiconsview"},e.prototype.doSelection=function(e,t){var i=sf.base.closest(e,"."+B),s=e.classList;this.parent.isFile=!1;var a="select";if(3!==t.which||sf.base.isNullOrUndefined(i)||!i.classList.contains(W)){if(sf.base.isNullOrUndefined(i))this.clearSelection();else if(this.parent.allowMultiSelection&&i.classList.contains(W)&&(t.ctrlKey||e.classList.contains(Y))&&(a="unselect"),!0!==this.triggerSelection(a,i).cancel){if(this.parent.allowMultiSelection&&(this.multiSelect||!t||t.ctrlKey)||s.contains("e-frame")||(this.updateType(i),this.clearSelect()),this.parent.allowMultiSelection&&t.shiftKey){t&&t.ctrlKey||this.clearSelect(),this.startItem||(this.startItem=i);var n=this.itemList.indexOf(this.startItem),r=this.itemList.indexOf(i);if(n>r)for(var o=n;o>=r;o--)this.addActive(this.itemList[o]);else for(o=n;o<=r;o++)this.addActive(this.itemList[o]);this.addFocus(this.itemList[r])}else this.startItem=i,this.parent.allowMultiSelection&&i.classList.contains(W)?this.removeActive(i):this.addActive(i),this.addFocus(i);0===this.parent.selectedItems.length&&this.resetMultiSelect(),this.parent.notify(ve,{}),this.triggerSelect(a,i)}sf.base.isNullOrUndefined(i)||this.updateType(i)}else this.updateType(i)},e.prototype.dblClickHandler=function(e){this.parent.activeModule="largeiconsview";var t=e.originalEvent.target;this.doOpenAction(t)},e.prototype.clearSelection=function(){this.clearSelect(),this.resetMultiSelect(),this.parent.notify(ve,{})},e.prototype.resetMultiSelect=function(){this.multiSelect=!1,sf.base.removeClass([this.parent.element],"e-fe-m-select")},e.prototype.doOpenAction=function(e){var t=this;if(!sf.base.isNullOrUndefined(e)){var i=sf.base.closest(e,"."+B);if(this.parent.isFile=!1,!sf.base.isNullOrUndefined(i)){this.updateType(i);var s=this.getItemObject(i);if(!Pt(s))return void jt(this.parent,s,"read");var a={cancel:!1,fileDetails:s,module:"LargeIconsView"};this.parent.trigger("fileOpen",a,(function(e){if(!e.cancel){var i=sf.base.getValue("name",s);if(t.parent.isFile){if("e-fe-image"===Ye(s)){var a=Qe(t.parent,s);Ii(t.parent,i,a)}}else{if(""!==t.parent.breadcrumbbarModule.searchObj.element.value||t.parent.isFiltered)rt(t.parent,s);else{var n=sf.base.getValue("id",s),r=t.parent.path+(sf.base.isNullOrUndefined(n)?i:n)+"/";t.parent.setProperties({path:r},!0),t.parent.pathNames.push(i),t.parent.pathId.push(sf.base.getValue("_fm_id",s)),t.parent.itemData=[s],qe(t.parent)}t.parent.isFiltered=!1,t.parent.setProperties({selectedItems:[]},!0)}}}))}}},e.prototype.updateType=function(e){var t=sf.base.select("."+ee,e);this.parent.isFile=!!sf.base.isNullOrUndefined(t)},e.prototype.keydownActionHandler=function(e){if(this.isRendered)switch(e.action){case"end":case"home":case"moveDown":case"moveLeft":case"moveRight":case"moveUp":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"ctrlRight":case"shiftRight":case"csRight":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"ctrlD":e.preventDefault()}},e.prototype.keyActionHandler=function(e){if(this.isRendered){var t=this.getFocusedItem(),i=this.getFirstItem(),s=this.getLastItem();switch(e.action){case"end":this.navigateItem(s);break;case"home":this.navigateItem(i);break;case"tab":sf.base.isNullOrUndefined(t)?sf.base.isNullOrUndefined(i)||this.addFocus(i):this.addFocus(t);break;case"moveDown":this.navigateDown(t,!0);break;case"moveLeft":this.navigateRight(t,!1);break;case"moveRight":this.navigateRight(t,!0);break;case"moveUp":this.navigateDown(t,!1);break;case"ctrlEnd":case"shiftEnd":case"csEnd":this.csEndKey(s,e);break;case"ctrlHome":case"shiftHome":case"csHome":this.csHomeKey(i,e);break;case"ctrlDown":case"shiftDown":case"csDown":this.csDownKey(t,e);break;case"ctrlLeft":case"shiftLeft":case"csLeft":this.csLeftKey(t,e);break;case"ctrlRight":case"shiftRight":case"csRight":this.csRightKey(t,e);break;case"ctrlUp":case"shiftUp":case"csUp":this.csUpKey(t,e);break;case"space":this.spaceKey(t);break;case"ctrlSpace":case"shiftSpace":case"csSpace":sf.base.isNullOrUndefined(t)||this.doSelection(t,e);break;case"ctrlA":this.ctrlAKey(i,s);break;case"enter":this.doOpenAction(this.parent.visitedItem?this.parent.visitedItem:this.getVisitedItem());break;case"altEnter":this.parent.notify(Ie,{}),Bt(this.parent,this.parent.selectedItems,this.parent.path,"details");break;case"esc":Te(this.parent);break;case"del":case"shiftdel":this.performDelete();break;case"ctrlC":Ke(this.parent);break;case"ctrlV":this.parent.folderPath="",ot(this.parent);break;case"ctrlX":Ge(this.parent);break;case"f2":this.performRename();break;case"ctrlD":this.doDownload()}}},e.prototype.doDownload=function(){this.updateSelectedData(),Dt(this.parent)},e.prototype.performDelete=function(){if(this.parent.selectedItems&&this.parent.selectedItems.length>0){this.updateSelectedData();for(var e=this.parent.itemData,t=0;t<e.length;t++)if(!Nt(e[t]))return void jt(this.parent,e[t],"write");ti(this.parent,"Delete")}},e.prototype.performRename=function(){1===this.parent.selectedItems.length&&(this.updateRenameData(),It(this.parent))},e.prototype.updateRenameData=function(){var e=sf.base.select("."+B+"."+W,this.element),t=this.getItemObject(e);wt(this.parent,t)},e.prototype.getVisitedItem=function(){var e=this.parent.selectedItems[this.parent.selectedItems.length-1],t=this.getIndexes([e],this.parent.hasId);return this.itemList[t[0]]},e.prototype.getFocusedItem=function(){return sf.base.select("."+B+"."+G,this.element)},e.prototype.getActiveItem=function(){return sf.base.select("."+B+"."+W,this.element)},e.prototype.getFirstItem=function(){return this.itemList[0]},e.prototype.getLastItem=function(){return this.itemList[this.itemList.length-1]},e.prototype.navigateItem=function(e){this.setFocus(e)},e.prototype.navigateDown=function(e,t){var i=this.getNextItem(e,t,this.perRow);this.setFocus(i)},e.prototype.navigateRight=function(e,t){var i=this.getNextItem(e,t);this.setFocus(i)},e.prototype.getNextItem=function(e,t,i){if(sf.base.isNullOrUndefined(e))return this.getFocusedItem()||this.getActiveItem()||this.getFirstItem();var s,a=this.itemList.indexOf(e);do{if(a=t?i?a+i:a+1:i?a-i:a-1,s=this.itemList[a],sf.base.isNullOrUndefined(s))return e}while(!sf.base.isVisible(s));return s},e.prototype.setFocus=function(e){sf.base.isNullOrUndefined(e)||!0!==this.triggerSelection("select",e).cancel&&(this.startItem=e,this.clearSelect(),this.addActive(e),this.addFocus(e),this.parent.notify(ve,{}),this.triggerSelect("select",e))},e.prototype.spaceKey=function(e){sf.base.isNullOrUndefined(e)||e.classList.contains(W)||!0!==this.triggerSelection("select",e).cancel&&(this.addActive(e),this.parent.notify(ve,{}),this.triggerSelect("select",e))},e.prototype.ctrlAKey=function(e,t){if(this.parent.allowMultiSelection&&!sf.base.isNullOrUndefined(e)){this.startItem=e;this.doSelection(t,{ctrlKey:!0,shiftKey:!0})}},e.prototype.csEndKey=function(e,t){this.parent.allowMultiSelection?sf.base.isNullOrUndefined(e)||("ctrlEnd"===t.action?this.addFocus(e):this.doSelection(e,t)):this.navigateItem(e)},e.prototype.csHomeKey=function(e,t){this.parent.allowMultiSelection?sf.base.isNullOrUndefined(e)||("ctrlHome"===t.action?this.addFocus(e):this.doSelection(e,t)):this.navigateItem(e)},e.prototype.csDownKey=function(e,t){if(this.parent.allowMultiSelection){var i=this.getNextItem(e,!0,this.perRow);sf.base.isNullOrUndefined(i)||("ctrlDown"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateDown(e,!0)},e.prototype.csLeftKey=function(e,t){if(this.parent.allowMultiSelection){var i=this.getNextItem(e,!1);sf.base.isNullOrUndefined(i)||("ctrlLeft"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateRight(e,!1)},e.prototype.csRightKey=function(e,t){if(this.parent.allowMultiSelection){var i=this.getNextItem(e,!0);sf.base.isNullOrUndefined(i)||("ctrlRight"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateRight(e,!0)},e.prototype.csUpKey=function(e,t){if(this.parent.allowMultiSelection){var i=this.getNextItem(e,!1,this.perRow);sf.base.isNullOrUndefined(i)||("ctrlUp"===t.action?this.addFocus(i):this.doSelection(i,t))}else this.navigateDown(e,!1)},e.prototype.addActive=function(e){sf.base.isNullOrUndefined(e)||(e.classList.contains(W)||(this.parent.selectedItems.push(this.getDataName(e)),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0),sf.base.addClass([e],[W]),e.setAttribute("aria-selected","true"),this.checkState(e,!0)),this.parent.visitedItem=e)},e.prototype.removeActive=function(e){if(!sf.base.isNullOrUndefined(e)){sf.base.removeClass([e],[W]),this.parent.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),this.checkState(e,!1);var t=this.parent.selectedItems.indexOf(this.getDataName(e));t>-1&&(this.parent.selectedItems.splice(t,1),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0)),this.parent.visitedItem=null}},e.prototype.getDataName=function(e){var t=this.getItemObject(e);return Ot(this.parent,t)},e.prototype.addFocus=function(e){this.element.setAttribute("tabindex","-1");var t=this.getFocusedItem();t&&(t.removeAttribute("tabindex"),sf.base.removeClass([t],[G])),sf.base.addClass([e],[G]),e.setAttribute("tabindex","0"),e.focus()},e.prototype.checkState=function(e,t){if(this.parent.allowMultiSelection){var i=sf.base.select(".e-frame",e);sf.base.isNullOrUndefined(i)||(t?i.classList.contains(Y)||(sf.base.addClass([i],Y),sf.base.closest(i,"."+Q).setAttribute("aria-checked","true")):i.classList.contains(Y)&&(sf.base.removeClass([i],Y),sf.base.closest(i,"."+Q).setAttribute("aria-checked","false")))}},e.prototype.clearSelect=function(){var e=Array.prototype.slice.call(sf.base.selectAll("."+W,this.listElements));if(0!==e.length){if(!0!==this.triggerSelection("unselect",e[0]).cancel)for(var t=0,i=e.length;t<i;t++)this.removeActive(e[t]);this.triggerSelect("unselect",e[0])}},e.prototype.resizeHandler=function(){this.getItemCount(),sf.base.isNullOrUndefined(this.listObj)||this.adjustHeight()},e.prototype.splitterResizeHandler=function(){this.getItemCount()},e.prototype.getItemCount=function(){var e=1;if(this.itemList)for(var t=0,i=this.itemList.length-1;t<i&&this.itemList[t].getBoundingClientRect().top===this.itemList[t+1].getBoundingClientRect().top;t++)e++;this.perRow=e},e.prototype.triggerSelection=function(e,t){var i={action:e,fileDetails:this.getItemObject(t),isInteracted:this.isInteraction,cancel:!1,target:t};return this.parent.trigger("fileSelection",i),this.isInteraction=!0,i},e.prototype.triggerSelect=function(e,t){var i=this.getItemObject(t);this.parent.visitedData=i;var s={action:e,fileDetails:i,isInteracted:this.isInteracted};this.parent.trigger("fileSelect",s),this.isInteracted=!0},e.prototype.selectItems=function(e){for(var t=this.getIndexes(e,this.parent.hasId),i=0,s=t.length;i<s;i++){this.doSelection(this.itemList[t[i]],{ctrlKey:!0,shiftKey:!1})}},e.prototype.getIndexes=function(e,t){for(var i=[],s=t?"id":"name",a=0,n=this.items.length;a<n;a++)-1!==e.indexOf(sf.base.getValue(s,this.items[a]))&&i.push(a);return i},e.prototype.getItemObject=function(e){var t=this.itemList.indexOf(e);return this.items[t]},e.prototype.addSelection=function(e){var t=[];if(this.parent.hasId)t=new sf.data.DataManager(this.items).executeLocal((new sf.data.Query).where("id","equal",this.parent.renamedId,!1));else{var i=new sf.data.DataManager(this.items).executeLocal((new sf.data.Query).where("name","equal",sf.base.getValue("name",e),!1));i.length>0&&(t=new sf.data.DataManager(i).executeLocal((new sf.data.Query).where("filterPath","equal",this.parent.filterPath,!1)))}if(t.length>0){var s=this.items.indexOf(t[0]);this.doSelection(this.itemList[s],{ctrlKey:!0,shiftKey:!1})}},e.prototype.updateSelectedData=function(){for(var e=[],t=sf.base.selectAll("."+B+"."+W,this.element),i=0;i<t.length;i++)e[i]=this.getItemObject(t[i]);this.parent.itemData=e},e.prototype.onMethodCall=function(e){if("LargeIcons"===this.parent.view)switch(sf.base.getValue("action",e)){case"deleteFiles":this.deleteFiles(sf.base.getValue("ids",e));break;case"downloadFiles":this.downloadFiles(sf.base.getValue("ids",e));break;case"openFile":this.openFile(sf.base.getValue("id",e));break;case"renameFile":this.isInteraction=!1,this.isInteracted=!1,this.renameFile(sf.base.getValue("id",e),sf.base.getValue("newName",e));break;case"createFolder":this.isInteraction=!1,this.isInteracted=!1;break;case"clearSelection":this.isInteraction=!1,this.isInteracted=!1,this.onClearAllInit();break;case"selectAll":this.isInteraction=!1,this.isInteracted=!1,this.onSelectAllInit()}},e.prototype.getItemsIndex=function(e){var t=[],i=!(""===this.parent.breadcrumbbarModule.searchObj.element.value&&!this.parent.isFiltered),s=this.parent.hasId?"id":"name";if(this.parent.hasId||!i)for(var a=0,n=this.items.length;a<n;a++)-1!==e.indexOf(sf.base.getValue(s,this.items[a]))&&t.push(a);else for(a=0,n=this.items.length;a<n;a++){var r=sf.base.getValue("filterPath",this.items[a])+sf.base.getValue("name",this.items[a]);-1!==e.indexOf(r)&&t.push(a)}return t},e.prototype.deleteFiles=function(e){if(this.parent.activeModule="largeiconsview",sf.base.isNullOrUndefined(e))this.performDelete();else{var t=this.getItemsIndex(e);if(0!==t.length){for(var i=[],s=[],a=0;a<t.length;a++)i[a]=this.items[t[a]],s[a]=Ot(this.parent,i[a]);St(this.parent,i,s)}}},e.prototype.downloadFiles=function(e){if(sf.base.isNullOrUndefined(e))this.doDownload();else{var t=this.getItemsIndex(e);if(0!==t.length){for(var i=[],s=[],a=0;a<t.length;a++)i[a]=this.items[t[a]],s[a]=Ot(this.parent,i[a]);Ct(this.parent,i,s)}}},e.prototype.openFile=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getItemsIndex([e]);t.length>0&&this.doOpenAction(this.itemList[t[0]])}},e.prototype.renameFile=function(e,t){if(this.parent.activeModule="largeiconsview",sf.base.isNullOrUndefined(e))this.performRename();else{var i=this.getItemsIndex([e]);i.length>0&&(wt(this.parent,this.items[i[0]]),sf.base.isNullOrUndefined(t)?It(this.parent):Nt(this.parent.itemData[0])?_t(this.parent,this.parent.path,t):jt(this.parent,this.parent.itemData[0],"write"))}},e}(),xi=function(){function e(e){this.addressPath="",this.addressBarLink="",this.searchTimer=null,this.searchWrapWidth=null,this.parent=e,this.keyConfigs={enter:"enter"},this.render()}return e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"searchSettings":var s=e.newProp.searchSettings;sf.base.isNullOrUndefined(s.allowSearchOnTyping)||this.searchEventBind(s.allowSearchOnTyping),!this.parent.breadcrumbbarModule.searchObj.value||""===this.parent.breadcrumbbarModule.searchObj.value||!sf.base.isNullOrUndefined(s.allowSearchOnTyping)&&sf.base.isNullOrUndefined(s.filterType)&&sf.base.isNullOrUndefined(s.ignoreCase)||Ve(this.parent,this.parent.breadcrumbbarModule.searchObj.value,!1)}}},e.prototype.render=function(){this.addEventListener()},e.prototype.onPathChange=function(){var e=this.parent.pathNames,t=this.parent.path.split("/"),i=this.parent.createElement("ul",{className:"e-addressbar-ul"}),s=null,a=e.length;if(e.length>0){for(var n="",r=0;r<a;r++){var o=null;s=this.parent.createElement("li",{className:"e-address-list-item"});for(var l=0;l<=r;l++)n=n+t[l]+"/";if(s.setAttribute("data-utext",n),0!==r){var h=sf.base.createElement("span",{className:"e-icons"});s.appendChild(h)}a-r!=1?(o=sf.base.createElement("a",{className:"e-list-text"}),s.setAttribute("tabindex","0")):o=sf.base.createElement("span",{className:"e-list-text"}),n="",o.innerText=e[r],s.appendChild(o),i.appendChild(s)}var d=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul");sf.base.isNullOrUndefined(d)||(sf.base.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),sf.base.remove(d));var p=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");p?this.parent.breadCrumbBarNavigation.appendChild(i):this.parent.breadCrumbBarNavigation.insertBefore(i,p),this.updateBreadCrumbBar(i)}},e.prototype.updateBreadCrumbBar=function(e){for(var t=e.querySelectorAll("li"),i=this.parent.breadCrumbBarNavigation.querySelector(".e-addressbar-ul"),s=window.getComputedStyle(i,null),a=parseFloat(s.getPropertyValue("padding-right")),n=parseFloat(s.getPropertyValue("padding-left")),r=i.offsetWidth-a-n,o=this.parent.createElement("ul",{className:"e-addressbar-ul"}),l=0,h=[],d=0;d<t.length;d++){var p=t[d].clientWidth;h.push(p),l+=p}sf.base.isNullOrUndefined(i)||sf.base.remove(i);var c=this.parent.createElement("div");c.setAttribute("class","e-search-wrap");var f=this.parent.element.id+"_search",u=sf.base.createElement("input",{id:f,attrs:{autocomplete:"off","aria-label":it(this.parent,"Search")}});c.appendChild(u);var g=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap .e-input");if(sf.base.isNullOrUndefined(g)){this.parent.breadCrumbBarNavigation.appendChild(c);var b=sf.base.createElement("span",{className:"e-icons e-fe-search"});sf.base.EventHandler.add(b,"click",this.onShowInput,this),u.parentElement.insertBefore(b,u),this.searchObj=new sf.inputs.TextBox({value:"",showClearButton:!0,placeholder:it(this.parent,"Search"),focus:this.onFocus.bind(this),blur:this.onBlur.bind(this)}),this.searchObj.appendTo("#"+this.parent.element.id+"_search"),this.searchEventBind(this.parent.searchSettings.allowSearchOnTyping);var m=this.searchObj.element.nextElementSibling;sf.base.EventHandler.add(m,"mousedown",this.searchChangeHandler.bind(this),this),sf.base.EventHandler.add(this.searchObj.element,"keyup",this.onKeyUp.bind(this),this)}var y=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");if(l>(r-=this.searchWrapWidth?this.searchWrapWidth:y.offsetWidth)){for(d=t.length;d--;){var v=r-h[d];if(!(v>40)){for(var O=[],w=0;w<=d;w++){var I=t[w];O.push({text:I.innerText,utext:I.getAttribute("data-utext")})}var D=this.parent.createElement("li",{className:"e-breadcrumb-menu"}),S=this.parent.createElement("button",{className:"e-breadcrumb-submenu"});D.appendChild(S),o.insertBefore(D,o.querySelector("li")),this.subMenuObj=new sf.splitbuttons.DropDownButton({items:O,cssClass:"e-caret-hide e-submenu",iconCss:"e-icons e-fe-breadcrumb",iconPosition:"Top",enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeItemRender:this.addSubMenuAttributes.bind(this),select:this.subMenuSelectOperations.bind(this)}),this.subMenuObj.isStringTemplate=!0,this.subMenuObj.appendTo(S);break}o.insertBefore(t[d],o.querySelector("li")),r=v}this.parent.breadCrumbBarNavigation.insertBefore(o,y)}else this.parent.breadCrumbBarNavigation.insertBefore(e,y)},e.prototype.onFocus=function(){sf.base.closest(this.searchObj.element,".e-search-wrap").classList.add("e-focus")},e.prototype.onKeyUp=function(){this.parent.notify("path-column",{args:this.parent})},e.prototype.onBlur=function(){sf.base.closest(this.searchObj.element,".e-search-wrap").classList.remove("e-focus")},e.prototype.subMenuSelectOperations=function(e){var t={target:e.element};this.addressPathClickHandler(t)},e.prototype.addSubMenuAttributes=function(e){e.element.setAttribute("data-utext",sf.base.getValue("utext",e.item));var t=this.parent.createElement("a",{className:"e-list-text"});e.element.appendChild(t)},e.prototype.searchEventBind=function(e){e?(this.searchObj.input=this.searchChangeHandler.bind(this),this.searchObj.change=null):(this.searchObj.change=this.searchChangeHandler.bind(this),this.searchObj.input=null)},e.prototype.searchChangeHandler=function(e){var t=this;sf.base.isNullOrUndefined(e.value)||(this.parent.isFiltered=!1,this.parent.searchSettings.allowSearchOnTyping?(window.clearTimeout(this.searchTimer),this.searchTimer=window.setTimeout((function(){Ve(t.parent,e.value,!1)}),300)):Ve(this.parent,e.value,!1))},e.prototype.addressPathClickHandler=function(e){var t=e.target;if("LI"===t.nodeName||"A"===t.nodeName){var i="LI"===t.nodeName?t.children[0]:t;if(!sf.base.isNullOrUndefined(i)){this.parent.isFiltered=!1;var s=this.updatePath(i);this.parent.itemData=[sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent)],this.triggerFileOpen(this.parent.itemData[0]),Tt(this.parent,ge,s);var a=this.parent.pathId[this.parent.pathId.length-1];this.parent.notify("update-tree-selection",{module:"treeview",selectedNode:a})}}},e.prototype.triggerFileOpen=function(e){var t={cancel:!1,fileDetails:e,module:"BreadCrumbBar"};delete t.cancel,this.parent.trigger("fileOpen",t)},e.prototype.onShowInput=function(){if(this.parent.isMobile)if(this.parent.element.classList.contains(V))sf.base.removeClass([this.parent.element],V),this.searchWrapWidth=null;else{var e=this.parent.breadCrumbBarNavigation.querySelector(".e-search-wrap");this.searchWrapWidth=e.offsetWidth,sf.base.addClass([this.parent.element],V),this.searchObj.element.focus()}},e.prototype.updatePath=function(e){var t=sf.base.closest(e,"li").getAttribute("data-utext");this.addressBarLink=t;var i=this.addressBarLink.split("/"),s=this.parent.pathId,a=this.parent.pathNames;this.parent.pathId=[],this.parent.pathNames=[];for(var n="",r=0,o=i.length-1;r<o;r++)this.parent.pathId.push(s[r]),this.parent.pathNames.push(a[r]),n+=i[r]+"/";return this.parent.setProperties({path:n},!0),n},e.prototype.onUpdatePath=function(){this.onPathChange(),this.removeSearchValue()},e.prototype.onCreateEnd=function(){this.onPathChange()},e.prototype.onRenameEnd=function(){this.onPathChange()},e.prototype.onDeleteEnd=function(){this.onUpdatePath()},e.prototype.removeSearchValue=function(){this.parent.isFiltered=!1,!this.searchObj||""===this.searchObj.value&&""===this.searchObj.element.value||(this.searchObj.value="",this.searchObj.element.value="",this.searchObj.dataBind())},e.prototype.onResize=function(){this.onPathChange()},e.prototype.onPasteEnd=function(e){this.onPathChange()},e.prototype.addEventListener=function(){this.keyboardModule=new sf.base.KeyboardEvents(this.parent.breadCrumbBarNavigation,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.parent.on(le,this.onPropertyChanged,this),sf.base.EventHandler.add(this.parent.breadCrumbBarNavigation,"click",this.addressPathClickHandler,this),this.parent.on(be,this.destroy,this),this.parent.on(ge,this.onUpdatePath,this),this.parent.on(de,this.onUpdatePath,this),this.parent.on(fe,this.onUpdatePath,this),this.parent.on(ye,this.onUpdatePath,this),this.parent.on(pe,this.onCreateEnd,this),this.parent.on(Ce,this.onRenameEnd,this),this.parent.on(ce,this.onDeleteEnd,this),this.parent.on("splitter-resize",this.onResize,this),this.parent.on(Pe,this.onPasteEnd,this),this.parent.on(ue,this.onResize,this),this.parent.on("search-change",this.onSearchTextChange,this),this.parent.on(Ne,this.onDropInit,this),this.parent.on("layout-refresh",this.onResize,this),this.parent.on(Ee,this.onPathChange,this)},e.prototype.keyActionHandler=function(e){switch(e.action){case"enter":this.addressPathClickHandler(e)}},e.prototype.removeEventListener=function(){this.keyboardModule.destroy(),this.parent.off(ge,this.onUpdatePath),this.parent.off(de,this.onUpdatePath),this.parent.off(fe,this.onUpdatePath),this.parent.off(ye,this.onUpdatePath),this.parent.off(Pe,this.onPasteEnd),this.parent.off(pe,this.onCreateEnd),this.parent.off(Ce,this.onRenameEnd),this.parent.off(ce,this.onDeleteEnd),this.parent.off("splitter-resize",this.onResize),this.parent.off(ue,this.onResize),this.parent.off("search-change",this.onSearchTextChange),this.parent.off(Ne,this.onDropInit),this.parent.off("layout-refresh",this.onResize),this.parent.off(Ee,this.onPathChange)},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var t=e.target.closest("li");this.parent.dropPath=this.updatePath(t.children[0]),this.parent.dropData=sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent),this.triggerFileOpen(this.parent.dropData);var i=this.parent.pathId[this.parent.pathId.length-1];this.parent.notify("update-tree-selection",{module:"treeview",selectedNode:i})}},e.prototype.getModuleName=function(){return"breadcrumbbar"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),sf.base.isNullOrUndefined(this.subMenuObj)||this.subMenuObj.destroy(),sf.base.isNullOrUndefined(this.searchObj)||this.searchObj.destroy())},e.prototype.onSearchTextChange=function(e){this.searchObj.element.placeholder=it(this.parent,"Search")+" "+e.cwd.name},e}(),Pi=function(){function e(e){this.currentItems=[],this.currentElement=null,this.disabledItems=[],this.parent=e,this.render()}return e.prototype.render=function(){this.keyConfigs={downarrow:"downarrow",uparrow:"uparrown"},this.contextMenu=new sf.navigations.ContextMenu({enableRtl:this.parent.enableRtl,locale:this.parent.locale,target:"#"+this.parent.element.id,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,beforeItemRender:this.onBeforeItemRender.bind(this),select:this.onSelect.bind(this),beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this),cssClass:st(this.parent,"e-fe-popup")}),this.contextMenu.isStringTemplate=!0,this.contextMenu.appendTo("#"+this.parent.element.id+"_contextmenu"),this.addEventListener()},e.prototype.onBeforeItemRender=function(e){if(e.item.id===this.getMenuId("largeiconsview")){var t=sf.base.createElement("span");(i=e.element).insertBefore(t,"LargeIcons"===this.parent.view?i.childNodes[1]:i.childNodes[0]),t.setAttribute("class",ae+" "+te)}if(e.item.id===this.getMenuId("detailsview")){var i;t=sf.base.createElement("span");(i=e.element).insertBefore(t,"Details"===this.parent.view?i.childNodes[1]:i.childNodes[0]),t.setAttribute("class",se+" "+te)}},e.prototype.onBeforeClose=function(){this.menuTarget=null},e.prototype.onBeforeOpen=function(e){var t=this;this.disabledItems=[];var i,s,a=!1,n=!1,r=e.event.target;this.menuTarget=r,this.currentElement=e.element,r.classList.contains("e-spinner-pane")&&(r=this.parent.navigationpaneModule.activeNode.getElementsByClassName("e-fullrow")[0],this.menuTarget=r),r.classList.contains("e-fullrow")&&(this.parent.selectedItems.length=0),this.targetElement="Details"===this.parent.view?sf.base.closest(r,"tr"):r;var o=this.getTargetView(r);if(this.updateActiveModule(),r.classList.contains("e-treeview")||sf.base.closest(r,"th")||sf.base.closest(r,"#"+this.parent.element.id+"_breadcrumbbar")||sf.base.closest(r,"#"+this.parent.element.id+"_toolbar"))e.cancel=!0;else if("LargeIcons"!==this.parent.view&&this.targetElement&&this.targetElement.classList.contains("e-emptyrow"))this.setLayoutItem(r);else if(sf.base.closest(r,"."+X))this.setLayoutItem(r);else if(!r.classList.contains("e-menu-item")&&!r.classList.contains(te)&&!r.classList.contains("e-caret")){if("LargeIcons"!==this.parent.view||sf.base.isNullOrUndefined(sf.base.closest(r,"li"))||sf.base.closest(r,"#"+this.parent.element.id+"_tree"))sf.base.isNullOrUndefined(sf.base.closest(r,"tr"))?sf.base.closest(r,"#"+this.parent.element.id+"_tree")&&(i=sf.base.closest(r,"li").getAttribute("data-uid"),n=!0):(i=this.targetElement.getAttribute("data-uid"),s=this.parent.detailsviewModule.gridObj.getRowObjectFromUID(i).data,sf.base.isNullOrUndefined(this.targetElement.getAttribute("aria-selected"))&&this.parent.detailsviewModule.gridObj.selectRows([parseInt(this.targetElement.getAttribute("aria-rowindex"),10)]),a=!0);else{sf.base.closest(r,"li").classList.contains("e-active")||this.parent.largeiconsviewModule.doSelection(r,{ctrlKey:!0,shiftKey:!0}),s=this.parent.visitedData,a=!0}a?!0===sf.base.getValue("isFile",s)?this.setFileItem():this.setFolderItem(!1):n?(this.setFolderItem(!0),i===this.parent.pathId[0]&&this.disabledItems.push("Delete","Rename","Cut","Copy")):"TreeView"===o||"GridView"===o||"LargeIcon"===o?this.setLayoutItem(r):e.cancel=!0}var l=sf.base.select("#"+this.getMenuId("Paste"),this.contextMenu.element);if(e.cancel||this.parent.enablePaste||!l||l.classList.contains("e-disabled")||this.disabledItems.push("Paste"),e.cancel)this.menuTarget=this.currentElement=null;else{this.contextMenu.dataBind();var h=!1;(r.classList.contains("e-menu-item")||r.classList.contains(te)||r.classList.contains("e-caret"))&&(h=!0),this.menuItemData=h?this.menuItemData:this.getMenuItemData();var d={fileDetails:[this.menuItemData],element:e.element,target:r,items:h?e.items:this.contextMenu.items,menuModule:this.contextMenu,cancel:!1,menuType:this.menuType,isSubMenu:h};sf.base.isBlazor()&&(this.enableItems(this.disabledItems,!1,!0),delete d.menuModule),this.currentItems=d.items,this.parent.trigger("menuOpen",d,(function(i){h||(t.contextMenu.dataBind(),t.contextMenu.items=i.items,t.contextMenu.dataBind()),t.enableItems(t.disabledItems,!1,!0),e.cancel=i.cancel,i.cancel&&(t.menuTarget=t.currentElement=null)}))}},e.prototype.updateActiveModule=function(){this.parent.activeModule=sf.base.closest(this.menuTarget,"#"+this.parent.element.id+"_tree")?"navigationpane":sf.base.closest(this.menuTarget,"#"+this.parent.element.id+"_grid")?"detailsview":sf.base.closest(this.menuTarget,"#"+this.parent.element.id+"_largeicons")?"largeiconsview":this.parent.activeModule},e.prototype.getTargetView=function(e){return e.classList.contains("e-treeview")?"TreeView":e.classList.contains("e-content")?"GridView":e.classList.contains("e-list-parent")||e.classList.contains("e-large-icons")?"LargeIcon":""},e.prototype.getItemIndex=function(e){for(var t=this.getMenuId(e),i=0;i<this.currentItems.length;i++)if(this.currentItems[i].id===t||this.currentItems[i].id===e)return i;return-1},e.prototype.disableItem=function(e){0!==e.length&&(this.disabledItems=this.disabledItems.concat(e))},e.prototype.enableItems=function(e,t,i){for(var s=0;s<e.length;s++)1===this.checkValidItem(e[s])?this.contextMenu.enableItems([this.getMenuId(e[s])],t,i):2===this.checkValidItem(e[s])&&this.contextMenu.enableItems([e[s]],t,i)},e.prototype.setFolderItem=function(e){this.menuType="folder",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.folder.map((function(e){return e.trim()}))),this.contextMenu.dataBind(),e?this.disabledItems.push("Open"):1!==this.parent.selectedItems.length&&this.disabledItems.push("Rename","Paste")},e.prototype.setFileItem=function(){this.menuType="file",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.file.map((function(e){return e.trim()}))),this.contextMenu.dataBind(),1!==this.parent.selectedItems.length&&this.disabledItems.push("Rename")},e.prototype.setLayoutItem=function(e){this.menuType="layout",this.contextMenu.items=this.getItemData(this.parent.contextMenuSettings.layout.map((function(e){return e.trim()}))),this.contextMenu.dataBind(),(!this.parent.allowMultiSelection||"LargeIcons"===this.parent.view&&0!==sf.base.closest(e,"#"+this.parent.element.id+"_largeicons").getElementsByClassName(X).length||"Details"===this.parent.view&&0!==sf.base.closest(e,"#"+this.parent.element.id+"_grid").getElementsByClassName(X).length)&&this.disabledItems.push("SelectAll"),0===this.parent.selectedNodes.length&&this.disabledItems.push("Paste"),this.contextMenu.dataBind()},e.prototype.checkValidItem=function(e){return sf.base.isNullOrUndefined(sf.base.select("#"+this.getMenuId(e),this.currentElement))?sf.base.isNullOrUndefined(sf.base.select("#"+e,this.currentElement))?-1:2:1},e.prototype.getMenuItemData=function(){if("layout"===this.menuType)return We(this.parent);var e={target:this.menuTarget};return this.parent.notify(De,e),this.parent.itemData[0]},e.prototype.onSelect=function(e){var t=this;if(!sf.base.isNullOrUndefined(e.item)&&e.item.id){var i,s=e.item.id.substr((this.parent.element.id+"_cm_").length);"refresh"===s||"newfolder"===s||"upload"===s?(i=[We(this.parent)],this.parent.itemData=i):(this.parent.notify("selected-data",{}),i=this.parent.itemData);var a={cancel:!1,element:e.element,fileDetails:i,item:e.item};this.parent.trigger("menuClick",a,(function(a){if(!a.cancel)switch(s){case"cut":Ge(t.parent);break;case"copy":Ke(t.parent);break;case"paste":"folder"===t.menuType&&("largeiconsview"===t.parent.activeModule||"detailsview"===t.parent.activeModule)?t.parent.folderPath=Je(t.parent,t.menuItemData,t.parent.path):t.parent.folderPath="",ot(t.parent);break;case"delete":for(var n=0;n<i.length;n++)if(!Nt(i[n]))return void jt(t.parent,i[n],"write");ti(t.parent,"Delete");break;case"download":for(var r=0;r<i.length;r++)if(!Mt(i[r]))return void jt(t.parent,i[r],"download");"navigationpane"===t.parent.activeModule?t.parent.notify("download-init",{}):t.parent.selectedItems.length>0&&ei(t.parent,t.parent.path,t.parent.selectedItems);break;case"rename":Nt(i[0])?(t.parent.notify(Se,{}),ti(t.parent,"Rename")):jt(t.parent,i[0],"write");break;case"selectall":t.parent.notify("select-all-init",{});break;case"refresh":ze(t.parent);break;case"open":t.parent.visitedItem&&t.parent.notify(me,{target:t.parent.visitedItem});break;case"details":t.parent.notify(Ie,{});var o=t.parent.selectedItems;"navigationpane"===t.parent.activeModule&&(o=[]),Bt(t.parent,o,t.parent.path,"details");break;case"newfolder":kt(t.parent);break;case"upload":Lt(t.parent);break;case"name":case"size":case"date":case"ascending":case"descending":case"none":at(t.parent,e);break;case"largeiconsview":Be(t.parent,"LargeIcons");break;case"detailsview":Be(t.parent,"Details")}}))}},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"cssClass":this.contextMenu.cssClass=st(this.parent,"e-fe-popup")}}},e.prototype.addEventListener=function(){this.parent.on(be,this.destroy,this),this.parent.on(le,this.onPropertyChanged,this),this.keyboardModule=new sf.base.KeyboardEvents(this.contextMenu.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.removeEventListener=function(){this.parent.off(be,this.destroy),this.parent.off(le,this.onPropertyChanged),this.keyboardModule.destroy()},e.prototype.keyActionHandler=function(e){switch(e.action){case"uparrow":case"downarrow":e.preventDefault()}},e.prototype.getModuleName=function(){return"contextmenu"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.contextMenu.destroy())},e.prototype.getItemData=function(e){for(var t=[],i=0;i<e.length;i++){var s=void 0,a=this.getMenuId(e[i]),n=it(this.parent,e[i]);switch(e[i]){case"|":s={separator:!0};break;case"Open":s={id:a,text:n,iconCss:"e-icons e-fe-open"};break;case"Upload":s={id:a,text:n,iconCss:"e-icons e-fe-upload"};break;case"Cut":s={id:a,text:n,iconCss:ie};break;case"Copy":s={id:a,text:n,iconCss:"e-icons e-fe-copy"};break;case"Paste":s={id:a,text:n,iconCss:"e-icons e-fe-paste"};break;case"Delete":s={id:a,text:n,iconCss:"e-icons e-fe-delete"};break;case"Rename":s={id:a,text:n,iconCss:"e-icons e-fe-rename"};break;case"NewFolder":s={id:a,text:n,iconCss:"e-icons e-fe-newfolder"};break;case"Details":s={id:a,text:n,iconCss:"e-icons e-fe-details"};break;case"SortBy":s={id:a,text:n,iconCss:"e-icons e-fe-sort",items:[{id:this.getMenuId("Name"),text:it(this.parent,"Name"),iconCss:"name"===this.parent.sortBy?z:null},{id:this.getMenuId("Size"),text:it(this.parent,"Size"),iconCss:"size"===this.parent.sortBy?z:null},{id:this.getMenuId("Date"),text:it(this.parent,"DateModified"),iconCss:"_fm_modified"===this.parent.sortBy?z:null},{separator:!0},{id:this.getMenuId("Ascending"),text:it(this.parent,"Ascending"),iconCss:"Ascending"===this.parent.sortOrder?H:null},{id:this.getMenuId("Descending"),text:it(this.parent,"Descending"),iconCss:"Descending"===this.parent.sortOrder?H:null},{id:this.getMenuId("None"),text:it(this.parent,"None"),iconCss:"None"===this.parent.sortOrder?H:null}]};break;case"View":s={id:a,text:n,iconCss:"Details"===this.parent.view?se:ae,items:[{id:this.getMenuId("largeiconsview"),text:it(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?null:H},{id:this.getMenuId("detailsview"),text:it(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?H:null}]};break;case"Refresh":s={id:a,text:n,iconCss:"e-icons e-fe-refresh"};break;case"SelectAll":s={id:a,text:n,iconCss:"e-icons e-fe-select"};break;case"Download":s={id:a,text:n,iconCss:"e-icons e-fe-download"};break;default:s={id:a,text:n}}t.push(s)}return t},e.prototype.getMenuId=function(e){return this.parent.element.id+"_cm_"+e.toLowerCase()},e}(),Ni={NewFolder:"New folder",Upload:"Upload",Delete:"Delete",Rename:"Rename",Download:"Download",Cut:"Cut",Copy:"Copy",Paste:"Paste",SortBy:"Sort by",Refresh:"Refresh","Item-Selection":"item selected","Items-Selection":"items selected",View:"View",Details:"Details",SelectAll:"Select all",Open:"Open","Tooltip-NewFolder":"New folder","Tooltip-Upload":"Upload","Tooltip-Delete":"Delete","Tooltip-Rename":"Rename","Tooltip-Download":"Download","Tooltip-Cut":"Cut","Tooltip-Copy":"Copy","Tooltip-Paste":"Paste","Tooltip-SortBy":"Sort by","Tooltip-Refresh":"Refresh","Tooltip-Selection":"Clear selection","Tooltip-View":"View","Tooltip-Details":"Details","Tooltip-SelectAll":"Select all",Name:"Name",Size:"Size",DateModified:"Modified",DateCreated:"Date created",Path:"Path",Modified:"Modified",Created:"Created",Location:"Location",Type:"Type",Permission:"Permission",Ascending:"Ascending",Descending:"Descending",None:"None","View-LargeIcons":"Large icons","View-Details":"Details",Search:"Search","Button-Ok":"OK","Button-Cancel":"Cancel","Button-Yes":"Yes","Button-No":"No","Button-Create":"Create","Button-Save":"Save","Header-NewFolder":"Folder","Content-NewFolder":"Enter your folder name","Header-Rename":"Rename","Content-Rename":"Enter your new name","Header-Rename-Confirmation":"Rename Confirmation","Content-Rename-Confirmation":"If you change a file name extension, the file might become unstable. Are you sure you want to change it?","Header-Delete":"Delete File","Content-Delete":"Are you sure you want to delete this file?","Header-Folder-Delete":"Delete Folder","Content-Folder-Delete":"Are you sure you want to delete this folder?","Header-Multiple-Delete":"Delete Multiple Items","Content-Multiple-Delete":"Are you sure you want to delete these {0} items?","Header-Duplicate":"File/Folder exists","Content-Duplicate":"{0} already exists. Do you want to rename and paste?","Header-Upload":"Upload Files",Error:"Error","Validation-Empty":"The file or folder name cannot be empty.","Validation-Invalid":'The file or folder name {0} contains invalid characters. Please use a different name. Valid file or folder names cannot end with a dot or space, and cannot contain any of the following characters: \\/:*?"<>|',"Validation-NewFolder-Exists":"A file or folder with the name {0} already exists.","Validation-Rename-Exists":"Cannot rename {0} to {1}: destination already exists.","Folder-Empty":"This folder is empty","File-Upload":"Drag files here to upload","Search-Empty":"No results found","Search-Key":"Try with different keywords","Filter-Empty":"No results found","Filter-Key":"Try with different filter","Sub-Folder-Error":"The destination folder is the subfolder of the source folder.","Access-Denied":"Access Denied","Access-Details":'You don"t have permission to access this folder.',"Header-Retry":"File Already Exists","Content-Retry":"A file with this name already exists in this folder. What would you like to do?","Button-Keep-Both":"Keep both","Button-Replace":"Replace","Button-Skip":"Skip","ApplyAll-Label":"Do this for all current items",KB:"KB","Access-Message":"{0} is not accessible. You need permission to perform the {1} action.","Network-Error":"NetworkError: Failed to send on XMLHTTPRequest: Failed to load","Server-Error":"ServerError: Invalid response from"},Ei=(Ci=function(e,t){return(Ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Ci(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ri=function(e,t,s,a){var n,r=arguments.length,o=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,a);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o},Mi=function(e){function t(t,s){var a=e.call(this,t,s)||this;return a.filterData=null,a.selectedNodes=[],a.duplicateItems=[],a.duplicateRecords=[],a.previousPath=[],a.nextPath=[],a.isLayoutChange=!1,a.layoutSelectedItems=[],a.renamedId=null,a.uploadItem=[],a.deleteRecords=[],a.isFile=!1,a.sortBy="name",a.isCut=!1,a.isSearchCut=!1,a.isSearchDrag=!1,a.isPasteError=!1,a.folderPath="",a.isSameAction=!1,a.isFiltered=!1,a.enablePaste=!1,a.persistData=!1,a.retryArgs=[],a.isOpened=!1,a.isRetryOpened=!1,a.isPathDrag=!1,a.searchedItems=[],a.retryFiles=[],a.isApplySame=!1,a.dragData=[],a.dragNodes=[],a.dragPath="",a.dropPath="",a.isDragDrop=!1,a.treeExpandTimer=null,a.dragCursorPosition={left:44,top:18},a.isDropEnd=!1,a.droppedObjects=[],a.uploadingCount=0,a.uploadedCount=0,i.Inject(xi,ji,Pi),a}var i;return Ei(t,e),i=t,t.prototype.getModuleName=function(){return"filemanager"},t.prototype.preRender=function(){this.ensurePath(),this.feParent=[],this.feFiles=[],sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width),height:sf.base.formatUnit(this.height)}),this.isDevice=sf.base.Browser.isDevice,this.isMobile=this.checkMobile(),this.isMobile&&this.setProperties({navigationPaneSettings:{visible:!1}},!0);var e=sf.base.closest(this.element,".e-bigger");this.isBigger=!!e,this.activeModule="LargeIcons"===this.view?"largeiconsview":"detailsview",sf.popups.createSpinner({target:this.element},sf.base.createElement),this.addWrapper(),this.keyConfigs={altN:"alt+n",f5:"f5",ctrlShift1:"ctrl+shift+1",ctrlShift2:"ctrl+shift+2",ctrlU:"ctrl+u"},this.localeObj=new sf.base.L10n(this.getModuleName(),Ni,this.locale)},t.prototype.getPersistData=function(){return this.addOnPersist(["view","path","selectedItems"])},t.prototype.requiredModules=function(){var e=[];return e.push({member:"breadcrumbbar",args:[this]}),e.push({member:"largeiconsview",args:[this]}),this.toolbarSettings.visible&&e.push({member:"toolbar",args:[this]}),this.navigationPaneSettings.visible&&e.push({member:"navigationpane",args:[this]}),this.view&&e.push({member:"detailsview",args:[this]}),this.contextMenuSettings.visible&&!this.isDevice&&e.push({member:"contextmenu",args:[this]}),e},t.prototype.render=function(){this.initialize();var e=sf.base.isNullOrUndefined(this.selectedItems)?[]:this.allowMultiSelection?this.selectedItems:this.selectedItems.slice(this.selectedItems.length-1);(this.setProperties({selectedItems:e},!0),this.fileView=this.view,this.setRtl(this.enableRtl),this.addEventListeners(),Tt(this,this.path!==this.originalPath?he:de,this.path),this.adjustHeight(),sf.base.isNullOrUndefined(this.navigationpaneModule))&&(this.splitterObj.collapse(this.enableRtl?1:0),sf.base.select(".e-split-bar",this.element).classList.add(re));this.wireEvents(),this.renderComplete()},t.prototype.ensurePath=function(){var e=this.path;sf.base.isNullOrUndefined(e)&&(e="/"),e.lastIndexOf("/")!==e.length-1&&(e+="/"),this.originalPath=e;var t=e.split("/");this.setProperties({path:t[0]+"/"},!0),this.pathNames=[],this.pathId=["fe_tree"],this.itemData=[]},t.prototype.initialize=function(){this.isMobile&&sf.base.addClass([this.element],"e-fe-mobile"),this.allowMultiSelection&&sf.base.addClass([this.element],"e-fe-cb-select"),this.addCssClass(null,this.cssClass),this.renderFileUpload()},t.prototype.addWrapper=function(){var e=this.createElement("div",{id:this.element.id+"_toolbar"});this.element.appendChild(e);var t=this.createElement("div",{id:this.element.id+"_layout",className:"e-layout"});this.element.appendChild(t);var i=this.createElement("div",{id:this.element.id+"_navigation",className:"e-navigation"}),s=this.createElement("div",{id:this.element.id+"_tree"});i.appendChild(s);var a=this.createElement("div",{id:this.element.id+"_content",className:"e-layout-content"});this.breadCrumbBarNavigation=this.createElement("div",{id:this.element.id+"_breadcrumbbar",className:"e-address"}),a.appendChild(this.breadCrumbBarNavigation);var n=this.createElement("div",{id:this.element.id+"_grid"});a.appendChild(n);var r=this.createElement("div",{id:this.element.id+"_largeicons",className:"e-large-icons",attrs:{role:"group"}});a.appendChild(r);var o,l=this.createElement("span",{className:"e-fe-overlay"});a.appendChild(l),this.enableRtl?(t.appendChild(a),t.appendChild(i),o=[{size:"75%",min:"270px"},{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()}]):(t.appendChild(i),t.appendChild(a),o=[{size:"25%",min:this.navigationPaneSettings.minWidth.toString(),max:this.navigationPaneSettings.maxWidth.toString()},{size:"75%",min:"270px"}]),this.splitterObj=new sf.layouts.Splitter({paneSettings:o,width:"100%",enableRtl:!1,enableHtmlSanitizer:this.enableHtmlSanitizer,resizing:this.splitterResize.bind(this)}),this.splitterObj.isStringTemplate=!0,this.splitterObj.appendTo(t);var h=this.createElement("div",{id:this.element.id+"_dialog"});this.element.appendChild(h);var d=this.createElement("ul",{id:this.element.id+"_contextmenu"});this.element.appendChild(d);var p=this.createElement("div",{id:this.element.id+"_img_dialog"});this.element.appendChild(p);var c=this.createElement("div",{id:this.element.id+"_extn_dialog"});this.element.appendChild(c);var f=this.createElement("div",{id:this.element.id+"_upload_dialog"});this.element.appendChild(f)},t.prototype.adjustHeight=function(){var e=sf.base.select("#"+this.element.id+"_toolbar",this.element),t=e?e.offsetHeight:0;this.splitterObj&&(this.splitterObj.height=(this.element.clientHeight-t).toString(),this.splitterObj.dataBind())},t.prototype.splitterResize=function(){this.notify("splitter-resize",{})},t.prototype.splitterAdjust=function(){var e=sf.base.select(".e-split-bar",this.element);this.navigationPaneSettings.visible?(this.splitterObj.expand(this.enableRtl?1:0),e.classList.remove(re)):(this.splitterObj.collapse(this.enableRtl?1:0),e.classList.add(re))},t.prototype.addCssClass=function(e,t){sf.base.isNullOrUndefined(e)||""===e||sf.base.removeClass([this.element],e.split(" ")),sf.base.isNullOrUndefined(t)||""===t||sf.base.addClass([this.element],t.split(" "))},t.prototype.showSpinner=function(){sf.popups.showSpinner(this.element)},t.prototype.hideSpinner=function(){sf.popups.hideSpinner(this.element)},t.prototype.onContextMenu=function(e){e.preventDefault()},t.prototype.checkMobile=function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(sf.base.Browser.userAgent.toLowerCase())&&/mobile/i.test(sf.base.Browser.userAgent.toLowerCase())},t.prototype.renderFileUpload=function(){var e=this.element.id+"_upload",t=this.createElement("input",{id:e,attrs:{name:"uploadFiles",type:"file"}});this.element.appendChild(t),this.uploadDialogObj=new sf.popups.Dialog({header:it(this,"Header-Upload"),content:t,animationSettings:{effect:"None"},showCloseIcon:!0,closeOnEscape:!0,visible:!1,isModal:!0,width:"350px",target:this.popupTarget?this.popupTarget:"#"+this.element.id,cssClass:st(this,this.isMobile?U:"e-fe-popup"),locale:this.locale,allowDragging:!0,position:{X:"center",Y:"center"},enableRtl:this.enableRtl,enableHtmlSanitizer:this.enableHtmlSanitizer,open:this.onOpen.bind(this),close:this.onClose.bind(this),beforeOpen:this.onBeforeOpen.bind(this),beforeClose:this.onBeforeClose.bind(this)}),this.uploadDialogObj.appendTo("#"+this.element.id+"_upload_dialog"),this.renderUploadBox()},t.prototype.renderUploadBox=function(){var e=this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url;this.uploadObj=new sf.inputs.Uploader({dropArea:sf.base.select("#"+this.element.id+"_content",this.element),asyncSettings:{saveUrl:e,removeUrl:e},locale:this.locale,enableRtl:this.enableRtl,uploading:this.onUploading.bind(this),removing:this.onRemoving.bind(this),clearing:this.onClearing.bind(this),selected:this.onSelected.bind(this),success:this.onUploadSuccess.bind(this),failure:this.onUploadFailure.bind(this),autoUpload:this.uploadSettings.autoUpload,minFileSize:this.uploadSettings.minFileSize,maxFileSize:this.uploadSettings.maxFileSize,allowedExtensions:this.uploadSettings.allowedExtensions,fileListRendering:this.onFileListRender.bind(this)}),this.uploadObj.appendTo("#"+this.element.id+"_upload")},t.prototype.onFileListRender=function(e){this.trigger("uploadListCreate",e)},t.prototype.updateUploader=function(){this.uploadObj.autoUpload=this.uploadSettings.autoUpload,this.uploadObj.minFileSize=this.uploadSettings.minFileSize,this.uploadObj.maxFileSize=this.uploadSettings.maxFileSize,this.uploadObj.allowedExtensions=this.uploadSettings.allowedExtensions,this.uploadObj.dataBind()},t.prototype.onBeforeOpen=function(e){var t={cancel:e.cancel,popupName:"Upload",popupModule:this.uploadDialogObj};sf.base.isBlazor()&&delete t.popupModule,this.trigger("beforePopupOpen",t,(function(t){e.cancel=t.cancel}))},t.prototype.onBeforeClose=function(e){var t={cancel:e.cancel,popupName:"Upload",popupModule:this.uploadDialogObj};sf.base.isBlazor()&&delete t.popupModule,this.trigger("beforePopupClose",t,(function(t){e.cancel=t.cancel}))},t.prototype.onOpen=function(){this.isOpened=!0,this.uploadDialogObj.element.focus();var e={popupModule:this.uploadDialogObj,popupName:"Upload",element:this.uploadDialogObj.element};sf.base.isBlazor()&&delete e.popupModule,this.trigger("popupOpen",e)},t.prototype.onClose=function(){this.isOpened=!1,this.uploadObj.clearAll();var e={popupModule:this.uploadDialogObj,popupName:"Upload",element:this.uploadDialogObj.element};sf.base.isBlazor()&&delete e.popupModule,this.trigger("popupClose",e)},t.prototype.onUploading=function(e){var t="save";if(0!==this.retryArgs.length)for(var i=0;i<this.retryArgs.length;i++)e.fileData.name===this.retryArgs[i].file.name&&(t=this.retryArgs[i].action,this.retryArgs.splice(i,1),i=this.retryArgs.length);var s=JSON.stringify(sf.base.getValue(this.pathId[this.pathId.length-1],this.feParent));e.customFormData=[{path:this.path},{action:t},{data:s}];var a={url:this.ajaxSettings.uploadUrl?this.ajaxSettings.uploadUrl:this.ajaxSettings.url,type:"POST",mode:!0,dataType:null,contentType:null,data:JSON.stringify(e.customFormData),onSuccess:null,onFailure:null,beforeSend:null};this.uploadEventArgs={action:"Upload",ajaxSettings:a,cancel:!1},this.trigger("beforeSend",this.uploadEventArgs,(function(t){e.customFormData=JSON.parse(sf.base.getValue("data",t.ajaxSettings)),e.cancel=t.cancel;var i={cancel:!1,httpRequest:e.currentRequest};"function"==typeof sf.base.getValue("beforeSend",t.ajaxSettings)&&(sf.base.getValue("beforeSend",t.ajaxSettings)(i),sf.base.getValue("cancel",i)&&(e.cancel=sf.base.getValue("cancel",i)))}))},t.prototype.onRemoving=function(){this.onFileUploadSuccess({count:1}),1===this.uploadObj.getFilesData().length&&this.uploadDialogObj.hide()},t.prototype.onClearing=function(){this.isOpened&&this.uploadDialogObj.hide()},t.prototype.onSelected=function(e){if(0!==e.filesData.length){this.uploadingCount=e.filesData.length,this.uploadedCount=0;var t=We(this);if(!Rt(t))return e.cancel=!0,void jt(this,t,"upload");this.uploadDialogObj.show()}},t.prototype.onFileUploadSuccess=function(e){this.uploadedCount=this.uploadedCount+e.count,this.uploadSettings.autoClose&&this.uploadingCount===this.uploadedCount&&this.uploadDialogObj.hide()},t.prototype.onUploadSuccess=function(e){var t={action:"Upload",result:e};this.trigger("success",t),this.itemData=[sf.base.getValue(this.pathId[this.pathId.length-1],this.feParent)],Tt(this,ge,this.path),this.onFileUploadSuccess({count:1}),"function"==typeof sf.base.getValue("onSuccess",this.uploadEventArgs.ajaxSettings)&&sf.base.getValue("onSuccess",this.uploadEventArgs.ajaxSettings)()},t.prototype.onUploadFailure=function(e){var t=sf.base.getValue("response",e),i=sf.base.getValue("statusText",t);""!==i&&sf.base.setValue("statusText",i,e);var s={action:"Upload",error:e};this.trigger("failure",s),400===sf.base.getValue("statusCode",t)&&(this.retryFiles.push(sf.base.getValue("file",e)),this.isRetryOpened||ii(this,"UploadRetry")),"function"==typeof sf.base.getValue("onFailure",this.uploadEventArgs.ajaxSettings)&&sf.base.getValue("onFailure",this.uploadEventArgs.ajaxSettings)()},t.prototype.onInitialEnd=function(){!function(e,t){for(var i=t.split("/"),s=e.originalPath.split("/"),a=sf.base.getValue(e.pathId[0],e.feParent),n=sf.base.isNullOrUndefined(sf.base.getValue("id",a))?"name":"id",r=i.length-1,o=s.length-1;r<o;r++){var l=""===s[r+1]?de:he,h=""===s[r]?"/":e.path+s[r]+"/",d=Ze(e,n,s[r]),p=sf.base.getValue("_fm_id",d);e.setProperties({path:h},!0),e.pathId.push(p),e.itemData=[d],e.pathNames.push(sf.base.getValue("name",d)),Tt(e,l,e.path);break}}(this,this.path)},t.prototype.addEventListeners=function(){this.on("before-request",this.showSpinner,this),this.on("after-request",this.hideSpinner,this),this.on(he,this.onInitialEnd,this),this.on(Ie,this.onDetailsInit,this),this.on("skip-upload",this.onFileUploadSuccess,this),sf.base.EventHandler.add(this.element,"contextmenu",this.onContextMenu,this)},t.prototype.removeEventListeners=function(){this.isDestroyed||(this.off("before-request",this.showSpinner),this.off("after-request",this.hideSpinner),this.off(he,this.onInitialEnd),this.off(Ie,this.onDetailsInit),this.off("skip-upload",this.onFileUploadSuccess),sf.base.EventHandler.remove(this.element,"contextmenu",this.onContextMenu))},t.prototype.onDetailsInit=function(){sf.base.isNullOrUndefined(this.activeModule)&&(this.itemData=[sf.base.getValue(this.pathId[this.pathId.length-1],this.feParent)])},t.prototype.resizeHandler=function(){this.adjustHeight(),this.notify(ue,{})},t.prototype.keyActionHandler=function(e){switch(e.action){case"altN":e.preventDefault(),this.itemData=[We(this)],Et(this.itemData[0])?ti(this,"NewFolder"):jt(this,this.itemData[0],"writeContents");break;case"f5":e.preventDefault(),ze(this);break;case"ctrlShift1":e.preventDefault(),this.fileView="Details",this.setProperties({view:"Details"},!0),sf.popups.showSpinner(this.element),Be(this,"Details");break;case"ctrlShift2":e.preventDefault(),this.fileView="LargeIcons",this.setProperties({view:"LargeIcons"},!0),sf.popups.showSpinner(this.element),Be(this,"LargeIcons");break;case"ctrlU":e.preventDefault(),sf.base.select("#"+this.element.id+"_upload",this.element).click()}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(window,"resize",this.resizeHandler,this),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(window,"resize",this.resizeHandler),this.keyboardModule.destroy()},t.prototype.setPath=function(){this.setProperties({selectedItems:[]},!0),this.ensurePath(),this.notify("clear-path-init",{selectedNode:this.pathId[0]}),Tt(this,this.path!==this.originalPath?he:de,this.path)},t.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){switch(s[i]){case"ajaxSettings":this.ajaxSettingSetModel(e);break;case"allowDragAndDrop":this.allowDragAndDrop=e.allowDragAndDrop,this.notify(le,{module:"common",newProp:e,oldProp:t});break;case"allowMultiSelection":this.allowMultiSelection?sf.base.addClass([this.element],"e-fe-cb-select"):(this.selectedItems.length>1&&this.setProperties({selectedItems:this.selectedItems.slice(this.selectedItems.length-1)},!0),sf.base.removeClass([this.element],"e-fe-cb-select")),this.notify(le,{module:"common",newProp:e,oldProp:t});break;case"cssClass":this.addCssClass(t.cssClass,e.cssClass),this.notify(le,{module:"common",newProp:e,oldProp:t});break;case"detailsViewSettings":this.notify(le,{module:"detailsview",newProp:e,oldProp:t});break;case"enableRtl":this.enableRtl=e.enableRtl,this.refresh();break;case"rootAliasName":this.rootAliasName=e.rootAliasName,this.refresh();break;case"height":var a=sf.base.isNullOrUndefined(e.height)?e.height:sf.base.formatUnit(e.height);sf.base.setStyleAttribute(this.element,{height:a}),this.adjustHeight(),this.notify(le,{module:"common",newProp:e,oldProp:t});break;case"locale":sf.base.isNullOrUndefined(e.enableRtl)||this.setProperties({enableRtl:e.enableRtl},!0),this.localeSetModelOption(e);break;case"navigationPaneSettings":this.splitterAdjust(),this.notify(le,{module:"navigationpane",newProp:e,oldProp:t});break;case"path":this.setPath();break;case"searchSettings":sf.base.isNullOrUndefined(e.searchSettings.allowSearchOnTyping)||this.setProperties({searchSettings:{allowSearchOnTyping:e.searchSettings.allowSearchOnTyping}},!0),sf.base.isNullOrUndefined(e.searchSettings.ignoreCase)&&this.setProperties({searchSettings:{ignoreCase:e.searchSettings.ignoreCase}},!0),sf.base.isNullOrUndefined(e.searchSettings.filterType)&&this.setProperties({searchSettings:{filterType:e.searchSettings.filterType}},!0),this.notify(le,{module:"breadcrumbbar",newProp:e,oldProp:t});break;case"selectedItems":"Details"===this.view?this.notify(le,{module:"detailsview",newProp:e,oldProp:t}):"LargeIcons"===this.view&&this.notify(le,{module:"largeiconsview",newProp:e,oldProp:t});break;case"showFileExtension":case"showHiddenItems":this.notify(le,{module:"common",newProp:e,oldProp:t});break;case"showThumbnail":this.notify(le,{module:"largeiconsview",newProp:e,oldProp:t});break;case"toolbarSettings":this.adjustHeight(),this.notify(le,{module:"toolbar",newProp:e,oldProp:t});break;case"uploadSettings":this.updateUploader();break;case"view":"Details"===e.view?this.notify(le,{module:"detailsview",newProp:e,oldProp:t}):"LargeIcons"===e.view&&this.notify(le,{module:"largeiconsview",newProp:e,oldProp:t});break;case"width":var n=sf.base.isNullOrUndefined(e.width)?e.width:sf.base.formatUnit(e.width);sf.base.setStyleAttribute(this.element,{width:n}),this.notify(le,{module:"common",newProp:e,oldProp:t});break;case"sortOrder":ze(this),this.notify(we,{});break;case"popupTarget":this.uploadDialogObj&&(this.uploadDialogObj.target=e.popupTarget),this.dialogObj&&(this.dialogObj.target=e.popupTarget),this.extDialogObj&&(this.extDialogObj.target=e.popupTarget),this.viewerObj&&(this.viewerObj.target=e.popupTarget)}}},t.prototype.ajaxSettingSetModel=function(t){sf.base.isNullOrUndefined(t.ajaxSettings.url)||this.setProperties({ajaxSettings:{url:t.ajaxSettings.url}},!0),sf.base.isNullOrUndefined(t.ajaxSettings.uploadUrl)||this.setProperties({ajaxSettings:{uploadUrl:t.ajaxSettings.uploadUrl}},!0),sf.base.isNullOrUndefined(t.ajaxSettings.downloadUrl)||this.setProperties({ajaxSettings:{downloadUrl:t.ajaxSettings.downloadUrl}},!0),sf.base.isNullOrUndefined(t.ajaxSettings.getImageUrl)||this.setProperties({ajaxSettings:{getImageUrl:t.ajaxSettings.getImageUrl}},!0),this.setProperties({path:"/"},!0),this.setProperties({selectedItems:[]},!0),e.prototype.refresh.call(this)},t.prototype.localeSetModelOption=function(t){this.uploadObj.locale=t.locale,e.prototype.refresh.call(this)},t.prototype.destroy=function(){this.isDestroyed||(this.refreshing||this.notify(be,{}),this.uploadObj.destroy(),this.uploadObj=null,this.uploadDialogObj.destroy(),this.uploadDialogObj=null,this.splitterObj.destroy(),this.splitterObj=null,this.dialogObj&&(this.dialogObj.destroy(),this.dialogObj=null),this.viewerObj&&(this.viewerObj.destroy(),this.viewerObj=null),this.extDialogObj&&(this.extDialogObj.destroy(),this.extDialogObj=null),this.element.removeAttribute("style"),this.element.removeAttribute("tabindex"),this.removeEventListeners(),this.unWireEvents(),this.addCssClass(this.cssClass,null),sf.base.removeClass([this.element],[ne,"e-fe-mobile","e-fe-cb-select"]),this.element.innerHTML="",e.prototype.destroy.call(this))},t.prototype.createFolder=function(e){this.notify(Re,{action:"createFolder"});var t=[We(this)];(this.itemData=t,e)?/[/\\|*?"<>:]/.test(e)?ti(this,"Error",{files:null,error:{code:"402",message:it(this,"Validation-Invalid").replace("{0}",'"'+e+'"'),fileExists:null}}):Et(t[0])?At(this,e):jt(this,t[0],"writeContents"):kt(this)},t.prototype.deleteFiles=function(e){this.notify(Re,{action:"deleteFiles",ids:e})},t.prototype.disableToolbarItems=function(e){sf.base.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!1)},t.prototype.downloadFiles=function(e){this.notify(Re,{action:"downloadFiles",ids:e})},t.prototype.enableToolbarItems=function(e){sf.base.isNullOrUndefined(e)||this.toolbarModule.enableItems(e,!0)},t.prototype.disableMenuItems=function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(this.contextmenuModule.contextMenu)||this.contextmenuModule.disableItem(e)},t.prototype.getMenuItemIndex=function(e){return this.contextmenuModule?this.contextmenuModule.getItemIndex(e):-1},t.prototype.getToolbarItemIndex=function(e){return this.toolbarModule?this.toolbarModule.getItemIndex(e):-1},t.prototype.filterFiles=function(e){this.filterData=e||null,this.setProperties({selectedItems:[]},!0),this.notify(ve,{}),this.isFiltered=!0,""!==this.breadcrumbbarModule.searchObj.element.value&&(this.breadcrumbbarModule.searchObj.element.value=""),Ft(this,"filter-end")},t.prototype.getSelectedFiles=function(){return this.notify("update-selection-data",{}),this.itemData},t.prototype.openFile=function(e){this.notify(Re,{action:"openFile",id:e})},t.prototype.refreshFiles=function(){ze(this)},t.prototype.refreshLayout=function(){this.adjustHeight(),this.notify("layout-refresh",{})},t.prototype.selectAll=function(){this.notify(Re,{action:"selectAll"})},t.prototype.clearSelection=function(){this.notify(Re,{action:"clearSelection"})},t.prototype.renameFile=function(e,t){this.notify(Re,{action:"renameFile",id:e,newName:t})},t.prototype.uploadFiles=function(){var e=[We(this)];this.itemData=e,Lt(this)},t.prototype.setRtl=function(e){e?this.addCssClass(null,ne):this.addCssClass(ne,null),this.uploadObj&&(this.uploadDialogObj.enableRtl=e,this.uploadObj.enableRtl=e)},Ri([sf.base.Complex({},c)],t.prototype,"ajaxSettings",void 0),Ri([sf.base.Property(!1)],t.prototype,"allowDragAndDrop",void 0),Ri([sf.base.Property(!0)],t.prototype,"allowMultiSelection",void 0),Ri([sf.base.Complex({},N)],t.prototype,"contextMenuSettings",void 0),Ri([sf.base.Property("")],t.prototype,"cssClass",void 0),Ri([sf.base.Complex({},D)],t.prototype,"detailsViewSettings",void 0),Ri([sf.base.Property(!0)],t.prototype,"enableHtmlSanitizer",void 0),Ri([sf.base.Property(!1)],t.prototype,"enablePersistence",void 0),Ri([sf.base.Property("400px")],t.prototype,"height",void 0),Ri([sf.base.Property("LargeIcons")],t.prototype,"view",void 0),Ri([sf.base.Complex({},M)],t.prototype,"navigationPaneSettings",void 0),Ri([sf.base.Property("/")],t.prototype,"path",void 0),Ri([sf.base.Property(null)],t.prototype,"popupTarget",void 0),Ri([sf.base.Complex({},v)],t.prototype,"searchSettings",void 0),Ri([sf.base.Property()],t.prototype,"selectedItems",void 0),Ri([sf.base.Property(!0)],t.prototype,"showFileExtension",void 0),Ri([sf.base.Property(null)],t.prototype,"rootAliasName",void 0),Ri([sf.base.Property(!1)],t.prototype,"showHiddenItems",void 0),Ri([sf.base.Property(!0)],t.prototype,"showThumbnail",void 0),Ri([sf.base.Property("Ascending")],t.prototype,"sortOrder",void 0),Ri([sf.base.Complex({},b)],t.prototype,"toolbarSettings",void 0),Ri([sf.base.Complex({},T)],t.prototype,"uploadSettings",void 0),Ri([sf.base.Property("100%")],t.prototype,"width",void 0),Ri([sf.base.Event()],t.prototype,"fileLoad",void 0),Ri([sf.base.Event()],t.prototype,"fileOpen",void 0),Ri([sf.base.Event()],t.prototype,"beforeDownload",void 0),Ri([sf.base.Event()],t.prototype,"beforeImageLoad",void 0),Ri([sf.base.Event()],t.prototype,"beforePopupClose",void 0),Ri([sf.base.Event()],t.prototype,"beforePopupOpen",void 0),Ri([sf.base.Event()],t.prototype,"beforeSend",void 0),Ri([sf.base.Event()],t.prototype,"created",void 0),Ri([sf.base.Event()],t.prototype,"destroyed",void 0),Ri([sf.base.Event()],t.prototype,"fileDragStart",void 0),Ri([sf.base.Event()],t.prototype,"fileDragging",void 0),Ri([sf.base.Event()],t.prototype,"fileDragStop",void 0),Ri([sf.base.Event()],t.prototype,"fileDropped",void 0),Ri([sf.base.Event()],t.prototype,"fileSelection",void 0),Ri([sf.base.Event()],t.prototype,"fileSelect",void 0),Ri([sf.base.Event()],t.prototype,"menuClick",void 0),Ri([sf.base.Event()],t.prototype,"menuOpen",void 0),Ri([sf.base.Event()],t.prototype,"failure",void 0),Ri([sf.base.Event()],t.prototype,"popupClose",void 0),Ri([sf.base.Event()],t.prototype,"popupOpen",void 0),Ri([sf.base.Event()],t.prototype,"success",void 0),Ri([sf.base.Event()],t.prototype,"toolbarClick",void 0),Ri([sf.base.Event()],t.prototype,"toolbarCreate",void 0),Ri([sf.base.Event()],t.prototype,"uploadListCreate",void 0),t=i=Ri([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),ki=function(){function e(e){this.default=["Delete","Rename","Download","Cut","Copy","Paste"],this.single=["Delete","Rename","Download","Cut","Copy"],this.multiple=["Delete","Download","Cut","Copy","Refresh"],this.selection=["NewFolder","Upload","SortBy","Refresh"],this.parent=e,this.render(),this.addEventListener()}return e.prototype.render=function(){var e=this;this.items=this.toolbarItemData(this.getItems(this.parent.toolbarSettings.items.map((function(e){return e.trim()}))));var t={items:this.items};this.parent.trigger("toolbarCreate",t,(function(t){e.items=t.items,e.toolbarObj=new sf.navigations.Toolbar({items:e.items,created:e.toolbarCreateHandler.bind(e),overflowMode:"Popup",clicked:e.onClicked.bind(e),enableHtmlSanitizer:e.parent.enableHtmlSanitizer,enableRtl:e.parent.enableRtl}),e.toolbarObj.isStringTemplate=!0,e.toolbarObj.appendTo("#"+e.parent.element.id+"_toolbar")}))},e.prototype.getItemIndex=function(e){for(var t=this.getId(e),i=0;i<this.items.length;i++)if(this.items[i].id===t)return i;return-1},e.prototype.getItems=function(e){var t=e.slice();return this.parent.isDevice&&this.parent.allowMultiSelection&&t.push("SelectAll"),t},e.prototype.onClicked=function(e){var t=this;if(!sf.base.isNullOrUndefined(e.item)&&e.item.id){var i,s=e.item.id.substr((this.parent.element.id+"_tb_").length);"refresh"===s||"newfolder"===s||"upload"===s?(i=[We(this.parent)],this.parent.itemData=i):(this.parent.notify("selected-data",{}),i=this.parent.itemData);var a={cancel:!1,fileDetails:i,item:e.item};this.parent.trigger("toolbarClick",a,(function(a){if(!a.cancel)switch(s){case"sortby":var n=sf.base.closest(e.originalEvent.target,".e-toolbar-item");n&&n.classList.contains("e-toolbar-popup")&&(e.cancel=!0);break;case"newfolder":kt(t.parent);break;case"cut":Ge(t.parent);break;case"copy":Ke(t.parent);break;case"delete":for(var r=0;r<i.length;r++)if(!Nt(i[r]))return void jt(t.parent,i[r],"write");ti(t.parent,"Delete");break;case"details":t.parent.notify(Ie,{});var o=t.parent.selectedItems;"navigationpane"===t.parent.activeModule&&(o=[]),Bt(t.parent,o,t.parent.path,"details");break;case"paste":t.parent.folderPath="",ot(t.parent);break;case"refresh":ze(t.parent);break;case"download":Dt(t.parent);break;case"rename":Nt(i[0])?(t.parent.notify(Se,{}),ti(t.parent,"Rename")):jt(t.parent,i[0],"write");break;case"upload":Lt(t.parent);break;case"selectall":t.parent.notify("select-all-init",{});break;case"selection":t.parent.notify("clear-all-init",{})}}))}},e.prototype.toolbarCreateHandler=function(){if(!sf.base.isNullOrUndefined(sf.base.select("#"+this.getId("SortBy"),this.parent.element))){var e=[{id:this.getPupupId("name"),text:it(this.parent,"Name"),iconCss:z},{id:this.getPupupId("size"),text:it(this.parent,"Size")},{id:this.getPupupId("date"),text:it(this.parent,"DateModified")},{separator:!0},{id:this.getPupupId("ascending"),text:it(this.parent,"Ascending"),iconCss:"Ascending"===this.parent.sortOrder?H:""},{id:this.getPupupId("descending"),text:it(this.parent,"Descending"),iconCss:"Descending"===this.parent.sortOrder?H:""},{id:this.getPupupId("none"),text:it(this.parent,"None"),iconCss:"None"===this.parent.sortOrder?H:""}];this.buttonObj=new sf.splitbuttons.DropDownButton({items:e,cssClass:st(this.parent,"e-fe-popup"),select:at.bind(this,this.parent),enableHtmlSanitizer:this.parent.enableHtmlSanitizer,enableRtl:this.parent.enableRtl,iconCss:"e-icons e-fe-sort"}),this.buttonObj.isStringTemplate=!0,this.buttonObj.appendTo("#"+this.getId("SortBy"))}if(!sf.base.isNullOrUndefined(sf.base.select("#"+this.getId("View"),this.parent.element))){var t=[{id:this.getPupupId("large"),text:'<span class="e-icons e-fe-large e-menu-icon"></span>'+it(this.parent,"View-LargeIcons"),iconCss:"Details"===this.parent.view?"":H},{id:this.getPupupId("details"),text:'<span class="e-icons e-fe-grid e-menu-icon"></span>'+it(this.parent,"View-Details"),iconCss:"Details"===this.parent.view?H:""}];this.layoutBtnObj=new sf.splitbuttons.DropDownButton({iconCss:"Details"===this.parent.view?se:ae,cssClass:st(this.parent,"e-caret-hide e-fe-popup"),items:t,select:this.layoutChange.bind(this),enableRtl:this.parent.enableRtl,enableHtmlSanitizer:this.parent.enableHtmlSanitizer,content:'<span class="e-tbar-btn-text">'+it(this.parent,"View")+"</span>"}),this.layoutBtnObj.isStringTemplate=!0,this.layoutBtnObj.appendTo("#"+this.getId("View"))}this.hideItems(this.default,!0),this.hideStatus();for(var i=sf.base.selectAll(".e-btn",this.toolbarObj.element),s=function(e){i[e].onkeydown=function(e){13!==e.keyCode||e.target.classList.contains("e-fe-popup")||e.preventDefault()},i[e].onkeyup=function(t){13!==t.keyCode||t.target.classList.contains("e-fe-popup")||i[e].click()}},a=0;a<i.length;a++)s(a);this.parent.refreshLayout()},e.prototype.updateSortByButton=function(){if(this.buttonObj)for(var e=this.buttonObj.items,t=0;t<e.length;t++)e[t].id===this.getPupupId("name")?e[t].iconCss="name"===this.parent.sortBy?z:"":e[t].id===this.getPupupId("size")?e[t].iconCss="size"===this.parent.sortBy?z:"":e[t].id===this.getPupupId("date")?e[t].iconCss="_fm_modified"===this.parent.sortBy?z:"":e[t].id===this.getPupupId("ascending")?e[t].iconCss="Ascending"===this.parent.sortOrder?H:"":e[t].id===this.getPupupId("descending")?e[t].iconCss="Descending"===this.parent.sortOrder?H:"":e[t].id===this.getPupupId("none")&&(e[t].iconCss="None"===this.parent.sortOrder?H:"")},e.prototype.getPupupId=function(e){return this.parent.element.id+"_ddl_"+e.toLowerCase()},e.prototype.layoutChange=function(e){"Details"===this.parent.view?e.item.id===this.getPupupId("large")&&Be(this.parent,"LargeIcons"):e.item.id===this.getPupupId("details")&&Be(this.parent,"Details")},e.prototype.toolbarItemData=function(e){var t=[],i="Both";this.parent.isMobile&&(i="Overflow");for(var s=0;s<e.length;s++){var a=void 0,n=this.getId(e[s]),r=it(this.parent,e[s]),o=it(this.parent,"Tooltip-"+e[s]);switch(e[s]){case"|":a={type:"Separator"};break;case"Upload":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-upload",showTextOn:i};break;case"SortBy":a={id:n,tooltipText:o,template:'<button id="'+n+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1">'+('<span class="e-tbar-btn-text e-tbar-ddb-text">'+r+"</span>")+"</button>"};break;case"Refresh":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-refresh",showTextOn:i};break;case"Selection":a={id:n,text:r,tooltipText:o,suffixIcon:"e-icons e-fe-clear",overflow:"Show",align:"Right"};break;case"View":a={id:n,tooltipText:o,prefixIcon:"Details"===this.parent.view?se:ae,overflow:"Show",align:"Right",text:r,showTextOn:"Overflow",template:'<button id="'+n+'" class="e-tbar-btn e-tbtn-txt" tabindex="-1" aria-label='+it(this.parent,"View")+"></button>"};break;case"Details":a={id:n,tooltipText:o,prefixIcon:"e-icons e-fe-details",overflow:"Show",align:"Right",text:r,showTextOn:"Overflow"};break;case"NewFolder":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-newfolder",showTextOn:i};break;case"Cut":a={id:n,text:r,tooltipText:o,prefixIcon:ie,showTextOn:i};break;case"Copy":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-copy",showTextOn:i};break;case"Paste":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-paste",showTextOn:i};break;case"Delete":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-delete",showTextOn:i};break;case"Rename":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-rename",showTextOn:i};break;case"Download":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-download",showTextOn:i};break;case"SelectAll":a={id:n,text:r,tooltipText:o,prefixIcon:"e-icons e-fe-select",showTextOn:i};break;default:a={id:n,text:r,tooltipText:o}}t.push(a)}return t},e.prototype.getId=function(e){return this.parent.element.id+"_tb_"+e.toLowerCase()},e.prototype.addEventListener=function(){this.parent.on(le,this.onPropertyChanged,this),this.parent.on(ve,this.onSelectionChanged,this),this.parent.on(Oe,this.onLayoutChange,this),this.parent.on("show-paste",this.showPaste,this),this.parent.on("hide-paste",this.hidePaste,this),this.parent.on(be,this.destroy,this),this.parent.on(we,this.updateSortByButton,this)},e.prototype.reRenderToolbar=function(e){var t=this;if(void 0!==e.newProp.toolbarSettings.items){this.items=this.toolbarItemData(this.getItems(e.newProp.toolbarSettings.items.map((function(e){return e.trim()}))));var i={items:this.items};this.parent.trigger("toolbarCreate",i,(function(e){t.buttonObj&&t.buttonObj.destroy(),t.layoutBtnObj&&t.layoutBtnObj.destroy(),t.items=e.items,t.toolbarObj.items=t.items,t.toolbarObj.dataBind(),t.toolbarCreateHandler()}))}},e.prototype.onSelectionChanged=function(){this.hideStatus(),this.hideItems(this.single,!0),this.hideItems(this.selection,!1),1===this.parent.selectedItems.length?(this.hideItems(this.single,!1),this.hideItems(this.selection,!0)):this.parent.selectedItems.length>1&&(this.hideItems(this.multiple,!1),this.hideItems(this.selection,!0));var e=sf.base.select("#"+this.getId("Selection"),this.toolbarObj.element);if(this.parent.selectedItems.length>0&&e){var t=void 0;t=1===this.parent.selectedItems.length?this.parent.selectedItems.length+" "+it(this.parent,"Item-Selection"):this.parent.selectedItems.length+" "+it(this.parent,"Items-Selection"),sf.base.select(".e-tbar-btn-text",e).textContent=t,this.toolbarObj.hideItem(e.parentElement,!1)}},e.prototype.hideItems=function(e,t){for(var i=0;i<e.length;i++){var s=sf.base.select("#"+this.getId(e[i]),this.parent.element);s&&this.toolbarObj.hideItem(s.parentElement,t)}},e.prototype.hideStatus=function(){var e=sf.base.select("#"+this.getId("Selection"),this.toolbarObj.element);e&&this.toolbarObj.hideItem(e.parentElement,!0)},e.prototype.showPaste=function(){this.hideItems(["Paste"],!1)},e.prototype.hidePaste=function(){this.hideItems(["Paste"],!0)},e.prototype.onLayoutChange=function(){if(this.layoutBtnObj){this.layoutBtnObj.iconCss="Details"===this.parent.view?se:ae;for(var e=this.layoutBtnObj.items,t=0;t<e.length;t++)e[t].id===this.getPupupId("large")?e[t].iconCss="LargeIcons"===this.parent.view?H:"":e[t].id===this.getPupupId("details")&&(e[t].iconCss="Details"===this.parent.view?H:"")}},e.prototype.removeEventListener=function(){this.parent.off(le,this.onPropertyChanged),this.parent.off(ve,this.onSelectionChanged),this.parent.off(Oe,this.onLayoutChange),this.parent.off("show-paste",this.showPaste),this.parent.off("hide-paste",this.hidePaste),this.parent.off(be,this.destroy),this.parent.off(we,this.updateSortByButton)},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"cssClass":this.buttonObj&&(this.buttonObj.cssClass=st(this.parent,"e-fe-popup")),this.layoutBtnObj&&(this.layoutBtnObj.cssClass=st(this.parent,"e-caret-hide e-fe-popup"));break;case"height":case"width":this.toolbarObj.refreshOverflow();break;case"toolbarSettings":this.reRenderToolbar(e)}}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.buttonObj&&this.buttonObj.destroy(),this.layoutBtnObj&&this.layoutBtnObj.destroy(),this.toolbarObj.destroy(),this.parent.refreshLayout())},e.prototype.enableItems=function(e,t){for(var i=0;i<e.length;i++){var s=sf.base.select("#"+this.getId(e[i]),this.parent.element);s&&this.toolbarObj.enableItems(s.parentElement,t)}},e}(),Li=function(){function e(e){this.removeNodes=[],this.moveNames=[],this.expandTree=!1,this.isDrag=!1,this.isPathDragged=!1,this.isRenameParent=!1,this.isRightClick=!1,this.renameParent=null,this.parent=e,this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftF10:"shift+F10",f2:"f2"}}return e.prototype.onInit=function(){if(sf.base.isNullOrUndefined(this.treeObj)){var e=sf.base.getValue(this.parent.pathId[0],this.parent.feParent);sf.base.setValue("_fm_icon","e-fe-folder",e);var t={},i=sf.base.getValue("id",e);sf.base.isNullOrUndefined(i)||sf.base.setValue("data-id",i,t),Nt(e)||sf.base.setValue("class",xt(e),t),sf.base.isNullOrUndefined(t)||sf.base.setValue("_fm_htmlAttr",t,e),this.treeObj=new sf.navigations.TreeView({fields:{dataSource:[e],id:"_fm_id",parentID:"_fm_pId",expanded:"_fm_expanded",selected:"_fm_selected",text:"name",hasChildren:"hasChild",iconCss:"_fm_icon",htmlAttributes:"_fm_htmlAttr",tooltip:"name"},enableHtmlSanitizer:this.parent.enableHtmlSanitizer,nodeSelected:this.onNodeSelected.bind(this),nodeExpanding:this.onNodeExpand.bind(this),nodeClicked:this.onNodeClicked.bind(this),allowEditing:!0,nodeEditing:this.onNodeEditing.bind(this),drawNode:this.onDrowNode.bind(this),enableRtl:this.parent.enableRtl,dataBound:this.addDragDrop.bind(this)}),this.treeObj.isStringTemplate=!0,this.treeObj.appendTo("#"+this.parent.element.id+"_tree"),this.wireEvents()}},e.prototype.addDragDrop=function(){var e=this;!this.parent.isMobile&&this.treeObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new sf.base.Draggable(this.treeObj.element,{cursorAt:this.parent.dragCursorPosition,dragTarget:".e-fullrow",dragArea:this.parent.element,drag:vt.bind(this,this.parent),dragStart:function(t){gt(e.parent,t,e.dragObj)},dragStop:ut.bind(this,this.parent),enableTailMode:!0,enableAutoScroll:!0,helper:this.dragHelper.bind(this)})):!this.parent.allowDragAndDrop&&this.dragObj&&this.dragObj.destroy())},e.prototype.dragHelper=function(e){var t=e.sender.target;if(!t.classList.contains("e-fullrow"))return null;var i=sf.base.closest(t,"li");return this.parent.dragPath="",this.parent.dragData=[],this.parent.activeElements=[],this.parent.activeElements=[i],this.parent.dragNodes=[],Ue(this.parent,i),this.parent.dragData=this.getTreeData(i),this.parent.dragPath=this.getDragPath(i,this.parent.dragData[0].name),this.parent.dragNodes.push(this.parent.dragData[0].name),ft(this.parent),this.parent.virtualDragElement},e.prototype.getDragPath=function(e,t){return ht(this.getDropPath(e,t))},e.prototype.getDropPath=function(e,t){var i=e.getAttribute("data-id");return ke(e,this.parent.hasId?i:t,this.parent.hasId)},e.prototype.onDrowNode=function(e){var t={element:e.node,fileDetails:e.nodeData,module:"NavigationPane"};this.parent.trigger("fileLoad",t)},e.prototype.addChild=function(e,t,i){var s=tt(e);if(s.length>0){for(var a=0,n=s;a<s.length;){n[a]._fm_icon="e-fe-folder";var r={},o=sf.base.getValue("id",n[a]);sf.base.isNullOrUndefined(o)||sf.base.setValue("data-id",o,r),Nt(n[a])||sf.base.setValue("class",xt(n[a]),r),sf.base.isNullOrUndefined(r)||sf.base.setValue("_fm_htmlAttr",r,n[a]),a++}this.treeObj.addNodes(s,t,null,i)}},e.prototype.onNodeSelected=function(e){if(this.parent.breadcrumbbarModule&&this.parent.breadcrumbbarModule.searchObj&&!this.renameParent&&(this.parent.breadcrumbbarModule.searchObj.element.value="",this.parent.isFiltered=!1),this.parent.searchedItems=[],e.isInteracted||this.isRightClick||this.isPathDragged||this.isRenameParent){this.activeNode=e.node,this.parent.activeModule="navigationpane";var t=this.getTreeData(sf.base.getValue("id",e.nodeData));if(!this.renameParent){var i={cancel:!1,fileDetails:t[0],module:"NavigationPane"};delete i.cancel,this.parent.trigger("fileOpen",i)}this.parent.selectedItems=[],this.parent.itemData=t,Me(e.node,this.parent.itemData[0],this.parent),this.expandNodeTarget=null,e.node.querySelector(".e-icons")&&null===e.node.querySelector("."+B)&&(this.expandNodeTarget="add"),Tt(this.parent,this.isPathDragged?Pe:ge,this.parent.path),this.parent.visitedItem=e.node,this.isPathDragged=this.isRenameParent=this.isRightClick=!1}},e.prototype.onPathDrag=function(e){this.isPathDragged=!0,this.selectResultNode(e[0])},e.prototype.onNodeExpand=function(e){if((e.isInteracted||this.isDrag)&&null===e.node.querySelector("."+B)){var t=sf.base.getValue("text",e.nodeData),i=e.node.getAttribute("data-id"),s=!sf.base.isNullOrUndefined(i),a=sf.base.isNullOrUndefined(i)?t:i,n=ke(e.node,a,s);this.expandNodeTarget=e.node.getAttribute("data-uid"),this.parent.expandedId=this.expandNodeTarget,this.parent.itemData=this.getTreeData(sf.base.getValue("id",e.nodeData)),Tt(this.parent,"node-expand",n)}},e.prototype.onNodeExpanded=function(e){this.addChild(e.files,this.expandNodeTarget,!1),this.parent.expandedId=null},e.prototype.onNodeClicked=function(e){if(this.parent.activeModule="navigationpane",this.activeNode=e.node,3===e.event.which&&e.node.getAttribute("data-uid")!==this.treeObj.selectedNodes[0])this.isRightClick=!0,this.treeObj.selectedNodes=[e.node.getAttribute("data-uid")];else if(e.node.getAttribute("data-uid")===this.treeObj.selectedNodes[0]&&0!==this.parent.selectedItems.length){this.parent.setProperties({selectedItems:[]},!0);var t="LargeIcons"===this.parent.view?"largeiconsview":"detailsview";this.parent.notify(le,{module:t,newProp:{selectedItems:[]}})}},e.prototype.onNodeEditing=function(e){sf.base.isNullOrUndefined(e.innerHtml)||(e.cancel=!0)},e.prototype.onPathChanged=function(e){this.parent.isCut=!1;var t=sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feFiles);if("add"===this.expandNodeTarget){var i=sf.base.select('[data-uid="'+this.treeObj.selectedNodes[0]+'"]',this.treeObj.element),s=sf.base.select(".e-list-parent",i);sf.base.isNullOrUndefined(s)&&this.addChild(e.files,this.treeObj.selectedNodes[0],!this.expandTree),this.expandNodeTarget=""}this.expandTree=!1,sf.base.isNullOrUndefined(t)&&sf.base.setValue(this.parent.pathId[this.parent.pathId.length-1],e.files,this.parent.feFiles)},e.prototype.updateTree=function(e){if(this.treeObj){var t=this.treeObj.selectedNodes[0];this.updateTreeNode(e,t)}},e.prototype.updateTreeNode=function(e,t){var i=-1!==this.treeObj.expandedNodes.indexOf(t);this.removeChildNodes(t),this.addChild(e.files,t,!i)},e.prototype.removeChildNodes=function(e){var t=sf.base.select('[data-uid="'+e+'"]',this.treeObj.element),i=sf.base.select(".e-list-parent",t),s=i?Array.prototype.slice.call(i.children):null;s&&this.treeObj.removeNodes(s)},e.prototype.onOpenEnd=function(e){var t=this.parent.pathId[this.parent.pathId.length-1];this.treeObj.expandAll(this.treeObj.selectedNodes),this.treeObj.selectedNodes=[t],this.expandNodeTarget="add",this.onPathChanged(e)},e.prototype.onOpenInit=function(e){"navigationpane"===this.parent.activeModule&&e.target.querySelector(".e-icons")&&this.treeObj.expandAll(this.treeObj.selectedNodes)},e.prototype.onInitialEnd=function(e){this.onInit(),this.addChild(e.files,sf.base.getValue("_fm_id",e.cwd),!1)},e.prototype.onFinalizeEnd=function(e){this.onInit();var t=sf.base.getValue("_fm_id",e.cwd);this.removeChildNodes(t),this.addChild(e.files,t,!1),this.treeObj.selectedNodes=[this.parent.pathId[this.parent.pathId.length-1]]},e.prototype.onCreateEnd=function(e){this.updateTree(e)},e.prototype.onSelectedData=function(){"navigationpane"===this.parent.activeModule&&this.updateItemData()},e.prototype.onDeleteInit=function(){if("navigationpane"===this.parent.activeModule){this.updateActionData();var e=sf.base.getValue("name",this.parent.itemData[0]);Vt(this.parent,[e],this.parent.path,"delete")}},e.prototype.onDeleteEnd=function(e){if("navigationpane"===this.parent.activeModule){var t=this.treeObj.selectedNodes[0],i=sf.base.select('[data-uid="'+t+'"]',this.treeObj.element),s=sf.base.closest(i,".e-list-parent").parentElement;this.treeObj.selectedNodes=[s.getAttribute("data-uid")],this.treeObj.dataBind()}this.updateTree(e)},e.prototype.onRefreshEnd=function(e){this.updateTree(e)},e.prototype.onRenameInit=function(){"navigationpane"===this.parent.activeModule&&this.updateRenameData()},e.prototype.onRenameEndParent=function(e){var t=this.renameParent?this.renameParent:this.parent.pathId[this.parent.pathId.length-1];if(this.expandTree=-1!==this.treeObj.expandedNodes.indexOf(this.treeObj.selectedNodes[0]),this.updateTreeNode(e,t),this.parent.expandedId=null,this.renameParent)this.renameParent=null;else{var i=[];if(this.parent.hasId)i=new sf.data.DataManager(this.treeObj.getTreeData()).executeLocal((new sf.data.Query).where("id","equal",this.parent.renamedId,!1));else{var s=new sf.data.DataManager(this.treeObj.getTreeData()).executeLocal((new sf.data.Query).where(this.treeObj.fields.text,"equal",this.parent.renameText,!1));s.length>0&&(i=new sf.data.DataManager(s).executeLocal((new sf.data.Query).where("_fm_pId","equal",t,!1)))}if(i.length>0){this.isRenameParent=!0;var a=sf.base.getValue(this.treeObj.fields.id,i[0]);this.treeObj.selectedNodes=[a],this.treeObj.dataBind()}}},e.prototype.onRenameEnd=function(e){if(""!==this.parent.breadcrumbbarModule.searchObj.element.value||this.parent.isFiltered){var t=this.treeObj.getTreeData(),i=[];if(this.parent.hasId)i=new sf.data.DataManager(t).executeLocal((new sf.data.Query).where("id","equal",this.parent.renamedId,!1));else{var s=new sf.data.DataManager(t).executeLocal((new sf.data.Query).where(this.treeObj.fields.text,"equal",this.parent.currentItemText,!1));s.length>0&&(i=new sf.data.DataManager(s).executeLocal((new sf.data.Query).where("filterPath","equal",this.parent.filterPath,!1)))}i.length>0&&(this.renameParent=sf.base.getValue(this.treeObj.fields.parentID,i[0]),this.parent.expandedId=this.renameParent,this.parent.itemData=this.getTreeData(this.renameParent),Tt(this.parent,"rename-end-parent",this.parent.filterPath.replace(/\\/g,"/")))}else this.updateTree(e)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"allowDragAndDrop":this.addDragDrop();break;case"navigationPaneSettings":Tt(this.parent,de,"/")}}},e.prototype.onDownLoadInit=function(){this.doDownload()},e.prototype.onSelectionChanged=function(e){this.treeObj.selectedNodes=[e.selectedNode]},e.prototype.onClearPathInit=function(e){this.removeChildNodes(e.selectedNode)},e.prototype.onDragEnd=function(e){var t=[];t=this.parent.isPasteError||this.parent.isSearchDrag?this.getMoveNames(e.files,this.parent.isSearchDrag,this.parent.dragPath):this.moveNames,this.treeObj.removeNodes(t)},e.prototype.getMoveNames=function(e,t,i){for(var s=[],a=0;a<e.length;a++)if(!e[a].isFile&&!this.parent.hasId){var n=e[a].previousName;if(t){var r=(i+=e[a].previousName).lastIndexOf("/");n=i.substring(r+1),i=i.substring(0,r+1)}for(var o=new sf.data.DataManager(this.treeObj.getTreeData()).executeLocal((new sf.data.Query).where(this.treeObj.fields.text,"equal",n,!1)),l=0;l<o.length;l++){var h=sf.base.getValue("filterPath",o[l]);if((h=h.replace(/\\/g,"/"))===i){s.push(sf.base.getValue(this.treeObj.fields.id,o[l]));break}}}return s},e.prototype.onCutEnd=function(e){var t=[];this.parent.isPasteError||this.parent.isSearchCut?this.moveNames=this.getMoveNames(e.files,this.parent.isSearchCut,this.parent.targetPath):t=this.moveNames,this.treeObj.removeNodes(t)},e.prototype.selectResultNode=function(e){if(this.parent.hasId)this.treeObj.selectedNodes=[sf.base.getValue("_fm_id",e)],this.treeObj.dataBind();else{var t=sf.base.getValue("filterPath",e),i=sf.base.getValue("name",e),s=new sf.data.DataManager(this.treeObj.getTreeData()).executeLocal((new sf.data.Query).where(this.treeObj.fields.text,"equal",i,!1));if(s.length>0){var a=new sf.data.DataManager(s).executeLocal((new sf.data.Query).where("filterPath","equal",t,!1));if(a.length>0){var n=sf.base.getValue(this.treeObj.fields.id,a[0]);this.treeObj.selectedNodes=[n],this.treeObj.dataBind()}}}},e.prototype.onDropPath=function(e){this.onpasteEnd(e),this.selectResultNode(this.parent.dropData),this.parent.isDropEnd=!this.parent.isPasteError},e.prototype.onpasteEnd=function(e){var t=[];if(this.parent.hasId)t=new sf.data.DataManager(this.treeObj.getTreeData()).executeLocal((new sf.data.Query).where("id","equal",sf.base.getValue("id",e.cwd),!1));else{var i=new sf.data.DataManager(this.treeObj.getTreeData()).executeLocal((new sf.data.Query).where(this.treeObj.fields.text,"equal",sf.base.getValue("name",e.cwd),!1));i.length>0&&(t=new sf.data.DataManager(i).executeLocal((new sf.data.Query).where("filterPath","equal",sf.base.getValue("filterPath",e.cwd),!1)))}if(t.length>0){var s=sf.base.getValue(this.treeObj.fields.id,t[0]),a=-1===this.treeObj.expandedNodes.indexOf(s);this.removeChildNodes(s),this.addChild(e.files,s,a)}this.parent.expandedId=null,this.onPathChanged(e),this.parent.isDragDrop&&this.checkDropPath(e)},e.prototype.checkDropPath=function(e){this.parent.hasId?this.parent.isDropEnd=!this.parent.isPasteError:-1===this.parent.dropPath.indexOf(dt(this.parent,e))?(this.parent.isDropEnd=!1,ct(this.parent)):this.parent.isDropEnd=!this.parent.isPasteError},e.prototype.onpasteInit=function(){this.parent.activeModule===this.getModuleName()&&this.updateItemData(),this.moveNames=[];for(var e=this.parent.isDragDrop?this.parent.dragData:this.parent.actionRecords,t=0;t<e.length;t++)!1===sf.base.getValue("isFile",e[t])&&this.moveNames.push(sf.base.getValue("_fm_id",e[t]))},e.prototype.oncutCopyInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.activeRecords=this.getTreeData(this.treeObj.selectedNodes[0]),this.parent.activeElements=[this.activeNode])},e.prototype.addEventListener=function(){this.parent.on(le,this.onPropertyChanged,this),this.parent.on("download-init",this.onDownLoadInit,this),this.parent.on(he,this.onInitialEnd,this),this.parent.on(de,this.onFinalizeEnd,this),this.parent.on(ge,this.onPathChanged,this),this.parent.on(Pe,this.onpasteEnd,this),this.parent.on("cut-end",this.onCutEnd,this),this.parent.on(xe,this.onpasteInit,this),this.parent.on("node-expand",this.onNodeExpanded,this),this.parent.on(pe,this.onCreateEnd,this),this.parent.on("selected-data",this.onSelectedData,this),this.parent.on("delete-init",this.onDeleteInit,this),this.parent.on(ce,this.onDeleteEnd,this),this.parent.on(fe,this.onRefreshEnd,this),this.parent.on("update-tree-selection",this.onSelectionChanged,this),this.parent.on(me,this.onOpenInit,this),this.parent.on(ye,this.onOpenEnd,this),this.parent.on(be,this.destroy,this),this.parent.on(Se,this.onRenameInit,this),this.parent.on(Ce,this.onRenameEnd,this),this.parent.on("rename-end-parent",this.onRenameEndParent,this),this.parent.on("clear-path-init",this.onClearPathInit,this),this.parent.on(je,this.oncutCopyInit,this),this.parent.on(Ne,this.onDropInit,this),this.parent.on(De,this.onMenuItemData,this),this.parent.on("drag-end",this.onDragEnd,this),this.parent.on("dragging",this.onDragging,this),this.parent.on(Ee,this.onDropPath,this),this.parent.on(Ie,this.onDetailsInit,this),this.parent.on("path-drag",this.onPathDrag,this)},e.prototype.removeEventListener=function(){this.parent.off(he,this.onInitialEnd),this.parent.off("download-init",this.onDownLoadInit),this.parent.off(de,this.onFinalizeEnd),this.parent.off("selected-data",this.onSelectedData),this.parent.off(le,this.onPropertyChanged),this.parent.off(ge,this.onPathChanged),this.parent.off(Pe,this.onpasteEnd),this.parent.off("cut-end",this.onCutEnd),this.parent.off(xe,this.onpasteInit),this.parent.off("update-tree-selection",this.onSelectionChanged),this.parent.off("node-expand",this.onNodeExpanded),this.parent.off(pe,this.onCreateEnd),this.parent.off(fe,this.onRefreshEnd),this.parent.off(me,this.onOpenInit),this.parent.off(ye,this.onOpenEnd),this.parent.off(be,this.destroy),this.parent.off(Se,this.onRenameInit),this.parent.off(Ce,this.onRenameEnd),this.parent.off("rename-end-parent",this.onRenameEndParent),this.parent.off("clear-path-init",this.onClearPathInit),this.parent.off("delete-init",this.onDeleteInit),this.parent.off(ce,this.onDeleteEnd),this.parent.off(je,this.oncutCopyInit),this.parent.off(Ne,this.onDropInit),this.parent.off("drag-end",this.onDragEnd),this.parent.off("dragging",this.onDragging),this.parent.off(Ee,this.onDropPath),this.parent.off(Ie,this.onDetailsInit),this.parent.off(De,this.onMenuItemData),this.parent.off("path-drag",this.onPathDrag)},e.prototype.onDetailsInit=function(){if(this.parent.activeModule===this.getModuleName()){var e=this.getTreeData(this.treeObj.selectedNodes[0]);this.parent.itemData=e}},e.prototype.onMenuItemData=function(e){if(this.parent.activeModule===this.getModuleName()){var t=sf.base.closest(e.target,"li");this.parent.itemData=this.getTreeData(t.getAttribute("data-uid"))}},e.prototype.onDragging=function(e){var t=sf.base.closest(e.target,"li");if(t.classList.contains("e-node-collapsed")){this.isDrag=!0;var i=parseInt(t.getAttribute("aria-level"),10);this.treeObj.expandAll([t.getAttribute("data-uid")],i+1),this.isDrag=!1}},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var t=sf.base.closest(e.target,"li");this.parent.dropData=this.getTreeData(t)[0],this.parent.dropPath=this.getDropPath(t,sf.base.getValue("name",this.parent.dropData))}},e.prototype.getModuleName=function(){return"navigationpane"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.treeObj&&(this.unWireEvents(),this.treeObj.destroy()))},e.prototype.wireEvents=function(){this.keyboardModule=new sf.base.KeyboardEvents(this.treeObj.element,{keyAction:this.keyDown.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){this.keyboardModule.destroy()},e.prototype.keyDown=function(e){switch(e.action){case"altEnter":this.parent.notify(Ie,{}),Bt(this.parent,[],this.parent.path,"details");break;case"esc":Te(this.parent);break;case"del":this.updateItemData(),Nt(this.parent.itemData[0])?(this.removeNodes=[],ti(this.parent,"Delete")):jt(this.parent,this.parent.itemData[0],"write");break;case"ctrlC":Ke(this.parent);break;case"ctrlV":this.parent.folderPath="",ot(this.parent);break;case"ctrlX":Ge(this.parent);break;case"shiftF10":if(this.updateItemData(),!Mt(this.parent.itemData[0]))return void jt(this.parent,this.parent.itemData[0],"download");0!==this.parent.selectedItems.length&&this.doDownload();break;case"f2":if(0===this.parent.selectedItems.length){var t=this.getTreeData(this.treeObj.selectedNodes[0])[0];Nt(t)?(this.updateRenameData(),ti(this.parent,"Rename")):jt(this.parent,t,"write")}}},e.prototype.getTreeData=function(e){for(var t=this.treeObj.getTreeData(e),i=0;i<t.length;i++)sf.base.isNullOrUndefined(sf.base.getValue("hasChild",t[i]))&&sf.base.setValue("hasChild",!1,t[i]);return t},e.prototype.updateRenameData=function(){this.updateItemData(),this.parent.currentItemText=sf.base.getValue("name",this.parent.itemData[0])},e.prototype.updateItemData=function(){var e=this.getTreeData(this.treeObj.selectedNodes[0])[0];this.parent.itemData=[e],this.parent.isFile=!1},e.prototype.updateActionData=function(){this.updateItemData();var e=ht(this.parent.path);this.parent.setProperties({path:e},!0),this.parent.pathId.pop(),this.parent.pathNames.pop()},e.prototype.doDownload=function(){var e=ht(this.parent.path),t=this.treeObj.selectedNodes[0]===this.parent.pathId[0]?"":sf.base.getValue("name",this.parent.itemData[0]);ei(this.parent,e,[t])},e}(),Ti=function(){function e(e){this.isInteracted=!0,this.interaction=!0,this.isPasteOperation=!1,this.isColumnRefresh=!1,this.dragObj=null,this.startIndex=null,this.firstItemIndex=null,this.isSelectionUpdate=!1,this.currentSelectedItem=[],this.count=0,this.isRendered=!0,this.isLoaded=!1,this.isNameWidth=!1,this.pasteOperation=!1,this.uploadOperation=!1,sf.grids.Grid.Inject(sf.grids.Resize,sf.grids.ContextMenu,sf.grids.Sort,sf.grids.VirtualScroll),this.parent=e,this.element=sf.base.select("#"+this.parent.element.id+"_grid",this.parent.element),this.addEventListener(),this.keyConfigs={altEnter:"alt+enter",esc:"escape",tab:"tab",moveDown:"downarrow",ctrlEnd:"ctrl+end",ctrlHome:"ctrl+home",ctrlDown:"ctrl+downarrow",ctrlLeft:"ctrl+leftarrow",ctrlRight:"ctrl+rightarrow",shiftEnd:"shift+end",shiftHome:"shift+home",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",ctrlUp:"ctrl+uparrow",csEnd:"ctrl+shift+end",csHome:"ctrl+shift+home",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",space:"space",ctrlSpace:"ctrl+space",shiftSpace:"shift+space",csSpace:"ctrl+shift+space",end:"end",home:"home",moveUp:"uparrow",del:"delete",ctrlX:"ctrl+x",ctrlC:"ctrl+c",ctrlV:"ctrl+v",ctrlShiftN:"ctrl+shift+n",shiftdel:"shift+delete",ctrlD:"ctrl+d",f2:"f2",ctrlA:"ctrl+a",enter:"enter"}}return e.prototype.render=function(e){if(sf.popups.showSpinner(this.parent.element),"Details"===this.parent.view){sf.base.removeClass([this.parent.element],"e-fe-m-select");var t=$e(this.parent,e.files);this.checkNameWidth();var i=this.getColumns(),s=void 0;this.parent.isMobile?s=[]:"None"!==this.parent.sortOrder&&(s=[{direction:this.parent.sortOrder,field:this.parent.sortBy}]),this.gridObj=new sf.grids.Grid({dataSource:t,allowSorting:!0,rowSelecting:this.onSelection.bind(this,"select"),rowDeselecting:this.onSelection.bind(this,"unselect"),rowSelected:this.onSelected.bind(this),rowDeselected:this.onDeSelection.bind(this),allowResizing:this.parent.detailsViewSettings.columnResizing,selectionSettings:{type:this.parent.allowMultiSelection?"Multiple":"Single",checkboxMode:"ResetOnRowClick"},enableRtl:this.parent.enableRtl,pageSettings:{pageSize:20},sortSettings:{allowUnsort:!1,columns:s},columns:i,recordDoubleClick:this.DblClickEvents.bind(this),beforeDataBound:this.onBeforeDataBound.bind(this),dataBound:this.onDataBound.bind(this),rowDataBound:this.onRowDataBound.bind(this),actionBegin:this.onActionBegin.bind(this),headerCellInfo:this.onHeaderCellInfo.bind(this),width:"100%",beforeCopy:function(e){e.cancel=!0},load:function(e){this.focusModule.destroy()},locale:this.parent.locale}),this.gridObj.isStringTemplate=!0,this.gridObj.appendTo("#"+this.parent.element.id+"_grid"),this.wireEvents(),this.adjustHeight(),this.emptyArgs=e}},e.prototype.checkNameWidth=function(){var e=this.parent.detailsViewSettings.columns;this.isNameWidth=!1;for(var t=0;t<e.length;t++)if("name"===e[t].field)return void(this.isNameWidth=!sf.base.isNullOrUndefined(e[t].width))},e.prototype.adjustWidth=function(e,t){if(!this.isNameWidth||"name"!==t)for(var i=0;i<e.length;i++)if(e[i].field===t){var s=void 0;s=""!==this.parent.breadcrumbbarModule.searchObj.element.value||this.parent.isFiltered?this.element.clientWidth<=680?"name"===t?"120px":"180px":"auto":this.element.clientWidth<=500?"120px":"auto",e[i].width=s}},e.prototype.getColumns=function(){var e;if(this.parent.isMobile)e=[{field:"name",headerText:it(this.parent,"Name"),width:"auto",minWidth:120,headerTextAlign:"Left",template:'<div class="e-fe-text">${name}</div><div class="e-fe-date">${_fm_modified}</div><span class="e-fe-size">${size}</span>'}];else{e=JSON.parse(JSON.stringify(this.parent.detailsViewSettings.columns)),this.adjustWidth(e,"name");for(var t=0,i=e.length;t<i;t++)e[t].headerText=it(this.parent,e[t].headerText)}var s=this.parent.isMobile||this.parent.isBigger?"54":"46",a={field:"type",width:s,minWidth:s,template:'<span class="e-fe-icon ${_fm_iconClass}"></span>',allowResizing:!1,allowSorting:!0,customAttributes:{class:"e-fe-grid-icon"},headerTemplate:'<span class="e-fe-icon e-fe-folder"></span>'};if(e.unshift(a),this.parent.allowMultiSelection){var n=this.parent.isBigger?"36":"26",r={type:"checkbox",width:n,minWidth:n,customAttributes:{class:"e-fe-checkbox"},allowResizing:!1,allowSorting:!1};this.parent.isMobile?e.push(r):e.unshift(r)}for(t=0,i=e.length;t<i;t++)e[t].disableHtmlEncode=!this.parent.enableHtmlSanitizer;return e},e.prototype.adjustHeight=function(){if(this.gridObj){var e=sf.base.select("#"+this.parent.element.id+"_content",this.parent.element),t=sf.base.select("#"+this.parent.element.id+"_breadcrumbbar",this.parent.element),i=sf.base.select(".e-gridheader",this.parent.element),s=e.offsetHeight-t.offsetHeight-i.offsetHeight;this.gridObj.height=s,this.gridObj.dataBind()}},e.prototype.renderCheckBox=function(){this.gridObj.columns=this.getColumns(),this.isColumnRefresh=!0,this.gridObj.refreshColumns()},e.prototype.onRowDataBound=function(e){var t=sf.base.select(".e-fe-grid-name",e.row);if(!t)for(var i=this.parent.detailsViewSettings.columns,s=0;s<i.length;s++)if("name"===i[s].field){t=e.row.children[this.parent.allowMultiSelection?s+2:s+1];break}if(t&&t.setAttribute("title",sf.base.getValue("name",e.data)),this.parent.isLayoutChange&&this.parent.isCut&&"move"===this.parent.fileAction&&this.parent.selectedNodes&&0!==this.parent.selectedNodes.length&&-1!==this.parent.selectedNodes.indexOf(sf.base.getValue("name",e.data))&&Fe(e.row),!this.parent.showFileExtension&&sf.base.getValue("isFile",e.data)){var a=e.row.querySelector(".e-fe-text");if(a){var n=sf.base.getValue("name",e.data),r=sf.base.getValue("type",e.data);a.innerHTML=n.substr(0,n.length-r.length)}}if(void 0!==sf.base.getValue("size",e.data)&&e.row.querySelector(".e-fe-size")){var o=e.row.querySelector(".e-fe-size"),l=void 0;if(sf.base.getValue("isFile",e.data)){var h=sf.base.getValue("size",e.data);l=(p=new sf.base.Internationalization(this.parent.locale)).formatNumber(h/1024,{format:"n"})+" "+it(this.parent,"KB")}else l="";o.innerHTML=l}if(this.parent.isMobile&&void 0!==sf.base.getValue("_fm_modified",e.data)&&e.row.querySelector(".e-fe-date")){var d=e.row.querySelector(".e-fe-date"),p=new sf.base.Internationalization(this.parent.locale),c=(i=this.parent.detailsViewSettings.columns,void 0);for(s=0;s<i.length;s++)if("dateModified"===i[s].field){c=i[s].format;break}var f=p.formatDate(new Date(sf.base.getValue("_fm_modified",e.data)),c);d.innerHTML=f}var u=e.row.querySelector("."+Q);u&&u.classList.add("e-small"),Nt(e.data)||(e.row.className+=" "+xt(e.data));var g={element:e.row,fileDetails:e.data,module:"DetailsView"};this.parent.trigger("fileLoad",g)},e.prototype.onActionBegin=function(e){if("sorting"===e.requestType){if(this.parent.sortOrder=e.direction,this.parent.sortBy=e.columnName,0!==this.parent.selectedItems.length){this.sortItem=!0;var t=this.gridObj.getSelectedRowIndexes(),i=t.length;for(this.sortSelectedNodes=[];i>0;){var s=this.gridObj.getRowsObject()[t[i-1]].data;this.sortSelectedNodes.push(sf.base.getValue(this.parent.hasId?"id":"name",s)),i--}}this.parent.notify(we,{})}},e.prototype.onHeaderCellInfo=function(e){var t=e.node.querySelector("."+Q);t&&t.classList.add("e-small")},e.prototype.onBeforeDataBound=function(e){sf.popups.showSpinner(this.parent.element);var t=$e(this.parent,this.gridObj.dataSource);e.result=t},e.prototype.onDataBound=function(){if(this.createDragObj(),0!==this.parent.selectedItems.length&&this.selectRecords(this.parent.selectedItems),!0===this.isPasteOperation&&(this.isColumnRefresh?this.isColumnRefresh=!1:(this.selectRecords(this.parent.pasteNodes),this.isPasteOperation=!1)),this.parent.createdItem&&(this.selectRecords([sf.base.getValue(this.parent.hasId?"id":"name",this.parent.createdItem)]),this.parent.createdItem=null),this.parent.layoutSelectedItems.length&&this.selectRecords(this.parent.layoutSelectedItems),this.parent.renamedItem&&(this.addSelection(this.parent.renamedItem),this.parent.renamedItem=null),!0===this.sortItem&&(this.selectRecords(this.sortSelectedNodes),this.sortItem=!1),this.isSelectionUpdate&&(this.isColumnRefresh?this.isColumnRefresh=!1:(this.selectRecords(this.currentSelectedItem),this.isSelectionUpdate=!1)),!0===this.uploadOperation&&(this.count++,this.selectRecords(this.parent.uploadItem),this.count===this.parent.uploadItem.length&&(this.uploadOperation=!1,this.parent.uploadItem=[])),this.gridObj.currentViewData.length*this.gridObj.getRowHeight()<this.gridObj.height){(t=this.gridObj.getHeaderContent()).style.paddingRight="",t.style.paddingLeft="",sf.base.select(".e-headercontent",t).style.borderRightWidth="0",(e=this.gridObj.getContent().querySelector(".e-content")).style.overflowY="",e.classList.add("e-scrollShow")}else{var e,t=this.gridObj.getHeaderContent();this.parent.enableRtl?t.style.paddingLeft="16px":t.style.paddingRight="16px",(e=this.gridObj.getContent().querySelector(".e-content")).classList.remove("e-scrollShow")}this.isRendered=!0,this.parent.isLayoutChange=!1,sf.popups.hideSpinner(this.parent.element),this.checkEmptyDiv(this.emptyArgs),this.isInteracted=!!this.isLoaded||this.isInteracted,this.isLoaded=!1},e.prototype.selectRecords=function(e){for(var t=this.gridObj.getCurrentViewRecords(),i=[],s=0,a=t.length;s<a;s++){var n=this.parent.hasId?sf.base.getValue("id",t[s]):Xe(this.parent,t[s]);-1!==e.indexOf(n)&&i.push(s)}0!==i.length&&(this.gridObj.selectRows(i),this.addFocus(this.gridObj.selectedRowIndex))},e.prototype.addSelection=function(e){var t=this.gridObj.getCurrentViewRecords(),i=[];if(this.parent.hasId)i=new sf.data.DataManager(t).executeLocal((new sf.data.Query).where("id","equal",this.parent.renamedId,!1));else{var s=new sf.data.DataManager(t).executeLocal((new sf.data.Query).where("name","equal",sf.base.getValue("name",e),!1));s.length>0&&(i=new sf.data.DataManager(s).executeLocal((new sf.data.Query).where("filterPath","equal",this.parent.filterPath,!1)))}if(i.length>0){var a=t.indexOf(i[0]);this.gridObj.selectRows([a])}},e.prototype.onSortColumn=function(){"None"!==this.parent.sortOrder?this.gridObj.sortModule.sortColumn(this.parent.sortBy,this.parent.sortOrder):this.gridObj.dataSource=$e(this.parent,this.gridObj.dataSource)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()||"common"===e.module)for(var t=0,i=Object.keys(e.newProp);t<i.length;t++){switch(i[t]){case"allowDragAndDrop":this.createDragObj();break;case"height":this.adjustHeight();break;case"detailsViewSettings":if(!sf.base.isNullOrUndefined(this.gridObj)){this.checkNameWidth();var s=this.getColumns();this.gridObj.columns=s,this.gridObj.allowResizing=this.parent.detailsViewSettings.columnResizing,this.gridObj.dataBind(),this.gridObj.refreshColumns()}break;case"selectedItems":if(this.interaction=!1,0!==this.parent.selectedItems.length){if(!this.parent.allowMultiSelection){var a=this.parent.selectedItems.slice(this.parent.selectedItems.length-1);this.parent.setProperties({selectedItems:a},!0)}this.selectRecords(this.parent.selectedItems),this.parent.setProperties({selectedItems:this.parent.selectedItems},!0)}else sf.base.isNullOrUndefined(this.gridObj)||this.gridObj.clearSelection();break;case"showFileExtension":case"showHiddenItems":Tt(this.parent,ge,this.parent.path);break;case"allowMultiSelection":sf.base.isNullOrUndefined(this.gridObj)||(this.currentSelectedItem=this.parent.selectedItems,this.gridObj.selectionSettings.type=e.newProp.allowMultiSelection?"Multiple":"Single",this.isSelectionUpdate=!0,this.renderCheckBox());break;case"view":Be(this.parent,"Details");break;case"width":this.onDetailsResize()}}},e.prototype.onPathChanged=function(e){this.parent.isCut=!1,""===this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.gridObj&&(this.parent.searchedItems=[],this.parent.isFiltered?this.updatePathColumn():this.removePathColumn(!1)),_e(this.parent),"Details"===this.parent.view&&(this.isInteracted=!1,sf.popups.showSpinner(this.parent.element),this.parent.setProperties({selectedItems:[]},!0),this.gridObj.dataSource=$e(this.parent,e.files)),this.emptyArgs=e},e.prototype.updatePathColumn=function(){var e=this.gridObj.columns.length,t=JSON.parse(JSON.stringify(this.gridObj.columns));if(t[e-1].field&&"filterPath"!==t[e-1].field&&!this.parent.isMobile){var i={field:"filterPath",headerText:it(this.parent,"Path"),minWidth:180,width:"auto"};this.gridObj.columns.push(i),this.adjustWidth(this.gridObj.columns,"filterPath"),this.adjustWidth(this.gridObj.columns,"name"),this.isColumnRefresh=!0,this.gridObj.refreshColumns()}},e.prototype.checkEmptyDiv=function(e){var t=$e(this.parent,e.files);if(0!==t.length||sf.base.isNullOrUndefined(this.element.querySelector(".e-content"))){if(0!==t.length&&this.element.querySelector("."+X))if(this.element.querySelector(".e-content").querySelector("."+X)){var i=this.element.querySelector(".e-content").querySelector("."+X);this.element.querySelector(".e-content").removeChild(i)}else this.element.removeChild(this.element.querySelector("."+X))}else et(this.parent,this.element,e)},e.prototype.onOpenInit=function(){if("detailsview"===this.parent.activeModule){var e=this.gridObj.getSelectedRecords()[0];this.openContent(e)}},e.prototype.DblClickEvents=function(e){var t;this.gridObj.selectRows([e.rowIndex]),e.rowData&&(t=JSON.parse(JSON.stringify(e.rowData)),this.openContent(t))},e.prototype.openContent=function(e){var t=this;if(Pt(e)){var i={cancel:!1,fileDetails:e,module:"DetailsView"};this.parent.trigger("fileOpen",i,(function(i){if(!i.cancel){var s=sf.base.getValue("name",e);if(sf.base.getValue("isFile",e)){if("e-fe-image"===Ye(e)){var a=Qe(t.parent,e);Ii(t.parent,s,a)}}else{if(""!==t.parent.breadcrumbbarModule.searchObj.element.value||t.parent.isFiltered)rt(t.parent,e);else{var n=sf.base.getValue("id",e),r=t.parent.path+(sf.base.isNullOrUndefined(n)?s:n)+"/";t.parent.setProperties({path:r},!0),t.parent.pathNames.push(s),t.parent.pathId.push(sf.base.getValue("_fm_id",e)),t.parent.itemData=[e],qe(t.parent)}t.parent.isFiltered=!1}t.element.focus()}}))}else jt(this.parent,e,"read")},e.prototype.onLayoutChange=function(e){"Details"===this.parent.view&&(this.gridObj?this.isLoaded=!0:this.render(e),this.parent.isFiltered&&(this.updatePathColumn(),this.parent.setProperties({selectedItems:[]},!0)),this.gridObj.dataSource=$e(this.parent,e.files),this.parent.notify("hide-layout",{}),this.gridObj.element.classList.remove(re),this.isInteracted=!1,this.gridObj.clearSelection(),""!==this.parent.breadcrumbbarModule.searchObj.element.value.trim()&&this.onSearchFiles(e),this.adjustHeight(),this.gridObj.sortSettings.columns.length>0&&this.gridObj.sortSettings.columns[0].field!==this.parent.sortBy&&"None"!==this.parent.sortOrder&&this.gridObj.sortColumn(this.parent.sortBy,this.parent.sortOrder))},e.prototype.onSearchFiles=function(e){"Details"===this.parent.view&&(this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(ve,{}),this.parent.isLayoutChange||(this.parent.layoutSelectedItems=[]),this.updatePathColumn(),this.parent.searchedItems=e.files,this.onPathChanged(e))},e.prototype.removePathColumn=function(e){var t=this.gridObj.columns.length,i=JSON.parse(JSON.stringify(this.gridObj.columns));i[t-1].field&&"filterPath"===i[t-1].field&&("filterPath"===this.gridObj.sortSettings.columns[0].field&&("None"!==this.parent.sortOrder?this.gridObj.sortColumn("name",this.parent.sortOrder):this.gridObj.dataSource=$e(this.parent,this.gridObj.dataSource),this.parent.notify(we,{})),this.gridObj.columns.pop(),e||(this.isColumnRefresh=!0,this.gridObj.refreshColumns()))},e.prototype.onFinalizeEnd=function(e){"Details"===this.parent.view&&(this.gridObj?this.onPathChanged(e):this.render(e))},e.prototype.onCreateEnd=function(e){"Details"===this.parent.view&&this.onPathChanged(e)},e.prototype.onRenameInit=function(){"detailsview"===this.parent.activeModule&&1===this.parent.selectedItems.length&&this.updateRenameData()},e.prototype.onSelectedData=function(){"detailsview"===this.parent.activeModule&&(this.parent.itemData=this.gridObj.getSelectedRecords())},e.prototype.onDeleteInit=function(){"detailsview"===this.parent.activeModule&&Vt(this.parent,this.parent.selectedItems,this.parent.path,"delete")},e.prototype.onDeleteEnd=function(e){"Details"===this.parent.view&&(this.onPathChanged(e),this.parent.setProperties({selectedItems:[]},!0))},e.prototype.onRefreshEnd=function(e){"Details"===this.parent.view&&(this.isInteracted=!1,this.removePathColumn(!0),this.gridObj.dataSource=$e(this.parent,e.files),this.emptyArgs=e)},e.prototype.onHideLayout=function(){"Details"!==this.parent.view&&this.gridObj&&this.gridObj.element.classList.add(re)},e.prototype.onSelectAllInit=function(){"Details"===this.parent.view&&(this.isInteracted=!1,this.parent.allowMultiSelection?this.gridObj.selectionModule.selectRowsByRange(0,this.gridObj.getRows().length):this.gridObj.selectRow(this.gridObj.getRows().length-1),this.isInteracted=!0,this.interaction=!0)},e.prototype.onClearAllInit=function(){"Details"===this.parent.view&&(this.removeSelection(),this.interaction=!0)},e.prototype.onSelectionChanged=function(){sf.base.removeClass([this.element],"e-headercheck"),this.parent.selectedItems.length>0&&sf.base.addClass([this.element],"e-headercheck")},e.prototype.onLayoutRefresh=function(){"Details"===this.parent.view&&this.adjustHeight()},e.prototype.onBeforeRequest=function(){this.isRendered=!1},e.prototype.onAfterRequest=function(){this.isRendered=!0},e.prototype.onUpdateSelectionData=function(){"Details"===this.parent.view&&(this.parent.itemData=this.gridObj.getSelectedRecords())},e.prototype.addEventListener=function(){this.parent.on(de,this.onFinalizeEnd,this),this.parent.on(be,this.destroy,this),this.parent.on(Oe,this.onLayoutChange,this),this.parent.on(ge,this.onPathChanged,this),this.parent.on(pe,this.onCreateEnd,this),this.parent.on(Ne,this.onDropInit,this),this.parent.on(Ie,this.onDetailsInit,this),this.parent.on(fe,this.onRefreshEnd,this),this.parent.on("search",this.onSearchFiles,this),this.parent.on(Re,this.onMethodCall,this),this.parent.on("actionFailure",this.onActionFailure,this),this.parent.on(le,this.onPropertyChanged,this),this.parent.on("delete-init",this.onDeleteInit,this),this.parent.on(ce,this.onDeleteEnd,this),this.parent.on("selected-data",this.onSelectedData,this),this.parent.on(Se,this.onRenameInit,this),this.parent.on(Ce,this.onPathChanged,this),this.parent.on(me,this.onOpenInit,this),this.parent.on("sort-column",this.onSortColumn,this),this.parent.on(ye,this.onPathChanged,this),this.parent.on("filter-end",this.onPathChanged,this),this.parent.on(xe,this.onPasteInit,this),this.parent.on("hide-layout",this.onHideLayout,this),this.parent.on("select-all-init",this.onSelectAllInit,this),this.parent.on("clear-all-init",this.onClearAllInit,this),this.parent.on("path-column",this.onPathColumn,this),this.parent.on(ve,this.onSelectionChanged,this),this.parent.on("before-request",this.onBeforeRequest,this),this.parent.on("after-request",this.onAfterRequest,this),this.parent.on(Pe,this.onpasteEnd,this),this.parent.on(je,this.oncutCopyInit,this),this.parent.on(De,this.onMenuItemData,this),this.parent.on(ue,this.onDetailsResizeHandler,this),this.parent.on("splitter-resize",this.onDetailsResize,this),this.parent.on("layout-refresh",this.onLayoutRefresh,this),this.parent.on(Ee,this.onDropPath,this),this.parent.on("update-selection-data",this.onUpdateSelectionData,this)},e.prototype.removeEventListener=function(){this.parent.off(de,this.onFinalizeEnd),this.parent.off(be,this.destroy),this.parent.off(Oe,this.onLayoutChange),this.parent.off(ge,this.onPathChanged),this.parent.off(xe,this.onPasteInit),this.parent.off(pe,this.onCreateEnd),this.parent.off(fe,this.onRefreshEnd),this.parent.off("search",this.onSearchFiles),this.parent.off(Re,this.onMethodCall),this.parent.off("actionFailure",this.onActionFailure),this.parent.off(le,this.onPropertyChanged),this.parent.off(Se,this.onRenameInit),this.parent.off(Ce,this.onPathChanged),this.parent.off("filter-end",this.onPathChanged),this.parent.off(me,this.onOpenInit),this.parent.off("sort-column",this.onSortColumn),this.parent.off(ye,this.onPathChanged),this.parent.off("hide-layout",this.onHideLayout),this.parent.off("select-all-init",this.onSelectAllInit),this.parent.off("clear-all-init",this.onClearAllInit),this.parent.off("delete-init",this.onDeleteInit),this.parent.off(ce,this.onDeleteEnd),this.parent.off("path-column",this.onPathColumn),this.parent.off(ve,this.onSelectionChanged),this.parent.off("before-request",this.onBeforeRequest),this.parent.off("after-request",this.onAfterRequest),this.parent.off(Pe,this.onpasteEnd),this.parent.off(je,this.oncutCopyInit),this.parent.off(Ne,this.onDropInit),this.parent.off("selected-data",this.onSelectedData),this.parent.off(Ie,this.onDetailsInit),this.parent.off(De,this.onMenuItemData),this.parent.off(ue,this.onDetailsResizeHandler),this.parent.off("splitter-resize",this.onDetailsResize),this.parent.off("layout-refresh",this.onLayoutRefresh),this.parent.off(Ee,this.onDropPath),this.parent.off("update-selection-data",this.onUpdateSelectionData)},e.prototype.onActionFailure=function(){this.interaction=!0},e.prototype.onMenuItemData=function(e){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=[this.gridObj.getRowInfo(e.target).rowData])},e.prototype.onPasteInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.itemData=""!==this.parent.folderPath?this.gridObj.getSelectedRecords():[We(this.parent)])},e.prototype.onDetailsInit=function(){this.parent.activeModule===this.getModuleName()&&(0!==this.parent.selectedItems.length?this.parent.itemData=this.gridObj.getSelectedRecords():this.parent.itemData=[sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent)])},e.prototype.dragHelper=function(e){var t=e.sender.target.closest("tr.e-row");if(!t)return null;var i=t.getElementsByClassName("e-fe-text")[0].innerText;return t&&!t.querySelector(".e-active")&&this.selectRecords([i]),Ue(this.parent,t),this.parent.activeElements=[],this.parent.dragData=[],this.parent.dragData=this.gridObj.getSelectedRecords(),this.parent.dragPath=this.parent.path,this.parent.activeElements=this.gridObj.getSelectedRows(),ft(this.parent),this.parent.virtualDragElement},e.prototype.onDetailsResize=function(){if("Details"===this.parent.view&&!this.parent.isMobile&&!sf.base.isNullOrUndefined(this.gridObj))for(var e=this.gridObj.getHeaderContent().querySelector(".e-headercontent").firstChild.childNodes[0],t=this.gridObj.getContent().querySelector(".e-content .e-table").children[0],i=this.gridObj.getColumns(),s=0;s<i.length;s++)(!this.isNameWidth&&"name"===i[s].field||"filterPath"===i[s].field)&&(""!==this.parent.breadcrumbbarModule.searchObj.element.value||this.parent.isFiltered?this.element.clientWidth<=680?"name"===i[s].field?(e.children[s].setAttribute("style","width: 120px"),t.children[s].setAttribute("style","width: 120px")):(e.children[s].setAttribute("style","width: 180px"),t.children[s].setAttribute("style","width: 180px")):this.element.clientWidth>680&&(e.children[s].setAttribute("style","width: auto"),t.children[s].setAttribute("style","width: auto")):this.element.clientWidth<=500?(e.children[s].setAttribute("style","width: 120px"),t.children[s].setAttribute("style","width: 120px")):this.element.clientWidth>500&&(e.children[s].setAttribute("style","width: auto"),t.children[s].setAttribute("style","width: auto")))},e.prototype.onDetailsResizeHandler=function(){this.onDetailsResize(),"Details"!==this.parent.view||this.parent.isMobile||sf.base.isNullOrUndefined(this.gridObj)||this.adjustHeight()},e.prototype.createDragObj=function(){var e=this;!this.parent.isMobile&&this.gridObj&&(this.parent.allowDragAndDrop?(this.dragObj&&this.dragObj.destroy(),this.dragObj=new sf.base.Draggable(this.gridObj.element,{cursorAt:this.parent.dragCursorPosition,enableTailMode:!0,dragArea:this.parent.element,dragTarget:"."+J,drag:vt.bind(this,this.parent),dragStart:function(t){gt(e.parent,t,e.dragObj)},dragStop:ut.bind(this,this.parent),enableAutoScroll:!0,helper:this.dragHelper.bind(this)})):!this.parent.allowDragAndDrop&&this.dragObj&&this.dragObj.destroy())},e.prototype.onDropInit=function(e){if(this.parent.targetModule===this.getModuleName()){var t=sf.base.getValue(this.parent.pathId[this.parent.pathId.length-1],this.parent.feParent);if(e.target.closest("tr")){var i;i=this.gridObj.getRowInfo(e.target).rowData,this.parent.dropPath=i.isFile?this.parent.path:Je(this.parent,i,this.parent.path),this.parent.dropData=i.isFile?t:i}else this.parent.dropPath=this.parent.path,this.parent.dropData=t}},e.prototype.oncutCopyInit=function(){this.parent.activeModule===this.getModuleName()&&(this.parent.activeRecords=this.gridObj.getSelectedRecords(),this.parent.activeElements=this.gridObj.getSelectedRows())},e.prototype.onpasteEnd=function(e){"Details"===this.parent.view&&(this.isPasteOperation=!0,this.parent.path!==this.parent.destinationPath&&this.parent.path!==dt(this.parent,e)||this.onPathChanged(e))},e.prototype.onDropPath=function(e){"Details"===this.parent.view&&(this.isPasteOperation=!0,this.onPathChanged(e))},e.prototype.getModuleName=function(){return"detailsview"},e.prototype.destroy=function(){this.parent.isDestroyed||(this.removeEventListener(),this.gridObj&&(this.unWireEvents(),this.gridObj.destroy()))},e.prototype.updateType=function(e){var t=sf.base.select("."+ee,e);this.parent.isFile=!!sf.base.isNullOrUndefined(t)},e.prototype.onSelection=function(e,t){var i={action:e,fileDetails:t.data,isInteracted:this.interaction,cancel:!1,target:t.target};this.parent.trigger("fileSelection",i),t.cancel=i.cancel},e.prototype.onSelected=function(e){this.parent.activeModule="detailsview",this.parent.isLayoutChange&&!this.parent.isFiltered||this.selectedRecords(),this.parent.notify(ve,{}),1===this.gridObj.getSelectedRowIndexes().length&&(this.firstItemIndex=this.gridObj.selectedRowIndex),this.gridObj.element.setAttribute("tabindex","-1"),this.triggerSelect("select",e);var t=this.gridObj.getRowByIndex(this.gridObj.selectedRowIndex);if(this.updateType(t),!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(t.querySelector(".e-checkselect"))){if(1!==this.gridObj.getSelectedRowIndexes().length){var i=this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length-2];this.gridObj.getRowByIndex(i).querySelector(".e-checkselect").setAttribute("tabindex","-1")}t.querySelector(".e-rowcell.e-fe-checkbox").removeAttribute("tabindex")}sf.base.isNullOrUndefined(this.gridObj)||sf.base.isNullOrUndefined(this.gridObj.element.querySelector(".e-checkselectall"))||this.gridObj.element.querySelector(".e-checkselectall").setAttribute("tabindex","-1");var s=this.gridObj.getSelectedRowIndexes();if(!this.parent.allowMultiSelection)for(var a=0;a<s.length;a++)s[a]===this.gridObj.selectedRowIndex?this.gridObj.getRowByIndex(s[a]).setAttribute("tabindex","0"):this.gridObj.getRowByIndex(s[a]).removeAttribute("tabindex");var n=s.length;if(n>0){var r=this.gridObj.getRowsObject()[s[n-1]].data;this.parent.currentItemText=sf.base.getValue("name",r)}var o=sf.base.getValue("rowIndexes",e),l=sf.base.getValue("enableSelectMultiTouch",this.gridObj.selectionModule);(this.parent.isDevice&&sf.base.isNullOrUndefined(o)&&e.target&&!l&&!e.target.closest(".e-headercell")&&(this.parent.isFile=sf.base.getValue("isFile",e.data),this.parent.isFile||this.openContent(e.data)),this.parent.visitedItem=e.row,!this.parent.allowMultiSelection||sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.querySelector(".e-checkselect")))||t.querySelector(".e-checkselect").focus();this.addFocus(this.gridObj.selectedRowIndex),this.parent.isLayoutChange||(this.isInteracted=!0)},e.prototype.onPathColumn=function(){"Details"!==this.parent.view||sf.base.isNullOrUndefined(this.gridObj)||""!==this.parent.breadcrumbbarModule.searchObj.element.value||this.parent.isFiltered||this.removePathColumn(!1)},e.prototype.selectedRecords=function(){this.parent.setProperties({selectedItems:[]},!0);for(var e=this.gridSelectNodes(),t=0;t<e.length;){var i=e[t],s=Ot(this.parent,i);this.parent.selectedItems.push(s),t++}this.parent.setProperties({selectedItems:this.parent.selectedItems},!0)},e.prototype.onDeSelection=function(e){if(!this.parent.allowMultiSelection&&sf.base.isNullOrUndefined(e.data))this.gridObj.getRowByIndex(e.rowIndex).removeAttribute("tabindex");else if(this.gridObj.getSelectedRowIndexes().length>1){var t=this.gridObj.getSelectedRowIndexes()[this.gridObj.getSelectedRowIndexes().length-2];this.gridObj.getRowByIndex(t).querySelector(".e-checkselect").removeAttribute("tabindex")}-1===this.gridObj.selectedRowIndex&&this.gridObj.element.setAttribute("tabindex","0"),this.isInteracted?(this.selectedRecords(),0===this.parent.selectedItems.length&&(sf.base.setValue("enableSelectMultiTouch",!1,this.gridObj.selectionModule),sf.base.removeClass([this.parent.element],"e-fe-m-select")),this.parent.notify(ve,{}),this.triggerSelect("unselect",e),this.parent.visitedItem=null):this.isInteracted=!0},e.prototype.triggerSelect=function(e,t){var i={action:e,fileDetails:t.data,isInteracted:this.interaction};this.parent.trigger("fileSelect",i),this.interaction=!0},e.prototype.wireEvents=function(){this.wireClickEvent(!0),this.keyboardModule=new sf.base.KeyboardEvents(this.gridObj.element,{keyAction:this.keyupHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keyup"}),this.keyboardDownModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keydownHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),sf.base.EventHandler.add(this.gridObj.element,"blur",this.removeFocus,this)},e.prototype.unWireEvents=function(){this.wireClickEvent(!1),this.keyboardModule.destroy(),this.keyboardDownModule.destroy(),sf.base.EventHandler.remove(this.gridObj.element,"blur",this.removeFocus)},e.prototype.wireClickEvent=function(e){if(e){var t=this,i=this.gridObj.getContent();this.clickObj=new sf.base.Touch(i,{tap:function(e){1===e.tapCount&&e.originalEvent.target.classList.contains("e-content")&&t.onClearAllInit()},tapHold:function(e){if(t.parent.isDevice){e.originalEvent.preventDefault(),t.parent.allowMultiSelection&&(sf.base.setValue("enableSelectMultiTouch",t.parent.allowMultiSelection,t.gridObj.selectionModule),sf.base.addClass([t.parent.element],"e-fe-m-select"));var i=e.originalEvent.target;if(i){var s=sf.base.closest(i,"."+J),a=t.gridObj.getRows().indexOf(s);t.gridObj.selectRow(a)}}}})}else this.clickObj&&this.clickObj.destroy()},e.prototype.removeSelection=function(){sf.base.removeClass([this.parent.element],"e-fe-m-select"),this.gridObj.clearSelection(),this.parent.setProperties({selectedItems:[]},!0),this.parent.notify(ve,{}),-1===this.gridObj.selectedRowIndex&&(this.startIndex=null),this.isInteracted=!0},e.prototype.removeFocus=function(){this.addFocus(null)},e.prototype.getFocusedItemIndex=function(){return sf.base.isNullOrUndefined(this.getFocusedItem())?null:parseInt(this.getFocusedItem().getAttribute("aria-rowindex"),10)},e.prototype.keydownHandler=function(e){if(this.isRendered)switch(e.action){case"end":case"home":case"space":case"ctrlSpace":case"shiftSpace":case"csSpace":case"ctrlA":case"enter":case"altEnter":case"ctrlEnd":case"shiftEnd":case"csEnd":case"ctrlHome":case"shiftHome":case"csHome":case"ctrlDown":case"shiftDown":case"csDown":case"ctrlLeft":case"shiftLeft":case"csLeft":case"esc":case"del":case"shiftdel":case"ctrlC":case"ctrlV":case"ctrlX":case"f2":case"moveDown":case"moveUp":e.preventDefault()}},e.prototype.keyupHandler=function(e){if(this.isRendered){e.preventDefault();var t=e.action,i=$e(this.parent,this.gridObj.dataSource),s=i.length,a=(this.getFocusedItem(),this.getFocusedItemIndex()),n=this.gridObj.selectedRowIndex,r=this.gridObj.getSelectedRowIndexes();switch(t){case"altEnter":Bt(this.parent,this.parent.selectedItems,this.parent.path,"details");break;case"esc":Te(this.parent);break;case"del":case"shiftdel":this.performDelete();break;case"enter":if(-1===this.gridObj.selectedRowIndex)break;var o=this.gridObj.getRowsObject()[this.gridObj.selectedRowIndex].data;if(o){var l=JSON.parse(JSON.stringify(o));this.openContent(l)}break;case"ctrlC":Ke(this.parent);break;case"ctrlV":this.parent.folderPath="",ot(this.parent);break;case"ctrlX":Ge(this.parent);break;case"ctrlD":this.doDownload();break;case"f2":this.performRename();break;case"ctrlA":!sf.base.isNullOrUndefined(i[0])&&this.parent.allowMultiSelection&&this.gridObj.selectionModule.selectRowsByRange(0,i.length-1);break;case"ctrlHome":case"tab":if(!sf.base.isNullOrUndefined(i[0]))if(this.parent.allowMultiSelection||"ctrlHome"!==e.action){if(-1!==this.gridObj.selectedRowIndex&&"tab"===e.action)return;this.addFocus(0)}else this.gridObj.selectRow(0);break;case"ctrlEnd":sf.base.isNullOrUndefined(i[0])||(this.parent.allowMultiSelection?this.addFocus(s-1):this.gridObj.selectRow(s-1));break;case"shiftHome":case"shiftEnd":case"csHome":case"csEnd":this.parent.allowMultiSelection?sf.base.isNullOrUndefined(i[0])||(sf.base.isNullOrUndefined(n)||-1===n?"csHome"===e.action||"shiftHome"===e.action?this.gridObj.selectRow(0):this.gridObj.selectionModule.selectRowsByRange(0,i.length-1):this.checkRowsKey(i,n,null,e)):this.gridObj.selectRow("shiftHome"===e.action||"csHome"===e.action?0:i.length-1);break;case"space":case"csSpace":case"shiftSpace":case"ctrlSpace":this.spaceSelection(r,a,n,e);break;case"csUp":case"csDown":case"shiftUp":case"shiftDown":this.shiftMoveMethod(i,n,a,r,e);break;case"ctrlUp":case"ctrlDown":this.parent.allowMultiSelection?this.ctrlMoveFunction(i,e,n):this.moveFunction(i,e,n);break;case"home":var h=[sf.base.getValue(this.parent.hasId?"id":"name",i[0])];this.parent.setProperties({selectedItems:h},!0),this.selectRecords(h);break;case"moveUp":case"moveDown":this.moveFunction(i,e,n);break;case"end":var d=[sf.base.getValue(this.parent.hasId?"id":"name",i[s-1])];this.parent.setProperties({selectedItems:d},!0),this.selectRecords(d)}}},e.prototype.gridSelectNodes=function(){return this.gridObj.getSelectedRecords()},e.prototype.doDownload=function(){if(0!==this.parent.selectedItems.length){this.parent.itemData=this.gridObj.getSelectedRecords();for(var e=this.parent.itemData,t=0;t<e.length;t++)if(!Mt(e[t]))return void jt(this.parent,e[t],"download");ei(this.parent,this.parent.path,this.parent.selectedItems)}},e.prototype.performDelete=function(){if(this.parent.selectedItems&&this.parent.selectedItems.length>0){this.parent.itemData=this.gridObj.getSelectedRecords();for(var e=this.parent.itemData,t=0;t<e.length;t++)if(!Nt(e[t]))return void jt(this.parent,e[t],"write");ti(this.parent,"Delete")}},e.prototype.performRename=function(){1===this.parent.selectedItems.length&&(this.updateRenameData(),It(this.parent))},e.prototype.updateRenameData=function(){var e=this.gridSelectNodes()[0];wt(this.parent,e)},e.prototype.shiftMoveMethod=function(e,t,i,s,a){this.parent.allowMultiSelection?-1!==t||"csUp"!==a.action&&"csDown"!==a.action?-1===t||i===t||("csUp"===a.action||"csDown"===a.action)&&this.isSelected(s,i)?this.shiftSelectedItem(t,s,e,a):this.shiftSelectFocusItem(t,i,s,a):this.ctrlMoveFunction(e,a,t):this.moveFunction(e,a,t)},e.prototype.moveFunction=function(e,t,i){!sf.base.isNullOrUndefined(this.getFocusedItem())&&this.parent.allowMultiSelection?"moveDown"===t.action?this.gridObj.selectRow(this.getFocusedItemIndex()+1):this.gridObj.selectRow(this.getFocusedItemIndex()-1):sf.base.isNullOrUndefined(i)||-1===i?sf.base.isNullOrUndefined(e[0])||this.gridObj.selectRow(0):"moveDown"===t.action||"ctrlDown"===t.action||"shiftDown"===t.action||"csDown"===t.action?this.gridObj.selectRow(i+(i!==e.length-1?1:0)):this.gridObj.selectRow(i-(0!==i?1:0))},e.prototype.spaceSelection=function(e,t,i,s){if(this.isSelected(e,t)||-1===i||"shiftSpace"!==s.action&&"csSpace"!==s.action)if(sf.base.isNullOrUndefined(this.getFocusedItem())||t===i)if(-1!==i&&"ctrlSpace"===s.action&&this.parent.allowMultiSelection){var a=i;e.pop(),this.gridObj.selectRows(e),this.addFocus(a)}else"shiftSpace"===s.action&&this.gridObj.selectRow(i);else e.push(this.getFocusedItemIndex()),this.gridObj.selectRows(e);else t<i?this.gridObj.selectionModule.selectRowsByRange(t,i):this.gridObj.selectionModule.selectRowsByRange(i,t)},e.prototype.ctrlMoveFunction=function(e,t,i){var s;if(sf.base.isNullOrUndefined(this.getFocusedItem()))sf.base.isNullOrUndefined(i)||-1===i?sf.base.isNullOrUndefined(e[0])||(s=0):s="ctrlDown"===t.action||"csDown"===t.action?i+(i<e.length?1:0):i-(i<1?0:1);else{var a=this.getFocusedItemIndex();s="ctrlDown"===t.action||"csDown"===t.action?a+(a<e.length-1?1:0):a-(a<1?0:1)}this.addFocus(s)},e.prototype.checkRowsKey=function(e,t,i,s){"Uncheck"===this.gridObj.checkAllRows||"Intermediate"===this.gridObj.checkAllRows?"csHome"!==s.action&&"csEnd"!==s.action?(sf.base.isNullOrUndefined(this.startIndex)&&this.firstItemIndex!==t&&(this.firstItemIndex=t),"shiftEnd"===s.action?this.gridObj.selectionModule.selectRowsByRange(this.firstItemIndex,e.length-1):this.gridObj.selectionModule.selectRowsByRange(0,this.firstItemIndex),this.startIndex=t):"csEnd"===s.action?this.gridObj.selectRows(this.InnerItems(sf.base.isNullOrUndefined(t)?0:t,sf.base.isNullOrUndefined(i)?e.length-1:i,s)):sf.base.isNullOrUndefined(t)?this.gridObj.selectRow(0):this.gridObj.selectRows(this.InnerItems(sf.base.isNullOrUndefined(i)?0:i,t,s)):this.gridObj.selectionModule.selectRow("shiftHome"===s.action||"csHome"===s.action?0:e.length-1)},e.prototype.InnerItems=function(e,t,i){var s=this.gridObj.getSelectedRowIndexes();if("csEnd"===i.action)for(var a=e+1;a<=t;a++)s.push(a);else for(a=t-1;e<=a;a--)s.push(a);return s},e.prototype.shiftSelectFocusItem=function(e,t,i,s){var a,n;a=t+("shiftDown"===s.action||"csDown"===s.action?1:-1),(n=sf.base.isNullOrUndefined(this.startIndex)?e:i[0])===a?this.gridObj.selectRow(n):n<a?"shiftDown"===s.action||"csDown"===s.action?this.gridObj.selectionModule.selectRowsByRange(n,a):this.gridObj.selectionModule.selectRowsByRange(a,n):"shiftDown"===s.action||"csDown"===s.action?this.gridObj.selectionModule.selectRowsByRange(a,n):this.gridObj.selectionModule.selectRowsByRange(n,a),this.startIndex=this.gridObj.selectedRowIndex},e.prototype.addFocus=function(e){var t=this.getFocusedItem(),i=this.gridObj.getRowByIndex(e);t&&(t.removeAttribute("tabindex"),sf.base.removeClass([t],[G,"e-focused"])),sf.base.isNullOrUndefined(i)||(this.gridObj.element.setAttribute("tabindex","-1"),i.setAttribute("tabindex","0"),i.focus(),sf.base.addClass([i],[G,"e-focused"]))},e.prototype.getFocusedItem=function(){return sf.base.select(".e-focused",this.element)},e.prototype.isSelected=function(e,t){for(var i=!1,s=0;s<=e.length-1;s++)if(e[s]===t){i=!0;break}return i},e.prototype.shiftSelectedItem=function(e,t,i,s){-1===e?this.gridObj.selectRow(0):sf.base.isNullOrUndefined(this.startIndex)&&s.shiftKey?(this.startIndex=this.gridObj.selectedRowIndex,this.gridObj.selectRows([e,"shiftDown"===s.action||"csDown"===s.action?e+(e!==i.length-1?1:0):e-(0!==e?1:0)])):"shiftDown"===s.action||"shiftUp"===s.action?("shiftDown"===s.action&&-1===t.indexOf(e+1)?e!==i.length-1&&t.push(e+1):"shiftUp"===s.action&&-1===t.indexOf(e-1)?0!==e&&t.push(e-1):t.pop(),this.gridObj.selectRows(t)):"csDown"===s.action?this.isSelected(t,this.getFocusedItemIndex()+1)?this.addFocus(this.getFocusedItemIndex()+1):(t.push(this.getFocusedItemIndex()+1),this.gridObj.selectRows(t)):this.isSelected(t,this.getFocusedItemIndex()-1)?this.addFocus(this.getFocusedItemIndex()-1):(t.push(this.getFocusedItemIndex()-1),this.gridObj.selectRows(t))},e.prototype.onMethodCall=function(e){if("Details"===this.parent.view)switch(sf.base.getValue("action",e)){case"deleteFiles":this.deleteFiles(sf.base.getValue("ids",e));break;case"downloadFiles":this.downloadFiles(sf.base.getValue("ids",e));break;case"openFile":this.openFile(sf.base.getValue("id",e));break;case"createFolder":this.interaction=!1;break;case"renameFile":this.interaction=!1,this.renameFile(sf.base.getValue("id",e),sf.base.getValue("newName",e));break;case"selectAll":this.interaction=!1,this.onSelectAllInit();break;case"clearSelection":this.interaction=!1,this.onClearAllInit()}},e.prototype.getRecords=function(e){var t=this.gridObj.getCurrentViewRecords(),i=[],s=!(""===this.parent.breadcrumbbarModule.searchObj.element.value&&!this.parent.isFiltered),a=this.parent.hasId?"id":"name";if(this.parent.hasId||!s)for(var n=0,r=t.length;n<r;n++)-1!==e.indexOf(sf.base.getValue(a,t[n]))&&i.push(t[n]);else for(n=0,r=t.length;n<r;n++){var o=sf.base.getValue("filterPath",t[n])+sf.base.getValue("name",t[n]);-1!==e.indexOf(o)&&i.push(t[n])}return i},e.prototype.deleteFiles=function(e){if(this.parent.activeModule="detailsview",sf.base.isNullOrUndefined(e))this.performDelete();else{var t=this.getRecords(e);if(0!==t.length){for(var i=[],s=[],a=0;a<t.length;a++)i[a]=t[a],s[a]=Ot(this.parent,i[a]);St(this.parent,i,s)}}},e.prototype.downloadFiles=function(e){if(sf.base.isNullOrUndefined(e))this.doDownload();else{var t=this.getRecords(e);if(0!==t.length){for(var i=[],s=[],a=0;a<t.length;a++)i[a]=t[a],s[a]=Ot(this.parent,i[a]);Ct(this.parent,i,s)}}},e.prototype.openFile=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getRecords([e]);t.length>0&&this.openContent(t[0])}},e.prototype.renameFile=function(e,t){if(this.parent.activeModule="detailsview",sf.base.isNullOrUndefined(e))this.performRename();else{var i=this.getRecords([e]);i.length>0&&(wt(this.parent,i[0]),sf.base.isNullOrUndefined(t)?It(this.parent):Nt(this.parent.itemData[0])?_t(this.parent,this.parent.path,t):jt(this.parent,this.parent.itemData[0],"write"))}},e}();return Mi.Inject(Ti,Li,ji,ki,Pi,xi),e.AjaxSettings=c,e.toolbarItems=g,e.ToolbarSettings=b,e.SearchSettings=v,e.columnArray=I,e.DetailsViewSettings=D,e.fileItems=j,e.folderItems=x,e.layoutItems=P,e.ContextMenuSettings=N,e.NavigationPaneSettings=M,e.UploadSettings=T,e.Column=_,e.TOOLBAR_ID="_toolbar",e.LAYOUT_ID="_layout",e.NAVIGATION_ID="_navigation",e.TREE_ID="_tree",e.GRID_ID="_grid",e.LARGEICON_ID="_largeicons",e.DIALOG_ID="_dialog",e.ALT_DIALOG_ID="_alt_dialog",e.IMG_DIALOG_ID="_img_dialog",e.EXTN_DIALOG_ID="_extn_dialog",e.UPLOAD_DIALOG_ID="_upload_dialog",e.RETRY_DIALOG_ID="_retry_dialog",e.CONTEXT_MENU_ID="_contextmenu",e.SORTBY_ID="_sortby",e.VIEW_ID="_view",e.SPLITTER_ID="_splitter",e.CONTENT_ID="_content",e.BREADCRUMBBAR_ID="_breadcrumbbar",e.UPLOAD_ID="_upload",e.RETRY_ID="_retry",e.SEARCH_ID="_search",e.ROOT="e-filemanager",e.CONTROL="e-control",e.CHECK_SELECT="e-fe-cb-select",e.ROOT_POPUP="e-fe-popup",e.MOBILE="e-fe-mobile",e.MOB_POPUP=U,e.MULTI_SELECT="e-fe-m-select",e.FILTER=V,e.LAYOUT="e-layout",e.NAVIGATION="e-navigation",e.LAYOUT_CONTENT="e-layout-content",e.LARGE_ICONS="e-large-icons",e.TB_ITEM="e-toolbar-item",e.LIST_ITEM=B,e.LIST_TEXT="e-list-text",e.LIST_PARENT="e-list-parent",e.TB_OPTION_TICK=H,e.TB_OPTION_DOT=z,e.BLUR=q,e.ACTIVE=W,e.HOVER=K,e.FOCUS=G,e.FOCUSED="e-focused",e.CHECK=Y,e.FRAME="e-frame",e.CB_WRAP=Q,e.ROW=J,e.ROWCELL="e-rowcell",e.EMPTY=X,e.EMPTY_CONTENT="e-empty-content",e.EMPTY_INNER_CONTENT="e-empty-inner-content",e.CLONE=$,e.DROP_FOLDER=Z,e.DROP_FILE="e-fe-drop-file",e.FOLDER=ee,e.ICON_IMAGE="e-fe-image",e.ICON_MUSIC="e-fe-music",e.ICON_VIDEO="e-fe-video",e.LARGE_ICON="e-large-icon",e.LARGE_EMPTY_FOLDER="e-empty-icon e-fe-folder",e.LARGE_EMPTY_FOLDER_TWO="e-empty-icon.e-fe-folder",e.LARGE_ICON_FOLDER="e-fe-folder",e.SELECTED_ITEMS="e-items",e.TEXT_CONTENT="e-text-content",e.GRID_HEADER="e-gridheader",e.TEMPLATE_CELL="e-templatecell",e.TREE_VIEW="e-treeview",e.MENU_ITEM="e-menu-item",e.MENU_ICON=te,e.SUBMENU_ICON="e-caret",e.GRID_VIEW="e-content",e.ICON_VIEW="e-list-parent",e.ICON_OPEN="e-icons e-fe-open",e.ICON_UPLOAD="e-icons e-fe-upload",e.ICON_CUT=ie,e.ICON_COPY="e-icons e-fe-copy",e.ICON_PASTE="e-icons e-fe-paste",e.ICON_DELETE="e-icons e-fe-delete",e.ICON_RENAME="e-icons e-fe-rename",e.ICON_NEWFOLDER="e-icons e-fe-newfolder",e.ICON_DETAILS="e-icons e-fe-details",e.ICON_SHORTBY="e-icons e-fe-sort",e.ICON_REFRESH="e-icons e-fe-refresh",e.ICON_SELECTALL="e-icons e-fe-select",e.ICON_DOWNLOAD="e-icons e-fe-download",e.ICON_OPTIONS="e-icons e-fe-options",e.ICON_GRID=se,e.ICON_LARGE=ae,e.ICON_BREADCRUMB="e-icons e-fe-breadcrumb",e.ICON_CLEAR="e-icons e-fe-clear",e.ICON_DROP_IN="e-icons e-fe-drop-in",e.ICON_DROP_OUT="e-icons e-fe-drop-out",e.ICON_NO_DROP="e-icons e-fe-no-drop",e.ICONS="e-icons",e.DETAILS_LABEL="e-detailslabel",e.ERROR_CONTENT="e-fe-errorcontent",e.STATUS="e-status",e.BREADCRUMBS="e-address",e.RTL=ne,e.DISPLAY_NONE=re,e.COLLAPSED="e-node-collapsed",e.FULLROW="e-fullrow",e.ICON_COLLAPSIBLE="e-icon-collapsible",e.SPLIT_BAR="e-split-bar",e.HEADER_CHECK="e-headercheck",e.OVERLAY="e-fe-overlay",e.VALUE=oe,e.isFile="isFile",e.modelChanged=le,e.initialEnd=he,e.finalizeEnd=de,e.createEnd=pe,e.filterEnd="filter-end",e.beforeDelete="before-delete",e.pathDrag="path-drag",e.deleteInit="delete-init",e.deleteEnd=ce,e.refreshEnd=fe,e.resizeEnd=ue,e.splitterResize="splitter-resize",e.pathChanged=ge,e.destroy=be,e.beforeRequest="before-request",e.upload="upload",e.skipUpload="skip-upload",e.afterRequest="after-request",e.download="download",e.layoutRefresh="layout-refresh",e.actionFailure="actionFailure",e.search="search",e.openInit=me,e.openEnd=ye,e.selectionChanged=ve,e.selectAllInit="select-all-init",e.clearAllInit="clear-all-init",e.clearPathInit="clear-path-init",e.layoutChange=Oe,e.sortByChange=we,e.nodeExpand="node-expand",e.detailsInit=Ie,e.menuItemData=De,e.renameInit=Se,e.renameEndParent="rename-end-parent",e.renameEnd=Ce,e.showPaste="show-paste",e.hidePaste="hide-paste",e.selectedData="selected-data",e.cutCopyInit=je,e.pasteInit=xe,e.pasteEnd=Pe,e.cutEnd="cut-end",e.hideLayout="hide-layout",e.updateTreeSelection="update-tree-selection",e.treeSelect="select-node",e.sortColumn="sort-column",e.pathColumn="path-column",e.searchTextChange="search-change",e.beforeDownload="before-download",e.downloadInit="download-init",e.dropInit=Ne,e.dragEnd="drag-end",e.dropPath=Ee,e.dragHelper="drag-helper",e.dragging="dragging",e.updateSelectionData="update-selection-data",e.methodCall=Re,e.permissionRead="read",e.permissionEdit="write",e.permissionEditContents="writeContents",e.permissionCopy="copy",e.permissionUpload="upload",e.permissionDownload="download",e.FileManager=Mi,e.Toolbar=ki,e.BreadCrumbBar=xi,e.NavigationPane=Li,e.DetailsView=Ti,e.LargeIconsView=ji,e.createDialog=ti,e.createExtDialog=ii,e.createImageDialog=Ii,e.ContextMenu=Pi,e}({}))}});