!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="_content/Syncfusion.Blazor/scripts/",i(i.s="./bundles/pager.js")}({"./bundles/pager.js":function(e,t,i){"use strict";i.r(t);i("./modules/pager.js")},"./modules/pager.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.grids=sf.base.extend({},sf.grids,function(e){"use strict";var t,r,n,s,o,a=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){this.pagerElement=this.pagerModule.element,this.renderNumericContainer(),this.refreshNumericLinks(),this.wireEvents()},e.prototype.refresh=function(){this.pagerModule.updateTotalPages(),this.links.length&&this.updateLinksHtml(),this.updateStyles()},e.prototype.refreshNumericLinks=function(){var e,t=this.pagerModule,i=t.element.querySelector(".e-numericcontainer"),r=document.createDocumentFragment();i.innerHTML="";for(var n=1;n<=t.pageCount;n++)e=sf.base.createElement("a",{className:"e-link e-numericitem e-spacing e-pager-default",attrs:{role:"link",tabindex:"-1","aria-label":"Goto Page "+n,href:"javascript:void(0);",name:"Goto page"+n}}),t.currentPage===n&&sf.base.classList(e,["e-currentitem","e-active"],["e-pager-default"]),r.appendChild(e);i.appendChild(r),this.links=[].slice.call(i.childNodes)},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.pagerElement,"click",this.clickHandler,this)},e.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.pagerModule.element,"click",this.clickHandler)},e.prototype.destroy=function(){this.unwireEvents()},e.prototype.renderNumericContainer=function(){this.element=sf.base.createElement("div",{className:"e-pagercontainer",attrs:{role:"navigation"}}),this.renderFirstNPrev(this.element),this.renderPrevPagerSet(this.element),this.element.appendChild(sf.base.createElement("div",{className:"e-numericcontainer"})),this.renderNextPagerSet(this.element),this.renderNextNLast(this.element),this.pagerModule.element.appendChild(this.element)},e.prototype.renderFirstNPrev=function(e){this.first=sf.base.createElement("div",{className:"e-first e-icons e-icon-first",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("FirstPageTooltip"):this.pagerModule.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}}),this.prev=sf.base.createElement("div",{className:"e-prev e-icons e-icon-prev",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPageTooltip"):this.pagerModule.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}),sf.base.append([this.first,this.prev],e)},e.prototype.renderPrevPagerSet=function(e){var t=sf.base.createElement("div");this.PP=sf.base.createElement("a",{className:"e-link e-pp e-spacing",innerHTML:"...",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),role:"link","aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),tabindex:"-1",name:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PreviousPagerTooltip"):this.pagerModule.getLocalizedLabel("previousPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.PP),e.appendChild(t)},e.prototype.renderNextPagerSet=function(e){var t=sf.base.createElement("div");this.NP=sf.base.createElement("a",{className:"e-link e-np e-spacing",innerHTML:"...",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),role:"link","aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),tabindex:"-1",name:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPagerTooltip"):this.pagerModule.getLocalizedLabel("nextPagerTooltip"),href:"javascript:void(0);"}}),t.appendChild(this.NP),e.appendChild(t)},e.prototype.renderNextNLast=function(e){this.next=sf.base.createElement("div",{className:"e-next e-icons e-icon-next",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("NextPageTooltip"):this.pagerModule.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}}),this.last=sf.base.createElement("div",{className:"e-last e-icons e-icon-last",attrs:{title:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),"aria-label":sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("LastPageTooltip"):this.pagerModule.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}),sf.base.append([this.next,this.last],e)},e.prototype.clickHandler=function(e){var t=this.pagerModule,i=e.target;return t.previousPageNo=t.currentPage,i.classList.contains("e-disable")||sf.base.isNullOrUndefined(i.getAttribute("index"))||(t.currentPage=parseInt(i.getAttribute("index"),10),t.dataBind()),!1},e.prototype.updateLinksHtml=function(){var e,t,i=this.pagerModule;i.currentPage=1===i.totalPages?1:i.currentPage,i.currentPage>i.totalPages&&i.totalPages&&(i.currentPage=i.totalPages),e=parseInt((i.currentPage/i.pageCount).toString(),10),i.currentPage%i.pageCount==0&&e>0&&(e-=1);for(var r=0;r<i.pageCount;r++)(t=e*i.pageCount+1+r)<=i.totalPages?(this.links[r].style.display="",this.links[r].setAttribute("index",t.toString()),this.links[r].innerHTML=i.customText?i.customText+t:t.toString(),i.currentPage!==t?this.links[r].classList.add("e-pager-default"):this.links[r].classList.remove("e-pager-default")):(this.links[r].innerHTML=i.customText?i.customText+t:t.toString(),this.links[r].style.display="none"),sf.base.classList(this.links[r],[],["e-currentitem","e-active"]);this.first.setAttribute("index","1"),this.last.setAttribute("index",i.totalPages.toString()),this.prev.setAttribute("index",(i.currentPage-1).toString()),this.next.setAttribute("index",(i.currentPage+1).toString()),this.pagerElement.querySelector(".e-mfirst").setAttribute("index","1"),this.pagerElement.querySelector(".e-mlast").setAttribute("index",i.totalPages.toString()),this.pagerElement.querySelector(".e-mprev").setAttribute("index",(i.currentPage-1).toString()),this.pagerElement.querySelector(".e-mnext").setAttribute("index",(i.currentPage+1).toString()),this.PP.setAttribute("index",(parseInt(this.links[0].getAttribute("index"),10)-i.pageCount).toString()),this.NP.setAttribute("index",(parseInt(this.links[this.links.length-1].getAttribute("index"),10)+1).toString())},e.prototype.updateStyles=function(){this.updateFirstNPrevStyles(),this.updatePrevPagerSetStyles(),this.updateNextPagerSetStyles(),this.updateNextNLastStyles(),this.links.length&&sf.base.classList(this.links[(this.pagerModule.currentPage-1)%this.pagerModule.pageCount],["e-currentitem","e-active"],[])},e.prototype.updateFirstNPrevStyles=function(){var e=["e-firstpage","e-pager-default"],t=["e-firstpagedisabled","e-disable"],i=["e-prevpage","e-pager-default"],r=["e-prevpagedisabled","e-disable"];this.pagerModule.totalPages>0&&this.pagerModule.currentPage>1?(sf.base.classList(this.prev,i,r),sf.base.classList(this.first,e,t),sf.base.classList(this.pagerElement.querySelector(".e-mfirst"),e,t),sf.base.classList(this.pagerElement.querySelector(".e-mprev"),i,r)):(sf.base.classList(this.prev,r,i),sf.base.classList(this.first,t,e),sf.base.classList(this.pagerElement.querySelector(".e-mprev"),r,i),sf.base.classList(this.pagerElement.querySelector(".e-mfirst"),t,e))},e.prototype.updatePrevPagerSetStyles=function(){this.pagerModule.currentPage>this.pagerModule.pageCount?sf.base.classList(this.PP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"]):sf.base.classList(this.PP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"])},e.prototype.updateNextPagerSetStyles=function(){var e=this.pagerModule,t=this.links[0].innerHTML.replace(e.customText,"");!t.length||!this.links.length||parseInt(t,10)+e.pageCount>e.totalPages?sf.base.classList(this.NP,["e-nextprevitemdisabled","e-disable"],["e-numericitem","e-pager-default"]):sf.base.classList(this.NP,["e-numericitem","e-pager-default"],["e-nextprevitemdisabled","e-disable"])},e.prototype.updateNextNLastStyles=function(){var e=["e-lastpage","e-pager-default"],t=["e-lastpagedisabled","e-disable"],i=["e-nextpage","e-pager-default"],r=["e-nextpagedisabled","e-disable"],n=this.pagerModule;n.currentPage===n.totalPages||0===n.totalRecordsCount?(sf.base.classList(this.last,t,e),sf.base.classList(this.next,r,i),sf.base.classList(this.pagerElement.querySelector(".e-mlast"),t,e),sf.base.classList(this.pagerElement.querySelector(".e-mnext"),r,i)):(sf.base.classList(this.last,e,t),sf.base.classList(this.next,i,r),sf.base.classList(this.pagerElement.querySelector(".e-mlast"),e,t),sf.base.classList(this.pagerElement.querySelector(".e-mnext"),i,r))},e}(),l=function(){function e(e){this.pagerModule=e}return e.prototype.render=function(){var e=sf.base.createElement("div",{className:"e-parentmsgbar",attrs:{"aria-label":"Pager Information"}});this.pageNoMsgElem=sf.base.createElement("span",{className:"e-pagenomsg",styles:"textalign:right"}),this.pageCountMsgElem=sf.base.createElement("span",{className:"e-pagecountmsg",styles:"textalign:right"}),sf.base.append([this.pageNoMsgElem,this.pageCountMsgElem],e),this.pagerModule.element.appendChild(e),this.refresh()},e.prototype.refresh=function(){var e=this.pagerModule;sf.base.isBlazor()?(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("CurrentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel("TotalItemsInfo"),[e.totalRecordsCount||0])):(this.pageNoMsgElem.textContent=this.format(e.getLocalizedLabel("currentPageInfo"),[0===e.totalRecordsCount?0:e.currentPage,e.totalPages||0,e.totalRecordsCount||0])+" ",this.pageCountMsgElem.textContent=this.format(e.getLocalizedLabel(e.totalRecordsCount<=1?"totalItemInfo":"totalItemsInfo"),[e.totalRecordsCount||0,e.totalRecordsCount?e.pageSize*(e.currentPage-1)+1:0,e.pageSize*e.currentPage>e.totalRecordsCount?e.totalRecordsCount:e.pageSize*e.currentPage])),this.pageNoMsgElem.parentElement.setAttribute("aria-label",this.pageNoMsgElem.textContent+this.pageCountMsgElem.textContent)},e.prototype.hideMessage=function(){this.pageNoMsgElem&&(this.pageNoMsgElem.style.display="none"),this.pageCountMsgElem&&(this.pageCountMsgElem.style.display="none")},e.prototype.showMessage=function(){this.pageNoMsgElem||this.render(),this.pageNoMsgElem.style.display="",this.pageCountMsgElem.style.display=""},e.prototype.destroy=function(){},e.prototype.format=function(e,t){for(var i,r=0;r<t.length;r++)i=new RegExp("\\{"+r+"\\}","gm"),e=e.replace(i,t[r].toString());return e},e}(),h=function(){function e(e){this.intl=new sf.base.Internationalization,sf.base.isNullOrUndefined(e)||(this.intl.culture=e)}return e.prototype.getFormatFunction=function(e){if(e.type){if(sf.base.isBlazor()){e.isServerRendered=!0}return this.intl.getDateFormat(e)}return this.intl.getNumberFormat(e)},e.prototype.getParserFunction=function(e){if(e.type){if(sf.base.isBlazor()){e.isServerRendered=!0}return this.intl.getDateParser(e)}return this.intl.getNumberParser(e)},e.prototype.fromView=function(e,t,i){return"date"!==i&&"datetime"!==i&&"number"!==i||sf.base.isNullOrUndefined(t)?e:t(e)},e.prototype.toView=function(e,t){var i=e;return sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(e)||(i=t(e)),i},e.prototype.setCulture=function(e){sf.base.isNullOrUndefined(e)||sf.base.setCulture(e)},e}(),d=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},c=function(){function e(e,t){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},sf.base.merge(this,e),this.parent=t,"none"===this.type?this.type=sf.base.isBlazor()&&!sf.base.isNullOrUndefined(this.template)&&sf.base.isNullOrUndefined(this.field)?"none":null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),sf.base.isNullOrUndefined(this.uid)&&(this.uid=Rt("grid-column"));var r=new h;if(e.format&&(e.format.skeleton||e.format.format)&&(this.setFormatter(r.getFormatFunction(sf.base.extend({},e.format))),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var e={},t=["filter","dataSource",sf.base.isBlazor()?" ":"headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],r=Object.keys(i),n=0;n<r.length;n++)if("columns"===r[n]){e[r[n]]=[];for(var s=0;s<i[r[n]].length;s++)e[r[n]].push(i[r[n]][s].toJSON())}else t.indexOf(r[n])<0&&(e[r[n]]=i[r[n]]);return e},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some((function(e){return e.allowResizing})))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=gt(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=gt(this.headerTemplate)),!sf.base.isNullOrUndefined(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=gt(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=gt(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=gt(this.filterTemplate)),this.isForeignColumn()&&(sf.base.isNullOrUndefined(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params=sf.base.extend({dataSource:this.dataSource,query:new sf.data.Query,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(e,t,i,r){if("string"==typeof n&&(n=Ut(n,window)),"Descending"===this.sortDirection){var s=e;e=t,t=s;var o=i;i=r,r=o}return n(e,t,i,r)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(e,t){return e=Ut(i.foreignKeyValue,Ot(i,{},e)[0]),t=Ut(i.foreignKeyValue,Ot(i,{},t)[0]),"Descending"===i.sortDirection?sf.data.DataUtil.fnDescending(e,t):sf.data.DataUtil.fnAscending(e,t)})}return e.prototype.getSortDirection=function(){return this.sortDirection},e.prototype.setSortDirection=function(e){this.sortDirection=e},e.prototype.getFreezeTableName=function(){return this.freezeTable},e.prototype.setProperties=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)this[t[i]]=e[t[i]],this.parent&&this.parent.isReact&&"template"===t[i]&&this.parent.refreshReactColumnTemplateByUid(this.uid)},e.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setFormatter=function(e){this.formatFn=e},e.prototype.getParser=function(){return this.parserFn},e.prototype.setParser=function(e){this.parserFn=e},e.prototype.getColumnTemplate=function(){return this.templateFn},e.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},e.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},e.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},e}(),p=(function(){function e(){}d([sf.base.Property()],e.prototype,"title",void 0),d([sf.base.Property()],e.prototype,"type",void 0),d([sf.base.Property()],e.prototype,"buttonOption",void 0)}(),"content-ready"),u="ui-update",f="on-empty",g="inbound-model-changed";!function(e){e[e.Data=0]="Data",e[e.Header=1]="Header",e[e.Summary=2]="Summary",e[e.GroupSummary=3]="GroupSummary",e[e.CaptionSummary=4]="CaptionSummary",e[e.Filter=5]="Filter",e[e.Indent=6]="Indent",e[e.GroupCaption=7]="GroupCaption",e[e.GroupCaptionEmpty=8]="GroupCaptionEmpty",e[e.Expand=9]="Expand",e[e.HeaderIndent=10]="HeaderIndent",e[e.StackedHeader=11]="StackedHeader",e[e.DetailHeader=12]="DetailHeader",e[e.DetailExpand=13]="DetailExpand",e[e.CommandColumn=14]="CommandColumn",e[e.DetailFooterIntent=15]="DetailFooterIntent",e[e.RowDragIcon=16]="RowDragIcon",e[e.RowDragHIcon=17]="RowDragHIcon"}(t||(t={})),function(e){e[e.Header=0]="Header",e[e.Content=1]="Content",e[e.Summary=2]="Summary"}(r||(r={})),function(e){e[e.Add=0]="Add",e[e.Edit=1]="Edit",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e[e.Cancel=4]="Cancel",e[e.Print=5]="Print",e[e.Search=6]="Search",e[e.ColumnChooser=7]="ColumnChooser",e[e.PdfExport=8]="PdfExport",e[e.ExcelExport=9]="ExcelExport",e[e.CsvExport=10]="CsvExport",e[e.WordExport=11]="WordExport"}(n||(n={})),function(e){e[e.isEdit=0]="isEdit",e[e.isAdd=1]="isAdd",e[e.isSort=2]="isSort",e[e.isFilter=3]="isFilter"}(s||(s={})),function(e){e[e.isInitial=0]="isInitial",e[e.isSearch=1]="isSearch"}(o||(o={}));var m,y,b=function(){function e(e){this.existingPredicate={},this.foreignKeyQuery=new sf.data.Query,this.filterState=!0,this.values={},this.renderEmpty=!1,this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new h(this.parent.locale),this.cBoxTrue=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&sf.base.addClass([this.cBoxTrue,this.cBoxFalse],["e-rtl"])}return e.prototype.destroy=function(){this.closeDialog()},e.prototype.wireEvents=function(){sf.base.EventHandler.add(this.dlg,"click",this.clickHandler,this),sf.base.EventHandler.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=sf.base.debounce(this.searchBoxKeyUp,200),sf.base.EventHandler.add(this.dialogObj.element.querySelector(".e-searchinput"),"keyup",this.searchHandler,this)},e.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.dlg,"click",this.clickHandler),sf.base.EventHandler.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&sf.base.EventHandler.remove(e,"keyup",this.searchHandler)},e.prototype.foreignKeyFilter=function(e,t,i){var r=this,n={},s=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(i)).then((function(i){r.options.column.columnData=i.result,r.parent.notify("generateQuery",{predicate:n,column:r.options.column}),e.ejpredicate=n.predicate.predicates;for(var o=n.predicate.predicates,a=0;a<o.length;a++)s.push({field:o[a].field,predicate:"or",matchCase:o[a].ignoreCase,ignoreAccent:o[a].ignoreAccent,operator:o[a].operator,value:o[a].value,type:r.options.type});e.filterCollection=s.length?s:t.filter((function(e){return e.field=r.options.field})),r.options.handler(e)}))},e.prototype.foreignFilter=function(e,t){var i=this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",r=new sf.data.Predicate(this.options.column.foreignKeyValue,i,t,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],r)},e.prototype.searchBoxClick=function(e){e.target.classList.contains("e-searchclear")&&(this.sInput.value="",this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},e.prototype.searchBoxKeyUp=function(e){this.refreshCheckboxes(),this.updateSearchIcon()},e.prototype.updateSearchIcon=function(){this.sInput.value.length?sf.base.classList(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):sf.base.classList(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},e.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},e.prototype.updateDataSource=function(){var e=this.options.dataSource;if(!(e instanceof sf.data.DataManager))for(var t=0;t<e.length;t++)if("object"!==i(e)){var r={};r[this.options.field]=e[t],e[t]=r}},e.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new sf.data.Query,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length},e.prototype.getAndSetChkElem=function(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var t={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search")}};sf.inputs.Input.createInput(t,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},e.prototype.showDialog=function(e){var t={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};if(!sf.base.isBlazor()||this.parent.isJsComponent){t.filterModel=this}if(this.parent.notify("cbox-filter-begin",t),!t.cancel){this.dialogObj=new sf.popups.Dialog({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),width:!sf.base.isNullOrUndefined(Ct(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this)});if(this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(e),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),e.isResponsiveFilter)document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg);else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),sf.popups.createSpinner({target:this.spinner},this.parent.createElement),sf.popups.showSpinner(this.spinner),this.getAllData()}},e.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},e.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":sf.base.Browser.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function(e,t,i){var r=t.element.style.display;t.element.style.display="block";var n,s=t.width;n=sf.popups.calculateRelativeBasedPosition(e,t.element),t.element.style.display=r,t.element.style.top=n.top+e.getBoundingClientRect().height-5+"px";var o=n.left-s+e.clientWidth;t.element.style.left=o<1?s+o-16+"px":o+-4+"px"}(this.options.target,this.dialogObj,this.parent),this.parent.notify("filterDialogCreated",e)},e.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},e.prototype.closeDialog=function(){if(this.dialogObj&&!this.dialogObj.isDestroyed){var e=this.options.columns.filter((function(e){return e.getFilterItemTemplate()})),t=this.parent.registeredTemplate;e.length&&!sf.base.isNullOrUndefined(t)&&t.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),this.parent.isReact&&(this.parent.destroyTemplate(["filterItemTemplate"]),this.parent.renderTemplates()),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),sf.base.remove(this.dlg),this.dlg=null,this.parent.notify("filter-dialog-close",{})}},e.prototype.clearFilter=function(e){var t={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify("filter-Prevent",t),t.cancel||this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})},e.prototype.btnClick=function(e){if(this.filterState){if("input"===e.target.tagName.toLowerCase()&&e.target.classList.contains("e-searchinput")){var t=e.target.value;"boolean"===this.options.column.type&&(""!==t&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(t.toLowerCase())?t=!0:""!==t&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(t.toLowerCase())&&(t=!1));var i={action:"filtering",filterCollection:{field:this.options.field,operator:this.options.isRemote?"string"===this.options.column.type?"contains":"equal":"date"===this.options.column.type||"datetime"===this.options.column.type||"boolean"===this.options.column.type?"equal":"contains",value:t,matchCase:!1,type:this.options.column.type},field:this.options.field};null!=t&&""!==t?this.isForeignColumn(this.options.column)?this.foreignFilter(i,t):this.options.handler(i):this.closeDialog()}else if(13===e.keyCode)this.fltrBtnHandler();else{var r=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===r?this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===r&&this.clearFilter()}this.closeDialog()}else"input"!==e.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog())},e.prototype.fltrBtnHandler=function(){var t=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i=t,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator;var s,o,a,l,h=this.searchBox.querySelector(".e-searchinput"),d=this.options.allowCaseSensitive,c={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:d,ignoreAccent:this.options.ignoreAccent},p=this.itemsCnt!==t.length&&this.itemsCnt-t.length<t.length;p&&""===h.value&&(r=this.isMenuNotEqual?"equal":"notequal",t=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),c.predicate=this.isMenuNotEqual?"or":"and",c.operator=r);var u=[];if(t.length!==this.itemsCnt||h.value&&""!==h.value){for(var f=0;f<t.length;f++){s=this.values[Ct(t[f],"e-ftrchk").getAttribute("uid")],l=sf.base.extend({},{value:s},c),s&&!s.toString().length&&(l.operator=p?"notequal":"equal"),""===s||sf.base.isNullOrUndefined(s)?u=u.concat(e.generateNullValuePredicates(c)):u.push(l);var g={instance:this,handler:this.fltrBtnHandler,arg1:l.field,arg2:l.predicate,arg3:l.operator,arg4:l.matchCase,arg5:l.ignoreAccent,arg6:l.value,cancel:!1};if(this.parent.notify("filter-Prevent",g),g.cancel)return}"date"!==this.options.type&&"datetime"!==this.options.type||(a=i.length-1,o=this.values[Ct(i[a],"e-ftrchk").getAttribute("uid")],sf.base.isNullOrUndefined(o)&&p&&u.push({field:c.field,matchCase:c.matchCase,operator:"equal",predicate:"and",value:null})),this.initiateFilter(u)}else this.clearFilter()},e.generateNullValuePredicates=function(e){var t=[];return"string"===e.type&&t.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),t.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),t},e.prototype.initiateFilter=function(e){var t,i=e[0];if(!sf.base.isNullOrUndefined(i)){t=i.ejpredicate?i.ejpredicate:new sf.data.Predicate(i.field,i.operator,i.value,!i.matchCase,i.ignoreAccent);for(var r=1;r<e.length;r++)t=void 0!==e[r].ejpredicate?t[e[r].predicate](e[r].ejpredicate):t[e[r].predicate](e[r].field,e[r].operator,e[r].value,!e[r].matchCase,e[r].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:sf.data.Predicate.or(t)};this.options.handler(n)}},e.prototype.isForeignColumn=function(e){return!!e.isForeignColumn&&e.isForeignColumn()},e.prototype.refreshCheckboxes=function(){var e=this,t=this.sInput.value,i=this.options.column,r=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),s=r.queries.filter((function(e){return e&&"onWhere"===e.fn}))[0];r.queries=[],n.queries=[];var o,a="string"!==this.options.type&&parseFloat(t)?parseFloat(t):t,l=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",h=this.options.ignoreAccent,d=this.isForeignColumn(i)?i.foreignKeyValue:i.field;a=""===a||void 0===a?void 0:a;var c=this.options.dataManager.adaptor.getModuleName;"boolean"===this.options.type&&(void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())&&c?(c(),a=!0):void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&c&&(c(),a=!1),l="equal"),"date"!==this.options.type&&"datetime"!==this.options.type||(a=this.valueFormatter.fromView(t,this.options.parserFn,this.options.type)),this.addDistinct(r);var p={requestType:"filtersearchbegin",filterModel:this,columnName:d,column:i,operator:l,matchCase:!0,ignoreAccent:h,filterChoiceCount:null,query:r,value:a};if(sf.base.isBlazor()&&!this.parent.isJsComponent){p.filterModel={}}this.parent.trigger("actionBegin",p,(function(c){if(c.operator=sf.base.isBlazor()&&"none"!==c.excelSearchOperator?c.excelSearchOperator:c.operator,o=new sf.data.Predicate(d,c.operator,a,c.matchCase,c.ignoreAccent),"date"===e.options.type||"datetime"===e.options.type){if(l="equal",sf.base.isNullOrUndefined(a)&&t.length)return;o=qt({field:d,operator:l,value:a,matchCase:!0,ignoreAccent:h},e.options.type)}t.length?(o=sf.base.isNullOrUndefined(s)?o:o.and(s.e),r.where(o)):sf.base.isNullOrUndefined(s)||r.where(s.e),c.filterChoiceCount=sf.base.isNullOrUndefined(c.filterChoiceCount)?1e3:c.filterChoiceCount;var p={};(sf.popups.showSpinner(e.spinner),e.renderEmpty=!1,e.isForeignColumn(i)&&t.length)?("result"in i.dataSource?new sf.data.DataManager(i.dataSource.result):i.dataSource).executeQuery(r).then((function(t){var r=e.options.column.columnData;e.options.column.columnData=t.result,e.parent.notify("generateQuery",{predicate:p,column:i}),p.predicate.predicates.length?n.where(p.predicate):e.renderEmpty=!0,e.options.column.columnData=r,n.take(c.filterChoiceCount),e.search(c,n)})):(r.take(c.filterChoiceCount),e.search(c,r))}))},e.prototype.search=function(e,t){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,t):this.processSearch(t)},e.prototype.getPredicateFromCols=function(t){for(var i=e.getPredicate(t),r=[],n={},s=void 0!==this.parent.getForeignKeyColumns,o=s?this.parent.getForeignKeyColumns():[],a=0,l=Object.keys(i);a<l.length;a++){var h=l[a],d=void 0;s&&this.parent.getColumnByField(h).isForeignColumn()&&(d=Nt(h,o)),d?(this.parent.notify("generateQuery",{predicate:n,column:d}),n.predicate.predicates.length&&r.push(sf.data.Predicate.or(n.predicate.predicates))):r.push(i[h])}return r.length&&sf.data.Predicate.and(r)},e.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new sf.data.Query},e.prototype.getAllData=function(){var e=this,t=this.getQuery();t.requiresCount(),this.addDistinct(t);var i={requestType:"filterchoicerequest",query:t,filterChoiceCount:null};if(!sf.base.isBlazor()||this.parent.isJsComponent){i.filterModel=this}this.parent.trigger("actionBegin",i,(function(i){i.filterChoiceCount=sf.base.isNullOrUndefined(i.filterChoiceCount)?1e3:i.filterChoiceCount,t.take(i.filterChoiceCount),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(i,t):e.processDataOperation(t,!0)}))},e.prototype.addDistinct=function(e){var t=sf.data.DataUtil.distinct(this.options.filteredColumns,"field");return t.indexOf(this.options.column.field)<=-1&&(t=t.concat(this.options.column.field)),e.distinct(t),e},e.prototype.filterEvent=function(e,t){var i=this,r=function(e,t){var i;i=function(e){var t=new sf.data.UrlAdaptor,i=new sf.data.DataManager({url:"",adaptor:new sf.data.UrlAdaptor}),r=t.processQuery(i,e);return JSON.parse(r.data)}(t);var r=new sf.data.Deferred;return i.dataSource=r.resolve,i.action=e,{state:i,deffered:r}}(e,t);this.parent.trigger("dataStateChange",r.state),r.deffered.promise.then((function(e){i.dataSuccess(e)}))},e.prototype.processDataOperation=function(e,t){var i=this;this.options.dataSource=this.options.dataSource instanceof sf.data.DataManager?this.options.dataSource:new sf.data.DataManager(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&t){var s="result"in this.options.column.dataSource?new sf.data.DataManager(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,r.push(s.executeQuery(this.foreignKeyQuery)),n.push((function(e){return i.foreignKeyData=e}))}r.push(this.options.dataSource.executeQuery(e)),n.push(this.dataSuccess.bind(this));var o=0;Promise.all(r).then((function(e){for(var t=0;t<e.length;t++)n[o++](e[t].result)}))},e.prototype.dataSuccess=function(t){this.fullData=t;var i={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",i),i.executeQuery){var r=new sf.data.Query;if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var n=this.parent.searchSettings,s=n.fields.length?n.fields:this.options.columns.map((function(e){return e.field}));r.search(n.key,s,n.operator,n.ignoreCase,n.ignoreAccent)}if(this.options.filteredColumns.length){for(var o=[],a=0;a<this.options.filteredColumns.length;a++){var l=this.options.filteredColumns[a];this.options.uid?(l.uid=l.uid||this.parent.getColumnByField(l.field).uid,l.uid!==this.options.uid&&o.push(this.options.filteredColumns[a])):l.field!==this.options.field&&o.push(this.options.filteredColumns[a])}var h=this.getPredicateFromCols(o);h&&r.where(h)}var d=new sf.data.DataManager(i.dataSource).executeLocal(r),c=this.options.column;this.filteredData=e.getDistinct(d,this.options.field,c,this.foreignKeyData).records||[]}var p=i.executeQuery?this.filteredData:i.dataSource;this.processDataSource(null,!0,p),this.sInput.focus();var u={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};if(!sf.base.isBlazor()||this.parent.isJsComponent){u.filterModel=this}this.parent.notify("cbox-filter-complete",u)},e.prototype.processDataSource=function(e,t,i){sf.popups.showSpinner(this.spinner),this.updateResult(),this.createFilterItems(i,t)},e.prototype.processSearch=function(e){this.processDataOperation(e)},e.prototype.updateResult=function(){this.result={};var e=this.getPredicateFromCols(this.options.filteredColumns),t=new sf.data.Query;e&&t.where(e);for(var i=0,r=new sf.data.DataManager(this.fullData).executeLocal(t);i<r.length;i++){var n=r[i];this.result[Ut(this.options.field,n)]=!0}},e.prototype.clickHandler=function(e){var t=e.target,i=Ct(t,"e-checkbox-wrapper");if(Ct(t,"e-searchbox")&&this.searchBoxClick(e),i){var r=i.querySelector(".e-selectall");r?this.updateAllCBoxes(!r.classList.contains("e-check")):function(e){var t=e.querySelector(".e-frame"),i=t.previousSibling;t.classList.contains("e-check")?(i.checked=!1,sf.base.classList(t,["e-uncheck"],["e-check"])):(i.checked=!0,sf.base.classList(t,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(Ct(i,"e-ftrchk"))},e.prototype.keyupHandler=function(e){this.setFocus(Ct(e.target,"e-ftrchk"))},e.prototype.setFocus=function(e){var t=this.dlg.querySelector(".e-chkfocus");t&&t.classList.remove("e-chkfocus"),e&&e.classList.add("e-chkfocus")},e.prototype.updateAllCBoxes=function(e){for(var t=0,i=[].slice.call(this.cBox.querySelectorAll(".e-frame"));t<i.length;t++){var r=i[t];Bt(r,e),Dt(r.previousSibling,e)}},e.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},e.prototype.createCheckbox=function(e,t,i){var r=t?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Dt(r.querySelector("input"),t);var n=r.querySelector(".e-label"),s=Gt({},i,{column:this.options.column,parent:this.parent});(n.innerHTML=!sf.base.isNullOrUndefined(e)&&e.toString().length?e:this.getLocalizedLabel("Blanks"),sf.base.addClass([n],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll"))&&(n.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate?(this.options.template(s,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):It(n,this.options.template(s,this.parent,"filterItemTemplate")));return r},e.prototype.updateIndeterminatenBtn=function(){var e,t=this.cBox.children.length-1,i=[],r=!1,n=this.cBox.querySelector(".e-selectall"),s=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;this.options.isResponsiveFilter||((e=this.dialogObj.btnObj[0]).disabled=!1);var o=n.previousSibling;Dt(o,!1),o.indeterminate=!1,t===s?(i=["e-check"],Dt(o,!0)):s?(i=["e-stop"],o.indeterminate=!0):(i=["e-uncheck"],r=!0,e&&(e.disabled=!0)),e&&(this.filterState=!e.disabled,e.dataBind()),sf.base.removeClass([n],["e-check","e-stop","e-uncheck"]),sf.base.addClass([n],i),this.parent.notify("refresh-cutsom-filter-ok-button",{disabled:r})},e.prototype.createFilterItems=function(e,t){var i,r,n=this.parent.createElement("div"),s=!1;this.options.isResponsiveFilter||(r=this.dialogObj.btnObj[0]);for(var o=-1,a=0;a<e.length;a++){var l=sf.base.getValue("ejValue",e[a]);(""===l||sf.base.isNullOrUndefined(l))&&(o+=1)}if(this.itemsCnt=-1!==o?e.length-o:e.length,e.length&&!this.renderEmpty){var h=this.getLocalizedLabel("SelectAll"),d=this.createCheckbox(h,!1,((i={})[this.options.field]=h,i)),c=Lt(Rt("cbox"),d,"e-ftrchk");c.querySelector(".e-frame").classList.add("e-selectall"),n.appendChild(c);var p=new sf.data.Predicate("field","equal",this.options.field);this.options.foreignKeyValue&&(p=p.or("field","equal",this.options.foreignKeyValue));var u=new sf.data.DataManager(this.options.filteredColumns).executeLocal((new sf.data.Query).where(p)).length,f=void 0;for(a=0;a<e.length;a++){var g=Rt("cbox");this.values[g]=sf.base.getValue("ejValue",e[a]);var m=sf.base.getValue(this.options.field,e[a]);this.options.formatFn&&(m=this.valueFormatter.toView(m,this.options.formatFn));var y={value:m,column:this.options.column,data:e[a]};if(this.parent.notify("filter-cbox-value",y),""===(m=y.value)||sf.base.isNullOrUndefined(m)){if(f)continue;f=!0}var b=this.createCheckbox(m,this.getCheckedState(u,this.values[g]),sf.base.getValue("dataObj",e[a]));n.appendChild(Lt(g,b,"e-ftrchk"))}this.cBox.innerHTML="",It(this.cBox,[].slice.call(n.children)),this.updateIndeterminatenBtn(),r&&(r.disabled=!1),s=!1}else n.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",It(this.cBox,[].slice.call(n.children)),r&&(r.disabled=!0),s=!0;r&&(this.filterState=!r.disabled,r.dataBind());var v={requestType:"filterchoicerequest",dataSource:this.renderEmpty||sf.base.isBlazor()&&this.parent.isServerRendered?[]:e};if(!sf.base.isBlazor()||this.parent.isJsComponent){v.filterModel=this}this.parent.notify("cbox-filter-complete",v),this.parent.notify("refresh-cutsom-filter-ok-button",{disabled:s}),sf.popups.hideSpinner(this.spinner)},e.prototype.getCheckedState=function(e,t){if(this.isFiltered&&e){var i=this.result[t];return"notequal"===this.options.operator?!i:i}return!0},e.getDistinct=function(e,t,i,r){for(var n,s=e.length,o=[],a={},l=!(!i||!i.isForeignColumn)&&i.isForeignColumn();s--;)if(!((n=Ut(t,n=e[s]))in a)){var h={};if(h.ejValue=n,a[n]=!0,l){var d=Ot(i,{},n,r)[0];sf.base.setValue("foreignKeyData",d,e[s]),n=sf.base.getValue(i.foreignKeyValue,d)}sf.base.setValue(t,sf.base.isNullOrUndefined(n)?null:n,h),sf.base.setValue("dataObj",e[s],h),o.push(h)}return sf.data.DataUtil.group(sf.data.DataUtil.sort(o,t,sf.data.DataUtil.fnAscending),"ejValue")},e.getPredicate=function(t){for(var i=sf.data.DataUtil.distinct(t,"field",!0)||[],r=[],n={},s=0;s<i.length;s++)0!==(r=new sf.data.DataManager(t).executeLocal((new sf.data.Query).where("field","equal",i[s].field))).length&&(n[i[s].field]=e.generatePredicate(r));return n},e.generatePredicate=function(t){var i,r,n=t?t.length:0;(r=e.updateDateFilter(t[0])).ignoreAccent=!sf.base.isNullOrUndefined(r.ignoreAccent)&&r.ignoreAccent,i="date"===r.type||"datetime"===r.type?qt(r,r.type):r.ejpredicate?r.ejpredicate:new sf.data.Predicate(r.field,r.operator,r.value,!e.getCaseValue(r),r.ignoreAccent);for(var s=1;s<n;s++)t[s]=e.updateDateFilter(t[s]),n>2&&s>1&&"or"===t[s].predicate?"date"===t[s].type||"datetime"===t[s].type?i.predicates.push(qt(t[s],t[s].type)):i.predicates.push(new sf.data.Predicate(t[s].field,t[s].operator,t[s].value,!e.getCaseValue(t[s]),t[s].ignoreAccent)):i="date"===t[s].type||"datetime"===t[s].type?"and"===t[s].predicate&&"equal"===t[s].operator?i.or(qt(t[s],t[s].type),t[s].type,t[s].ignoreAccent):i[t[s].predicate](qt(t[s],t[s].type),t[s].type,t[s].ignoreAccent):t[s].ejpredicate?i[t[s].predicate](t[s].ejpredicate):i[t[s].predicate](t[s].field,t[s].operator,t[s].value,!e.getCaseValue(t[s]),t[s].ignoreAccent);return i||null},e.getCaseValue=function(e){return sf.base.isNullOrUndefined(e.matchCase)?!("string"===e.type||sf.base.isNullOrUndefined(e.type)&&"string"==typeof e.value):e.matchCase},e.updateDateFilter=function(e){return("date"===e.type||"datetime"===e.type||e.value instanceof Date)&&(e.type=e.type||"date"),e},e}(),v=function(){function e(e,t){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=t,this.initDataManager(),this.parent.isDestroyed||"foreignKey"===this.getModuleName()||(this.parent.on("rows-added",this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on("rows-removed",this.removeRows,this),this.parent.on("datasource-modified",this.initDataManager,this),this.parent.on("destroy",this.destroy,this),this.parent.on("update-data",this.crudActions,this),this.parent.on("add-delete-Action",this.getData,this),this.parent.on("auto-col",this.refreshFilteredCols,this),this.parent.on("columns-prepared",this.refreshFilteredCols,this))}return e.prototype.reorderRows=function(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},e.prototype.getModuleName=function(){return"data"},e.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof sf.data.DataManager?e.dataSource:sf.base.isNullOrUndefined(e.dataSource)?new sf.data.DataManager:new sf.data.DataManager(e.dataSource),!e.isAngular||e.query instanceof sf.data.Query?(this.isQueryInvokedFromData=!0,e.query=e.query instanceof sf.data.Query?e.query:new sf.data.Query):e.setProperties({query:new sf.data.Query},!0)},e.prototype.generateQuery=function(e){var t=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)t.select(this.parent.getColumns().filter((function(e){return!(!0!==e.isPrimaryKey&&!1===e.visible||void 0===e.field)})).map((function(e){return e.field})));else if("Schema"===this.parent.columnQueryMode){for(var i=[],r=this.parent.columns,n=0;n<r.length;n++)i.push(r[n].field);t.select(i)}return this.filterQuery(t),this.searchQuery(t),this.aggregateQuery(t),this.sortQuery(t),Ht(this.parent)?this.virtualGroupPageQuery(t):this.pageQuery(t,e),this.groupQuery(t),t},e.prototype.aggregateQuery=function(e,t){for(var i=this.parent.aggregates,r=0;r<i.length;r++)for(var n=i[r],s=0;s<n.columns.length;s++)for(var o=n.columns[s],a=o.type instanceof Array?o.type:[o.type],l=0;l<a.length;l++)e.aggregate(a[l].toLowerCase(),o.field);return e},e.prototype.virtualGroupPageQuery=function(e){this.parent;if(e.queries.length)for(var t=0;t<e.queries.length;t++)"onPage"===e.queries[t].fn&&e.queries.splice(t,1);return e},e.prototype.pageQuery=function(e,t){var i=this.parent;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==t){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),e.queries.length)for(var r=0;r<e.queries.length;r++)"onPage"===e.queries[r].fn&&e.queries.splice(r,1);!sf.base.isNullOrUndefined(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",e):e.page(i.pageSettings.currentPage,i.pageSettings.pageSize)}return e},e.prototype.groupQuery=function(e){var t=this.parent;if(t.allowGrouping&&t.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=t.groupSettings.columns,r=0,n=i.length;r<n;r++){var s=this.getColumnByField(i[r]);s||this.parent.log("initial_action",{moduleName:"group",columnName:i[r]});var o=s.enableGroupByFormat,a=s.format;o?e.group(i[r],this.formatGroupColumn.bind(this),a):e.group(i[r],null)}}return e},e.prototype.sortQuery=function(e){var t=this.parent;if((t.allowSorting||t.allowGrouping)&&t.sortSettings.columns.length){for(var i=t.sortSettings.columns,r=[],n=i.length-1;n>-1;n--){if(!(a=this.getColumnByField(i[n].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:i[n].field}),e;a.setSortDirection(i[n].direction);var s=i[n].direction;a.sortComparer&&(this.parent.log("grid_sort_comparer"),s=this.isRemote()?i[n].direction:a.sortComparer.bind(a)),-1===t.groupSettings.columns.indexOf(i[n].field)?a.isForeignColumn()||a.sortComparer?e.sortByForeignKey(a.field,s,void 0,i[n].direction.toLowerCase()):e.sortBy(a.field,s):r.push({direction:s,field:a.field})}n=0;for(var o=r.length;n<o;n++)if("string"==typeof r[n].direction)e.sortBy(r[n].field,r[n].direction);else{var a=this.getColumnByField(r[n].field);e.sortByForeignKey(r[n].field,r[n].direction,void 0,a.getSortDirection().toLowerCase())}}return e},e.prototype.searchQuery=function(e,t,i){var r=this.parent.searchSettings,n=r.fields.length?r.fields:this.getSearchColumnFieldNames(),s=[],o=!1;if(this.parent.searchSettings.key.length){o=this.parent.getForeignKeyColumns().some((function(e){return n.indexOf(e.field)>-1}));var a=i?t.dataSource.adaptor:this.dataManager.adaptor;if(o||a.getModuleName&&"ODataV4Adaptor"===a.getModuleName()){n=i?[t.foreignKeyValue]:n;for(var l=0;l<n.length;l++){var h=i?t:this.getColumnByField(n[l]);h.isForeignColumn()&&!i?s=this.fGeneratePredicate(h,s):s.push(new sf.data.Predicate(n[l],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var d=sf.data.Predicate.or(s);d.key=r.key,e.where(d)}else e.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return e},e.prototype.filterQuery=function(e,t,i){var r,n=this.parent,s=[],o=[],a=this.parent.getForeignKeyColumns();if(n.allowFiltering&&n.filterSettings.columns.length){for(var l=t||n.filterSettings.columns,h={},d=0,c=n.getColumns();d<c.length;d++){h[(m=c[d]).field]=m.filter.type?m.filter.type:n.filterSettings.type}for(var p=[],u=[],f=0,g=l;f<g.length;f++){var m=g[f],y=n.getColumnByField(m.field);sf.base.isNullOrUndefined(m.type)&&y&&("date"===y.type||"datetime"===y.type)&&(m.type=n.getColumnByField(m.field).type),m.isForeignKey?p.push(m):u.push(m)}if(u.length){if("FilterBar"===n.filterSettings.type||"Menu"===n.filterSettings.type)for(var v=0,C=u.length;v<C;v++)u[v].uid=u[v].uid||this.parent.grabColumnByFieldFromAllCols(u[v].field).uid;for(var w=b.getPredicate(u),x=0,S=Object.keys(w);x<S.length;x++){var R=S[x];s.push(w[R])}}if(p.length)for(var I=0,F=p;I<F.length;I++){(m=F[I]).uid=m.uid||this.parent.grabColumnByFieldFromAllCols(m.field).uid;var z=this.parent.grabColumnByUidFromAllCols(m.uid);if(z||this.parent.log("initial_action",{moduleName:"filter",columnName:m.field}),z.isForeignColumn()&&Nt(m.field,a)&&!i)o.push(m),z.columnData.length||(r=!0),s=this.fGeneratePredicate(z,s);else{w=b.getPredicate(l);for(var M=0,T=Object.keys(w);M<T.length;M++){R=T[M];s.push(w[R])}}}s.length&&!r?e.where(sf.data.Predicate.and(s)):this.parent.notify("showEmptyGrid",{})}return e},e.prototype.fGeneratePredicate=function(e,t){var i={};return e&&(this.parent.notify("generateQuery",{predicate:i,column:e}),i.predicate.predicates.length&&t.push(i.predicate)),t},e.prototype.getData=function(e,t){var i=this;void 0===e&&(e={requestType:""});var r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(e,t,r).promise;var n=void 0;switch(e.requestType){case"delete":if(t=t||this.generateQuery(),1===Object.keys(e.data).length)n=this.dataManager.remove(r,e.data[0],t.fromTable,t);else{var s={addedRecords:[],deletedRecords:[],changedRecords:[]};s.deletedRecords=e.data,n=this.dataManager.saveChanges(s,r,t.fromTable,t.requiresCount())}break;case"save":sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.notify("offset",e),t=t||this.generateQuery(),e.index=sf.base.isNullOrUndefined(e.index)?0:e.index,n=this.dataManager.insert(e.data,t.fromTable,t,e.index)}return e.promise=n,!n||Array.isArray(n)||n.hasOwnProperty("deletedRecords")?this.insert(t,e):sf.base.isBlazor()?n.then((function(r){return i.insert(t,e)})).catch((function(e){return null})):n.then((function(r){return i.insert(t,e)}))},e.prototype.insert=function(e,t){return"save"===t.requestType&&this.parent.notify("recordAdded",t),this.executeQuery(e)},e.prototype.executeQuery=function(e){var t=this;if(this.dataManager.ready){var i=new sf.data.Deferred;return this.dataManager.ready.then((function(r){t.dataManager.executeQuery(e).then((function(e){i.resolve(e)}))})).catch((function(e){i.reject(e)})),i.promise}return this.dataManager.executeQuery(e)},e.prototype.formatGroupColumn=function(e,t){this.parent;var r=this.serviceLocator,n=this.getColumnByField(t),s=e;return n.type||(n.type=s.getDay?s.getHours()>0||s.getMinutes()>0||s.getSeconds()>0||s.getMilliseconds()>0?"datetime":"date":i(e)),sf.base.isNullOrUndefined(n.getFormatter())&&Et(r,n),h.prototype.toView(e,n.getFormatter())},e.prototype.crudActions=function(e){var t=this.generateQuery(),i=null,r="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,t,n),e.requestType){case"save":sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.notify("offset",e),i=this.dataManager.update(n,e.data,t.fromTable,t,e.previousData)}e[r]=i||e[r],this.parent.notify("crud-Action",e)},e.prototype.saveChanges=function(e,t,i,r){if(void 0===r&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){this.getStateEventArgument(r);var n=new sf.data.Deferred,s={requestType:"batchsave",changes:e,key:t,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger("dataSourceChanged",s),n.promise}if(sf.base.isBlazor()&&this.parent.isServerRendered){for(var o=0;o<e.changedRecords.length;o++){s={data:e.changedRecords[o]};this.parent.notify("offset",s),e.changedRecords[o]=s.data}for(o=0;o<e.addedRecords.length;o++){s={data:e.addedRecords[o]};this.parent.notify("offset",s),e.addedRecords[o]=s.data}}return this.dataManager.saveChanges(e,t,r.fromTable,r,i)},e.prototype.getKey=function(e){if(e&&e.length)return e[0]},e.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},e.prototype.addRows=function(e){for(var t=e.records.length;t>0;t--)this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[t-1])},e.prototype.removeRows=function(e){var t=this.dataManager.dataSource.json;this.dataManager.dataSource.json=t.filter((function(t,i){return-1===e.records.indexOf(t)}))},e.prototype.getColumnByField=function(e){var t;return this.parent.columnModel.some((function(i){return t=i,i.field===e}))&&t},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off("rows-added",this.addRows),this.parent.off("rows-removed",this.removeRows),this.parent.off("datasource-modified",this.initDataManager),this.parent.off("destroy",this.destroy),this.parent.off("update-data",this.crudActions),this.parent.off("add-delete-Action",this.getData),this.parent.off("auto-col",this.refreshFilteredCols),this.parent.off("columns-prepared",this.refreshFilteredCols))},e.prototype.getState=function(){return this.dataState},e.prototype.setState=function(e){return this.dataState=e},e.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},e.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},e.prototype.getStateEventArgument=function(e){var t=new sf.data.UrlAdaptor,i=new sf.data.DataManager({url:"",adaptor:new sf.data.UrlAdaptor}),r=t.processQuery(i,e),n=JSON.parse(r.data);return sf.base.extend(n,r.pvtData)},e.prototype.eventPromise=function(e,t,i){var r,n=this,s=e;r=this.getStateEventArgument(t);var o=new sf.data.Deferred,a=new sf.data.Deferred;if(void 0!==e.requestType&&!1!==this.dataState.isDataChanged)if(r.action=e,"save"===e.requestType||"delete"===e.requestType){var l=e;l.key=i;l.promise=a.promise,l.state=r,this.setState({isPending:!0,resolver:a.resolve}),s.endEdit=a.resolve,s.cancelEdit=a.reject,this.parent.trigger("dataSourceChanged",l),a.promise.then((function(e){n.setState({isPending:!0,resolver:o.resolve,group:r.group,aggregates:r.aggregates}),"save"===l.requestType&&n.parent.notify("recordAdded",l),n.parent.trigger("dataStateChange",r)})).catch((function(){}))}else this.setState({isPending:!0,resolver:o.resolve,group:r.group,aggregates:r.aggregates}),this.parent.trigger("dataStateChange",r);else this.setState({}),o.resolve(this.parent.dataSource);return o},e.prototype.getSearchColumnFieldNames=function(){for(var e=[],t=0,i=this.parent.getColumns();t<i.length;t++){var r=i[t];r.allowSearching&&!sf.base.isNullOrUndefined(r.field)&&e.push(r.field)}return e},e.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function(e,t){for(var i=0;i<t.length;i++)t[i].uid=t[i].isForeignKey?Nt(t[i].field,e.getForeignKeyColumns()).uid:e.getColumnByField(t[i].field).uid}(this.parent,this.parent.filterSettings.columns)},e}(),C=function(){function e(e,t){sf.base.merge(this,e),this.parent=t}return e.prototype.clone=function(){var t=new e({});return sf.base.merge(t,this),t.cells=this.cells.map((function(e){return e.clone()})),t},e.prototype.setRowValue=function(e){if(this.parent){var t=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(t,e)}},e.prototype.setCellValue=function(e,t){if(this.parent&&!(this.data[e].toString()===t.toString())){var i=this.parent.getPrimaryKeyFieldNames()[0],r=this.data[i];this.parent.setCellValue(r,e,t),this.makechanges(i,this.data)}},e.prototype.makechanges=function(e,t){this.parent&&this.parent.getDataModule().dataManager.update(e,t)},e}(),w=function(){function e(e){this.isSpanned=!1,this.isRowSpanned=!1,sf.base.merge(this,e)}return e.prototype.clone=function(){var t=new e({});return sf.base.merge(t,this),t},e}(),x=function(){function e(e,t){this.serviceLocator=e,this.parent=t}return e.prototype.render=function(e,i,r,n){var s,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(i.cells[r].cellType||t.Data),a=i.cells[r].cellSpan?i.cells[r].cellSpan:e.colSpan+r<=i.cells.length?e.colSpan:i.cells.length-r,l=e.rowSpan,h=0;if(i.index>0){var d=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[i.index-1].isDataRow?this.parent.getRowsObject()[i.index].cells:this.parent.getRowsObject()[i.index-1].cells,c=i.cells[r];s=d.filter((function(e){return e.column.uid===c.column.uid}))[0]}for(var p=s&&s.colSpanRange>1&&s.rowSpanRange>1?s.colSpanRange:a,u=r+1;u<r+p&&u<i.cells.length;u++)!1===i.cells[u].visible?h++:i.cells[u].isSpanned=!0;if(h>0){for(u=r+a;u<r+a+h&&u<i.cells.length;u++)i.cells[u].isSpanned=!0;r+a+h>=i.cells.length&&(a-=r+a+h-i.cells.length)}return i.cells[r].cellSpan&&(i.data[e.column.field]=i.cells[r].spanText,n=o.render(i.cells[r],i.data,{index:sf.base.isNullOrUndefined(i.index)?"":i.index.toString()})),a>1&&sf.base.attributes(n,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(sf.base.attributes(n,{rowspan:l.toString(),"aria-rowspan":l.toString()}),i.cells[r].isRowSpanned=!0,i.cells[r].rowSpanRange=Number(l),a>1&&(i.cells[r].colSpanRange=Number(a))),i.index>0&&s.rowSpanRange>1&&(i.cells[r].isSpanned=!0,i.cells[r].rowSpanRange=Number(s.rowSpanRange-1),i.cells[r].colSpanRange=s.rowSpanRange>0?s.colSpanRange:1),!this.parent.enableColumnVirtualization||i.cells[r].cellSpan||this.containsKey(e.column.field,e.data[e.column.field])||this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),n},e.prototype.backupMergeCells=function(e,t,i){this.setMergeCells(this.generteKey(e,t),i)},e.prototype.generteKey=function(e,t){return e+"__"+t.toString()},e.prototype.splitKey=function(e){return e.split("__")},e.prototype.containsKey=function(e,t){return this.getMergeCells().hasOwnProperty(this.generteKey(e,t))},e.prototype.getMergeCells=function(){return this.parent.mergeCells},e.prototype.setMergeCells=function(e,t){this.parent.mergeCells[e]=t},e.prototype.updateVirtualCells=function(e){for(var t=this.getMergeCells(),i=0,r=Object.keys(t);i<r.length;i++){var n=r[i],s=t[n],o=this.splitKey(n),a=this.getIndexFromAllColumns(o[0]),l=this.parent.getColumnIndexesInView(),h=s-(l[0]-a);if(a<l[0]&&h>1)for(var d=0,c=e;d<c.length;d++){var p=c[d];if(p.data[o[0]].toString()===o[1].toString()){p.cells[0].cellSpan=h,p.cells[0].spanText=o[1];break}}}return e},e.prototype.getIndexFromAllColumns=function(e){return ft(this.parent.getVisibleColumns(),(function(t,i){if(t.field===e)return i}))[0]},e}(),S=function(){function e(e,t,i){this.isSpan=!1,this.cellType=t,this.serviceLocator=e,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return e.prototype.render=function(e,t,i,r,n){return this.refreshRow(e,t,i,r,n)},e.prototype.refresh=function(e,t,i,r,n){i&&(e.data=Gt({},e.changes),this.refreshMergeCells(e));var s=this.parent.element.querySelector("[data-uid="+e.uid+"]"),o=this.refreshRow(e,t,r,n,null,i),a=[].slice.call(o.cells);s.innerHTML="";for(var l=0,h=a;l<h.length;l++){var d=h[l];s.appendChild(d)}},e.prototype.refreshRow=function(e,i,r,n,s,o){var a=sf.base.isNullOrUndefined(s)?this.element.cloneNode():s,l={data:e.data},h={data:e.data},d=sf.base.extend({},r,{}),c=this.parent.getColumns().filter((function(e){return"checkbox"===e.type&&e.field}))[0],p=!1;c&&(p=Ut(c.field,l.data)),e.isDataRow&&(e.isSelected=this.parent.getSelectedRowIndexes().indexOf(e.index)>-1||p),e.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0,-1===this.parent.getSelectedRowIndexes().indexOf(e.index)&&this.parent.getSelectedRowIndexes().push(e.index)),this.buildAttributeFromRow(a,e),sf.base.attributes(a,d),mt(a,e.attributes);for(var u=this.serviceLocator.getService("cellRendererFactory"),f=function(i,r){var n=e.cells[i];n.isSelected=e.isSelected,n.isColumnSelected=n.column.isSelected;var s=u.getCellRenderer(e.cells[i].cellType||t.Data),l={index:sf.base.isNullOrUndefined(e.index)?"":e.index.toString()};e.isExpand&&e.cells[i].cellType===t.DetailExpand&&(l.class=g.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var d=s.render(e.cells[i],e.data,l,e.isExpand,o);if(e.cells[i].cellType!==t.Filter){if(e.cells[i].cellType===t.Data||e.cells[i].cellType===t.CommandColumn){g.parent.trigger("queryCellInfo",sf.base.extend(h,{cell:d,column:n.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[i].foreignKeyData,requestType:g.parent.requestTypeAction}));var c=!1;if(e.index>0&&g.isSpan){var p=g.parent.groupSettings.columns.length>0&&!g.parent.getRowsObject()[e.index-1].isDataRow?g.parent.getRowsObject()[e.index].cells:g.parent.getRowsObject()[e.index-1].cells,f=p.filter((function(t){return t.column.uid===e.cells[i].column.uid}))[0];c=f.isRowSpanned?f.isRowSpanned:f.rowSpanRange>1}if(h.colSpan>1||e.cells[i].cellSpan>1||h.rowSpan>1||c)g.isSpan=!0,d=new x(g.serviceLocator,g.parent).render(h,e,i,d)}e.cells[i].isSpanned||a.appendChild(d)}},g=this,m=0,y=e.cells.length;m<y;m++)f(m);var b={row:a,rowHeight:this.parent.rowHeight};if(e.isDataRow&&(this.parent.trigger("rowDataBound",sf.base.extend(l,b)),this.parent.childGrid||this.parent.isRowDragable()||this.parent.detailTemplate)){var v=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];v&&v.classList.add("e-detailrowvisible")}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),e.cssClass&&a.classList.add(e.cssClass),e.lazyLoadCssClass&&a.classList.add(e.lazyLoadCssClass),!(this.parent.enableColumnVirtualization&&0!==this.parent.frozenColumns)&&this.parent.element.scrollHeight>this.parent.height&&this.parent.aggregates.length)for(m=0;m<this.parent.aggregates.length;m++){if(this.parent.aggregates[m].properties.columns[0].footerTemplate){var C=a.querySelectorAll(".e-summarycell");if(C.length){var w=C[C.length-1];sf.base.addClass([w],["e-lastsummarycell"]);var S=C[0];sf.base.addClass([S],["e-firstsummarycell"])}}}return a},e.prototype.refreshMergeCells=function(e){for(var t=0,i=e.cells;t<i.length;t++){i[t].isSpanned=!1}return e},e.prototype.buildAttributeFromRow=function(e,t){var i={},r="aria-rowindex",n="data-uid",s="aria-selected",o=[];t.isDataRow&&o.push("e-row"),t.isAltRow&&o.push("e-altrow"),sf.base.isNullOrUndefined(t.index)||(i[r]=t.index),t.rowSpan&&(i.rowSpan=t.rowSpan),t.uid&&(i[n]=t.uid),t.isSelected&&(i[s]=!0),!1===t.visible&&o.push("e-hide"),i.class=o,mt(e,i)},e}(),R=function(){function e(e){this.parent=e}return e.prototype.generateRows=function(e,t){var i=[],r=this.parent.enableVirtualization&&t?t.startIndex:0;r=this.parent.enableInfiniteScrolling&&t?this.getInfiniteIndex(t):r;for(var n=0,s=Object.keys(e).length;n<s;n++,r++)i[n]=this.generateRow(e[n],r);return i},e.prototype.ensureColumns=function(){var e=[];if(this.parent.detailTemplate||this.parent.childGrid){var i={};this.parent.notify("detail-indentcell-info",i),e.push(this.generateCell(i,null,t.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,t.RowDragIcon)),e},e.prototype.generateRow=function(e,t,i,r,n,s,o){var a={foreignKeyData:{}};a.uid=sf.base.isBlazor()&&this.parent.isServerRendered?this.parent.getRowUid("grid-row"):Rt("grid-row"),a.data=e,a.index=t,a.indent=r,a.tIndex=s,a.isDataRow=!0,a.parentGid=n,a.parentUid=o,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?a.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[t]&&(a.isExpand=this.parent.expandedRows[t].isExpand)),a.cssClass=i,a.isAltRow=!!this.parent.enableAltRow&&t%2!=0,a.isAltRow=!!this.parent.enableAltRow&&t%2!=0,sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization&&this.parent.selectionModule.checkBoxState?(a.isSelected=this.parent.selectionModule.checkBoxState,a.isSelected&&-1===this.parent.selectionModule.selectedRowIndexes.indexOf(t)&&this.parent.selectionModule.selectedRowIndexes.push(t)):a.isSelected=this.parent.getSelectedRowIndexes().indexOf(t)>-1,this.refreshForeignKeyRow(a);var l=this.ensureColumns(),h=sf.base.isBlazor()?new C(a):new C(a,this.parent);return h.cells="Right"===this.parent.getFrozenMode()?this.generateCells(a).concat(l):l.concat(this.generateCells(a)),h},e.prototype.refreshForeignKeyRow=function(e){for(var t=this.parent.getForeignKeyColumns(),i=0;i<t.length;i++)sf.base.setValue(t[i].field,Ot(t[i],e.data),e.foreignKeyData)},e.prototype.generateCells=function(e){for(var i=this.parent.getColumns(),r=[],n=0;n<i.length;n++)r.push(this.generateCell(i[n],e.uid,sf.base.isNullOrUndefined(i[n].commands)?void 0:t.CommandColumn,null,n,e.foreignKeyData));return r},e.prototype.generateCell=function(e,i,r,n,s,o){var a={visible:e.visible,isDataCell:!sf.base.isNullOrUndefined(e.field||e.template),isTemplate:!sf.base.isNullOrUndefined(e.template),rowID:i,column:e,cellType:sf.base.isNullOrUndefined(r)?t.Data:r,colSpan:n,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&sf.base.getValue(e.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=s),new w(a)},e.prototype.refreshRows=function(e){for(var t=0;t<e.length;t++)this.refreshForeignKeyRow(e[t]),e[t].cells=this.generateCells(e[t]);return e},e.prototype.getInfiniteIndex=function(e){return"infiniteScroll"===e.requestType||"delete"===e.requestType||"add"===e.action?e.startIndex:0},e}(),I=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),F=function(){function e(e){this.parent=e}return e.prototype.getData=function(){for(var e=this,t=[],i=this.parent.aggregates.slice(),r=0;r<i.length;r++){var n=i[r].columns.filter((function(t){return!(t.footerTemplate||t.groupFooterTemplate||t.groupCaptionTemplate)||e.columnSelector(t)}));n.length&&t.push({columns:n})}return t},e.prototype.columnSelector=function(e){return void 0!==e.footerTemplate},e.prototype.getColumns=function(e,t){var i=[];if(this.parent.allowGrouping)for(var r=0;r<this.parent.groupSettings.columns.length;r++)i.push(new c({}));return(this.parent.detailTemplate||!sf.base.isNullOrUndefined(this.parent.childGrid)||this.parent.isRowDragable()&&!e)&&i.push(new c({})),i.push.apply(i,this.parent.getColumns()),t=t?t+this.parent.getIndentCount():t,sf.base.isNullOrUndefined(e)?i:i.slice(e,t)},e.prototype.generateRows=function(e,t,i,r,n){if(0===e.length&&(void 0===t||!t.count))return[];for(var s=this.buildSummaryData(e,t),o=[],a=this.getData(),l=0;l<a.length;l++)o.push(this.getGeneratedRow(a[l],s[l],t?t.level:void 0,i,r,t?t.parentUid:void 0,n));return o},e.prototype.getGeneratedRow=function(e,i,r,n,s,o,a){var l=[],h=this.getIndentByLevel(r),d=!sf.base.isNullOrUndefined(this.parent.childGrid),c=this.parent.getIndentCount();this.parent.isRowDragable()&&(h=["e-indentcelltop"]);for(var p=a||this.getColumns(n,s),u=0;u<p.length;u++)l.push(this.getGeneratedCell(p[u],e,u>=c?this.getCellType():u<this.parent.groupSettings.columns.length?t.Indent:t.DetailFooterIntent,h[u],d));var f=new C({data:i,attributes:{class:"e-summaryrow"}});return f.cells=l,sf.base.isBlazor()&&this.parent.isServerRendered&&!sf.base.isNullOrUndefined(o)?f.uid=this.parent.getRowUid("grid-row"):f.uid=Rt("grid-row"),f.parentUid=o,f.visible=l.some((function(e){return e.isDataCell&&e.visible})),f},e.prototype.getGeneratedCell=function(e,t,i,r,n){var s=t.columns.filter((function(t){return t.columnName===e.field}))[0],o={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};r&&(o.class=r),sf.base.isNullOrUndefined(r)&&n&&(o.class="e-detailindentcelltop");var a={visible:e.visible,isDataCell:!sf.base.isNullOrUndefined(s),isTemplate:s&&!sf.base.isNullOrUndefined(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate),column:s||{},attributes:o,cellType:i};return a.column.headerText=e.headerText,new w(a)},e.prototype.buildSummaryData=function(e,t){for(var i=[],r=this.getData(),n={},s=0;s<r.length;s++){n={};for(var o=r[s].columns,a=0;a<o.length;a++)n=this.setTemplate(o[a],t&&t.aggregates?t:e,n);i.push(n)}return i},e.prototype.getIndentByLevel=function(e){return this.parent.groupSettings.columns.map((function(){return"e-indentcelltop"}))},e.prototype.setTemplate=function(e,t,i){var r=e.type,n={},s=e.getFormatter()||function(e){return e},o=t;r instanceof Array||(r=[e.type]);for(var a=0;a<r.length;a++){var l=e.field+" - "+r[a].toLowerCase(),h=e.columnName,d="Custom"!==r[a]&&o.aggregates&&l in o.aggregates?o.aggregates[l]:Ft(r[a],o.aggregates?o:t,e,this.parent);i[h]=i[h]||{},i[h][l]=d,i[h][r[a]]=sf.base.isNullOrUndefined(d)?" ":s(d),o.field&&(i[h].field=o.field,i[h].key=o.key)}return n.format=e.getFormatter(),e.setTemplate(n),i},e.prototype.getCellType=function(){return t.Summary},e}(),z=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return I(i,e),i.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},i.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map((function(t,i){return i<=e-1?"":"e-indentcelltop"}))},i.prototype.getCellType=function(){return t.GroupSummary},i}(F),M=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return I(i,e),i.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},i.prototype.getData=function(){return[e.prototype.getData.call(this).reduce((function(e,t){return e.columns=e.columns.concat(t.columns),e}),{columns:[]})]},i.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},i.prototype.getCellType=function(){return t.CaptionSummary},i}(F),T=(y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),A=function(e){function i(t){var i=e.call(this,t)||this;return i.rows=[],i.index=0,i.parent=t,i.summaryModelGen=new z(t),i.captionModelGen=new M(t),i}return T(i,e),i.prototype.generateRows=function(t,i){if(0===this.parent.groupSettings.columns.length)return e.prototype.generateRows.call(this,t,i);this.isInfiniteScroll="infiniteScroll"===i.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var r=0,n=t.length;r<n;r++)this.getGroupedRecords(0,t[r],t.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},i.prototype.getGroupedRecords=function(e,t,i,r,n,s,o){var a,l=this.isInfiniteScroll&&this.prevKey===t.key,h=i;if(sf.base.isNullOrUndefined(t.items))if(sf.base.isNullOrUndefined(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,e,r,this.rows.length,o));else for(var d=0,c=t.length;d<c;d++)this.getGroupedRecords(e,t[d],t.level,r,e,this.rows.length,o);else{var p=this.generateCaptionRow(t,e,r,n,s,o);if(l||(this.rows=this.rows.concat(p)),t.items&&t.items.length&&this.getGroupedRecords(e+1,t.items,t.items.level,r,e+1,this.rows.length,p.uid),this.parent.aggregates.length){var u=this.rows.length;(a=this.rows).push.apply(a,this.summaryModelGen.generateRows(t,{level:h,parentUid:p.uid}));for(var f=u-1;f>=0;f--)if(this.rows[f].isCaptionRow)this.rows[f].aggregatesCount=this.rows.length-u;else if(!this.rows[f].isCaptionRow&&!this.rows[f].isDataRow)break}}this.prevKey=t.key},i.prototype.getCaptionRowCells=function(e,i,r){var n=[],s=[],o=this.parent.getColumnByField(e),a=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter((function(t){return t.field===e}))[0]);var l=this.parent.groupSettings.columns.length,h=this.parent;if(!this.parent.enableColumnVirtualization||-1!==a.indexOf(i)){for(var d=0;d<i;d++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,t.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+l+(h.detailTemplate||h.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var c=this.captionModelGen.generateRows(r)[0];sf.base.extend(r,c.data);var p=0;c.cells.some((function(e,t){return p=t,e.visible&&e.isDataCell})),s=c.cells.slice(p).filter((function(e){return e.visible})),c.visible&&s[0].column.field===this.parent.getVisibleColumns()[0].field&&(s=s.slice(1)),1===this.parent.getVisibleColumns().length&&(s=[]),i-=s.length}for(var u=this.parent.enableColumnVirtualization?this.parent.getColumns():[o],f=!0,g=0;g<u.length;g++){var m=f&&-1!==a.indexOf(i);m&&(f=!1);var y=!this.parent.enableColumnVirtualization||m?t.GroupCaption:t.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&y===t.GroupCaption?i+l:i,h.isRowDragable()&&i++,n.push(this.generateCell(o,null,y,i))}return n.push.apply(n,s),n},i.prototype.generateCaptionRow=function(e,t,i,r,n,s){var o={},a=this.parent.getColumnByField(e.field);o.data=sf.base.extend({},e),a&&(o.data.field=e.field),o.isDataRow=!1,o.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),o.parentGid=i,o.childGid=r,o.tIndex=n,o.isCaptionRow=!0,o.parentUid=s,o.gSummary=sf.base.isNullOrUndefined(e.items.records)?e.items.length:e.items.records.length,o.uid=sf.base.isBlazor()&&this.parent.isServerRendered?this.parent.getRowUid("grid-row"):Rt("grid-row");var l=new C(o);return l.indent=t,this.getForeignKeyData(l),l.cells=this.getCaptionRowCells(e.field,t,l.data),l},i.prototype.getForeignKeyData=function(e){var t=e.data,i=this.parent.getColumnByField(t.field);if(i&&i.isForeignColumn&&i.isForeignColumn()){var r=sf.base.isNullOrUndefined(t.key)?"":i.valueAccessor(i.foreignKeyValue,Ot(i,{},t.key)[0],i);sf.base.setValue("foreignKey",r,e.data)}},i.prototype.generateDataRows=function(e,t,i,r,n){for(var s=[],o=this.parent.getColumnIndexesInView(),a=0,l=e.length;a<l;a++,r++){s[a]=this.generateRow(e[a],this.index,a?void 0:"e-firstchildrow",t,i,r,n);for(var h=0;h<t;h++)this.parent.enableColumnVirtualization&&-1===o.indexOf(t)||s[a].cells.unshift(this.generateIndentCell());this.index++}return s},i.prototype.generateIndentCell=function(){return this.generateCell({},null,t.Indent)},i.prototype.refreshRows=function(e){for(var t=this.parent.getColumnIndexesInView(),i=0;i<e.length;i++)if(e[i].isDataRow){e[i].cells=this.generateCells(e[i]);for(var r=0;r<e[i].indent;r++)this.parent.enableColumnVirtualization&&-1===t.indexOf(e[i].indent)||e[i].cells.unshift(this.generateIndentCell())}else{var n=this.generateCaptionRow(e[i].data,e[i].indent);e[i].cells=n.cells}return e},i.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var t=this.rows[e];if(t.isCaptionRow)for(var i=e+1;i<this.rows.length;i++){var r=this.rows[i];t.uid===r.parentUid&&(this.rows[i].visible=t.isExpand)}}},i}(R),k=function(){function e(e,t){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=function(e){i.parent.notify("columnDrop",{target:e.target,droppedElement:e.droppedElement}),sf.base.remove(e.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.mutableData=!1,this.rafCallback=function(e){var t=e;return function(){if(i.parent.isFrozenGrid()&&i.parent.enableVirtualization){var r=[].slice.call(i.parent.getMovableVirtualContent().querySelectorAll(".e-row")),n=[].slice.call(i.parent.getFrozenVirtualContent().querySelectorAll(".e-row"));if(i.isLoaded=!!r&&r.length===n.length,i.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&i.isLoaded){var s=[].slice.call(i.parent.getMovableVirtualHeader().querySelectorAll(".e-row")),o=[].slice.call(i.parent.getFrozenVirtualHeader().querySelectorAll(".e-row"));i.isLoaded=s.length===o.length}}if(i.ariaService.setBusy(i.getPanel().querySelector(".e-content"),!1),!i.parent.isDestroyed){var a=i.rows.slice(0);if(i.parent.isFrozenGrid()&&(a=e.isFrozen?i.freezeRows:e.renderFrozenRightContent?i.parent.getFrozenRightRowsObject():i.movableRows),i.parent.notify(p,{rows:a,args:t}),i.isLoaded&&i.parent.trigger("dataBound",{},(function(){i.parent.allowTextWrap&&i.parent.notify("freezerender",{case:"textwrap"})})),t){var l=(t.requestType||"").toLowerCase()+"-complete";i.parent.notify(l,t),"batchsave"===e.requestType&&(e.cancel=!1,i.parent.trigger("actionComplete",e))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.mutableData=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.enableVirtualization||this.parent.groupSettings.enableLazyLoading||this.parent.on("column-visible-changed",this.setVisible,this),this.parent.on("colgroup-refresh",this.colGroupRefresh,this),this.parent.on(u,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on("beforecellfocused",this.beforeCellFocused,this),this.parent.on("destroy",this.droppableDestroy,this))}return e.prototype.beforeCellFocused=function(e){!e.byKey||"upArrow"!==e.keyArgs.action&&"downArrow"!==e.keyArgs.action?this.pressedKey=void 0:this.pressedKey=e.keyArgs.action},e.prototype.renderPanel=function(){var e=this.parent,t=this.parent.element.querySelector(".e-gridcontent");if(t)return this.ariaService.setOptions(this.parent.element.querySelector(".e-content"),{busy:!1}),void this.setPanel(t);t=this.parent.createElement("div",{className:"e-gridcontent"});var i=this.parent.createElement("div",{className:"e-content"});this.ariaService.setOptions(i,{busy:!1}),t.appendChild(i),this.setPanel(t),e.element.appendChild(t)},e.prototype.renderTable=function(){var e=this.getPanel(),t=e.querySelector(".e-virtualtable"),i=e.querySelector(".e-virtualtrack");!this.parent.enableVirtualization||sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)||sf.base.isBlazor()&&(!sf.base.isBlazor()||this.parent.isServerRendered)||(sf.base.remove(t),sf.base.remove(i)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector(".e-table")),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},e.prototype.createContentTable=function(e){var t=this.getPanel().firstElementChild;sf.base.isBlazor()||this.getTable()&&sf.base.remove(this.getTable());var i=t.querySelector(".e-table")?t.querySelector(".e-table"):this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector("colgroup").cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement("tbody")),t.appendChild(i),t},e.prototype.refreshContentRows=function(e){var t=this;void 0===e&&(e={});var i=this.parent;if(0!==i.currentViewData.length){var r=this.currentMovableRows||i.currentViewData,n=this.parent.contentModule,s=i.isReact&&!sf.base.isNullOrUndefined(i.rowTemplate),o=s?i.createElement("tbody"):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=sf.base.extend([],r));var a,l,h,d=s?i.createElement("tbody"):document.createDocumentFragment(),c=i.getColumns(),u=i.getFrozenColumns(),f=this.parent.isFrozenGrid(),g=new S(this.serviceLocator,null,this.parent),m=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;this.rowElements=[],this.rows=[];var y,b,v,w=this.getPanel().querySelector(".e-frozencontent"),R=this.getPanel().querySelector(".e-movablecontent"),I=this.getPanel().querySelector(".e-content");Ht(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some((function(t){return e.requestType===t}))&&this.emptyVcRows();if(sf.base.isBlazor()&&this.parent.isServerRendered){v=this.generator.generateRows(r,e),this.parent.enableVirtualization&&(this.prevInfo=this.prevInfo?this.prevInfo:e.virtualInfo,this.prevInfo=e.virtualInfo.sentinelInfo&&"Y"===e.virtualInfo.sentinelInfo.axis&&this.currentInfo.page&&this.currentInfo.page!==e.virtualInfo.page?this.currentInfo:e.virtualInfo),this.rows=v,this.freezeRows=v,this.rowElements=[].slice.call(this.getTable().querySelectorAll("tr.e-row[data-uid]")),u&&(this.movableRows=v.map((function(e){var t=new C(e);return t.cells=e.cells.slice(u,e.cells.length),e.cells=e.cells.slice(0,u),t})),this.freezeRowElements=this.rowElements),this.isLoaded=!0,this.parent.hideSpinner(),e.isFrozen=0!==this.parent.getFrozenColumns()&&!e.isFrozen;var F=sf.base.extend({rows:this.rows},e);if(this.getTable().querySelector(".e-emptyrow")&&(sf.base.remove(this.getTable().querySelector(".e-emptyrow")),sf.base.isNullOrUndefined(this.getTable().querySelectorAll(".e-table > tbody")[1])||sf.base.remove(this.getTable().querySelectorAll(".e-table > tbody")[1])),this.parent.notify("contentcolgroup",{}),this.rafCallback(F)(),u&&(I.style.overflowY="hidden",w.style.height=R.offsetHeight-At()+"px",R.style.overflowY="auto"!==this.parent.height?"scroll":"auto",w.style.borderRightWidth="1px",this.parent.notify(p,{rows:this.movableRows,args:sf.base.extend({},F,{isFrozen:!1})})),!this.parent.isCheckBoxSelection&&"Multiple"!==this.parent.selectionSettings.type||!this.parent.isPersistSelection&&!this.parent.enableVirtualization){"Normal"!==this.parent.editSettings.mode||sf.base.isNullOrUndefined(e.editRowIndex)||this.parent.selectRow(e.editRowIndex)}if(this.parent.enableVirtualization&&!this.parent.getHeaderContent().querySelectorAll(".e-check").length){for(var z=this.parent.getRows().filter((function(e){return e.getAttribute("aria-selected")})).map((function(e){return e.getAttribute("data-uid")})),M=this.parent.getRows().filter((function(e){return null===e.getAttribute("aria-selected")})).map((function(e){return e.getAttribute("data-uid")})),T=0;T<z.length;T++)if(!sf.base.isNullOrUndefined(this.parent.getRowObjectFromUID(z[T]))&&!this.parent.getRowObjectFromUID(z[T]).isSelected){this.parent.getRowElementByUID(z[T]).removeAttribute("aria-selected"),sf.base.isNullOrUndefined(this.parent.getRowElementByUID(z[T]).querySelector(".e-check"))||sf.base.removeClass([this.parent.getRowElementByUID(z[T]).querySelector(".e-check")],["e-check"]);for(var A=0;A<this.parent.getRowElementByUID(z[T]).children.length;A++)this.parent.getRowElementByUID(z[T]).children[A].classList.remove("e-selectionbackground","e-active")}for(T=0;T<M.length;T++)if(!sf.base.isNullOrUndefined(this.parent.getRowObjectFromUID(M[T]))&&this.parent.getRowObjectFromUID(M[T]).isSelected){this.parent.getRowElementByUID(M[T]).setAttribute("aria-selected","true"),sf.base.isNullOrUndefined(this.parent.getRowElementByUID(M[T]).querySelector(".e-frame"))||sf.base.addClass([this.parent.getRowElementByUID(M[T]).querySelector(".e-frame")],["e-check"]);for(A=0;A<this.parent.getRowElementByUID(M[T]).children.length;A++)this.parent.getRowElementByUID(M[T]).children[A].classList.add("e-selectionbackground","e-active")}}}else{this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis&&(v=this.parent.contentModule.generateRows(r,e),e.renderMovableContent=!0),v=this.parent.contentModule.generateRows(r,e)):(v=this.checkCache(v,e),this.isAddRows||this.useGroupCache||(v=this.generator.generateRows(r,e))),this.setGroupCache(v,e),this.parent.notify("set-infinite-cache",{isInfiniteScroll:m,modelData:v,args:e});var k=v[0].cells[0].index;f&&(b=n.setTbody(v,e),y=n.getTbody(b));var E="Left-Right"===this.parent.getFrozenMode()&&"frozen-right"===b;if("infiniteScroll"!==e.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!e.isFrozen&&!E){var P=[];for(T=0;T<this.parent.registeredTemplate.template.length;T++)for(A=0;A<this.parent.registeredTemplate.template[T].rootNodes.length;A++)sf.base.isNullOrUndefined(this.parent.registeredTemplate.template[T].rootNodes[A].parentNode)&&P.push(this.parent.registeredTemplate.template[T]);this.parent.destroyTemplate(["template"],P)}if(this.parent.isReact&&"infiniteScroll"!==e.requestType&&!e.isFrozen&&(this.parent.destroyTemplate(["columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate"]),this.parent.renderTemplates()),this.parent.enableColumnVirtualization)new x(this.serviceLocator,this.parent).updateVirtualCells(v);f||(this.tbody=this.getTable().querySelector("tbody"));var D=0,L=!0;if(Ht(i)&&i.vcRows.length){var B=sf.base.isNullOrUndefined(e.virtualInfo.offsets)?sf.base.isNullOrUndefined(e.scrollTop)?0:e.scrollTop.top:e.virtualInfo.offsets.top;if(0!==B){for(var O=i.vGroupOffsets,N=i.pageSettings.pageSize/2,q=Object.keys(O).map((function(e){return O[e]})),H=0;H<q.length;H++)if(B<q[H]){if(sf.base.isNullOrUndefined(e.virtualInfo)||"up"!==e.virtualInfo.direction){e.virtualInfo.blockIndexes=0===H||1===H?[1,2]:[H,H+1],D=0===H||1===H?0:H*N;break}e.virtualInfo.blockIndexes=0===H||1===H?[1,2]:[H,H+1],D=0===H||1===H?0:H*N;break}B+this.contentPanel.firstElementChild.offsetHeight!==this.contentPanel.firstElementChild.scrollHeight||e.rowObject||(L=!1)}}var U=i.frozenRows&&!i.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===e.requestType;if(i.frozenRows&&"virtualscroll"===e.requestType&&"X"===e.virtualInfo.sentinelInfo.axis||U){var V=e.virtualInfo.blockIndexes,G=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],U&&(e.virtualInfo.page=1);var j=U?this.initialPageRecords:r,K=this.vgenerator.generateRows(j,e);K.splice(this.parent.frozenRows);for(T=0;T<this.parent.frozenRows;T++)K[T].cells.splice(0,this.parent.getFrozenColumns()),a=g.render(K[T],c),d.appendChild(a);e.virtualInfo.blockIndexes=V,e.virtualInfo.page=G,U&&1===e.virtualInfo.page&&v.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(d,v,g,e,r,c);T=D;for(var W=v.length;T<W;T++)if(this.rows.push(v[T]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.setRowsInLazyGroup(v[T],T),!sf.base.isNullOrUndefined(v[T].indent))){if(this.setInfiniteVisibleRows(e,v[T],b),Ht(i)&&this.rows.length>=i.pageSettings.pageSize&&L)break;if(i.rowTemplate){var _=i.element.id+"rowTemplate",Q=void 0;if(i.isReact){var J=i.frozenRows&&T<i.frozenRows,X=sf.base.extend({index:T},r[T]);i.getRowTemplate()(X,i,"rowTemplate",_,null,null,J?d:o),i.renderTemplates()}else Q=i.getRowTemplate()(sf.base.extend({index:T},r[T]),i,"rowTemplate",_);if(i.isReact||"TBODY"!==Q[0].tagName)i.frozenRows&&T<i.frozenRows?a=i.isReact?d.lastElementChild:It(d,Q):(i.isReact||(a=It(o,Q)),h=i.isReact?o.lastElementChild:a.lastElementChild);else{for(A=0;A<Q.length;A++){var Y="tr"===Q[A].nodeName.toLowerCase();(Y||Q[A].querySelectorAll&&Q[A].querySelectorAll("tr").length)&&(a=Y?Q[A]:Q[A].querySelector("tr"))}i.frozenRows&&T<i.frozenRows?d.appendChild(a):o.appendChild(a)}F={data:v[T].data,row:h||a};this.parent.trigger("rowDataBound",F)}else{a=g.render(v[T],c);var Z=this.ensureFrozenHeaderRender(e);i.frozenRows&&T<i.frozenRows&&!m&&"virtualscroll"!==e.requestType&&Z&&this.ensureVirtualFrozenHeaderRender(e)?d.appendChild(a):o.appendChild(a),v[T].isExpand&&i.notify("expandchildgrid",a.cells[i.groupSettings.columns.length])}v[T].isDataRow&&this.rowElements.push(a),this.ariaService.setOptions(this.getTable(),{colcount:i.getColumns().length.toString()})}if(f&&n.splitRows(b),i.frozenRows&&"virtualscroll"!==e.requestType&&!m&&this.ensureVirtualFrozenHeaderRender(e)||"virtualscroll"===e.requestType&&e.virtualInfo.sentinelInfo&&"X"===e.virtualInfo.sentinelInfo.axis)if(l=f?n.getFrozenHeader(b):i.getHeaderTable().querySelector("tbody"),s){var $=l.parentElement;sf.base.remove(l),$.appendChild(d)}else l.innerHTML="",l.appendChild(d);!i.enableVirtualization&&i.frozenRows&&0===k&&I.offsetHeight===Number(i.height)&&(I.style.height=I.offsetHeight-l.offsetHeight+"px"),sf.base.isBlazor()&&!this.parent.isJsComponent||(e.rows=this.rows.slice(0)),f&&n.setIsFrozen(e,b),this.index=k,ut((function(){t.parent.notify("beforeFragAppend",e);var r=t.parent.enableVirtualization&&t.parent.isFrozenGrid();if(t.parent.enableVirtualization||m||(t.parent.isFrozenGrid()?(sf.base.remove(y),y=t.parent.createElement("tbody")):(sf.base.remove(t.tbody),t.tbody=t.parent.createElement("tbody"))),!f||r||t.parent.enableInfiniteScrolling)if(i.rowTemplate&&sf.base.updateBlazorTemplate(i.element.id+"rowTemplate","RowTemplate",i),r){if(e.renderFrozenRightContent){var s=i.getContent().querySelector(".e-frozen-right-content").querySelector("tbody");t.appendContent(s,o,e)}else e.renderMovableContent?(t.appendContent(R.querySelector("tbody"),o,e),e.renderMovableContent=!1):t.appendContent(w.querySelector("tbody"),o,e);t.parent.getFrozenColumns()||n.renderNextFrozentPart(e,b)}else!sf.base.isNullOrUndefined(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling?(t.isAddRows=!1,t.parent.notify("remove-infinite-rows",{args:e}),t.parent.notify("append-infinite-content",{tbody:y||t.tbody,frag:o,args:e,rows:t.rows,rowElements:t.rowElements,visibleRows:t.visibleRows,tableName:b}),!u&&f&&(("Left-Right"===i.getFrozenMode()||"frozen-left"!==b&&"frozen-right"!==b)&&("Left-Right"!==i.getFrozenMode()||"frozen-left"!==b&&"movable"!==b)||t.refreshContentRows(sf.base.extend({},e)))):(t.useGroupCache=!1,t.appendContent(t.tbody,o,e));else t.appendContent(y,o,e,b);u&&n.renderNextFrozentPart(e,b),o=null}),this.rafCallback(sf.base.extend({},e)))}}},e.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},e.prototype.appendContent=function(e,t,i,r){this.parent.isReact&&!sf.base.isNullOrUndefined(this.parent.rowTemplate)?this.getTable().appendChild(t):(e.appendChild(t),this.getTable().appendChild(e))},e.prototype.setRowsInLazyGroup=function(e,t){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(e,t)},e.prototype.setGroupCache=function(e,t){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:t,data:e})},e.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&("reorder"===e.requestType||"refresh"===e.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},e.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&"delete"===e.requestType)},e.prototype.checkCache=function(e,t){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===t.requestType){var i=t.isFrozen?1:0,r=this.parent.isFrozenGrid();if(this.isAddRows=!sf.base.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage]),r&&!sf.base.isNullOrUndefined(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){var n=r?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];e=1===this.parent.pageSettings.currentPage?n.slice(this.parent.frozenRows):n}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===t.requestType||"columnstate"===t.requestType||"reorder"===t.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===t.requestType)):null},e.prototype.setInfiniteVisibleRows=function(e,t,i){var r=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(r?"frozen-left"===i||"Right"===this.parent.getFrozenMode()&&"frozen-right"===i?this.visibleFrozenRows.push(t):"movable"===i?this.visibleRows.push(t):this.rightFreezeRows.push(t):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(t))},e.prototype.getCurrentBlockInfiniteRecords=function(e){var t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.isFrozenGrid(),r=this.parent.getRows(),n=parseInt(r[this.parent.frozenRows].getAttribute("aria-rowindex"),10),s=Math.ceil((n+1)/this.parent.pageSettings.pageSize);n=parseInt(r[r.length-1].getAttribute("aria-rowindex"),10);var o=Math.ceil(n/this.parent.pageSettings.pageSize);if(i){for(var a=e?0:1,l=s;l<=o;l++)t=t.length?t.concat(this.infiniteCache[l][a]):this.infiniteCache[l][a];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1][a].slice(0,this.parent.frozenRows).concat(t))}else{for(l=s;l<=o;l++)t=t.length?t.concat(this.infiniteCache[l]):this.infiniteCache[l];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}}return t},e.prototype.getReorderedVFRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},e.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},e.prototype.virtualFrozenHdrRefresh=function(e,t,i,r,n,s){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===r.requestType||"refresh"===r.requestType)){var o=void 0,a=[];this.parent.isFrozenGrid()?(this.currentMovableRows=n,a=this.getReorderedVFRows(r)):a=this.getReorderedRows(r);for(var l=0;l<a.length;l++)o=i.render(a[l],s),e.appendChild(o);1===r.virtualInfo.page&&t.splice(0,this.parent.frozenRows),r.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}},e.prototype.getInfiniteRows=function(){var e=[],t=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),r=0;r<i.length;r++)e=t?e.concat(this.infiniteCache[i[r]][0]):e.concat(this.infiniteCache[i[r]]);else e=t?this.visibleFrozenRows:this.visibleRows;return e},e.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[]},e.prototype.getPanel=function(){return this.contentPanel},e.prototype.setPanel=function(e){this.contentPanel=e},e.prototype.getTable=function(){return this.contentTable},e.prototype.setTable=function(e){this.contentTable=e},e.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.parent.getFrozenColumns()?this.freezeRows:this.rows},e.prototype.getMovableRows=function(){var e=this.getInfiniteMovableRows();return e.length?e:this.movableRows},e.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},e.prototype.getMovableRowElements=function(){return this.rowElements},e.prototype.setRowElements=function(e){this.rowElements=e},e.prototype.getColGroup=function(){return this.colgroup},e.prototype.setColGroup=function(e){return sf.base.isNullOrUndefined(e)||(e.id="content-"+e.id),this.colgroup=e},e.prototype.setVisible=function(e){var t=this.parent;sf.base.isBlazor()&&t.isServerRendered&&this.parent.notify("setvisibility",e);var i,r=this.parent.isFrozenGrid(),n=t.getFrozenColumns(),s=[];if(r){var o=this.freezeRows,a=this.movableRows,l=o.length,h=void 0,d=[];"Left-Right"===t.getFrozenMode()&&(d=t.getFrozenRightRowsObject());for(var c=0,p=void 0;c<l;c++){h=a[c].cells.length;var u=d.length?d[c].cells.length:0;p=o[c].clone();for(var f=0;f<h;f++)p.cells.push(a[c].cells[f]);for(var g=0;g<u;g++)p.cells.push(d[c].cells[g]);s.push(p)}}else s=this.getRows();s.some((function(e){return e.isDataRow&&(i=e),e.isDataRow}));var m=!0;!t.groupSettings.columns.length&&i&&(m=!1);for(var y=t.getDataRows(),b=this.infiniteRowVisibility(),v=b||this.rows.filter((function(e){return!e.isDetailRow})),C=0,w=e.length;C<w;C++){var x=e[C],S=this.parent.getNormalizedColumnIndex(x.uid),R=this.parent.getColumnIndexByUid(x.uid),I=!0===x.visible?"":"none";if(-1!==S&&i&&S<i.cells.length)if(r)if("movable"!==x.getFreezeTableName())if("frozen-right"===x.getFreezeTableName()){R=S-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount();var F=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("colgroup");sf.base.setStyleAttribute(F.childNodes[S],{display:I}),v=t.getFrozenRightRowsObject(),y=t.getFrozenRightDataRows()}else{sf.base.setStyleAttribute(this.getColGroup().childNodes[S],{display:I});var z=this.infiniteRowVisibility(!0);v=z||this.freezeRows,y=t.getDataRows()}else{var M=t.getContent().querySelector(".e-movablecontent").querySelector("colgroup");R=S=S-n-this.parent.getFrozenLeftColumnsCount(),sf.base.setStyleAttribute(M.childNodes[S],{display:I}),y=t.getMovableDataRows();var T=this.infiniteRowVisibility();v=T||this.movableRows}else sf.base.setStyleAttribute(this.getColGroup().childNodes[S],{display:I});m||this.setDisplayNone(y,R,I,v),!this.parent.invokedFromMedia&&x.hideAtMedia&&this.parent.updateMediaColumns(x),this.parent.invokedFromMedia=!1}m?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify("partial-refresh",{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify("partial-refresh",{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify("partial-refresh",{rows:v,args:{}})},e.prototype.setDisplayNone=function(e,t,i,r){for(var n=Object.keys(e),s=0;s<n.length;s++){var o=e[n[s]].querySelectorAll("td.e-rowcell")[t];if(e[n[s]].querySelectorAll("td.e-rowcell").length&&o)if(sf.base.setStyleAttribute(e[n[s]].querySelectorAll("td.e-rowcell")[t],{display:i}),e[n[s]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&sf.base.removeClass([e[n[s]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),this.parent.isRowDragable()){var a=this.parent.getFrozenColumns()?t:t+1;r[n[s]].cells[a].visible=""===i}else r[n[s]].cells[t].visible=""===i}this.parent.notify("infinite-show-hide",{visible:i,index:t,isFreeze:this.isInfiniteFreeze})},e.prototype.infiniteRowVisibility=function(e){var t;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,t=this.parent.infiniteScrollSettings.enableCache?e?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():e?this.visibleFrozenRows:this.visibleRows),t},e.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=void 0;e=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector("colgroup").cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},e.prototype.getHeaderColGroup=function(){return sf.base.isBlazor()?this.parent.getHeaderTable().querySelector("colgroup").cloneNode(!0):this.parent.element.querySelector(".e-gridheader").querySelector("colgroup").cloneNode(!0)},e.prototype.initializeContentDrop=function(){var e=this.parent;this.droppable=new sf.base.Droppable(e.element,{accept:".e-dragclone",drop:this.drop})},e.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},e.prototype.canSkip=function(e,t,i){return sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(e.visible)||t.cells[i].visible===e.visible},e.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new A(this.parent):new R(this.parent)},e.prototype.renderEmpty=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&this.parent.frozenRows||(this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector("tbody").innerHTML=""))},e.prototype.setSelection=function(e,t,i){this.parent.notify("set-freeze-selection",{uid:e,set:t,clearAll:i});var r=this.parent.isFrozenGrid();if(!r||!this.parent.enableVirtualization){if(r)for(var n=this.getMovableRows().filter((function(t){return i||e===t.uid})),s=0;s<n.length;s++)n[s].isSelected=t;for(var o=this.getRows().filter((function(t){return i||e===t.uid})),a=0;a<o.length;a++){o[a].isSelected=t;for(var l=o[a].cells,h=0;h<l.length;h++)l[h].isSelected=t}}},e.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),this.parent.getDataRows()[e]},e.prototype.getInfiniteRowIndex=function(e){if(this.parent.infiniteScrollSettings.enableCache){var t=this.parent.frozenRows,i=t>e?0:t,r=parseInt(this.parent.getRows()[i].getAttribute("aria-rowindex"),10);e=t>e?e:e-r+t}return e},e.prototype.getVirtualRowIndex=function(e){return e},e.prototype.getMovableRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),this.parent.getMovableDataRows()[e]},e.prototype.enableAfterRender=function(e){"group"===e.module&&e.enable&&(this.generator=this.getModelGenerator())},e.prototype.setRowObjects=function(e){this.rows=e},e.prototype.immutableModeRendering=function(e){var t=this;void 0===e&&(e={});var i=this.parent;i.hideSpinner();var r=i.getPrimaryKeyFieldNames()[0],n={},s={},o=[],a={},l=i.getRowsObject().slice(),h=this.getBatchEditedRecords(r,l),d={},c=0!==Object.keys(h).length;if(i.getContent().querySelector(".e-emptyrow")||"reorder"===e.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(0===i.currentViewData.length)return;var p={},u=i.createElement("tbody"),f=i.currentViewData,g=[].slice.call(this.getTable().querySelector("tbody").children);if(this.prevCurrentView.length){var m=this.prevCurrentView.length,y=f.length;if(m===y)for(var b=0;b<y;b++)"Batch"===this.parent.editSettings.mode&&g[b].classList.contains("e-insertedrow")?(g.splice(b,1),--b):(s[f[b][r]]=n[this.prevCurrentView[b][r]]=b,d[b]=f[b][r],p[l[b].uid]=g[b],a[b]=this.prevCurrentView[b][r]);else{for(b=0;b<y;b++)s[f[b][r]]=b,d[b]=f[b][r];for(b=0;b<m;b++)"Batch"===this.parent.editSettings.mode&&g[b].classList.contains("e-insertedrow")?(g.splice(b,1),--b):(p[l[b].uid]=g[b],n[this.prevCurrentView[b][r]]=b,a[b]=this.prevCurrentView[b][r])}}for(b=0;b<f.length;b++){var v=n[f[b][r]];if(sf.base.isNullOrUndefined(v)){var C=new S(this.serviceLocator,null,i),w=this.generator.generateRows([f[b]]);o.push(w[0]);R=C.render(w[0],i.getColumns());u.appendChild(R),this.refreshImmutableContent(b,R,o[b])}else{var x=!1;this.mutableData&&(x=this.objectEqualityChecker(this.prevCurrentView[b],f[b]));var R=p[l[v].uid];if(o.push(l[v]),this.rowElements[b]&&this.rowElements[b].getAttribute("data-uid")===o[b].uid&&(c&&sf.base.isNullOrUndefined(h[d[b]])||!c&&(x||this.prevCurrentView[b]===f[b]))){v!==b&&this.refreshImmutableContent(b,R,o[b]),u.appendChild(R);continue}(c&&!sf.base.isNullOrUndefined(h[d[b]])||!this.mutableData&&f[b]!==this.prevCurrentView[v]||this.mutableData&&!x)&&l[v].setRowValue(f[b]),u.appendChild(R),this.refreshImmutableContent(b,R,o[b])}}if(this.rows=o,this.rowElements=[].slice.call(u.children),sf.base.remove(this.getTable().querySelector("tbody")),this.getTable().appendChild(u),this.parent.trigger("dataBound",{},(function(){t.parent.allowTextWrap&&t.parent.notify("freezerender",{case:"textwrap"})})),e){var I=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(I,e)}}},e.prototype.objectEqualityChecker=function(e,t){for(var i=Object.keys(e),r=!0,n=0;n<i.length;n++)if(e[i[n]]!==t[i[n]]){r=!1;break}return r},e.prototype.getBatchEditedRecords=function(e,t){var i={},r=this.parent.getBatchChanges(),n=[],s=[];Object.keys(r).length&&(n=r.changedRecords,s=r.addedRecords);var o={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:t,args:o}),s.length&&("Bottom"===this.parent.editSettings.newRowPosition?t.splice(t.length-1,s.length):o.cancel||t.splice(0,s.length));for(var a=0;a<n.length;a++)i[n[a][e]]=a;return i},e.prototype.refreshImmutableContent=function(e,t,i){i.isAltRow=!!this.parent.enableAltRow&&e%2!=0,i.isAltRow?t.classList.add("e-altrow"):t.classList.remove("e-altrow"),i.index=e,i.edit=void 0,i.isDirty=!1,t.setAttribute("aria-rowindex",e.toString()),this.updateCellIndex(t,e)},e.prototype.updateCellIndex=function(e,t){for(var i=0;i<e.cells.length;i++)e.cells[i].setAttribute("index",t.toString())},e}(),E=function(){function e(e,t){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(e){var t=i.parent,r=i.draggable.currentStateTarget,n=Ct(r,"e-headercell");if(!t.allowReordering&&!t.allowGrouping||!sf.base.isNullOrUndefined(n)&&n.querySelectorAll(".e-checkselectall").length>0)return!1;var s=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),o=r.classList.contains("e-headercell")?r:n;if(!o||!t.allowReordering&&o.classList.contains("e-stackedheadercell"))return!1;var a,l=o.offsetHeight,h=o.querySelector(".e-headercelldiv")||o.querySelector(".e-stackedheadercelldiv");if(h){if(a=o.querySelector(".e-stackedheadercelldiv")?t.getStackedHeaderColumnByHeaderText(h.innerText.trim(),t.columns):t.getColumnByUid(h.getAttribute("e-mappinguid")),i.column=a,i.column.lockColumn)return!1;s.setAttribute("e-mappinguid",i.column.uid)}if(a&&!sf.base.isNullOrUndefined(a.headerTemplate))if(sf.base.isNullOrUndefined(a.headerTemplate))s.innerHTML=a.headerTemplate;else{var d=t.getColumnIndexByField(a.field);It(s,a.getHeaderTemplate()(sf.base.extend({index:d},a),t,"headerTemplate"))}else s.innerHTML=h?a.headerText:o.firstElementChild.innerHTML;return s.style.width=o.offsetWidth+"px",s.style.height=o.offsetHeight+"px",s.style.lineHeight=(l-6).toString()+"px",t.element.appendChild(s),s},this.dragStart=function(e){var t=i.parent;t.element.querySelector(".e-gridpopup").style.display="none",t.notify("columnDragStart",{target:i.draggable.currentStateTarget,column:i.column,event:e.event}),sf.base.isBlazor()&&e.bindEvents(e.dragElement)},this.drag=function(e){var t=i.parent,r=e.target;if(r){var n=sf.base.closest(r,".e-grid"),s=i.parent.element.querySelector(".e-cloneproperties");if(!(n&&n.getAttribute("id")===t.element.getAttribute("id")||(sf.base.classList(s,["e-notallowedcur"],["e-defaultcur"]),t.allowReordering&&(t.element.querySelector(".e-reorderuparrow").style.display="none",t.element.querySelector(".e-reorderdownarrow").style.display="none"),t.groupSettings.allowReordering)))return;t.notify("columnDrag",{target:e.target,column:i.column,event:e.event})}},this.dragStop=function(e){var t,r=i.parent;r.element.querySelector(".e-gridpopup").style.display="none",(!Ct(e.target,"e-headercell")&&!Ct(e.target,"e-groupdroparea")||!r.allowReordering&&Ct(e.target,"e-headercell")||!e.helper.getAttribute("e-mappinguid")&&Ct(e.target,"e-groupdroparea"))&&(sf.base.remove(e.helper),t=!0),r.notify("column-drag-stop",{target:e.target,event:e.event,column:i.column,cancel:t})},this.drop=function(e){var t=i.parent,r=e.droppedElement.getAttribute("e-mappinguid"),n=sf.base.closest(e.target,".e-grid");sf.base.remove(e.droppedElement),n&&n.getAttribute("id")!==t.element.getAttribute("id")||!t.allowReordering&&!t.allowGrouping||t.notify("header-drop",{target:e.target,uid:r,droppedElement:e.droppedElement})},this.parent=e,this.serviceLocator=t,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),this.parent.isDestroyed||(this.parent.enableColumnVirtualization||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount()||this.parent.on("column-visible-changed",this.setVisible,this),this.parent.on("column-position-changed",this.colPosRefresh,this),this.parent.on("initial-end",this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(u,this.updateCustomResponsiveToolbar,this))}return e.prototype.renderPanel=function(){var e=this.parent.element.querySelector(".e-gridheader"),t=null!=e;e=t?e:this.parent.createElement("div",{className:"e-gridheader"});var i=t?e.querySelector(".e-headercontent"):this.parent.createElement("div",{className:"e-headercontent"});this.toggleStackClass(e),e.appendChild(i),this.setPanel(e),t||this.parent.element.appendChild(e)},e.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector(".e-table")),this.parent.getFrozenColumns()||this.parent.getFrozenRightColumnsCount()||this.parent.getFrozenLeftColumnsCount()||(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify("header-refreshed",{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})},e.prototype.getPanel=function(){return this.headerPanel},e.prototype.setPanel=function(e){this.headerPanel=e},e.prototype.getTable=function(){return this.headerTable},e.prototype.setTable=function(e){this.headerTable=e},e.prototype.getColGroup=function(){return this.colgroup},e.prototype.setColGroup=function(e){return this.colgroup=e},e.prototype.getRows=function(){return this.getTable().tHead.rows},e.prototype.createHeaderTable=function(){var e=sf.base.isBlazor()&&0!==this.parent.frozenRows,t=this.createTable(),i=this.getPanel().querySelector(".e-headercontent");return e||i.appendChild(t),i},e.prototype.createHeader=function(e,i){void 0===e&&(e=null);var r=sf.base.isBlazor()&&0!==this.parent.frozenRows,n=this.parent,s=n.isFrozenGrid();sf.base.isBlazor()&&!n.isJsComponent||!this.getTable()||s||sf.base.remove(this.getTable());n.getColumns();var o=this.getPanel().querySelector(".e-headercontent"),a=r?e||o.querySelector(".e-table"):this.parent.createElement("table",{className:"e-table",attrs:{cellspacing:"0.25px",role:"grid"}}),l=i||(n.getFrozenLeftCount()?"frozen-left":"frozen-right"),h=this.createHeaderContent(l),d=h.thead,c=this.parent.createElement("tbody",{className:this.parent.frozenRows?"":"e-hide"});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var p,u=this.parent.createElement("colgroup"),f=this.parent.createElement("tr"),g=this.rows=h.rows,m=(new S(this.serviceLocator,t.Header,this.parent),0),y=g.length;m<y;m++)for(var b=0,v=g[m].cells.length;b<v;b++){g[m].cells[b];p=this.parent.createElement("td"),f.appendChild(p)}return(n.allowFiltering||n.allowSorting||n.allowGrouping)&&a.classList.add("e-sortfilter"),this.updateColGroup(u),r||c.appendChild(f),a.appendChild(this.setColGroup(u)),a.appendChild(d),r||a.appendChild(c),a.appendChild(this.caption),this.ariaService.setOptions(a,{colcount:n.getColumns().length.toString()}),a},e.prototype.createTable=function(e){return void 0===e&&(e=null),this.createHeader(e)},e.prototype.createHeaderContent=function(e){var i=this.parent,r=1,n=i.getFrozenMode(),s=i.getColumns(),o=this.parent.createElement("thead"),a=this.parent.createElement("tr",{className:"e-columnheader"}),l=new S(this.serviceLocator,t.Header,i);l.element=a;var h,d=[];this.colDepth=function(e){for(var t=0,i=0;i<e.length;i++){var r=Kt(e[i],0);t<r&&(t=r)}return t+1}(i.columns);for(var c=0,p=this.colDepth;c<p;c++)d[c]=this.generateRow(c),d[c].cells=[];"Right"!==n&&(d=this.ensureColumns(d)),d=this.getHeaderCells(d,e),"Right"===n&&(r=0,d=this.ensureColumns(d));var u=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&d[0].cells[r]){var f=d[0].cells[r].column.getFreezeTableName();"movable"===f||"Left-Right"===n&&"frozen-right"===f?"Right"===n?d[0].cells.pop():d[0].cells.shift():u||"frozen-left"!==f?"Right"===n&&"frozen-right"===f&&(d[0].cells[d[0].cells.length-1].column.freeze="Right"):d[0].cells[0].column.freeze="frozen-left"===f?"Left":"Right"}for(c=0,p=this.colDepth;c<p;c++)h=l.render(d[c],s),this.parent.rowHeight&&h.querySelector(".e-headercell")&&(h.style.height=this.parent.rowHeight+"px"),o.appendChild(h);return{thead:o,rows:d}},e.prototype.updateColGroup=function(e){var t,i=this.parent.getColumns(),r=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(i=sf.base.extend([],this.parent.getColumns())).splice(0,this.parent.getFrozenColumns()),e.id=this.parent.element.id+"colGroup",this.parent.allowGrouping)for(var n=0,s=this.parent.groupSettings.columns.length;n<s;n++)this.parent.enableColumnVirtualization&&-1===r.indexOf(n)||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(n=0,s=i.length;n<s;n++)t=this.parent.createElement("col"),!1===i[n].visible&&sf.base.setStyleAttribute(t,{display:"none"}),e.appendChild(t);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),e},e.prototype.ensureColumns=function(e){for(var i=this.parent,r=this.parent.getColumnIndexesInView(),n=0,s=e.length;n<s;n++){if(i.allowGrouping)for(var o=0,a=i.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===r.indexOf(o)||e[n].cells.push(this.generateCell({},t.HeaderIndent));if(i.detailTemplate||i.childGrid){var l={};this.parent.notify("detail-indentcell-info",l),e[n].cells.push(this.generateCell(l,t.DetailHeader))}i.isRowDragable()&&e[n].cells.push(this.generateCell({},t.RowDragHIcon))}return e},e.prototype.getHeaderCells=function(e,t){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<r.length;n++)this.lockColsRendered=!1,e=this.appendCells(r[n],e,0,0===n,!1,n===r.length-1,i,t);n=0;for(var s=r.length;n<s;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[n],e,0,0===n,!1,n===s-1,i,t);return e},e.prototype.appendCells=function(e,i,r,n,s,o,a,l){var h,d=o?"e-lastcell":"",c=this.parent.isFrozenGrid(),p=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,u=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered,f=this.parent.getContent().querySelector(".e-movablescrollbar");if(c&&f&&this.parent.enableColumnVirtualization&&(h=f.scrollLeft),e.columns){this.isFirstCol=!1;var g=this.getCellCnt(e,0);if(g){var m=this.getStackedLockColsCount(e,0),y=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==m||this.lockColsRendered&&g-m!=0,b=c&&this.ensureStackedFrozen(e.columns,l,!1);(!c&&y||b)&&i[r].cells.push(new w({cellType:t.StackedHeader,column:e,colSpan:this.getColSpan(g,m,e.columns,l,c)}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var v=0;v<e.columns.length;v++)i=this.appendCells(e.columns[v],i,r+1,n,0===v,v===e.columns.length-1&&o,a,l);if(this.lockColsRendered){v=0;for(var C=e.columns.length;v<C;v++){var x=this.isFirstCol=e.columns[v].visible&&!this.isFirstCol&&1!==C,S=v===C-1;i=this.appendCells(e.columns[v],i,r+1,n,x,S&&o,a,l)}}}else(h&&h>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===e.getFreezeTableName()||!c&&p||c&&e.getFreezeTableName()===l&&u)&&i[r].cells.push(this.generateCell(e,t.Header,this.colDepth-r,(n?"":s?"e-firstcell":"")+d,r,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return i},e.prototype.ensureStackedFrozen=function(e,t,i){for(var r=e.length,n=0;n<r;n++)if(e[n].columns)i=this.ensureStackedFrozen(e[n].columns,t,i);else if(e[n].getFreezeTableName()===t){i=!0;break}return i},e.prototype.getStackedLockColsCount=function(e,t){if(e.columns)for(var i=0;i<e.columns.length;i++)t=this.getStackedLockColsCount(e.columns[i],t);else e.lockColumn&&t++;return t},e.prototype.getColSpan=function(e,t,i,r,n){return n?e=this.getFrozenColSpan(i,r,0):this.parent.lockcolPositionCount&&(e=this.lockColsRendered?e-t:t),e},e.prototype.getFrozenColSpan=function(e,t,i){for(var r=e.length,n=0;n<r;n++)e[n].columns?i=this.getFrozenColSpan(e[n].columns,t,i):e[n].getFreezeTableName()===t&&i++;return i},e.prototype.generateRow=function(e){return new C({})},e.prototype.generateCell=function(e,t,i,r,n,s){var o={visible:e.visible,isDataCell:!1,isTemplate:!sf.base.isNullOrUndefined(e.headerTemplate),rowID:"",column:e,cellType:t,rowSpan:i,className:r,index:n,colIndex:s};return(!o.rowSpan||o.rowSpan<2)&&delete o.rowSpan,new w(o)},e.prototype.setVisible=function(e){for(var t,i,r=this.parent,n=([].slice.call(this.getRows()),r.getFrozenColumns()),s=0,o=e.length;s<o;s++){var a=e[s];if(i=r.getNormalizedColumnIndex(a.uid),t=a.visible?"":"none",n){var l=this.parent.isRowDragable()?n+1:n;if(i<l)sf.base.isBlazor()&&r.isServerRendered?(sf.base.setStyleAttribute(this.getTable().querySelector("colgroup").children[i],{display:t}),sf.base.setStyleAttribute(this.getTable().querySelectorAll("th")[i],{display:t})):sf.base.setStyleAttribute(this.getColGroup().children[i],{display:t});else{var h=r.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup"),d=r.getHeaderContent().querySelector(".e-movableheader").querySelector("table");sf.base.setStyleAttribute(h.children[i-l],{display:t}),sf.base.isBlazor()&&r.isServerRendered&&sf.base.setStyleAttribute(d.querySelectorAll("th")[i-n],{display:t})}}else sf.base.setStyleAttribute(this.getColGroup().children[i],{display:t})}this.refreshUI()},e.prototype.colPosRefresh=function(){sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.frozenRows&&this.parent.getFrozenColumns()&&(this.freezeReorder=!0),this.refreshUI()},e.prototype.refreshUI=function(){var e=this.parent.isFrozenGrid(),t=this.parent.enableColumnVirtualization&&e,i=sf.base.isBlazor()&&this.parent.isServerRendered&&0!==this.parent.frozenRows&&e,r=this.getPanel();this.toggleStackClass(r);var n=this.freezeReorder?this.headerPanel.querySelector(".e-movableheader").querySelector(".e-table"):this.getTable(),s=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(t&&(n=this.parent.contentModule.getVirtualFreezeHeader(),s=this.parent.contentModule.isXaxis()?"movable":s),i&&!t&&(n=this.freezeReorder?this.headerPanel.querySelector(".e-movableheader").querySelector(".e-table"):this.headerPanel.querySelector(".e-frozenheader").querySelector(".e-table")),n){sf.base.isBlazor()&&this.parent.isServerRendered?(n.removeChild(n.querySelector("colgroup")),n.removeChild(n.querySelector("thead"))):(sf.base.remove(n),n.removeChild(n.firstChild),n.removeChild(n.childNodes[0]));var o=this.parent.createElement("colgroup"),a=this.createHeaderContent(s);this.rows=a.rows,n.insertBefore(a.thead,n.firstChild),this.updateColGroup(o),n.insertBefore(this.setColGroup(o),n.firstChild),t||i||this.setTable(n),sf.base.isBlazor()&&this.parent.isServerRendered||this.appendContent(n),this.parent.notify("colgroup-refresh",{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!e||this.parent.enableColumnVirtualization&&e)&&this.initializeHeaderDrag();for(var l=[].slice.call(r.querySelectorAll("tr.e-columnheader")),h=0,d=l;h<d.length;h++){var c=d[h],p=[].slice.call(c.querySelectorAll(".e-grouptopleftcell"));p.length&&p[p.length-1].classList.add("e-lastgrouptopleftcell")}e||this.parent.notify("header-refreshed",{rows:this.rows,args:{isFrozen:e}}),this.parent.enableColumnVirtualization&&Ct(n,"e-movableheader")&&this.parent.notify("header-refreshed",{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&kt(l,!0)}},e.prototype.toggleStackClass=function(e){this.parent.columns.some((function(e){return!sf.base.isNullOrUndefined(e.columns)}))?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},e.prototype.appendContent=function(e){this.getPanel().querySelector(".e-headercontent").appendChild(e)},e.prototype.getCellCnt=function(e,t){if(e.columns)for(var i=0,r=e.columns.length;i<r;i++)t=this.getCellCnt(e.columns[i],t);else e.visible&&t++;return t},e.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new sf.base.Draggable(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))},e.prototype.initializeHeaderDrop=function(){var e=this.parent;new sf.base.Droppable(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},e.prototype.renderCustomToolbar=function(){var e=this,t=this.parent;if("Vertical"===t.rowRenderingMode&&!t.toolbar&&(t.allowSorting||t.allowFiltering)){for(var i=t.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=t.createElement("div",{className:"e-toolbar-items"}),n=t.createElement("div",{className:"e-toolbar-left"}),s=this.parent.allowFiltering&&this.parent.allowSorting?2:1,o=0;o<s;o++){var a=t.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),l=1===s?this.parent.allowSorting?"sort":"filter":1===o?"sort":"filter",h=t.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),d=t.createElement("span",{className:"e-btn-icon e-res"+l+"-icon e-icons"});h.appendChild(d),new sf.buttons.Button({}).appendTo(h),h.onclick=function(t){t.target.classList.contains("e-ressort-btn")||t.target.classList.contains("e-ressort-icon")?e.parent.showResponsiveCustomSort():e.parent.showResponsiveCustomFilter()},a.appendChild(h),n.appendChild(a)}r.appendChild(n),i.appendChild(r),t.element.insertBefore(i,this.parent.element.querySelector(".e-gridheader"))}},e.prototype.updateCustomResponsiveToolbar=function(e){var t=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===e.module&&(t?sf.base.remove(t):this.renderCustomToolbar())},e}(),P=function(){function e(e,t){this.localizer=t.getService("localization"),this.formatter=t.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:"e-rowcell",attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox"}})}return e.prototype.getGui=function(){return""},e.prototype.format=function(e,t,i){return sf.base.isNullOrUndefined(e.format)||("number"===e.type&&isNaN(parseInt(t,10))&&(t=null),t=this.formatter.toView(t,e.getFormatter())),sf.base.isNullOrUndefined(t)?"":t.toString()},e.prototype.evaluate=function(e,t,i,r,n,s){var o,a;if(t.column.template){var l=this.parent.isReact&&"string"!=typeof t.column.template,h=["index"],d=Gt({},i,((o={}).foreignKeyData=n,o.column=t.column,o)),c=this.parent.element.id+t.column.uid,p="isStringTemplate";if(sf.base.isBlazor()&&s){var u="Batch"!==this.parent.editSettings.mode?parseInt(r.index,10):null;a=t.column.getColumnTemplate()(sf.base.extend({index:r[h[0]]},d),this.parent,"template",c,this.parent[p],u),window[c]=null,"Batch"!==this.parent.editSettings.mode&&sf.base.updateBlazorTemplate(c,"Template",t.column,!1)}else if(l){var f={index:r[h[0]]};t.column.getColumnTemplate()(sf.base.extend(f,d),this.parent,"columnTemplate",c,this.parent[p],null,e),this.parent.renderTemplates()}else a=t.column.getColumnTemplate()(sf.base.extend({index:r[h[0]]},d),this.parent,"template",c,this.parent[p]);return l||It(e,a),this.parent.notify("template-result",{template:a}),a=null,e.setAttribute("aria-label",e.innerText+" is template cell column header "+t.column.headerText),!1}return!0},e.prototype.invokeFormatter=function(e,t,i){var r,n;sf.base.isNullOrUndefined(e.formatter)||(r=e.formatter,n="getValue",t=r.prototype&&n in r.prototype?(new(0,e.formatter)).getValue(e,i):"function"==typeof e.formatter?e.formatter(e,i):e.formatter.getValue(e,i));return t},e.prototype.render=function(e,t,i,r,n){return this.refreshCell(e,t,i,n)},e.prototype.refreshTD=function(e,t,i,r){var n="Batch"===this.parent.editSettings.mode&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){e.innerHTML="";var s=e.cellIndex,o=e.parentElement;sf.base.remove(e);var a=this.refreshCell(t,i,r,n);this.cloneAttributes(a,e),o.cells.length!==s-1?o.insertBefore(a,o.cells[s]):o.appendChild(a)}else{var l=this.refreshCell(t,i,r,n);e.innerHTML="",e.setAttribute("aria-label",l.getAttribute("aria-label"));for(var h=0,d=[].slice.call(l.childNodes);h<d.length;h++){var c=d[h];e.appendChild(c)}}},e.prototype.cloneAttributes=function(e,t){for(var i,r=t.attributes,n=r.length;n--;)i=r[n],e.setAttribute(i.name,i.value)},e.prototype.refreshCell=function(e,t,i,r){var n,s,o=this.element.cloneNode(),a=e.column;e.isForeignKey&&(s=e.foreignKeyData[0]||((n={})[a.foreignKeyValue]=a.format?null:"",n));var l=this.getGui(),h=e.isForeignKey?this.getValue(a.foreignKeyValue,s,a):this.getValue(a.field,t,a);if("date"!==a.type&&"datetime"!==a.type||sf.base.isNullOrUndefined(h)||(h=new Date(h)),l=(h=this.format(a,h,t)).toString(),"boolean"===a.type&&!a.displayAsCheckBox){var d="true"!==h&&"false"!==h?null:"true"===h?"True":"False";l=d?this.localizer.getConstant(d):l}var c=this.invokeFormatter(a,h,t);if(l=sf.base.isNullOrUndefined(a.formatter)?l:sf.base.isNullOrUndefined(c)?"":c.toString(),o.setAttribute("aria-label",l+" column header "+e.column.headerText),this.evaluate(o,e,t,i,s,r)&&"checkbox"!==a.type)this.appendHtml(o,l,a.getDomSetter?a.getDomSetter():"innerHTML");else if("checkbox"===a.type){o.classList.add("e-gridchkbox"),o.setAttribute("aria-label","checkbox"),h=!!this.parent.selectionSettings.persistSelection&&"true"===h,(u=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:h,label:" "})).insertBefore(this.rowChkBox.cloneNode(),u.firstChild),o.appendChild(u)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(o,e,i),"boolean"===a.type&&a.displayAsCheckBox){var p=isNaN(parseInt(h.toString(),10))?"true"===h:parseInt(h.toString(),10)>0,u=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:p,label:" "});o.innerHTML="",u.classList.add("e-checkbox-disabled"),o.appendChild(u),o.setAttribute("aria-label",p+" column header "+e.column.headerText)}return o},e.prototype.appendHtml=function(e,t,i){return void 0===i&&(i="innerHTML"),e[i]=t,e},e.prototype.setAttributes=function(e,t,i){var r=t.column;this.buildAttributeFromCell(e,t,"checkbox"===r.type),mt(e,i),mt(e,t.attributes),r.customAttributes&&mt(e,r.customAttributes),"Vertical"===this.parent.rowRenderingMode&&mt(e,{"data-cell":r.headerText}),r.textAlign&&(e.style.textAlign=r.textAlign),"Clip"===r.clipMode||!r.clipMode&&"Clip"===this.parent.clipMode?e.classList.add("e-gridclip"):("EllipsisWithTooltip"===r.clipMode||!r.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==r.type&&e.classList.add("e-ellipsistooltip")},e.prototype.buildAttributeFromCell=function(e,i,r){var n={},s="aria-colindex",o=[];i.colSpan&&(n.colSpan=i.colSpan),i.rowSpan&&(n.rowSpan=i.rowSpan),i.isTemplate&&o.push("e-templatecell"),i.isSelected&&(o.push.apply(o,["e-selectionbackground","e-active"]),r&&e.querySelector(".e-frame").classList.add("e-check")),i.isColumnSelected&&o.push.apply(o,["e-columnselection"]),i.cellType===t.Header?n[s]=i.colIndex:sf.base.isNullOrUndefined(i.index)||(n[s]=i.index),i.visible||o.push("e-hide"),n.class=o,mt(e,n)},e.prototype.getValue=function(e,t,i){return i.valueAccessor(e,t,i)},e}(),D=function(){function e(){}return e.prototype.setOptions=function(e,t){for(var i=Object.keys(t),r=0;r<i.length;r++)L(e,Y[i[r]],t[i[r]])},e.prototype.setExpand=function(e,t){L(e,Y.expand,t)},e.prototype.setSort=function(e,t){L(e,Y.sort,t,"boolean"==typeof t)},e.prototype.setBusy=function(e,t){L(e,Y.busy,t),L(e,Y.invalid,null,!0)},e.prototype.setGrabbed=function(e,t,i){L(e,Y.grabbed,t,i)},e.prototype.setDropTarget=function(e,t){L(e,Y.dropeffect,"copy",!t)},e}();function L(e,t,i,r){r&&e?e.removeAttribute(t):e&&e.setAttribute(t,i)}var B,O,N,q,H,U,V,G,j,K,W,_,Q,J,X,Y={expand:"aria-expanded",role:"role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},Z=(B=function(e,t){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),t.ariaService=new D,t.hTxtEle=t.parent.createElement("span",{className:"e-headertext"}),t.sortEle=t.parent.createElement("div",{className:"e-sortfilterdiv e-icons"}),t.gui=t.parent.createElement("div"),t.chkAllBox=t.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox"}}),t}return Z(t,e),t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,t,i){var r=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,r,n)},t.prototype.refresh=function(e,t){this.clean(t);var i=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter"});return this.prepareHeader(e,t,i)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,t,i){var r,n,s=e.column,o={},a=this.getGui();if(sf.base.attributes(a,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),sf.base.isNullOrUndefined(s.headerValueAccessor)||(r=this.getValue(s.headerText,s)),"checkbox"!==s.type){var l=s.headerText;sf.base.isNullOrUndefined(r)||(l=r);var h=this.hTxtEle.cloneNode();h[s.getDomSetter()]=l,a.appendChild(h)}else{s.editType="booleanedit";var d=sf.buttons.createCheckBox(this.parent.createElement,!1,{checked:!1,label:" "});d.insertBefore(this.chkAllBox.cloneNode(),d.firstChild),a.appendChild(d),a.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,e),this.appendHtml(t,a),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!sf.base.isNullOrUndefined(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){sf.base.attributes(i,{"e-mappinguid":"e-flmenu-"+s.uid}),t.classList.add("e-fltr-icon");var c=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==c.length)for(var p=this.parent.getForeignKeyColumns(),u=0;u<this.parent.columns.length;u++)for(var f=0;f<this.parent.filterSettings.columns.length;f++)if(this.parent.filterSettings.columns[f].field===s.field||p.length&&s.foreignKeyValue===this.parent.filterSettings.columns[f].field){i.classList.add("e-filtered"),c.push(s.field);break}t.appendChild(i.cloneNode())}e.className&&t.classList.add(e.className),s.customAttributes&&mt(t,s.customAttributes),s.allowSorting&&(o.sort="none"),s.allowGrouping&&(o.grabbed=!1),t=this.extendPrepareHeader(s,t);var g=this.parent,m=g.getColumnIndexByField(s.field);if(!sf.base.isNullOrUndefined(s.headerTemplate)){var y=g.element.id+s.uid+"headerTemplate",b="isStringTemplate",v=sf.base.isBlazor()?s.toJSON():s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate){var C={index:m};t.firstElementChild.innerHTML="",s.getHeaderTemplate()(sf.base.extend(C,v),g,"headerTemplate",y,this.parent[b],null,t.firstElementChild),this.parent.renderTemplates()}else n=s.getHeaderTemplate()(sf.base.extend({index:m},v),g,"headerTemplate",y,this.parent[b]),t.firstElementChild.innerHTML="",It(t.firstElementChild,n)}if(this.ariaService.setOptions(t,o),!sf.base.isNullOrUndefined(s.headerTextAlign)||!sf.base.isNullOrUndefined(s.textAlign)){var w=s.headerTextAlign||s.textAlign;a.style.textAlign=w,"Right"===w||"Left"===w?t.classList.add("Right"===w?"e-rightalign":"e-leftalign"):"Center"===w&&t.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&t.classList.add("e-ellipsistooltip"),t.setAttribute("aria-rowspan",(sf.base.isNullOrUndefined(e.rowSpan)?1:e.rowSpan).toString()),t.setAttribute("aria-colspan","1"),this.parent.trigger("headerCellInfo",{cell:e,node:t}),t},t.prototype.getValue=function(e,t){return t.headerValueAccessor(e,t)},t.prototype.extendPrepareHeader=function(e,t){if(this.parent.showColumnMenu&&e.showColumnMenu&&!sf.base.isNullOrUndefined(e.field)){var i=this.parent.createElement("div",{className:"e-icons e-columnmenu"}),r=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==r.length)for(var n=0;n<this.parent.columns.length;n++)for(var s=0;s<this.parent.filterSettings.columns.length;s++)if(this.parent.filterSettings.columns[s].field===e.field){i.classList.add("e-filtered"),r.push(e.field);break}t.classList.add("e-fltr-icon"),t.appendChild(i)}if(this.parent.allowResizing){var o=this.parent.createElement("div");o.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(o)}return t},t.prototype.appendHtml=function(e,t){return e.appendChild(t),e},t}(P),ee=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),t}return ee(t,e),t.prototype.render=function(e,t,i){var r=this.element.cloneNode(),n=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),s=e.column;if(r.appendChild(n),sf.base.isNullOrUndefined(s.headerTemplate)?this.appendHtml(n,s.headerText,s.getDomSetter()):It(n,s.getHeaderTemplate()(s,this.parent,"headerTemplate")),e.column.toolTip&&r.setAttribute("title",e.column.toolTip),"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?r.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&r.classList.add("e-ellipsistooltip"),sf.base.isNullOrUndefined(e.column.textAlign)||(n.style.textAlign=e.column.textAlign),e.column.customAttributes&&mt(r,e.column.customAttributes),r.setAttribute("colspan",e.colSpan.toString()),r.setAttribute("aria-colspan",e.colSpan.toString()),r.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var o=this.parent.createElement("div");o.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",r.appendChild(o)}return this.parent.trigger("headerCellInfo",{cell:e,node:r}),r},t}(P),ie=(N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),re=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-indentcell"}),t}return ie(t,e),t.prototype.render=function(e,t){var i=this.element.cloneNode();return mt(i,e.attributes),i},t}(P),ne=(q=function(e,t){return(q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}q(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:t.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),t}return ne(t,e),t.prototype.render=function(e,t){var i,r,n=this.element.cloneNode(),s=this.parent;t.headerText=e.column.headerText,e.isForeignKey&&(r=this.format(e.column,e.column.valueAccessor("foreignKey",t,e.column)));var o=e.isForeignKey?r:e.column.enableGroupByFormat?t.key:this.format(e.column,e.column.valueAccessor("key",t,e.column));if(sf.base.isNullOrUndefined(s.groupSettings.captionTemplate))s.groupSettings.enableLazyLoading?n.innerHTML=e.column.headerText+": "+o:n.innerHTML=e.column.headerText+": "+o+" - "+t.count+" "+(t.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"));else{var a=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate;if(sf.base.isBlazor()){var l=s.element.id+"captionTemplate";i=gt(s.groupSettings.captionTemplate)(t,null,null,l)}else if(a){l=s.element.id+"captionTemplate";gt(s.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",l,null,null,n),this.parent.renderTemplates()}else i=this.parent.isVue?gt(s.groupSettings.captionTemplate)(t,this.parent):gt(s.groupSettings.captionTemplate)(t);a||It(n,i)}return n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-label",n.innerHTML+" is groupcaption cell"),n.setAttribute("title",n.innerHTML),n},t}(P),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-groupcaption"}),t}return ne(t,e),t.prototype.render=function(e,t){var i=this.element.cloneNode();return i.innerHTML="&nbsp;",i.setAttribute("colspan",e.colSpan.toString()),i},t}(P),ae=(H=function(e,t){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ae(t,e),t.prototype.render=function(e,t,i,r){var n=this.element.cloneNode();return n.className=r?"e-recordplusexpand":"e-recordpluscollapse",n.setAttribute("ej-mappingname",t.field),n.setAttribute("ej-mappingvalue",t.key),n.setAttribute("aria-expanded",r?"true":"false"),n.setAttribute("tabindex","-1"),n.appendChild(this.parent.createElement("div",{className:r?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow"})),n},t}(re),he=(U=function(e,t){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),de=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-grouptopleftcell"}),t}return he(t,e),t.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),i},t}(P),ce=(V=function(e,t){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),pe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-detailheadercell"}),t}return ce(t,e),t.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),i},t}(P),ue=(G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),fe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),t}return ue(t,e),t.prototype.render=function(e,t,i){var r=this.element.cloneNode();return i&&!sf.base.isNullOrUndefined(i.class)?(r.className="",r.className=i.class,r.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow"}))):r.appendChild(this.parent.createElement("div",{className:"e-icons e-dtdiagonalright e-icon-grightarrow"})),r},t}(P),ge=(j=function(e,t){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}j(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),me=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TD",{className:"e-rowdragdrop",attrs:{role:"gridcell",tabindex:"-1"}}),t}return ge(t,e),t.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon"})),e.isSelected&&(i.classList.add("e-selectionbackground"),i.classList.add("e-active")),i},t}(P),ye=(K=function(e,t){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),be=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.element=t.parent.createElement("TH",{className:"e-rowdragheader"}),t}return ye(t,e),t.prototype.render=function(e,t){var i=this.element.cloneNode();return i.appendChild(sf.base.createElement("div",{className:"e-emptycell"})),i},t}(P),ve=function(){function e(e,t){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=t,this.data=new v(e,t),this.l10n=t.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return e.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(r.Header),this.contentRenderer=this.renderer.getRenderer(r.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),sf.base.isBlazor()&&this.parent.isServerRendered||this.refreshDataManager()},e.prototype.refresh=function(e){var t=this;void 0===e&&(e={requestType:"refresh"});var i=this.parent;if(i.notify(e.requestType+"-begin",e),sf.base.isBlazor()&&this.resetTemplates(),sf.base.isBlazor()&&i.isServerRendered){if(i.bulkChanges.dataSource&&delete i.bulkChanges.dataSource,i.notify("blazor-action-begin",e),"filtering"===e.requestType){e.columns=null}if("sorting"===e.requestType){e.target=null}"Batch"!==i.editSettings.mode||i.isEdit||i.notify("closebatch",{})}var r=this.parent.preventUpdate;i.trigger("actionBegin",e,(function(n){if(void 0===n&&(n={requestType:"refresh"}),"delete"===n.requestType&&sf.base.isBlazor()&&!i.isJsComponent){if(sf.base.isNullOrUndefined(i.commandDelIndex))n.data=i.getSelectedRecords();else{var s=n.data;n.data={},n.data[0]=s}}if(n.cancel)i.notify("cancel-Begin",n);else{if(sf.base.isBlazor()&&"Normal"===i.editSettings.mode&&i.isEdit&&"infiniteScroll"!==e.requestType&&i.notify("closeinline",{}),"delete"===n.requestType&&i.allowPaging){var o=n.data.length,a=i.pageSettings.totalRecordsCount-o,l=i.getCurrentViewRecords().length;l-o||!a||l===o||(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:a,currentPage:Math.ceil(a/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=a)}if(sf.base.isBlazor()&&t.parent.isServerRendered){if(r){return void(i.bulkChanges={})}"refresh"===e.requestType&&t.parent.notify("updateaction",n),"virtualscroll"!==n.requestType&&t.parent.showSpinner(),"delete"===n.requestType||"save"===n.requestType?(t.parent.notify("add-delete-Action",n),t.parent.notify("add-delete-success",n)):(t.parent.allowServerDataBinding=!0,t.parent.serverDataBind(),t.parent.allowServerDataBinding=!1)}else"reorder"===n.requestType&&t.parent.dataSource&&"result"in t.parent.dataSource||("paging"===n.requestType||"columnstate"===n.requestType||"reorder"===n.requestType)&&t.parent.groupSettings.enableLazyLoading&&t.parent.groupSettings.columns.length&&t.parent.contentModule.getGroupCache()[t.parent.pageSettings.currentPage]?t.contentRenderer.refreshContentRows(n):t.refreshDataManager(n)}}))},e.prototype.resetTemplates=function(){var e=this.parent,t=e.getColumns();if(e.detailTemplate){var i=e.element.id+"detailTemplate";sf.base.blazorTemplates[i]=[],sf.base.resetBlazorTemplate(i,"DetailTemplate")}e.groupSettings.captionTemplate&&sf.base.resetBlazorTemplate(e.element.id+"captionTemplate","CaptionTemplate"),e.rowTemplate&&sf.base.resetBlazorTemplate(e.element.id+"rowTemplate","RowTemplate"),e.toolbarTemplate&&sf.base.resetBlazorTemplate(e.element.id+"toolbarTemplate","ToolbarTemplate"),e.pageSettings.template&&sf.base.resetBlazorTemplate(e.element.id+"_template","pageSettings");for(var r=0;r<t.length;r++)t[r].template&&(sf.base.blazorTemplates[e.element.id+t[r].uid]=[],sf.base.resetBlazorTemplate(e.element.id+t[r].uid,"Template")),t[r].headerTemplate&&sf.base.resetBlazorTemplate(e.element.id+t[r].uid+"headerTemplate","HeaderTemplate"),t[r].filterTemplate&&sf.base.resetBlazorTemplate(e.element.id+t[r].uid+"filterTemplate","FilterTemplate");for(var n=0;n<e.aggregates.length;n++)for(var s=0;s<e.aggregates[n].columns.length;s++){if(e.aggregates[n].columns[s].footerTemplate){var o=e.element.id+e.aggregates[n].columns[s].guid+"footerTemplate";sf.base.resetBlazorTemplate(o,"FooterTemplate")}if(e.aggregates[n].columns[s].groupFooterTemplate){o=e.element.id+e.aggregates[n].columns[s].guid+"groupFooterTemplate";sf.base.resetBlazorTemplate(o,"GroupFooterTemplate")}if(e.aggregates[n].columns[s].groupCaptionTemplate){o=e.element.id+e.aggregates[n].columns[s].guid+"groupCaptionTemplate";sf.base.resetBlazorTemplate(o,"GroupCaptionTemplate")}}},e.prototype.refreshComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger("actionComplete",e)},e.prototype.refreshDataManager=function(e){var t,i=this;void 0===e&&(e={}),"virtualscroll"!==e.requestType&&this.parent.showSpinner(),this.parent.notify("reset-infinite-blocks",e),this.emptyGrid=!1;var r=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector(".e-content"),!0),r){var n=new sf.data.Deferred;t=this.getFData(n,e)}if(t=t?t.then((function(t){var r=i.data.generateQuery().requiresCount();if(i.emptyGrid){var n=new sf.data.Deferred;return n.resolve({result:[],count:0}),n.promise}return i.data.getData(e,r)})):this.data.getData(e,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!r||this.parent.searchSettings.key.length)){var s=new sf.data.Deferred;t=t.then((function(r){return i.parent.notify("getForeignKeyData",{dataManager:t,result:r,promise:s,action:e}),s.promise}))}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(t=t.then((function(e){return i.validateGroupRecords(e)}))),t.then((function(t){return i.dataManagerSuccess(t,e)})).catch((function(t){return i.dataManagerFailure(t,e)}))},e.prototype.getFData=function(e,t){return this.parent.notify("getForeignKeyData",{isComplex:!0,promise:e,action:t}),e.promise},e.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},e.prototype.foreignKey=function(e){var t=this;return e.some((function(e){return!(!t.parent.filterSettings.columns.some((function(t){return e.uid===t.uid}))&&!t.parent.searchSettings.key.length)}))},e.prototype.sendBulkRequest=function(e){var t=this;e.requestType="batchsave";var i=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original);if(sf.base.isBlazor()&&!this.parent.isJsComponent)i.then((function(i){t.parent.notify("editsuccess",e)})).catch((function(e){sf.base.isNullOrUndefined(e.error)||sf.base.isNullOrUndefined(e.error.message)||(e.error=e.error.message),t.parent.trigger("actionFailure",e)}));else{var r=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline)return void this.refreshDataManager({requestType:"batchsave"});i.then((function(i){t.data.getData(e,r).then((function(i){return t.dmSuccess(i,e)})).catch((function(i){return t.dmFailure(i,e)}))})).catch((function(i){return t.dmFailure(i,e)}))}},e.prototype.dmSuccess=function(e,t){this.dataManagerSuccess(e,t)},e.prototype.dmFailure=function(e,t){this.dataManagerFailure(e,t)},e.prototype.renderEmptyRow=function(){this.emptyRow(!0)},e.prototype.emptyRow=function(e){var t,i=this.parent,r=this.contentRenderer.getTable().querySelector("tbody");sf.base.isNullOrUndefined(r)||sf.base.remove(r),r=this.parent.createElement("tbody");var n=0;(i.detailTemplate||i.childGrid)&&++n,(t=this.parent.createElement("tr",{className:"e-emptyrow"})).appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(i.getColumns().length+n).toString()}})),r.appendChild(t),this.contentRenderer.renderEmpty(r),e&&(this.parent.trigger("dataBound",{}),this.parent.notify(f,{rows:[new C({isDataRow:!0,cells:[new w({isDataCell:!0,visible:!0})]})]}))},e.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},e.prototype.updateColumnType=function(e){for(var t,r=this.parent.getColumns(),n=e&&e.items?e.items[0]:e,s=this.locator.getService("valueFormatter"),o=0,a=r.length;o<a;o++){t=Ut(r[o].field||"",n),sf.base.isNullOrUndefined(r[o].customFormat)||(r[o].format=r[o].customFormat),sf.base.isNullOrUndefined(r[o].validationRules)||sf.base.isNullOrUndefined(r[o].validationRules.equalTo)||(r[o].validationRules.equalTo[0]=this.parent.element.id+r[o].validationRules.equalTo[0]),r[o].isForeignColumn()&&r[o].columnData&&(t=Ut(r[o].foreignKeyValue||"",r[o].columnData[0])),sf.base.isNullOrUndefined(t)?r[o].type=r[o].type||(sf.base.isBlazor()&&this.parent.isServerRendered?"none":null):(this.isColTypeDef=!0,(!r[o].type||sf.base.isBlazor()&&this.parent.isServerRendered&&"none"===r[o].type)&&(r[o].type=t.getDay?t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0?"datetime":"date":i(t)));var l=new h;if(r[o].format&&(r[o].format.skeleton||r[o].format.format)&&(r[o].setFormatter(l.getFormatFunction(sf.base.extend({},r[o].format))),r[o].setParser(l.getParserFunction(r[o].format))),"string"==typeof r[o].format){var d=this.parent.isServerRendered||this.parent.printModule.isPrintGrid();Et(this.locator,r[o],d)}else r[o].format||"number"!==r[o].type||r[o].setParser(s.getParserFunction({format:"n2"}))}},e.prototype.dataManagerSuccess=function(e,t){var i=this,n=this.parent;this.contentRenderer=this.renderer.getRenderer(r.Content),this.headerRenderer=this.renderer.getRenderer(r.Header),e.actionArgs=t;var s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&("delete"===t.requestType||"save"===t.requestType&&"add"===this.parent.infiniteScrollModule.requestType);n.trigger("beforeDataBound",e,(function(r){if(!r.cancel){r.result=sf.base.isNullOrUndefined(r.result)?[]:r.result;var o=Object.keys(r.result).length;if(!i.parent.isDestroyed)if(n.getColumns().length||o||n.columns.length&&n.columns[0]instanceof c)if(!i.isInfiniteEnd(t)||o){if(i.parent.isEdit=!1,i.parent.notify("edit-reset",{}),i.parent.notify("tooltip-destroy",{}),i.contentRenderer.prevCurrentView=i.parent.currentViewData.slice(),n.currentViewData=r.result,n.notify("refresh-infinite-current-view-data",{args:t,data:r.result}),sf.base.isBlazor()&&"FilterBar"===n.filterSettings.type&&(sf.base.isNullOrUndefined(n.currentViewData)||!sf.base.isNullOrUndefined(n.currentViewData)&&!n.currentViewData.length))for(var a=n.getColumns(),l=0;l<a.length;l++)if(a[l].filterTemplate){var h=n.element.id+a[l].uid+"filterTemplate";sf.base.resetBlazorTemplate(h,"FilterTemplate");for(var d=a[l].field,p=n.filterSettings.columns,u=0;u<p.length;u++)d===p[u].field&&(sf.base.blazorTemplates[h][0][d]=p[u].value);sf.base.updateBlazorTemplate(h,"FilterTemplate",a[l],!1)}if(!o&&r.count&&n.allowPaging&&t&&"delete"!==t.requestType)return!i.parent.groupSettings.enableLazyLoading||"grouping"!==t.requestType&&"ungrouping"!==t.requestType||i.parent.notify("grouping-complete",t),n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=r.count,"paging"!==t.requestType&&(n.pageSettings.currentPage=Math.ceil(r.count/n.pageSettings.pageSize)),void n.dataBind();if((n.getColumns().length||!o)&&i.isLayoutRendered||Ht(n)||i.updatesOnInitialRender(r),!i.isColTypeDef&&n.getCurrentViewRecords()&&(i.data.dataManager.dataSource.offline&&n.dataSource.length?i.updateColumnType(n.dataSource[0]):i.updateColumnType(n.getCurrentViewRecords()[0])),i.parent.isInitialLoad||!i.parent.groupSettings.disablePageWiseAggregates||i.parent.groupSettings.columns.length||(r.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),i.parent.notify("data-ready",sf.base.extend({count:r.count,result:r.result,aggregates:r.aggregates},t)),(n.groupSettings.columns.length||t&&"ungrouping"===t.requestType)&&t&&"filtering"!==t.requestType&&i.headerRenderer.refreshUI(),o){if(Ht(n)){t.scrollTop={top:i.contentRenderer.content.scrollTop}}s?i.parent.notify("infinite-edit-handler",{e:t,result:e.result,count:e.count,agg:e.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(t):i.contentRenderer.refreshContentRows(t)}else{if(!n.getColumns().length)return n.element.innerHTML="",void alert(i.l10n.getConstant("EmptyDataSourceError"));if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector(".e-content"),!1),i.renderEmptyRow(),t){var f=(t.requestType||"").toLowerCase()+"-complete";i.parent.notify(f,t),"batchsave"===t.requestType&&(t.cancel=!1,t.rows=[],t.isFrozen=0!==i.parent.getFrozenColumns()&&!t.isFrozen,i.parent.trigger("actionComplete",t))}i.parent.hideSpinner()}i.parent.notify("toolbar-refresh",{}),i.setRowCount(i.parent.getCurrentViewRecords().length),i.parent.getDataModule().isQueryInvokedFromData=!1}else i.parent.notify("infinite-edit-handler",{e:t,result:e.result,count:e.count,agg:e.aggregates});else n.hideSpinner()}}))},e.prototype.dataManagerFailure=function(e,t){this.ariaService.setOptions(this.parent.getContent().querySelector(".e-content"),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger("actionFailure",{error:e}),this.parent.hideSpinner(),"save"!==t.requestType&&"delete"!==t.requestType&&"bulk-save"!==t.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.log("actionfailure",{error:e}))},e.prototype.setRowCount=function(e){this.parent;this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:e?e.toString():"1"})},e.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===e.requestType},e.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(e.result[0]),bt(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify("auto-col",{})},e.prototype.iterateComplexColumns=function(e,t,r){for(var n=Object.keys(e),s=0;s<n.length;s++){("object"!==i(e[n[s]])||!e[n[s]]||e[n[s]]instanceof Date?[]:Object.keys(e[n[s]])).length?this.iterateComplexColumns(e[n[s]],t+(n[s]+"."),r):(r[this.counter]=t+n[s],this.counter++)}},e.prototype.buildColumns=function(e){var t=[],i={};this.iterateComplexColumns(e,"",i);for(var r=Object.keys(i).filter((function(e){return"BlazId"!==i[e]})).map((function(e){return i[e]})),n=0,s=r.length;n<s;n++)t[n]={field:r[n]},this.parent.enableColumnVirtualization&&(t[n].width=sf.base.isNullOrUndefined(t[n].width)?200:t[n].width);this.parent.setProperties({columns:t},!0)},e.prototype.instantiateRenderer=function(){this.renderer.addRenderer(r.Header,new E(this.parent,this.locator)),this.renderer.addRenderer(r.Content,new k(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(t.Header,new $(this.parent,this.locator)),e.addCellRenderer(t.Data,new P(this.parent,this.locator)),e.addCellRenderer(t.StackedHeader,new te(this.parent,this.locator)),e.addCellRenderer(t.Indent,new re(this.parent,this.locator)),e.addCellRenderer(t.GroupCaption,new se(this.parent,this.locator)),e.addCellRenderer(t.GroupCaptionEmpty,new oe(this.parent,this.locator)),e.addCellRenderer(t.Expand,new le(this.parent,this.locator)),e.addCellRenderer(t.HeaderIndent,new de(this.parent,this.locator)),e.addCellRenderer(t.StackedHeader,new te(this.parent,this.locator)),e.addCellRenderer(t.DetailHeader,new pe(this.parent,this.locator)),e.addCellRenderer(t.RowDragHIcon,new be(this.parent,this.locator)),e.addCellRenderer(t.DetailExpand,new fe(this.parent,this.locator)),e.addCellRenderer(t.DetailFooterIntent,new re(this.parent,this.locator)),e.addCellRenderer(t.RowDragIcon,new me(this.parent,this.locator))},e.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on("initial-load",this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on("model-changed",this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on("showEmptyGrid",(function(){e.emptyGrid=!0}),this),this.parent.on("auto-col",this.dynamicColumnChange,this))},e.prototype.validateGroupRecords=function(e){var t=this,i=e.result.length-1;if(i<0)return Promise.resolve(e);var r=e.result[0],n=e.result[i],s=[],o=function(e){for(var i=[r,n],o=0;o<i.length;o++)s.push(new sf.data.Predicate("field","==",i[o].field).and(t.getPredicate("key","equal",i[o].key)));e.where(sf.data.Predicate.or(s))},a=new sf.data.Query;o(a);var l=new sf.data.DataManager(e.result).executeLocal(a),h=this.data.generateQuery(!0),d=[];if(this.data.isRemote()||sf.base.isBlazor()){for(var c=[r,n],p=0;p<c.length;p++)d.push(this.getPredicate(c[p].field,"equal",c[p].key));h.where(sf.data.Predicate.or(d))}else o(h);var u=new sf.data.Deferred;return this.data.getData({},h).then((function(i){t.updateGroupInfo(l,i.result),u.resolve(e)})).catch((function(e){return u.reject(e)})),u.promise},e.prototype.getPredicate=function(e,t,i){return i instanceof Date?qt({field:e,operator:t,value:i}):new sf.data.Predicate(e,t,i)},e.prototype.updateGroupInfo=function(e,t){for(var i=new sf.data.DataManager(t),r=e,n=0;n<r.length;n++){var s=i.executeLocal((new sf.data.Query).where(new sf.data.Predicate("field","==",r[n].field).and(this.getPredicate("key","equal",r[n].key))))[0];r[n].count=s.count;var o=r[n].items,a=s.items;o.GroupGuid&&(r[n].items=this.updateGroupInfo(r[n].items,s.items));for(var l=this.parent.aggregates,h=0;h<l.length;h++)for(var d=l[h],c=0;c<d.columns.length;c++)for(var p=d.columns[c].type instanceof Array?d.columns[c].type:[d.columns[c].type],u=0;u<p.length;u++){var f=d.columns[c].field+" - "+p[u].toLowerCase(),g=o.level?a.records:s.items,m=this.parent;if("Custom"===p[u]){var y=o.level?a:s;r[n].aggregates[f]=d.columns[c].customAggregate?d.columns[c].customAggregate.call(m,y,d.columns[c]):""}else r[n].aggregates[f]=sf.data.DataUtil.aggregates[p[u].toLowerCase()](g,d.columns[c].field)}}return e},e}(),Ce=function(){function e(){this.cellRenderMap={}}return e.prototype.addCellRenderer=function(e,i){e="string"==typeof e?e:sf.base.getEnumValue(t,e),sf.base.isNullOrUndefined(this.cellRenderMap[e])&&(this.cellRenderMap[e]=i)},e.prototype.getCellRenderer=function(e){if(e="string"==typeof e?e:sf.base.getEnumValue(t,e),sf.base.isNullOrUndefined(this.cellRenderMap[e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[e]},e}(),we=function(){function e(){this.services={}}return e.prototype.register=function(e,t){sf.base.isNullOrUndefined(this.services[e])&&(this.services[e]=t)},e.prototype.getService=function(e){if(sf.base.isNullOrUndefined(this.services[e]))throw"The service "+e+" is not registered";return this.services[e]},e}(),xe=function(){function e(){this.rendererMap={}}return e.prototype.addRenderer=function(e,t){var i=sf.base.getEnumValue(r,e);sf.base.isNullOrUndefined(this.rendererMap[i])&&(this.rendererMap[i]=t)},e.prototype.getRenderer=function(e){var t=sf.base.getEnumValue(r,e);if(sf.base.isNullOrUndefined(this.rendererMap[t]))throw"The renderer "+t+" is not found";return this.rendererMap[t]},e}(),Se=function(){function e(e){this.parent=e}return e.prototype.setWidthToColumns=function(){var e,t=0,i=this.parent.getColumnIndexesInView(),r=!0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;t<n;t++)this.parent.enableColumnVirtualization&&-1===i.indexOf(t)?r=!1:this.setColumnWidth(new c({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new c({width:"30px"}),t),t++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new c({width:"30px"}),t),t++);for(var s=this.parent.getColumns(),o=0;o<s.length;o++)this.setColumnWidth(s[o],r&&this.parent.enableColumnVirtualization?void 0:o+t);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new c({width:"30px"}),s.length),e=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(e)},e.prototype.setMinwidthBycalculation=function(e){var t=0,i=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)||"auto"===e.width}));if(i.length){t=sf.base.isNullOrUndefined(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-e:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-e;for(var r=0,n=0,s=i;n<s.length;n++){var o=s[n];r+=sf.base.isNullOrUndefined(o.minWidth)?0:"string"==typeof o.minWidth?parseInt(o.minWidth,10):o.minWidth}for(var a=0;a<i.length;a++)0===e&&this.parent.allowResizing&&this.isWidthUndefined()&&a!==i.length-1&&this.setUndefinedColumnWidth(i),0!==e&&t<r?this.setWidth(i[a].minWidth,this.parent.getColumnIndexByField(i[a].field)):0!==e&&t>r&&this.setWidth("",this.parent.getColumnIndexByField(i[a].field)+this.parent.getIndentCount(),!0)}},e.prototype.setUndefinedColumnWidth=function(e){for(var t=0;t<e.length;t++)t!==e.length-1&&(e[t].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[t].field)))},e.prototype.setColumnWidth=function(e,t,i){if(!(this.parent.getColumns().length<1)){var r=sf.base.isNullOrUndefined(t)?this.parent.getNormalizedColumnIndex(e.uid):t,n=this.getWidth(e),s=this.getTableWidth(this.parent.getColumns());null!==n&&(this.setWidth(n,r),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(s),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify("column-width-changed",{index:r,width:n,column:e,module:i}))}},e.prototype.setWidth=function(e,t,i){this.parent.groupSettings.columns.length>t&&Wt(this.parent)&&(e=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");var r,n=this.parent.getHeaderTable(),s=this.parent.getContentTable(),o=sf.base.formatUnit(e),a=this.parent.getFrozenColumns(),l=this.parent.isRowDragable();a=a&&l?a+1:a;var h,d=this.parent.getHeaderContent().querySelector(".e-movableheader"),c=this.parent.getContent().querySelector(".e-movablecontent"),p=this.parent.getFrozenLeftColumnsCount(),u=this.parent.getFrozenRightColumnsCount(),f=this.parent.getMovableColumnsCount(),g=0!==p||0!==u;if(a&&t>=a&&d&&d.querySelector("colgroup"))r=d.querySelector("colgroup").children[t-a];else if(this.parent.enableColumnVirtualization&&a&&this.parent.contentModule.isXaxis()&&d.scrollLeft>0){r=(b=d.querySelector("colgroup")).children[b.children.length-1-t]}else if(g){var m=void 0;if(p&&!u)m=(t=l?t-1:t)<p?n:d;else if(!p&&u)m=t>=f?n:d;else if(p&&u){t=l?t-1:t;var y=this.parent.getFrozenRightHeader();m=t<p?n:t<p+f?d:y}if(!(r=this.getColumnLevelFrozenColgroup(t,p,f,m)))return}else r=n.querySelector("colgroup").children[t];if(r&&!i?r.style.width=o:r&&i&&(r.style.width=""),a&&t>=a)h=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup").children[t-a];else if(this.parent.enableColumnVirtualization&&a&&this.parent.contentModule.isXaxis()&&c.scrollLeft>0){var b;h=(b=this.parent.getContent().querySelector(".e-movablecontent").querySelector("colgroup")).children[b.children.length-1-t]}else if(g){m=void 0;if(p&&!u&&(m=t<p?s:c),!p&&u&&(m=t>=f?s:c),p&&u){var v=this.parent.getContent().querySelector(".e-frozen-right-content");m=t<p?s:t<p+f?c:v}h=this.getColumnLevelFrozenColgroup(t,p,f,m)}else h=s.querySelector("colgroup").children[t];h&&!i?h.style.width=o:h&&i&&(h.style.width="");for(var C=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),w=[],x=0;x<C.length;x++)if(Ct(C[x],"e-grid").id===this.parent.element.id)for(var S=0;S<C[x].querySelector("colgroup").children.length;S++)w.push(C[x].querySelector("colgroup").children[S]);C.length&&w.length&&(w[t].style.width=o),this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()},e.prototype.getColumnLevelFrozenColgroup=function(e,t,i,r){if(!r||!r.querySelector("colgroup"))return null;var n=this.parent.getColumns(),s=this.parent.isRowDragable(),o=this.parent.getFrozenMode(),a=[].slice.call(r.querySelector("colgroup").children);return"Right"===o&&s&&e===i+this.parent.getFrozenRightColumnsCount()?a[a.length-1]:s&&-1===e?a[0]:"Left"===n[e].freeze?a[s?e+1:e]:"Right"===n[e].freeze?a[e-(t+i)]:a[e-t]},e.prototype.refreshFrozenScrollbar=function(){var e={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",e),!e.cancel){var t=At(),i=this.parent.element.querySelector(".e-frozenscrollbar"),r=this.parent.element.querySelector(".e-movablescrollbar"),n=this.parent.getContent().querySelector(".e-frozencontent"),s=this.parent.getContent().querySelector(".e-movablecontent"),o=n.firstElementChild.getBoundingClientRect().width,a=s.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(o+=t),i.style.width=o+"px","Left-Right"===this.parent.getFrozenMode()){var l=this.parent.element.querySelector(".e-frozen-right-scrollbar"),h=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(h+=t),l.style.width=h+"px"}else{if(this.parent.enableColumnVirtualization){var d=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");d&&(a=d.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(a+=t)}r.firstElementChild.style.width=a+"px"}},e.prototype.getSiblingsHeight=function(e){return this.getHeightFromDirection(e,"previous")+this.getHeightFromDirection(e,"next")},e.prototype.getHeightFromDirection=function(e,t){for(var i=e[t+"ElementSibling"],r=0,n=["e-gridheader","e-gridfooter","e-groupdroparea","e-gridpager","e-toolbar"];i;)n.some((function(e){return i.classList.contains(e)}))&&(r+=i.offsetHeight),i=i[t+"ElementSibling"];return r},e.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)&&sf.base.isNullOrUndefined(e.minWidth)})).length;return this.parent.getColumns().length===e},e.prototype.getWidth=function(e){if(sf.base.isNullOrUndefined(e.width)&&this.parent.allowResizing&&sf.base.isNullOrUndefined(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),this.parent.isFrozenGrid()&&sf.base.isNullOrUndefined(e.width)&&("frozen-left"===e.getFreezeTableName()||"frozen-right"===e.getFreezeTableName())&&(e.width=200),!e.width)return null;var t=parseInt(e.width.toString(),10);return e.minWidth&&t<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&t>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},e.prototype.getTableWidth=function(e){for(var t=0,i=0,r=e;i<r.length;i++){var n=r[i],s=this.getWidth(n);"auto"===n.width&&(s=0),!1!==n.visible&&null!==s&&(t+=parseInt(s.toString(),10))}return t},e.prototype.calcMovableOrFreezeColWidth=function(e){var t=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),r=this.parent.getMovableColumnsCount(),n=this.parent.getFrozenRightColumnsCount();return"movable"===e?(n&&t.splice(i+r,t.length),i&&t.splice(0,i)):"freeze-left"===e?t.splice(i,t.length):"freeze-right"===e&&t.splice(0,i+r),sf.base.formatUnit(this.getTableWidth(t))},e.prototype.setWidthToFrozenRightTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze-right");e=this.isAutoResize()?"100%":e;var t=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(".e-table"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(".e-table");t.style.width=e,i.style.width=e},e.prototype.setWidthToFrozenLeftTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze-left");e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e},e.prototype.setWidthToMovableTable=function(){var e="",t=this.parent.getColumns().filter((function(e){return sf.base.isNullOrUndefined(e.width)})).length>=1,i=this.parent.getColumns().filter((function(e){return"auto"===e.width})).length>=1;"number"!=typeof this.parent.width||t||i?t||i||(e=this.calcMovableOrFreezeColWidth("movable")):e=sf.base.formatUnit(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),e=this.isAutoResize()?"100%":e,this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild&&(this.parent.getHeaderContent().querySelector(".e-movableheader").firstElementChild.style.width=e),this.parent.getContent().querySelector(".e-movablecontent").firstElementChild.style.width=e},e.prototype.setWidthToFrozenEditTable=function(){var e=this.calcMovableOrFreezeColWidth("freeze");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=e},e.prototype.setWidthToMovableEditTable=function(){var e=this.calcMovableOrFreezeColWidth("movable");e=this.isAutoResize()?"100%":e,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=e},e.prototype.setWidthToTable=function(){var e=sf.base.formatUnit(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new c({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e);var t=this.parent.element.querySelector(".e-table.e-inline-edit");t&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):t&&(t.style.width=e)},e.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode},e}(),Re=(W=function(e,t){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}W(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ie=function(){function e(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=e,this.rowModelGen=new R(this.parent),this.addEventListener()}return e.prototype.focusCheck=function(e){var t=e.target;this.focusByClick=!0,this.skipFocus=t.classList.contains("e-grid")},e.prototype.onFocus=function(){if(!(this.parent.isDestroyed||sf.base.Browser.isDevice||this.parent.enableVirtualization)){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid());this.parent.enableHeaderFocus||this.parent.getCurrentViewRecords().length||"Batch"===this.parent.editSettings.mode&&("Batch"!==this.parent.editSettings.mode||this.parent.editModule.getBatchChanges().addedRecords.length)||this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new C({isDataRow:!0})]}),this.getContent().selector,!1);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(this.focus(),this.skipFocus=!1)}},e.prototype.passiveFocus=function(e){this.parent.isDestroyed||e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,sf.base.addClass([this.currentInfo.element],["e-focused","e-focus"]))},e.prototype.onBlur=function(e){this.parent.isEdit||e&&(!e.relatedTarget||sf.base.closest(e.relatedTarget,".e-grid"))||(this.removeFocus(),this.skipFocus=!1,this.currentInfo.skipAction=!1,this.getContent().getFocusInfo().elementToFocus&&(this.getContent().getFocusInfo().elementToFocus.tabIndex=0))},e.prototype.onClick=function(e,t){if(!Ct(e.target,"e-filterbarcell")||!e.target.classList.contains("e-input-group-icon")){var i=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridcontent")),r=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridheader"));i=i&&r?!i:i;var n=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-frozencontent"))||!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-frozenheader")),s=!1;if("Left-Right"===this.parent.getFrozenMode()&&(s=!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-frozen-right-content"))||!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-frozen-right-header")),n=n&&!s),!(!i&&sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridheader"))||e.target.classList.contains("e-content"))&&sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-unboundcell")))if(this.setActive(i,n,s),i||!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-gridheader"))){var o={cancel:!1,byKey:!1,byClick:!sf.base.isNullOrUndefined(e.target),clickArgs:e};if(this.parent.notify("beforecellfocused",o),!o.cancel&&!sf.base.closest(e.target,".e-inline-edit")&&(this.setActive(i,n,s),this.getContent())){if(!1===this.getContent().onClick(e,t))return;this.focus()}}else this.clearOutline()}},e.prototype.onKeyPress=function(e){if(!this.skipOn(e)){this.activeKey=e.action;var t={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify("beforecellfocused",t),!t.cancel){var i=this.getContent().matrix.current;this.currentInfo.outline=!0;var r=this.getContent().jump(e.action,i);this.swap=r,r.swap&&(this.setActive(!r.toHeader,r.toFrozen,r.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(i,r,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent()),!1!==this.getContent().onKeyPress(e)?(e.preventDefault(),this.focus(e)):this.clearIndicator()}}},e.prototype.skipOn=function(e){var t=e.target;if(!t)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;var i=sf.base.closest(t,"th")&&!sf.base.closest(t,"th").tabIndex;!e.target.classList.contains("e-filterbaroperator")||13!==e.keyCode&&27!==e.keyCode||sf.base.closest(e.target,".e-filterbarcell").querySelector("input").focus();i&&null!==sf.base.closest(document.activeElement,".e-filterbarcell")&&this.removeFocus();var r=null!==sf.base.closest(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&r){var n=this.active.matrix,s=n.current;r=n.matrix[s[0]].lastIndexOf(1)!==s[1]}return"delete"===e.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(e.action)>-1)||r||null!==sf.base.closest(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||null===sf.base.closest(t,".e-gridcontent")&&null===sf.base.closest(t,".e-gridheader")||"space"===e.action&&!t.classList.contains("e-gridchkbox")&&null===sf.base.closest(t,".e-gridchkbox")&&null===sf.base.closest(t,".e-headerchkcelldiv")||null!==sf.base.closest(t,".e-filter-popup")},e.prototype.focusVirtualElement=function(e){var t=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify("get-virtual-data",i);var r=this.actions.some((function(e){return e===t.activeKey})),n=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;i.isAdd||Object.keys(i.virtualData).length||r||i.isCancel||n?(i.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=!1},e.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},e.prototype.getContent=function(){return this.active||this.content},e.prototype.setActive=function(e,t,i){this.active=e?t?this.fContent:i?this.frContent:this.content:t?this.fHeader:i?this.frHeader:this.header},e.prototype.setFocusedElement=function(e,t){var i=this;this.currentInfo.elementToFocus=e,setTimeout((function(){sf.base.isNullOrUndefined(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(t):i.currentInfo.elementToFocus.focus())}),0)},e.prototype.focus=function(e){this.parent.notify("virtaul-cell-focus",e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},e.prototype.removeFocus=function(e){this.currentInfo.element&&(sf.base.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},e.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(sf.base.addClass([e.element],["e-focused"]),sf.base.addClass([e.elementToFocus],["e-focus"]))},e.prototype.focusHeader=function(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()},e.prototype.focusContent=function(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()},e.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},e.prototype.addFocus=function(e,t){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&!sf.base.isNullOrUndefined(t),e.element){var i=e.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&sf.base.addClass([e.element],["e-focused"]),sf.base.addClass([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,i||this.setFocusedElement(e.elementToFocus,t),this.parent.notify("cellfocused",{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!sf.base.isNullOrUndefined(t),byClick:sf.base.isNullOrUndefined(t),keyArgs:t,isJump:this.swap.swap,container:this.getContent().getInfo(t),outline:!sf.base.isNullOrUndefined(t),swapInfo:this.swap});var r=this.getContent().matrix.current,n=r[0],s=r[1];this.prevIndexes={rowIndex:n,cellIndex:s},this.focusedColumnUid=this.parent.getColumnByIndex(s).uid,this.focusByClick=!1}}},e.prototype.refreshMatrix=function(e){var t=this;return function(i){e&&i.args&&i.args.isFrozen&&!t.fContent?t.fContent=new Te(t.parent):e&&!t.frContent&&i.args&&i.args.renderFrozenRightContent?t.frContent=new ke(t.parent):e&&!t.content&&(t.content=new ze(t.parent)),!e&&i.args&&i.args.isFrozen&&!t.fHeader?t.fHeader=new Ae(t.parent):!e&&i.args&&i.args.renderFrozenRightContent&&!t.frHeader?t.frHeader=new Ee(t.parent):e||t.header||(t.header=new Me(t.parent));var r=e?i.args&&i.args.isFrozen?t.fContent:i.args&&i.args.renderFrozenRightContent?t.frContent:t.content:i.args&&i.args.isFrozen?t.fHeader:i.args&&i.args.renderFrozenRightContent?t.frHeader:t.header,n=e?i.rows.slice(t.parent.frozenRows):i.rows,s=e?i.rows.slice(0,t.parent.frozenRows):i.rows;t.parent.isCollapseStateEnabled()&&e&&(n=n.filter((function(e){return!1!==e.visible})));var o,a=!sf.base.isNullOrUndefined(t.parent.rowTemplate),l=r.matrix.generate(s,r.selector,a);if("batchAdd"===i.name&&t.parent.isFrozenGrid()){var h=t.parent.getMovableRowsObject().map((function(e){return e.clone()})),d=n.map((function(e){return e.clone()}));if(t.fContent.matrix.generate(d,t.fContent.selector,a),t.content.matrix.generate(h,t.content.selector,a),"Left-Right"===t.parent.getFrozenMode()){var c=t.parent.getFrozenRightRowsObject().map((function(e){return e.clone()}));t.frContent.matrix.generate(c,t.frContent.selector,a)}}else r.matrix.generate(n,r.selector,a);if(r.generateRows(s,{matrix:l,handlerInstance:i.args&&i.args.isFrozen?t.fHeader:i.args&&i.args.renderFrozenRightContent?t.frHeader:t.header}),!sf.base.Browser.isDevice&&i&&i.args&&(t.focusByClick||"paging"!==i.args.requestType||(t.skipFocus=!1,t.parent.element.focus()),"grouping"===i.args.requestType&&(t.skipFocus=!0)),i&&i.args&&"virtualscroll"===i.args.requestType)if(t.currentInfo.uid){if(i.rows.some((function(e,i){return o=i,e.uid===t.currentInfo.uid}))&&(t.content.matrix.current[0]=o,t.content.matrix.current[1]=t.parent.getColumnIndexByUid(t.focusedColumnUid)||0,f=t.getContent().getFocusInfo().elementToFocus)){var p=f.getBoundingClientRect(),u=t.parent.element.getBoundingClientRect();p.top>=0&&p.left>=0&&p.right<=Math.min(u.right,window.innerWidth||document.documentElement.clientWidth)&&p.bottom<=Math.min(u.bottom,window.innerHeight||document.documentElement.clientHeight)&&(t.isVirtualScroll=!0,t.focus())}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var f;(f=t.parent.element.querySelector("#"+i.args.focusElement.id))&&f.focus()}}},e.prototype.addEventListener=function(){var e=this;if(!this.parent.isDestroyed){sf.base.EventHandler.add(this.parent.element,"mousedown",this.focusCheck,this),sf.base.EventHandler.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(t){return e.passiveFocus(t)},!0),sf.base.EventHandler.add(this.parent.element,"focusout",this.onBlur,this),this.parent.on("key-pressed",this.onKeyPress,this),this.parent.on("click",this.onClick,this),this.parent.on(p,this.refMatrix,this),this.parent.on("partial-refresh",this.refMatrix,this),this.parent.on("header-refreshed",this.refreshMatrix(),this),this.parent.on("close-edit",this.restoreFocus,this),this.parent.on("restore-Focus",this.restoreFocus,this);for(var t=["start-edit","start-add"],i=0;i<t.length;i++)this.parent.on(t[i],this.clearIndicator,this);this.parent.on("sorting-complete",this.restoreFocus,this),this.parent.on("filtering-complete",this.filterfocus,this);for(var r=["grouping","ungrouping"],n=0;n<r.length;n++)this.parent.on(r[n]+"-complete",this.restoreFocusWithAction,this);this.parent.on("batchAdd",this.refMatrix,this),this.parent.on("batchCancel",this.refMatrix,this),this.parent.on("batchDelete",this.refMatrix,this),this.parent.on("detailDataBound",this.refMatrix,this),this.parent.on(f,this.refMatrix,this),this.parent.on("cellfocused",this.internalCellFocus,this)}},e.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},e.prototype.removeEventListener=function(){if(!this.parent.isDestroyed){sf.base.EventHandler.remove(this.parent.element,"mousedown",this.focusCheck),sf.base.EventHandler.remove(this.parent.element,"focus",this.onFocus),sf.base.EventHandler.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),this.parent.off("key-pressed",this.onKeyPress),this.parent.off("click",this.onClick),this.parent.off(p,this.refMatrix),this.parent.off("partial-refresh",this.refMatrix),this.parent.off("header-refreshed",this.refreshMatrix()),this.parent.off("close-edit",this.restoreFocus),this.parent.off("restore-focus",this.restoreFocus);for(var e=["start-edit","start-add"],t=0;t<e.length;t++)this.parent.off(e[t],this.clearOutline);this.parent.off("sorting-complete",this.restoreFocus),this.parent.off("filtering-complete",this.filterfocus);for(var i=["grouping","ungrouping"],r=0;r<i.length;r++)this.parent.on(i[r]+"-complete",this.restoreFocusWithAction);this.parent.off("batchAdd",this.refMatrix),this.parent.off("batchDelete",this.refMatrix),this.parent.off("batchCancel",this.refMatrix),this.parent.off("detailDataBound",this.refMatrix),this.parent.off(f,this.refMatrix),this.parent.off("cellfocused",this.internalCellFocus)}},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.restoreFocus=function(){this.addFocus(this.getContent().getFocusInfo())},e.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling){var t=this.getContent().matrix,i=t.current;switch(e.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||sf.base.isNullOrUndefined(t.matrix[i[0]])?"grouping"===e.requestType?i[1]+1:i[1]-1:t.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i,this.addFocus(this.getContent().getFocusInfo())}},e.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},e.prototype.clearIndicator=function(){this.currentInfo.element&&this.currentInfo.elementToFocus&&sf.base.removeClass([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},e.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},e.prototype.forgetPrevious=function(){this.forget=!0},e.prototype.setActiveByKey=function(e,t){var i=this;if(this.parent.isFrozenGrid()||0!==this.parent.frozenRows){var r,n={home:function(){return{toHeader:!r.isContent,toFrozen:!0}},end:function(){return{toHeader:!r.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:i.parent.isFrozenGrid()}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in n){r=t.getInfo();var s=n[e]();this.setActive(!s.toHeader,s.toFrozen),this.getContent().matrix.current=t.matrix.current}}},e.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&"enter"===e.keyArgs.action&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell")||e.parent.classList.contains("e-templatecell"))){this.clearIndicator();var t=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(t),this.currentInfo.skipAction=!0}},e}(),Fe=function(){function e(){this.matrix=[],this.current=[]}return e.prototype.set=function(e,t,i){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.columns)),this.matrix[e]=this.matrix[e]||[],this.matrix[e][t]=i?1:0},e.prototype.get=function(e,t,i,r,n){var s=t;if(e+i[0]<0)return[e,t];e=Math.max(0,Math.min(e+i[0],this.rows));var o=!0;if(sf.base.isNullOrUndefined(this.matrix[e]))return null;if(t=Math.max(0,Math.min(t+i[1],this.matrix[e].length-1)),s+i[1]>this.matrix[e].length-1&&n(e,t,r))return[e,s];var a=this.first(this.matrix[e],t,i,!0,r);t=null===a?s:a;var l=sf.base.getValue(e+"."+t,this.matrix);if(e!==this.rows||"downArrow"!==r&&"enter"!==r||(i[0]=-1),null===a){e=this.current[0];for(var h=0;h<this.rows;h++)if(this.matrix[h].some((function(e){return 1===e}))){o=!1;break}if(o)return[e,t]}return this.inValid(l)||!n(e,t,r)?this.get(e,s,i,r,n):[e,t]},e.prototype.first=function(e,t,i,r,n){return(t<0||t===e.length)&&this.inValid(e[t])&&"upArrow"!==n&&"downArrow"!==n||!e.some((function(e){return 1===e}))?null:this.inValid(e[t])?this.first(e,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)?r?0:++t:t+i[1],i,!1,n):t},e.prototype.select=function(e,t){e=Math.max(0,Math.min(e,this.rows)),t=Math.max(0,Math.min(t,this.matrix[e].length-1)),this.current=[e,t]},e.prototype.generate=function(e,t,i){this.rows=e.length-1,this.matrix=[];for(var r=0;r<e.length;r++){var n=e[r].cells.filter((function(e){return!0!==e.isSpanned}));this.columns=Math.max(n.length-1,0|this.columns);for(var s=0;s<n.length;s++)this.set(r,s,t(e[r],n[s],i))}return this.matrix},e.prototype.inValid=function(e){return 0===e||void 0===e},e}(),ze=function(){function e(e){var t=this;this.matrix=new Fe,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(e){return{home:[t.matrix.current[0],-1,0,1],end:[t.matrix.current[0],t.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[t.matrix.rows,t.matrix.columns+1,0,-1]}[e]||null}}return e.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},e.prototype.onKeyPress=function(e){var t=this.keyActions[e.action],i=this.getCurrentFromAction(e.action,t,e.action in this.keyActions,e);if(i){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===i.toString()){if(i.toString()===[this.matrix.rows,this.matrix.columns].toString()||i.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===i.toString())return!1;i=this.editNextRow(i[0],i[1],e.action)}this.matrix.select(i[0],i[1])}},e.prototype.editNextRow=function(e,t,i){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),s=r.getColumnIndexByField(r.getVisibleColumns()[0].field),o=this.getTable().rows[e].cells[t];"tab"===i&&n&&(e++,t=s+(this.getTable().rows[e].querySelectorAll(".e-indentcell").length+this.getTable().rows[e].querySelectorAll(".e-detailrowcollapse").length));return"shiftTab"===i&&n&&(e--,t=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),o.classList.contains("e-rowcell")||o.classList.contains("e-headercell")||o.classList.contains("e-groupcaption")?[e,t]:this.editNextRow(e,t,i)},e.prototype.getCurrentFromAction=function(e,t,i,r){if(void 0===t&&(t=[0,0]),!i&&!this.indexesByKey(e)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(t),s=n[0],o=n[1],a=n[2],l=n[3];return this.matrix.get(s,o,[a,l],e,this.validator())},e.prototype.onClick=function(e,t){var i=e.target;if(i=(i=i.classList.contains("e-rowcell")?i:sf.base.closest(i,"td"))||(sf.base.closest(e.target,"td.e-detailrowcollapse")||sf.base.closest(e.target,"td.e-detailrowexpand")),!(i=(i=sf.base.closest(e.target,"td.e-detailcell")&&sf.base.isNullOrUndefined(sf.base.closest(sf.base.closest(e.target,".e-grid"),"td.e-detailcell"))?null:i)&&sf.base.closest(i,"table").classList.contains("e-table")?i:null))return!1;var r=[i.parentElement.rowIndex,i.cellIndex],n=r[0],s=r[1],o=this.matrix.current,a=o[0],l=o[1],h=sf.base.getValue(n+"."+s,this.matrix.matrix);if(this.matrix.inValid(h)||!t&&a===n&&l===s||!Ct(e.target,"e-rowcell")&&!Ct(e.target,"e-groupcaption"))return!1;this.matrix.select(n,s)},e.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=void 0===i?0:i,n=t[1],s=void 0===n?0:n;return this.matrix.current=[r,s],e.element=sf.base.isNullOrUndefined(this.getTable().rows[r])?null:this.getTable().rows[r].cells[s],e.element?(e.elementToFocus=e.element.classList.contains("e-unboundcell")||e.element.classList.contains("e-detailcell")?e.element:this.getFocusable(e.element),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid"),e):e},e.prototype.getFocusable=function(e){var t='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])';this.parent.isEdit&&(t='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var i=[].slice.call(e.querySelectorAll(t));return i.length?i[0]:e},e.prototype.selector=function(e,i,r){var n=[t.Expand,t.GroupCaption,t.CaptionSummary,t.GroupSummary];return(e.isDataRow&&i.visible&&(i.isDataCell||i.isTemplate)||e.isDataRow&&i.cellType===t.DetailExpand&&sf.base.isNullOrUndefined(i.visible)||!e.isDataRow&&n.indexOf(i.cellType)>-1||i.column&&"checkbox"===i.column.type||i.cellType===t.CommandColumn||e.isDataRow&&r)&&!("delete"===e.edit&&e.isDirty)},e.prototype.jump=function(e,t){var i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftTab"===e)&&0===t[1],r=("rightArrow"===e||"tab"===e)&&t[1]===this.matrix.columns,n="Left-Right"===this.parent.getFrozenMode()&&r;"Right"===this.parent.getFrozenMode()&&(i=r);var s=0!==this.parent.frozenRows&&"shiftEnter"===e;"tab"!==e||this.parent.isEdit||t[1]!==this.matrix.matrix[t[0]].lastIndexOf(1)||this.matrix.matrix.length-1===t[0]||(this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),"shiftTab"!==e||this.parent.isEdit||0===t[0]||this.matrix.matrix[t[0]].indexOf(1)!==t[1]||(this.matrix.current[0]=this.matrix.current[0]-1,this.matrix.current[1]=this.matrix.matrix[t[0]].length);var o=!1,a=document.activeElement.parentElement;(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&a.classList.contains("e-row")&&(o=parseInt(a.getAttribute("aria-rowindex"),10)>0);return{swap:!o&&(("upArrow"===e||s)&&0===t[0]||i||n),toHeader:("upArrow"===e||s)&&0===t[0],toFrozen:i,toFrozenRight:n}},e.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return"Right"===this.parent.getFrozenMode()||"Left-Right"===this.parent.getFrozenMode()?("leftArrow"!==r&&"shiftTab"!==r||(n[0]=e[0],n[1]=i.matrix.columns+1),"Left-Right"!==this.parent.getFrozenMode()||"rightArrow"!==r&&"tab"!==r||(n[0]=e[0],n[1]=-1)):"rightArrow"!==r&&"tab"!==r||(n[0]=e[0],n[1]=-1),"downArrow"!==r&&"enter"!==r||(n[0]=-1,n[1]=e[1]),n},e.prototype.generateRows=function(e,t){var i,r=t.matrix,n=t.handlerInstance,s=n.matrix.matrix.length,o=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?s+1:s;n.matrix.matrix=n.matrix.matrix.slice(0,o),n.matrix.rows=o,(i=n.matrix.matrix).push.apply(i,r),n.matrix.rows+=r.length},e.prototype.getInfo=function(e){var t=this.getFocusInfo(),i=this.matrix.current,r=i[0],n=i[1],s=t.element.classList.contains("e-rowcell"),o=s||e&&"enter"!==e.action&&(t.element.classList.contains("e-detailrowcollapse")||t.element.classList.contains("e-detailrowexpand")),a=[Math.min(parseInt(t.element.parentElement.getAttribute("aria-rowindex"),10),r),Math.min(parseInt(t.element.getAttribute("aria-colindex"),10),n)];return{isContent:!0,isDataCell:s,indexes:[a[0],a[1]],isSelectable:o}},e.prototype.validator=function(){var e=this.getTable();return function(t,i,r){if(!sf.base.isNullOrUndefined(e.rows[t])){var n=void 0;i=e.querySelector(".e-emptyrow")?0:i;var s=0!==(n=e.rows[t].cells[0].classList.contains("e-editcell")?e.rows[t].cells[0].querySelectorAll("td")[i]:e.rows[t].cells[i]).getBoundingClientRect().width;if("enter"===r||"shiftEnter"===r)return s&&n.classList.contains("e-rowcell");if(("shiftUp"===r||"shiftDown"===r)&&n.classList.contains("e-rowcell"))return s;if("shiftUp"!==r&&"shiftDown"!==r)return s}return!1}},e.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=void 0===i?-1:i,n=t[1],s=void 0===n?-1:n;if(r<0||s<0)return!0;var o=sf.base.getValue(r+".cells."+s,this.getTable().rows);return!o||("enter"!==e.action&&"shiftEnter"!==e.action||o.classList.contains("e-rowcell")&&!o.classList.contains("e-unboundcell")&&(!o.classList.contains("e-templatecell")||o.classList.contains("e-editedbatchcell"))&&!o.classList.contains("e-detailcell"))},e.prototype.getGridSeletion=function(){return!sf.base.isBlazor()&&this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},e}(),Me=function(e){function i(t){return e.call(this,t)||this}return Re(i,e),i.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},i.prototype.onClick=function(e){var t=e.target;if((t=t.classList.contains("e-headercell")?t:sf.base.closest(t,"th"))||0===this.parent.frozenRows||(t=e.target.classList.contains("e-rowcell")?e.target:sf.base.closest(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(t){var i=[t.parentElement.rowIndex,t.cellIndex],r=i[0],n=i[1],s=sf.base.getValue(r+"."+n,this.matrix.matrix);if(this.matrix.inValid(s))return!1;this.matrix.select(t.parentElement.rowIndex,t.cellIndex)}},i.prototype.getFocusInfo=function(){var e={},t=this.matrix.current,i=t[0],r=void 0===i?0:i,n=t[1],s=void 0===n?0:n;return e.element=this.getTable().rows[r].cells[s],sf.base.isNullOrUndefined(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e},i.prototype.selector=function(e,i){return i.visible&&(void 0!==i.column.field||i.isTemplate||!sf.base.isNullOrUndefined(i.column.template))||"checkbox"===i.column.type||i.cellType===t.StackedHeader},i.prototype.jump=function(e,t){var i=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1],r=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,n="Left-Right"===this.parent.getFrozenMode()&&r;"Right"===this.parent.getFrozenMode()&&(i=r);var s,o,a=0!==this.parent.frozenRows&&"enter"===e,l=i||n,h=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,d=h&&!sf.base.isNullOrUndefined(h[t[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(o=this.matrix.matrix.length-1===t[0],(s=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1))&&(this.matrix.current[0]=o?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&o&&s&&(i=!0,l=!1)),{swap:("downArrow"===e||a)&&t[0]===this.matrix.matrix.length-1||d&&(i||n)||"tab"===e&&o&&s,toHeader:l,toFrozen:i,toFrozenRight:n}},i.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return"Right"===this.parent.getFrozenMode()||"Left-Right"===this.parent.getFrozenMode()?(("leftArrow"===r||"shiftLeft"===r&&this.getGridSeletion()||"shiftTab"===r)&&(n[0]=e[0],n[1]=i.matrix.columns+1),"Left-Right"===this.parent.getFrozenMode()&&("rightArrow"===r||"shiftRight"===r&&this.getGridSeletion()||"tab"===r)&&(n[0]=e[0],n[1]=-1)):("rightArrow"===r||"shiftRight"===r&&this.getGridSeletion()||"tab"===r)&&(n[0]=e[0],n[1]=-1),"upArrow"!==r&&"shiftEnter"!==r||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n},i.prototype.generateRows=function(e){var t=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var i=e[0].cells,r=0;r<i.length;r++)this.matrix.set(t,r,i[r].visible&&!1!==i[r].column.allowFiltering)}},i.prototype.getInfo=function(t){return sf.base.extend(e.prototype.getInfo.call(this,t),{isContent:!1,isHeader:!0})},i.prototype.validator=function(){return function(){return!0}},i.prototype.shouldFocusChange=function(e){var t=this.matrix.current,i=t[0],r=t[1];if(i<0||r<0)return!0;var n=sf.base.getValue(i+".cells."+r,this.getTable().rows);return!n||("enter"!==e.action&&"altDownArrow"!==e.action||!n.classList.contains("e-headercell"))},i}(ze),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Re(t,e),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},t.prototype.jump=function(e,t){var i=0!==this.parent.frozenRows&&"shiftEnter"===e,r=("upArrow"===e||i)&&0===t[0];return"Right"===this.parent.getFrozenMode()?{swap:r||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:r,toFrozen:r}:{swap:r||("tab"===e||"rightArrow"===e)&&t[1]===this.matrix.columns,toHeader:r,toFrozen:r}},t.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return"Right"===this.parent.getFrozenMode()?"rightArrow"!==r&&"tab"!==r||(n[0]=e[0],n[1]=-1):("tab"===r&&this.parent.enableHeaderFocus&&(n[0]=e[0],n[1]=-1),"leftArrow"!==r&&"shiftTab"!==r||(n[0]=e[0],n[1]=i.matrix.columns+1)),"downArrow"!==r&&"enter"!==r||(n[0]=-1,n[1]=e[1]),n},t}(ze),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Re(t,e),t.prototype.jump=function(e,t){var i=0!==this.parent.frozenRows&&"enter"===e,r=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,n=r&&!sf.base.isNullOrUndefined(r[t[0]]);if("Right"===this.parent.getFrozenMode()){var s=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||n&&s,toHeader:s,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}}return{swap:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns&&n,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&t[1]===this.matrix.columns,toFrozen:("downArrow"===e||i)&&t[0]===this.matrix.matrix.length-1}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},t.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return"Right"===this.parent.getFrozenMode()?("rightArrow"===r||"shiftRight"===r&&this.getGridSeletion()||"tab"===r)&&(n[0]=e[0],n[1]=-1):("leftArrow"===r||"shiftLeft"===r&&this.getGridSeletion()||"shiftTab"===r)&&(n[0]=e[0],n[1]=i.matrix.columns+1),"upArrow"!==r&&"shiftEnter"!==r||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n},t}(Me),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Re(t,e),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")},t.prototype.jump=function(e,t){var i=0!==this.parent.frozenRows&&"shiftEnter"===e,r=("upArrow"===e||i)&&0===t[0];return{swap:r||("shiftTab"===e||"leftArrow"===e)&&0===t[1],toHeader:r,toFrozenRight:r}},t.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return"rightArrow"!==r&&"tab"!==r||(n[0]=e[0],n[1]=-1),"downArrow"!==r&&"enter"!==r||(n[0]=-1,n[1]=e[1]),n},t}(ze),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Re(t,e),t.prototype.jump=function(e,t){var i=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,r=i&&!sf.base.isNullOrUndefined(i[t[0]]),n=0!==this.parent.frozenRows&&"enter"===e,s=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&0===t[1];return{swap:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1||r&&s,toHeader:s,toFrozenRight:("downArrow"===e||n)&&t[0]===this.matrix.matrix.length-1}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")},t.prototype.getNextCurrent=function(e,t,i,r){void 0===e&&(e=[]);var n=[];return("rightArrow"===r||"shiftRight"===r&&this.getGridSeletion()||"tab"===r)&&(n[0]=e[0],n[1]=0),"upArrow"!==r&&"shiftEnter"!==r||(n[0]=this.matrix.matrix.length,n[1]=e[1]),n},t}(Me),Pe=(_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),De=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pe(t,e),De([sf.base.Property(12)],t.prototype,"pageSize",void 0),De([sf.base.Property(8)],t.prototype,"pageCount",void 0),De([sf.base.Property(1)],t.prototype,"currentPage",void 0),De([sf.base.Property()],t.prototype,"totalRecordsCount",void 0),De([sf.base.Property(!1)],t.prototype,"enableQueryString",void 0),De([sf.base.Property(!1)],t.prototype,"pageSizes",void 0),De([sf.base.Property(null)],t.prototype,"template",void 0),t}(sf.base.ChildProperty),Be=(Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Oe=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Be(t,e),Oe([sf.base.Property("startsWith")],t.prototype,"operator",void 0),t}(sf.base.ChildProperty),qe=function(){return(qe=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},He=function(){function e(e,t,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.autoFillRLselection=!0,this.parent=e,this.selectionSettings=t,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return e.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},e.prototype.onActionBegin=function(e,t){this.parent.trigger(t,this.fDataUpdate(e))},e.prototype.fDataUpdate=function(e){if(!(this.isMultiSelection||sf.base.isNullOrUndefined(e.cellIndex)&&sf.base.isNullOrUndefined(e.rowIndex))){var t=this.getRowObj(sf.base.isNullOrUndefined(e.rowIndex)?sf.base.isNullOrUndefined(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=t.foreignKeyData}return e},e.prototype.onActionComplete=function(e,t){this.parent.trigger(t,this.fDataUpdate(e)),this.isMultiSelection=!1},e.prototype.getModuleName=function(){return"selection"},e.prototype.destroy=function(){var e=this.parent.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),sf.base.EventHandler.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},e.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},e.prototype.getSelectedMovableRow=function(e){var t=this.parent;return t.isFrozenGrid()&&this.parent.getContent().querySelector(".e-movablecontent")?t.getMovableRowByIndex(e):null},e.prototype.getSelectedFrozenRightRow=function(e){var t=this.parent;return t.isFrozenGrid()&&"Left-Right"===t.getFrozenMode()&&t.getFrozenRightContent()?t.getFrozenRightRowByIndex(e):null},e.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if("Batch"===e.editSettings.mode&&e.editModule){var t=function(e){for(var t=[],i=0;i<e.length;i++)t.push(sf.base.extend({},vt(e[i]),{},!0));return t}(this.parent.getCurrentViewRecords());t="Bottom"===e.editSettings.newRowPosition?t.concat(this.parent.editModule.getBatchChanges().addedRecords):this.parent.editModule.getBatchChanges().addedRecords.concat(t);for(var i=this.parent.editModule.getBatchChanges().deletedRecords,r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<i.length;n++)for(var s=0;s<t.length;s++)if(i[n][r]===t[s][r]){t.splice(s,1);break}return t}return e.getCurrentViewRecords()},e.prototype.selectRow=function(e,t){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([e]);else{var i,r=this.parent,n=r.getRowByIndex(e),s=this.getSelectedMovableRow(e),o=this.getSelectedFrozenRightRow(e);if(r.enableVirtualization&&e>-1){this.parent.notify("select-virtual-Row",{selectedIndex:e});var a=r.isFrozenGrid()?r.contentModule.getRowObjectByIndex(e):null;if(!n||!r.getRowObjectFromUID(n.getAttribute("data-uid"))&&!a)return void(this.parent.getSelectedRecords().length>0&&this.clearRowSelection());i=a||r.getRowObjectFromUID(n.getAttribute("data-uid")).data}else i=this.getCurrentBatchRecordChanges()[e];if(this.isRowType()&&n&&!this.isEditing()){var l,h=n.hasAttribute("aria-selected");this.activeTarget();if(t=t?!!this.selectedRowIndexes.length&&(1===this.selectedRowIndexes.length&&e===this.selectedRowIndexes[0]):t)this.rowSelectingCallBack(l,t,e,i,!1,h,"cancel")(l);else{!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid?(l={data:i,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:r.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},l=this.addMovableArgs(l,s,o)):l={data:i,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowIndex:this.prevRowIndex,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger("rowSelecting",this.fDataUpdate(l),this.rowSelectingCallBack(l,t,e,i,!1,h,"cancel"))}}}},e.prototype.rowSelectingCallBack=function(e,t,i,r,n,s,o){var a=this;return function(e){sf.base.isNullOrUndefined(e)||!0!==e[o]?(a.index=i,a.toggle=t,a.data=r,a.removed=n,s&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode?(a.clearSelectedRow(i),a.selectRowCallBack()):!s&&a.selectionSettings.persistSelection&&"ResetOnRowClick"!==a.selectionSettings.checkboxMode&&a.selectRowCallBack(),"ResetOnRowClick"===a.selectionSettings.checkboxMode&&a.clearSelection(),(!a.selectionSettings.persistSelection||"ResetOnRowClick"===a.selectionSettings.checkboxMode||!a.parent.isCheckBoxSelection&&a.selectionSettings.persistSelection)&&(a.selectRowCheck=!0,a.clearRow())):a.disableInteracted()}},e.prototype.selectRowCallBack=function(){var e,t=this.parent,i=this.index,r=this.toggle,n=this.data,s=this.removed,o=t.getRowByIndex(i),a=this.getSelectedMovableRow(i),l=this.getSelectedFrozenRightRow(i);if(r||s||(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(o,i),this.selectMovableRow(a,l,i)),this.selectRowIndex(i)),!r){!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid?(e={data:n,rowIndex:i,row:o,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},e=this.addMovableArgs(e,a,l)):e={data:n,rowIndex:i,row:o,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked},this.onActionComplete(e,"rowSelected")}if(sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization){this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection",!0,"normal",[i])}this.isInteracted=!1,this.updateRowProps(i)},e.prototype.selectMovableRow=function(e,t,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(e,i),"Left-Right"===this.parent.getFrozenMode()&&t&&this.updateRowSelection(t,i))},e.prototype.addMovableArgs=function(e,t,i){if(this.parent.isFrozenGrid()){var r={mRow:t,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};"Left-Right"===this.parent.getFrozenMode()&&i&&(r.frozenRightRow=i,r.previousFrozenRightRow=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),e=qe({},e,r)}return e},e.prototype.selectRowsByRange=function(e,t){this.selectRows(this.getCollectionFromIndexes(e,t)),this.selectRowIndex(t)},e.prototype.selectRows=function(e){var t=this,i=this.parent,r=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var n=[],s=[],o=this.getSelectedMovableRow(r),a=this.getSelectedFrozenRightRow(r),l=[];if(this.isRowType()&&!this.isEditing()){for(var h=0,d=e.length;h<d;h++){var c=this.parent.getDataRows()[e[h]],p=this.getRowObj(c);p&&(l.push(p.data),n.push(c),s.push(p.foreignKeyData))}var u;this.activeTarget(),!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid?(u={cancel:!1,rowIndexes:e,row:n,rowIndex:r,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:l,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:s},u=this.addMovableArgs(u,o,a)):u={cancel:!1,rowIndexes:e,rowIndex:r,previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:l,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:s},this.parent.trigger("rowSelecting",this.fDataUpdate(u),(function(h){if(sf.base.isNullOrUndefined(h)||!0!==h.cancel){t.clearRow(),t.selectRowIndex(e.slice(-1)[0]);var d=function(e){if(t.updateRowSelection(i.getRowByIndex(e),e),i.isFrozenGrid()){var n="Left-Right"===t.parent.getFrozenMode()?i.getFrozenRightRowByIndex(e):void 0;t.selectMovableRow(i.getMovableRowByIndex(e),n,e)}t.updateRowProps(r)};if(t.isSingleSel())d(r);else for(var c=0,p=e;c<p.length;c++){d(p[c])}!sf.base.isBlazor()||t.parent.isJsComponent||t.parent.isHybrid?(h={rowIndexes:e,row:n,rowIndex:r,target:t.actualTarget,prevRow:i.getRows()[t.prevRowIndex],previousRowIndex:t.prevRowIndex,data:sf.base.isBlazor()?l:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked,foreignKeyData:s},h=t.addMovableArgs(h,o,a)):h={rowIndexes:e,rowIndex:r,previousRowIndex:t.prevRowIndex,row:n,prevRow:i.getRows()[t.prevRowIndex],data:sf.base.isBlazor()?l:t.getSelectedRecords(),isInteracted:t.isInteracted,isHeaderCheckboxClicked:t.isHeaderCheckboxClicked,foreignKeyData:s},t.isRowSelected&&t.onActionComplete(h,"rowSelected"),t.isInteracted=!1}else t.disableInteracted()}))}},e.prototype.addRowsToSelection=function(e){var t=this.parent,i=this.target;this.isMultiSelection=!0;var r=t.getSelectedRowIndexes().concat(e),n=this.isSingleSel()?t.getRowByIndex(e[e.length-1]):t.getRowByIndex(e[0]),s=this.isSingleSel()?this.getSelectedMovableRow(e[e.length-1]):this.getSelectedMovableRow(e[0]),o=this.isSingleSel()?this.getSelectedFrozenRightRow(e[e.length-1]):this.getSelectedFrozenRightRow(e[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly)for(var a,l=this.parent.getColumns().filter((function(e){return"checkbox"===e.type})),h=0,d=e;h<d.length;h++){var c=d[h],p=this.getRowObj(c),u=this.selectedRowIndexes.indexOf(c)>-1;if(this.selectRowIndex(c),u&&(l.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect("rowDeselecting",[c],[p.data],[n],[p.foreignKeyData],i),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(c),1),this.selectedRecords.splice(this.selectedRecords.indexOf(n),1),n.removeAttribute("aria-selected"),this.addRemoveClassesForRow(n,!1,null,"e-selectionbackground","e-active"),s&&(this.selectedRecords.splice(this.selectedRecords.indexOf(s),1),s.removeAttribute("aria-selected"),this.addRemoveClassesForRow(s,!1,null,"e-selectionbackground","e-active")),o&&(this.selectedRecords.splice(this.selectedRecords.indexOf(o),1),o.removeAttribute("aria-selected"),this.addRemoveClassesForRow(o,!1,null,"e-selectionbackground","e-active")),this.rowDeselect("rowDeselected",[c],[p.data],[n],[p.foreignKeyData],i,[s],void 0,[o]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1}else{var f="isHybrid";if(this.activeTarget(),!sf.base.isBlazor()||this.parent.isJsComponent||this.parent[f]?(a={cancel:!1,data:p.data,rowIndex:c,row:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:p.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:r},a=this.addMovableArgs(a,s,o)):a={cancel:!1,data:p.data,rowIndex:c,previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:p.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:r},this.parent.trigger("rowSelecting",this.fDataUpdate(a)),!sf.base.isNullOrUndefined(a)&&!0===a.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(n,c),this.selectMovableRow(s,o,c)}if(!u){f="isHybrid";!sf.base.isBlazor()||this.parent.isJsComponent||this.parent[f]?(a={data:p.data,rowIndex:c,row:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:p.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:r},a=this.addMovableArgs(a,s,o)):a={data:p.data,rowIndex:c,previousRowIndex:this.prevRowIndex,row:n,prevRow:t.getRows()[this.prevRowIndex],foreignKeyData:p.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:r},this.onActionComplete(a,"rowSelected")}if(this.isInteracted=!1,this.updateRowProps(c),this.isSingleSel())break}},e.prototype.getCollectionFromIndexes=function(e,t){for(var i=[],r=e<=t?{i:e,max:t}:{i:t,max:e},n=r.i,s=r.max;n<=s;n++)i.push(n);return e>t&&i.reverse(),i},e.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},e.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},e.prototype.clearSelectedRow=function(e){if(this.toggle){var t=this.parent.getRowByIndex(e);this.disableUI||(t.removeAttribute("aria-selected"),this.addRemoveClassesForRow(t,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(t,!1),this.updateCheckBoxes(t),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},e.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},e.prototype.updatePersistCollection=function(e,t){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!sf.base.isNullOrUndefined(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(e),n=r.data?r.data[this.primaryKey]:null;if(null===n)return;r.isSelected=t,t?(this.selectedRowState[n]=t,this.persistSelectedData.some((function(e){return e[i.primaryKey]===n}))||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},e.prototype.updatePersistDelete=function(e){var t,i=this;delete this.selectedRowState[e],this.persistSelectedData.some((function(r,n){return t=n,r[i.primaryKey]===e}))&&this.persistSelectedData.splice(t,1)},e.prototype.updateCheckBoxes=function(e,t,i){if(!sf.base.isNullOrUndefined(e)){var r=e.querySelector(".e-checkselect");sf.base.isNullOrUndefined(r)||(Bt(r.nextElementSibling,t),Dt(r,t),(sf.base.isNullOrUndefined(this.checkedTarget)||!sf.base.isNullOrUndefined(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},e.prototype.updateRowSelection=function(e,t){if(e){this.selectedRowIndexes.push(t);var i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(e),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var r=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(r=this.parent.contextMenuModule.cell),!r)return;this.focus.onClick({target:r},!0)}}},e.prototype.clearSelection=function(){if(!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!sf.base.isNullOrUndefined(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1}},e.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){for(var t=this.parent,i=this.parent.getDataRows(),r=[],n=[],s=[],o=[],a=[],l=[],h=this.target,d=(this.parent.getCurrentViewRecords(),0),c=this.selectedRowIndexes.length;d<c;d++){var p="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[d]]:this.parent.getDataRows()[this.selectedRowIndexes[d]],u=this.getRowObj(p);u&&(r.push(u.data),n.push(p),a.push(this.selectedRowIndexes[d]),l.push(u.foreignKeyData)),t.isFrozenGrid()&&(s.push(t.getMovableRows()[this.selectedRowIndexes[d]]),"Left-Right"===t.getFrozenMode()&&o.push(t.getFrozenRightRows()[this.selectedRowIndexes[d]]))}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect("rowDeselecting",a,r,n,l,h,s,(function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked)){if(e.parent.isPersistSelection)if("Intermediate"===e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall")))for(var t=0;t<e.selectedRecords.length;t++)e.updatePersistCollection(e.selectedRecords[t],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))}else{for(var d=[].slice.call(i.filter((function(e){return e.hasAttribute("aria-selected")}))),c=0;c<d.length;c++)e.disableUI&&!sf.base.isBlazor()||(d[c].removeAttribute("aria-selected"),e.addRemoveClassesForRow(d[c],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(d[c],!1),e.updateCheckBoxes(d[c]);sf.base.isBlazor()&&e.parent.isServerRendered&&e.parent.enableVirtualization&&e.getRenderer().setSelection(null,!1,!0);t=0;for(var p=e.selectedRowIndexes.length;t<p;t++){var u=e.getSelectedMovableRow(e.selectedRowIndexes[t]);u&&(e.disableUI&&!sf.base.isBlazor()||(u.removeAttribute("aria-selected"),e.addRemoveClassesForRow(u,!1,!0,"e-selectionbackground","e-active")),e.updateCheckBoxes(u),e.isPrevRowSelection||e.updatePersistCollection(u,!1));var f=e.getSelectedFrozenRightRow(e.selectedRowIndexes[t]);f&&(e.disableUI||(f.removeAttribute("aria-selected"),e.addRemoveClassesForRow(f,!1,!0,"e-selectionbackground","e-active")),e.updateCheckBoxes(f),e.isPrevRowSelection||e.updatePersistCollection(f,!1))}e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect("rowDeselected",a,r,n,l,h,s,void 0,o),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))}}),o)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},e.prototype.rowDeselect=function(e,t,i,r,n,s,o,a,l){var h=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked)||!this.selectionSettings.persistSelection){var d={rowIndex:t[0],data:this.selectionSettings.persistSelection&&"Uncheck"===this.parent.checkAllRows&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode?this.persistSelectedData:i,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===e&&delete d.cancel;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid){d.row=r,d.target=this.actualTarget,this.actualTarget&&!sf.base.isNullOrUndefined(sf.base.closest(this.actualTarget,"thead"))||t.length>1?(d.rowIndex=t[0],d.rowIndexes=t):1===t.length&&(d.data=d.data[0],d.row=d.row[0],d.foreignKeyData=d.foreignKeyData[0],this.isAddRowsToSelection&&(d.rowIndexes=t))}else{d.rowIndex=d.rowIndex[d.rowIndex.length-1],d.data=d.data[d.data.length-1]}this.parent.trigger(e,sf.base.isBlazor()&&!this.parent.isJsComponent||!this.parent.isFrozenGrid()?d:qe({},d,{mRow:o,frozenRightRow:l}),(function(e){h.isCancelDeSelect=e.cancel,h.isCancelDeSelect&&(h.isRowClicked||h.checkSelectAllClicked)||(h.updatePersistCollection(r[0],!1),h.updateCheckBoxes(r[0],void 0,t[0]),o&&h.updateCheckBoxes(o[0],void 0,t[0]),l&&h.updateCheckBoxes(l[0],void 0,t[0])),void 0!==a&&a()}))}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==a&&a()},e.prototype.getRowObj=function(e){return void 0===e&&(e=this.currentIndex),sf.base.isNullOrUndefined(e)?{}:("number"==typeof e&&(e=this.parent.getRowByIndex(e)),e&&this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{})},e.prototype.getSelectedMovableCell=function(e){var t=this.parent,i=t.getColumnByIndex(e.cellIndex);return t.isFrozenGrid()&&"movable"===i.getFreezeTableName()?t.getMovableCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex)):null},e.prototype.selectCell=function(e,t){if(this.isCellType()){var i,r=this.parent,n=this.getSelectedMovableCell(e);n||(n=r.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex))),this.currentIndex=e.rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&n&&!this.isEditing()){var o=n.classList.contains("e-cellselectionbackground");if(t=t?!sf.base.isUndefined(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&o:t)this.successCallBack(i,t,e,n,s)(i);else{if(i={data:s,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1},!sf.base.isBlazor()||this.parent.isJsComponent){i.currentCell=n;i.previousRowCellIndex=this.prevECIdxs}this.parent.trigger("cellSelecting",this.fDataUpdate(i),this.successCallBack(i,t,e,n,s)),this.cellselected=!0}}}},e.prototype.successCallBack=function(e,t,i,r,n){var s=this;return function(e){if((sf.base.isNullOrUndefined(e)||!0!==e.cancel)&&(t||(e.currentCell=e.currentCell?e.currentCell:r),s.clearCell(),t||s.updateCellSelection(r,i.rowIndex,i.cellIndex),!t)){var o=void 0;if(!sf.base.isBlazor()||s.parent.isJsComponent||s.parent.isHybrid){(o={data:n,cellIndex:i,currentCell:r,selectedRowCellIndex:s.selectedRowCellIndexes,previousRowCell:s.prevECIdxs?s.getCellIndex(s.prevECIdxs.rowIndex,s.prevECIdxs.cellIndex):void 0}).previousRowCellIndex=s.prevECIdxs}else o={data:n,cellIndex:i,selectedRowCellIndex:s.selectedRowCellIndexes};s.updateCellProps(i,i),s.onActionComplete(o,"cellSelected")}}},e.prototype.getCellIndex=function(e,t){return this.parent.getFrozenColumns()&&t>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(e,t):this.parent.getCellFromIndex(e,t)},e.prototype.selectCellsByRange=function(e,t){var i=this;if(this.isCellType()){var r,n,s=this.parent,o=this.getSelectedMovableCell(e),a=s.getFrozenColumns();o||(o=s.getCellFromIndex(e.rowIndex,e.cellIndex));var l,h=e,d=t=t||e;this.currentIndex=e.rowIndex;var c=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var p={data:c,cellIndex:e,currentCell:o,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};if(!sf.base.isBlazor()){p.previousRowCellIndex=this.prevECIdxs}this.parent.trigger("cellSelecting",this.fDataUpdate(p),(function(p){if(sf.base.isNullOrUndefined(p)||!0!==p.cancel){if(i.clearCell(),e.rowIndex>t.rowIndex){var u=e;e=t,t=u}for(var f=e.rowIndex;f<=t.rowIndex;f++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(r=f===e.rowIndex?e.cellIndex:0,n=f===t.rowIndex?t.cellIndex:i.getLastColIndex(f)):(r=e.cellIndex,n=t.cellIndex),l=[];for(var g=r<n?r:n,m=r>n?r:n;g<=m;g++)(o=a?g<a?s.getCellFromIndex(f,g):s.getMovableCellFromIndex(f,g):s.getCellFromIndex(f,g))&&(l.push(g),i.updateCellSelection(o),i.addAttribute(o));i.selectedRowCellIndexes.push({rowIndex:f,cellIndexes:l})}var y;if(!sf.base.isBlazor()||i.parent.isJsComponent||i.parent.isHybrid){(y={data:c,cellIndex:d,currentCell:s.getCellFromIndex(d.rowIndex,d.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0}).previousRowCellIndex=i.prevECIdxs}else y={data:c,cellIndex:d,selectedRowCellIndex:i.selectedRowCellIndexes};i.isDragged||(i.onActionComplete(y,"cellSelected"),i.cellselected=!0),i.updateCellProps(h,d)}}))}}},e.prototype.selectCells=function(e){if(this.isCellType()){var t=this.parent,i=this.getSelectedMovableCell(e[0]),r=t.getFrozenColumns();i||(i=t.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0])),this.currentIndex=e[0].rowIndex;var n=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var s,o;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(s={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0})["previousRowCellIndex"]=this.prevECIdxs;else s={data:n,cellIndex:e[0].cellIndexes[0],isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};this.onActionBegin(s,"cellSelecting");for(var a=0,l=e.length;a<l;a++)for(var h=0,d=e[a].cellIndexes.length;h<d;h++)(i=r?e[a].cellIndexes[h]<r?t.getCellFromIndex(e[a].rowIndex,e[a].cellIndexes[h]):t.getMovableCellFromIndex(e[a].rowIndex,e[a].cellIndexes[h]):t.getCellFromIndex(e[a].rowIndex,e[a].cellIndexes[h]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:e[a].rowIndex,cellIndex:e[a].cellIndexes[h]}));if(this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]}),!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(o={data:n,cellIndex:e[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0})["previousRowCellIndex"]=this.prevECIdxs;else o={data:n,cellIndex:e[0].cellIndexes[0],selectedRowCellIndex:this.selectedRowCellIndexes};this.onActionComplete(o,"cellSelected")}}},e.prototype.addCellsToSelection=function(e){if(this.isCellType()){var t,i,r=this.parent;this.currentIndex=e[0].rowIndex;var n=this.getCurrentBatchRecordChanges()[this.currentIndex],s=r.getFrozenLeftCount(),o=r.getMovableColumnsCount();if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.hideAutoFill();var a,l=r.getColumnByIndex(e[0].cellIndex);!function(e,t,i,r,n){(i[0].length||r)&&(n?t("frozen-left",i[0],n[0]):t("frozen-left",i[0]));e.isFrozenGrid()&&(i[1].length||r)&&(n?t("movable",i[1],n[1]):t("movable",i[1]));"Left-Right"!==e.getFrozenMode()&&"Right"!==e.getFrozenMode()||!i[2].length&&!r||(n?t("frozen-right",i[2],n[2]):t("frozen-right",i[2]))}(this.parent,(function(t,i){a=i[e[0].rowIndex]}),[l.getFreezeTableName()&&"frozen-left"!==l.getFreezeTableName()?[]:r.getRowsObject(),"movable"===l.getFreezeTableName()?r.getMovableRowsObject():[],"frozen-right"===l.getFreezeTableName()?r.getFrozenRightRowsObject():[]]);for(var h=[],d=0,c=e;d<c.length;d++){for(var p=c[d],u=0,f=this.selectedRowCellIndexes.length;u<f;u++)if(this.selectedRowCellIndexes[u].rowIndex===p.rowIndex){i=u;break}(t=this.getSelectedMovableCell(p))||(t=r.getCellFromIndex(p.rowIndex,this.getColIndex(p.rowIndex,p.cellIndex)));var g="movable"===l.getFreezeTableName()?p.cellIndex-s:"frozen-right"===l.getFreezeTableName()?p.cellIndex-(s+o):p.cellIndex;h.push(a.cells[g].foreignKeyData);var m=void 0;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(m={cancel:!1,data:n,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?r.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0})["previousRowCellIndex"]=this.prevECIdxs;else m={cancel:!1,data:n,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,isCtrlPressed:this.isMultiCtrlRequest};var y=i>-1;if(y){var b=this.selectedRowCellIndexes[i].cellIndexes;b.indexOf(p.cellIndex)>-1?(this.cellDeselect("cellDeselecting",[{rowIndex:p.rowIndex,cellIndexes:[p.cellIndex]}],n,[t],h),b.splice(b.indexOf(p.cellIndex),1),0===b.length&&this.selectedRowCellIndexes.splice(i,1),t.classList.remove("e-cellselectionbackground"),t.removeAttribute("aria-selected"),this.cellDeselect("cellDeselected",[{rowIndex:p.rowIndex,cellIndexes:[p.cellIndex]}],n,[t],h)):(y=!1,this.onActionBegin(m,"cellSelecting"),this.addRowCellIndex({rowIndex:p.rowIndex,cellIndex:p.cellIndex}),this.updateCellSelection(t),this.addAttribute(t))}else{if(this.onActionBegin(m,"cellSelecting"),!sf.base.isNullOrUndefined(m)&&!0===m.cancel)return;this.updateCellSelection(t,p.rowIndex,p.cellIndex)}if(!y){var v=void 0;if(!sf.base.isBlazor()||this.parent.isJsComponent||this.parent.isHybrid)(v={data:n,cellIndex:e[0],currentCell:t,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes})["previousRowCellIndex"]=this.prevECIdxs;else v={data:n,cellIndex:e[0],selectedRowCellIndex:this.selectedRowCellIndexes};this.onActionComplete(v,"cellSelected"),this.cellselected=!0}this.updateCellProps(p,p)}}}},e.prototype.getColIndex=function(e,t){var i=this.parent.isFrozenGrid(),r=this.parent.getColumnByIndex(t),n=Qt(this.parent,r,e);if(n)for(var s=0;s<n.length;s++){if(parseInt(n[s].getAttribute("aria-colindex"),10)===t)return i&&("movable"===r.getFreezeTableName()?s+=this.parent.getFrozenLeftCount():"frozen-right"===r.getFreezeTableName()&&(s+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),s}return-1},e.prototype.getLastColIndex=function(e){var t=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[e].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[e].querySelectorAll("td.e-rowcell");return parseInt(t[t.length-1].getAttribute("aria-colindex"),10)},e.prototype.clearCell=function(){this.clearCellSelection()},e.prototype.cellDeselect=function(e,t,i,r,n){r[0]&&r[0].classList.contains("e-gridchkbox")&&this.updateCheckBoxes(sf.base.closest(r[0],"tr"));var s={cells:r,data:i,cellIndexes:t,foreignKeyData:n,cancel:!1};this.parent.trigger(e,s),this.isPreventCellSelect=s.cancel},e.prototype.updateCellSelection=function(e,t,i){sf.base.isNullOrUndefined(t)||this.addRowCellIndex({rowIndex:t,cellIndex:i}),e.classList.add("e-cellselectionbackground"),e.classList.contains("e-gridchkbox")&&this.updateCheckBoxes(sf.base.closest(e,"tr"),!0),this.addAttribute(e)},e.prototype.addAttribute=function(e){this.target=e,sf.base.isNullOrUndefined(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},e.prototype.updateCellProps=function(e,t){this.prevCIdxs=e,this.prevECIdxs=t,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},e.prototype.addRowCellIndex=function(e){for(var t,i,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[r].rowIndex===e.rowIndex){t=!0,i=r;break}t?this.selectedRowCellIndexes[i].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},e.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,t=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,r=[],n=[],s=[],o=this.getCurrentBatchRecordChanges(),a=e.isFrozenGrid();this.hideAutoFill();for(var l=0,h=i.length;l<h;l++){r.push(o[i[l].rowIndex]);for(var d=this.getRowObj(i[l].rowIndex),c=0,p=i[l].cellIndexes.length;c<p;c++)if(a){var u=e.getColumnByIndex(i[l].cellIndexes[c]);n.push(Jt(this.parent,u,i[l].rowIndex,i[l].cellIndexes[c]))}else d.cells&&s.push(d.cells[i[l].cellIndexes[c]].foreignKeyData),n.push(e.getCellFromIndex(i[l].rowIndex,i[l].cellIndexes[c]))}if(this.cellDeselect("cellDeselecting",i,r,n,s),!0===this.isPreventCellSelect)return;for(l=0,h=t.length;l<h;l++)t[l].classList.remove("e-cellselectionbackground"),t[l].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect("cellDeselected",i,r,n,s)}},e.prototype.getSelectedCellsElement=function(){var e,t=this.parent,i=t.getDataRows();t.isFrozenGrid()&&(e=t.getMovableDataRows(),i=t.addMovableRows(i,e),"Left-Right"===t.getFrozenMode()&&(i=t.addMovableRows(i,t.getFrozenRightDataRows())));for(var r=[],n=0,s=i.length;n<s;n++)r=r.concat([].slice.call(i[n].querySelectorAll(".e-cellselectionbackground")));return r},e.prototype.mouseMoveHandler=function(e){e.preventDefault();var t,i=this.parent.element.getBoundingClientRect(),r=this.x,n=this.y,s=xt(e),o=s.x-i.left,a=s.y-i.top,l=sf.base.closest(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(l||(l=sf.base.closest(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),r>o&&(t=o,o=r,r=t),n>a&&(t=a,a=n,n=t),this.element.style.left=r+"px",this.element.style.top=n+"px",this.element.style.width=o-r+"px",this.element.style.height=a-n+"px"),l&&!e.ctrlKey&&!e.shiftKey){var h=parseInt(l.getAttribute("aria-rowindex"),10);if(this.isCellDrag){var d=Ct(e.target,"e-rowcell");d&&(this.startAFCell=this.startCell,this.endAFCell=Ct(e.target,"e-rowcell"),this.selectLikeExcel(e,h,parseInt(d.getAttribute("aria-colindex"),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,h)}},e.prototype.selectLikeExcel=function(e,t,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:i}),this.drawBorders())},e.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")},e.prototype.isLastCell=function(e){var t=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return t[t.length-1]===e},e.prototype.isLastRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[t.length-1]},e.prototype.isFirstRow=function(e){var t=[].slice.call(sf.base.closest(e,"tbody").querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===t[0]},e.prototype.isFirstCell=function(e){return[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===e},e.prototype.setBorders=function(e,t,i){var r=[].slice.call(e.querySelectorAll(".e-cellselectionbackground")).filter((function(e){return""===e.style.display}));if(r.length){var n=this.parent.isFrozenGrid(),s=r[0],o=r[r.length-1],a=s.getBoundingClientRect(),l=o.getBoundingClientRect(),h=s.offsetParent.getBoundingClientRect(),d=!this.isLastRow(o)||"1"!==i&&"2"!==i&&"5"!==i?0:2,c=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(s)?1.5:0,p=n&&("2"===i||"4"===i)&&this.isFirstCell(s)?1:0,u=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&("Left-Right"!==this.parent.getFrozenMode()||"5"!==i&&"6"!==i)||!this.isFirstCell(s)?0:1;this.parent.enableRtl?(t.style.right=h.right-a.right-p+"px",t.style.width=a.right-l.left+p+1+"px"):(t.style.left=a.left-h.left-p-u+"px",t.style.width=l.right-a.left+p-u+1+"px"),t.style.top=a.top-h.top-c+"px",t.style.height=l.top-a.top>0?l.top-h.top+l.height+1-(a.top-h.top)-d+c+"px":l.height+c-d+1+"px",this.selectDirection+=i}else t.style.display="none"},e.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),"Left-Right"===this.parent.getFrozenMode()&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),"Left-Right"===this.parent.getFrozenMode()&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},e.prototype.applyBothFrozenBorders=function(e){var t=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=t?"0 2px 2px 0":"0 0 2px 2px",this.mcBdrElement.style.borderWidth="0 0 2px 0",this.fhBdrElement.style.borderWidth=t?"2px 2px 0 0":"2px 0 0 2px",this.mhBdrElement.style.borderWidth="2px 0 0 0",this.frcBdrElement.style.borderWidth=t?"0 0 2px 2px":"0 2px 2px 0",this.frhBdrElement.style.borderWidth=t?"2px 0 0 2px":"2px 2px 0 0";break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.bdrElement.style.borderWidth=t?"0 2px 2px 0":"0 0 2px 2px",this.mcBdrElement.style.borderWidth=t?"0 0 2px 2px":"0 2px 2px 0",this.fhBdrElement.style.borderWidth=t?"2px 2px 0 0":"2px 0 0 2px",this.mhBdrElement.style.borderWidth=t?"2px 0 0 2px":"2px 2px 0 0"),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=t?"0 2px 2px 0":"0 0 2px 2px",this.mhBdrElement.style.borderWidth=t?"2px 2px 0 0":"2px 0 0 2px",this.frcBdrElement.style.borderWidth=t?"0 0 2px 2px":"0 2px 2px 0",this.frhBdrElement.style.borderWidth=t?"2px 0 0 2px":"2px 2px 0 0");break;case 3:this.bdrElement.style.borderWidth=t?"2px 2px 2px 0":"2px 0 2px 2px",this.mcBdrElement.style.borderWidth="2p 0 2px 0",this.frcBdrElement.style.borderWidth=t?"2px 0 2px 2px":"2px 2px 2px 0",this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t?"2px 2px 2px 0":"2px 0 2px 2px",this.mhBdrElement.style.borderWidth="2px 0 2px 0",this.frcBdrElement.style.borderWidth=t?"2px 0 2px 2px":"2px 2px 2px 0");break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=t?"2px 0 2px 2px":"2px 2px 2px 0",this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth="2px 2px 0 2px")),e.includes("2")&&(this.bdrElement.style.borderWidth=t?"2px 2px 2px 0":"2px 0 2px 2px",this.frcBdrElement.style.borderWidth=t?"2px 0 2px 2px":"2px 2px 2px 0",this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth="2px 2px 0 2px")),e.includes("3")&&(this.mhBdrElement.style.borderWidth=t?"2px 0 2px 2px":"2px 2px 2px 0",this.bdrElement.style.borderWidth="0 2px 2px 2px"),e.includes("4")&&(this.fhBdrElement.style.borderWidth=t?"2px 2px 2px 0":"2px 0 2px 2px",this.frhBdrElement.style.borderWidth=t?"2px 0 2px 2px":"2px 2px 2px 0",this.mcBdrElement.style.borderWidth="0 2px 2px 2px"),e.includes("5")&&(this.mcBdrElement.style.borderWidth=t?"2px 2px 2px 0":"2px 0 2px 2px",this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth="2px 2px 0 2px")),e.includes("6")&&(this.mhBdrElement.style.borderWidth=t?"2px 2px 2px 0":"2px 0 2px 2px",this.frcBdrElement.style.borderWidth="0 2px 2px 2px");break;default:this.bdrElement.style.borderWidth="2px",this.mcBdrElement.style.borderWidth="2px",this.frcBdrElement.style.borderWidth="2px",this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth="2px",this.mhBdrElement.style.borderWidth="2px",this.frhBdrElement.style.borderWidth="2px")}},e.prototype.applyBorders=function(e){var t=this.parent.enableRtl;if("Left-Right"===this.parent.getFrozenMode())this.applyBothFrozenBorders(e);else switch(e.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t?"0 0 2px 2px":"0 2px 2px 0",this.mcBdrElement.style.borderWidth=t?"0 2px 2px 0":"0 0 2px 2px",this.fhBdrElement.style.borderWidth=t?"2px 0 0 2px":"2px 2px 0 0",this.mhBdrElement.style.borderWidth=t?"2px 2px 0 0":"2px 0 0 2px"):(this.bdrElement.style.borderWidth=t?"0 2px 2px 0":"0 0 2px 2px",this.mcBdrElement.style.borderWidth=t?"0 0 2px 2px":"0 2px 2px 0",this.fhBdrElement.style.borderWidth=t?"2px 2px 0 0":"2px 0 0 2px",this.mhBdrElement.style.borderWidth=t?"2px 0 0 2px":"2px 2px 0 0");break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e.includes("2")?t?"2px 0 2px 2px":"2px 2px 2px 0":"0 2px 2px 2px",this.mcBdrElement.style.borderWidth=e.includes("1")?t?"2px 2px 2px 0":"2px 0 2px 2px":"0 2px 2px 2px",this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?"2px 2px 0 2px":t?"2px 0 2px 2px":"2px 2px 2px 0",this.mhBdrElement.style.borderWidth=e.includes("2")?"2px 2px 0 2px":t?"2px 2px 2px 0":"2px 0 2px 2px")):(this.bdrElement.style.borderWidth=e.includes("2")?t?"2px 2px 2px 0":"2px 0 2px 2px":"0 2px 2px 2px",this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?t?"2px 0 2px 2px":"2px 2px 2px 0":"0 2px 2px 2px"),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?"2px 2px 0 2px":t?"2px 2px 2px 0":"2px 0 2px 2px",this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?"2px 2px 0 2px":t?"2px 0 2px 2px":"2px 2px 2px 0")));break;default:this.bdrElement.style.borderWidth="2px",this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth="2px"),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth="2px",this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth="2px"))}},e.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),"Left-Right"===this.parent.getFrozenMode()&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),"Left-Right"===this.parent.getFrozenMode()&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(sf.base.createElement("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},e.prototype.showHideBorders=function(e){this.bdrElement&&(this.bdrElement.style.display=e,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=e,"Left-Right"===this.parent.getFrozenMode()&&(this.frcBdrElement.style.display=e)),this.parent.frozenRows&&(this.fhBdrElement.style.display=e),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=e,"Left-Right"===this.parent.getFrozenMode()&&(this.frhBdrElement.style.display=e)))},e.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},e.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){var e=this.startAFCell.getBoundingClientRect(),t=this.endAFCell.getBoundingClientRect(),i=t.top-e.top>0?1:0,r=t.top-e.top>=0&&(Ct(this.startAFCell,"e-movablecontent")||Ct(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(Ct(this.startAFCell,"e-movablecontent")||Ct(this.startAFCell,"e-movableheader"))&&this.isFirstCell(this.startAFCell)?1:0,s=this.isLastRow(this.endAFCell)&&(Ct(this.endAFCell,"e-movablecontent")||Ct(this.endAFCell,"e-frozencontent"))?2:0,o=this.startAFCell.offsetParent.getBoundingClientRect(),a=this.parent.element.getBoundingClientRect(),l=this.startAFCell.offsetParent.parentElement.scrollTop,h=this.startAFCell.offsetParent.parentElement.scrollLeft,d=l-this.startAFCell.offsetTop,c=h-this.startAFCell.offsetLeft,p=this.parent.element.clientHeight,u=this.parent.element.clientWidth;d=d>0?Math.floor(d)-1:0,c=c>0?c:0;var f=e.left-a.left;if(this.parent.enableRtl){var g=Ct(this.startAFCell,"e-movablecontent")||Ct(this.startAFCell,"e-movableheader")?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-a.left:0;this.bdrAFLeft.style.right=a.right-t.right-2+t.width+"px",this.bdrAFLeft.style.width=u<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=a.right-e.right-n+g-1+"px",this.bdrAFTop.style.left=t.left-a.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=f-n+c-1+"px",this.bdrAFRight.style.left=t.left-a.left-2+t.width+"px",this.bdrAFRight.style.width=u<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=f+c-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",u<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var m=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-u;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-m+"px"}if(this.bdrAFLeft.style.top=e.top-a.top-r+d+"px",this.bdrAFLeft.style.height=t.top-e.top>0?t.top-o.top+t.height+1-(e.top-o.top)+r-s-d+"px":t.height+r-s-d+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=p<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,p<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var y=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-p;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-y+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},e.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(sf.base.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(sf.base.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(sf.base.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(sf.base.createElement("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},e.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},e.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},e.prototype.updateValue=function(e,t,i){var r=this.createBeforeAutoFill(e,t,i);if(!r.cancel){var n=this.parent.getColumnByIndex(t);this.parent.editModule&&i&&("number"===n.type?this.parent.editModule.updateCell(e,n.field,parseInt(r.value,10)):this.parent.editModule.updateCell(e,n.field,r.value))}},e.prototype.createBeforeAutoFill=function(e,t,i){var r={column:this.parent.getColumnByIndex(t),value:i.innerText};return this.parent.trigger("beforeAutoFill",r),r},e.prototype.getAutoFillCells=function(e,t){var i=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[e].querySelectorAll(i));return this.parent.isFrozenGrid()&&(r=r.concat([].slice.call(this.parent.getMovableDataRows()[e].querySelectorAll(i))),"Left-Right"===this.parent.getFrozenMode()&&(r=r.concat([].slice.call(this.parent.getFrozenRightDataRows()[e].querySelectorAll(i))))),r},e.prototype.selectLikeAutoFill=function(e,t){var i=parseInt(Ct(this.startAFCell,"e-row").getAttribute("aria-rowindex"),10),r=parseInt(this.startAFCell.getAttribute("aria-colindex"),10),n=parseInt(Ct(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),s=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),o=this.selectedRowCellIndexes.length-1,a=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!t&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!Ct(e.target,"e-rowcell"):this.startAFCell=this.parent.getCellFromIndex(i,r),this.endAFCell=this.parent.getCellFromIndex(i+o,r+a),this.drawAFBorders();break;case this.autoFillRLselection&&r+a<s&&s-r-a+1>n-i-o&&s-r-a+1>i-n:if(this.endAFCell=this.parent.getCellFromIndex(i+o,s),n=parseInt(Ct(this.endAFCell,"e-row").getAttribute("aria-rowindex"),10),s=parseInt(this.endAFCell.getAttribute("aria-colindex"),10),t){for(var l=parseInt(this.endCell.getAttribute("aria-colindex"),10),h=i;h<=n;h++)for(var d=this.getAutoFillCells(h,r),c=0,p=l+1;p<=s;p++)c>a&&(c=0),this.updateValue(h,p,d[c]),c++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:s})}else this.drawAFBorders();break;case this.autoFillRLselection&&r>s&&r-s+1>n-i-o&&r-s+1>i-n:if(this.startAFCell=this.parent.getCellFromIndex(i,s),this.endAFCell=this.endCell,t){for(h=i;h<=i+o;h++){(d=this.getAutoFillCells(h,r)).reverse();for(c=0,p=this.startCellIndex-1;p>=s;p--)c>a&&(c=0),this.updateValue(h,p,d[c]),c++}this.selectCellsByRange({rowIndex:i,cellIndex:s},{rowIndex:i+o,cellIndex:this.startCellIndex+a})}else this.drawAFBorders();break;case i>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,t){var u=f=parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"),10);for(h=i-1;h>=n;h--){u===this.startIndex-1&&(u=f);d=this.getAutoFillCells(u,r),c=0;u--;for(p=this.startCellIndex;p<=this.startCellIndex+a;p++)this.updateValue(h,p,d[c]),c++}this.selectCellsByRange({rowIndex:n,cellIndex:r+a},{rowIndex:i+o,cellIndex:r})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+a),t){var f=parseInt(this.endCell.parentElement.getAttribute("aria-rowindex"),10);for(u=this.startIndex,h=f+1;h<=n;h++){u===f+1&&(u=this.startIndex);d=this.getAutoFillCells(u,r);u++;c=0;for(var g=this.startCellIndex;g<=this.startCellIndex+a;g++)this.updateValue(h,g,d[c]),c++}this.selectCellsByRange({rowIndex:f-o,cellIndex:r},{rowIndex:n,cellIndex:r+a})}else this.drawAFBorders()}},e.prototype.mouseUpHandler=function(e){if(document.body.classList.remove("e-disableuserselect"),this.element&&sf.base.remove(this.element),this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?this.mUPTarget=Ct(e.target,"e-rowcell"):this.mUPTarget=null,this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode){var t=e.target,i=parseInt(t.parentElement.getAttribute("aria-rowindex"),10),r=parseInt(t.getAttribute("aria-colindex"),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:r})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){var n=Ct(e.target,"e-rowcell");this.endAFCell=n||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}sf.base.EventHandler.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&sf.base.EventHandler.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(document.body,"mouseup",this.mouseUpHandler)},e.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},e.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute("aria-colindex"),10),t=parseInt(this.target.getAttribute("index"),10),i=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,r=this.getAutoFillCells(i,e).filter((function(e){return""===e.style.display})),n=this.parent.getColumnByIndex(e),s="movable"===n.getFreezeTableName(),o=t<this.parent.frozenRows,a="Left-Right"===this.parent.getFrozenMode()&&"frozen-right"===n.getFreezeTableName();sf.base.select("#"+this.parent.element.id+"_autofill",Ct(this.target,"e-table"))||(sf.base.select("#"+this.parent.element.id+"_autofill",this.parent.element)&&sf.base.select("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=sf.base.createElement("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",o?s?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):s?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),a&&(o?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));var l=r[r.length-1];if(l&&l.offsetParent){var h=l.getBoundingClientRect(),d=l.offsetParent.getBoundingClientRect(),c=this.isLastCell(l)?4:0,p=this.isLastRow(l)?3:0;this.parent.enableRtl?this.autofill.style.right=d.right-h.right+h.width-4-c+"px":this.autofill.style.left=h.left-d.left+h.width-4-c+"px",this.autofill.style.top=h.top-d.top+h.height-5-p+"px"}this.autofill.style.display=""}else this.hideAutoFill()},e.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var t,i=e.target,r=this.parent,n=Ct(i,"e-grid");if(!(n&&n.id!==r.element.id||Ct(i,"e-headercontent")&&!this.parent.frozenRows||Ct(i,"e-editedbatchcell")||Ct(i,"e-editedrow"))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),Ct(i,"e-rowcell")&&!e.shiftKey&&!e.ctrlKey){if(r.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,t=!0;else if(r.allowRowDragAndDrop&&!r.isEdit){if(!this.isRowType()||this.isSingleSel()||sf.base.closest(i,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);t=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),r.getContent().appendChild(this.element)}t&&this.enableDrag(e,!0)}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},e.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(Ct(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},e.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute("aria-rowindex"),10),this.startCellIndex=parseInt(Ct(this.startCell,"e-rowcell").getAttribute("aria-colindex"),10))},e.prototype.enableDrag=function(e,t){var i=this.parent;if(t){var r=sf.base.closest(e.target,"tr");this.startDIndex=parseInt(r.getAttribute("aria-rowindex"),10),this.startDCellIndex=parseInt(Ct(e.target,"e-rowcell").getAttribute("aria-colindex"),10)}document.body.classList.add("e-disableuserselect");var n=i.element.getBoundingClientRect(),s=xt(e);this.x=s.x-n.left,this.y=s.y-n.top,sf.base.EventHandler.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&sf.base.EventHandler.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(document.body,"mouseup",this.mouseUpHandler,this)},e.prototype.clearSelAfterRefresh=function(e){var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;"virtualscroll"===e.requestType||this.parent.isPersistSelection||t||this.clearSelection()},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(u,this.enableAfterRender,this),this.parent.on("initial-end",this.initializeSelection,this),this.parent.on("rowselected",this.onActionComplete,this),this.parent.on("cellselected",this.onActionComplete,this),this.parent.on(g,this.onPropertyChanged,this),this.parent.on("cellfocused",this.onCellFocused,this),this.parent.on("beforeFragAppend",this.clearSelAfterRefresh,this),this.parent.on("column-position-changed",this.columnPositionChanged,this),this.parent.on(p,this.initialEnd,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener("actionBegin",this.actionBeginFunction),this.parent.addEventListener("actionComplete",this.actionCompleteFunction),this.parent.on("rows-removed",this.rowsRemoved,this),this.parent.on("header-refreshed",this.refreshHeader,this),this.addEventListener_checkbox())},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(u,this.enableAfterRender),this.parent.off("initial-end",this.initializeSelection),this.parent.off("rowselected",this.onActionComplete),this.parent.off("cellselected",this.onActionComplete),this.parent.off(g,this.onPropertyChanged),this.parent.off("cellfocused",this.onCellFocused),this.parent.off("beforeFragAppend",this.clearSelAfterRefresh),this.parent.off("column-position-changed",this.columnPositionChanged),this.parent.removeEventListener("actionBegin",this.actionBeginFunction),this.parent.removeEventListener("actionComplete",this.actionCompleteFunction),this.parent.off("rows-removed",this.rowsRemoved),this.parent.off("header-refreshed",this.refreshHeader),this.removeEventListener_checkbox())},e.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS&&(sf.base.EventHandler.add(this.parent.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.parent.element,"keyup",this.keyUpHandler,this))},e.prototype.unWireEvents=function(){this.isMacOS&&(sf.base.EventHandler.remove(this.parent.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.parent.element,"keyup",this.keyUpHandler))},e.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},e.prototype.refreshHeader=function(){this.setCheckAllState()},e.prototype.rowsRemoved=function(e){for(var t=0;t<e.records.length;t++)delete this.selectedRowState[e.records[t][this.primaryKey]],--this.totalRecordsCount;this.setCheckAllState()},e.prototype.beforeFragAppend=function(e){"virtualscroll"===e.requestType||this.parent.isPersistSelection||this.clearSelection()},e.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},e.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},e.prototype.render=function(e){sf.base.EventHandler.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var t=this.parent;sf.base.isNullOrUndefined(e.properties.type)||"Single"!==this.selectionSettings.type||(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),sf.base.isNullOrUndefined(e.properties.mode)&&sf.base.isNullOrUndefined(e.properties.cellSelectionMode)||(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.initPerisistSelection(),this.parent.getColumns().filter((function(e){return"checkbox"===e.type})).length&&(t.isCheckBoxSelection=!("ResetOnRowClick"===this.selectionSettings.checkboxMode)),this.drawBorders()}},e.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").querySelectorAll(".e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},e.prototype.initialEnd=function(e){var t=this.parent.isFrozenGrid(),i="Left-Right"===this.parent.getFrozenMode();(!t||t&&!i&&!e.args.isFrozen||i&&e.args.renderFrozenRightContent)&&(this.parent.off(p,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},e.prototype.checkBoxSelectionChanged=function(){this.parent.off(p,this.checkBoxSelectionChanged);var e=this.parent,t=e.getColumns().filter((function(e){return"checkbox"===e.type}));t.length>0&&(e.isCheckBoxSelection=!0,this.chkField=t[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,sf.base.isNullOrUndefined(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),e.isCheckBoxSelection||this.isPersisted||(this.chkField=null,this.initPerisistSelection())},e.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},e.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!e.isPersistSelection)){var t=this.parent.getDataModule(),i=(new sf.data.Query).where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var r=t.getData({},i),n=this;this.parent.showSpinner(),r.then((function(e){n.dataSuccess(e.result),n.refreshPersistSelection(),n.parent.hideSpinner()}))}},e.prototype.dataSuccess=function(e){for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(this.selectedRowState[e[t][this.primaryKey]])&&e[t][this.chkField]&&(this.selectedRowState[e[t][this.primaryKey]]=e[t][this.chkField]);this.persistSelectedData=e},e.prototype.setRowSelection=function(e){if(!this.parent.getDataModule().isRemote()&&!sf.base.isBlazor())if(e)if(this.parent.groupSettings.columns.length)for(var t=0,i=this.getData().records;t<i.length;t++){var r=i[t];this.selectedRowState[r[this.primaryKey]]=!0}else for(var n=0,s=this.getData();n<s.length;n++){r=s[n];this.selectedRowState[r[this.primaryKey]]=!0}else this.selectedRowState={}},e.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},e.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getMovableRows()),"Left-Right"===this.parent.getFrozenMode()&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(e=this.parent.getFrozenRightRows()));if(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,null!==e&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var t=[],i=0;i<e.length;i++){var r=this.getRowObj(e[i]),n=r&&r.data?r.data[this.primaryKey]:null;if(null===n)return;var s=void 0,o=e[i].querySelector(".e-checkselect");this.selectedRowState[n]||"Check"===this.parent.checkAllRows&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(n)>0||"Intermediate"===this.parent.checkAllRows&&!sf.base.isNullOrUndefined(this.chkField)&&r.data[this.chkField]?(t.push(parseInt(e[i].getAttribute("aria-rowindex"),10)),s=!0):(s=!1,this.checkedTarget!==o&&this.parent.isCheckBoxSelection&&Bt(o.nextElementSibling,s)),this.updatePersistCollection(e[i],s)}this.isSingleSel()&&t.length>0?this.selectRow(t[0],!0):this.selectRows(t)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},e.prototype.actionBegin=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){var t=this.parent.element.querySelector(".e-edit-checkselect");if(!sf.base.isNullOrUndefined(t)){var i=sf.base.closest(t,".e-editedrow");if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(i);if(!r)return;this.selectedRowState[r.data[this.primaryKey]]=r.isSelected=t.checked}else this.isCheckedOnAdd=t.checked}}},e.prototype.actionComplete=function(e){if("save"===e.requestType&&this.parent.isPersistSelection){if("add"===e.action&&this.isCheckedOnAdd){var t=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[t.data[this.primaryKey]]=t.isSelected=this.isCheckedOnAdd}this.refreshPersistSelection()}if("delete"===e.requestType&&this.parent.isPersistSelection){for(var i=(sf.base.isBlazor()?this.getSelectedRecords():e.data).slice(),r=0;r<i.length;r++)sf.base.isNullOrUndefined(i[r][this.primaryKey])||this.updatePersistDelete(i[r][this.primaryKey]);this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}"paging"===e.requestType&&(this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0)},e.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&(this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.refreshPersistSelection()),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),t=[],i=0;i<e.length;i++)e[i].isSelected&&t.push(i);t.length&&this.selectRows(t),this.initialRowSelection=!0}},e.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var t=this.parent.getRows(),i=0;i<t.length;i++)this.updatePersistCollection(t[i],e);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||sf.base.isBlazor()?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},e.prototype.checkSelectAllAction=function(e){var t=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),sf.base.isBlazor()&&this.parent.enableVirtualization&&!sf.base.isNullOrUndefined(this.parent.contentModule.currentInfo.endIndex)?this.selectRowsByRange(this.parent.contentModule.currentInfo.startIndex,this.parent.contentModule.currentInfo.endIndex):this.selectRowsByRange(t.getVirtualRowIndex(0),t.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!sf.base.isNullOrUndefined(i)){var r=i.querySelector(".e-edit-checkselect");sf.base.isNullOrUndefined(r)||Bt(r.nextElementSibling,e)}},e.prototype.checkSelectAll=function(e){var t=this,i=this.getCheckAllStatus(e),r="Check"===i;if(this.isHeaderCheckboxClicked=!0,"Intermediate"===i&&(r=this.getCurrentBatchRecordChanges().some((function(e){return e[t.primaryKey]in t.selectedRowState}))),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization){if(this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection",!r,"checkbox",null),this.checkBoxState=!r,!r){var n=this.parent.contentModule.vgenerator.rowCache;Object.values(n).forEach((function(e){return e.isSelected=!0}));for(var s=0;s<Object.keys(n).length;s++)-1===this.parent.selectionModule.selectedRowIndexes.indexOf(Number(Object.keys(n)[s]))&&this.parent.selectionModule.selectedRowIndexes.push(Number(Object.keys(n)[s]))}}this.target=null,this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState(),this.triggerChkChangeEvent(e,!r)},e.prototype.getCheckAllStatus=function(e){var t=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return t.contains("e-check")?"Check":t.contains("e-uncheck")?"Uncheck":t.contains("e-stop")?"Intermediate":"None"},e.prototype.checkSelect=function(e){var t=sf.base.closest(this.checkedTarget,".e-rowcell"),i=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,Ht(i)){var n=t.parentElement.getAttribute("data-uid");r=i.getRows().map((function(e){return e.getAttribute("data-uid")})).indexOf(n)}else r=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);this.parent.isPersistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&"Top"===this.parent.editSettings.newRowPosition&&++r,this.rowCellSelectionHandler(r,parseInt(t.getAttribute("aria-colindex"),10)),this.moveIntoUncheckCollection(sf.base.closest(t,".e-row")),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},e.prototype.moveIntoUncheckCollection=function(e){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var t=this.getRowObj(e),i=t&&t.data?t.data[this.primaryKey]:null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},e.prototype.triggerChkChangeEvent=function(e,t){this.parent.trigger("checkBoxChange",{checked:t,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},e.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote()&&(!sf.base.isBlazor()||!this.parent.isServerRendered))if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var t=this.getData().length,i=0;i<t;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else if(e&&"false"===this.parent.getRowByIndex(e).getAttribute("aria-selected")){var r=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(r,1)}},e.prototype.setCheckAllState=function(e,t){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var i=void 0,r=sf.base.isBlazor()&&this.parent.isServerRendered&&this.parent.enableVirtualization;if(r){i=!Object.values(this.parent.contentModule.vgenerator.rowCache).filter((function(e){return void 0===e.isSelected||!1===e.isSelected})).length&&Object.values(this.parent.contentModule.vgenerator.rowCache).filter((function(e){return e.isSelected})).length===this.selectedRowIndexes.length}var n=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||r||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length);var s=this.getCheckAllBox();if(s){var o=s.nextElementSibling;sf.base.removeClass([o],["e-check","e-stop","e-uncheck"]),Dt(s,!1),s.indeterminate=!1,i||n===this.totalRecordsCount&&this.totalRecordsCount||!(!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||sf.base.isBlazor()&&this.parent.isServerRendered||n!==this.getData().length)?(sf.base.addClass([o],["e-check"]),Dt(s,!0),t&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):r&&!this.selectedRowIndexes.length||0===n&&!r||0===this.getCurrentBatchRecordChanges().length?(sf.base.addClass([o],["e-uncheck"]),t&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===n&&0===this.getCurrentBatchRecordChanges().length?sf.base.addClass([o.parentElement],["e-checkbox-disabled"]):sf.base.removeClass([o.parentElement],["e-checkbox-disabled"])):(sf.base.addClass([o],["e-stop"]),this.parent.checkAllRows="Intermediate",s.indeterminate=!0),!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling||this.parent.allowPaging||this.parent.getDataModule().isRemote()||this.updateSelectedRowIndex(e)}}},e.prototype.keyDownHandler=function(e){(("chrome"===sf.base.Browser.info.name||"safari"===sf.base.Browser.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===sf.base.Browser.info.name&&17===e.keyCode||"mozilla"===sf.base.Browser.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!0)},e.prototype.keyUpHandler=function(e){(("chrome"===sf.base.Browser.info.name||"safari"===sf.base.Browser.info.name)&&(91===e.keyCode||93===e.keyCode)||"opera"===sf.base.Browser.info.name&&17===e.keyCode||"mozilla"===sf.base.Browser.info.name&&224===e.keyCode)&&(this.cmdKeyPressed=!1)},e.prototype.clickHandler=function(e){var t=e.target;this.actualTarget=t,(Ct(t,"e-row")||Ct(t,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&t.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.isMultiShiftRequest=e.shiftKey,this.popUpClickHandler(e);var i,r=!1;this.preventFocus=!0;var n=Ct(t,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.querySelectorAll(".e-checkselectall")||this.selectionSettings.persistSelection&&Ct(t,"e-row")),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(i=n.querySelector('input[type="checkbox"]'),r=!0),this.drawBorders(),this.updateAutoFillPosition(),(t=Ct(t,"e-rowcell"))&&t.parentElement.classList.contains("e-row")&&!this.parent.selectionSettings.checkboxOnly||r){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=t,sf.base.isNullOrUndefined(i)){var s=this.parent,o=0;if(Ht(s)){var a=t.parentElement.getAttribute("data-uid");o=s.getRows().map((function(e){return e.getAttribute("data-uid")})).indexOf(a)}else o=parseInt(t.parentElement.getAttribute("aria-rowindex"),10);this.parent.isPersistSelection&&this.parent.element.querySelectorAll(".e-addedrow").length>0&&++o,this.mUPTarget&&this.mUPTarget.isEqualNode(t)||this.rowCellSelectionHandler(o,parseInt(t.getAttribute("aria-colindex"),10)),this.parent.hoverFrozenRows(e),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(sf.base.closest(t,".e-row")),this.setCheckAllState())}else this.checkedTarget=i,i.classList.contains("e-checkselectall")?this.checkSelectAll(i):this.checkSelect(i);this.parent.isCheckBoxSelection||!sf.base.Browser.isDevice||this.isSingleSel()||this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){a=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(a))}this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},e.prototype.popUpClickHandler=function(e){var t=e.target;sf.base.closest(t,".e-headercell")||e.target.classList.contains("e-rowcell")||sf.base.closest(t,".e-gridpopup")?t.classList.contains("e-rowselect")&&(t.classList.contains("e-spanclicked")?(t.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(t.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},e.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||function(e,t,i){var r,n=e.querySelector("span"),s=e.parentElement.getBoundingClientRect(),o=t.target.getBoundingClientRect();n.className=i,e.style.display="",r=(sf.base.isNullOrUndefined(t.clientY)?t.changedTouches[0].clientY:t.clientY)>e.offsetHeight+10,e.style.top=o.top-s.top+(r?-(e.offsetHeight+10):e.offsetHeight+10)+"px",e.style.left=function(e,t,i,r){var n=e.offsetWidth/2,s=xt(t).x;return s-i.left<n?i.left-r:i.right-s<n?i.right-r-2*n:s-r-n}(e,t,o,s.left)+"px",r?(e.querySelector(".e-downtail").style.display="",e.querySelector(".e-uptail").style.display="none"):(e.querySelector(".e-downtail").style.display="none",e.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},e.prototype.rowCellSelectionHandler=function(e,t){this.parent;if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:t},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest)this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!sf.base.closest(this.target,".e-rowcell").classList.contains("e-gridchkbox")?this.selectRowsByRange(sf.base.isUndefined(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(sf.base.isUndefined(this.prevCIdxs)?{rowIndex:e,cellIndex:t}:this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.updateAutoFillPosition(),this.drawBorders();else{if(this.addRowsToSelection([e]),sf.base.isBlazor()&&this.parent.enableVirtualization&&this.parent.isServerRendered){var i=this.parent.getSelectedRowIndexes();this.parent.interopAdaptor.invokeMethodAsync("MaintainSelection",!0,"normal",i)}this.addCellsToSelection([{rowIndex:e,cellIndex:t}]),this.showHideBorders("none")}this.isDragged=!1},e.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if("upArrow"===e.keyArgs.action)this.parent.allowFiltering?e.isJump="INPUT"===e.element.tagName:e.isJump="TH"===e.element.tagName;else if("downArrow"===e.keyArgs.action){var t=Number(e.element.parentElement.getAttribute("aria-rowindex"));e.isJump=0===t}else"ctrlHome"===e.keyArgs.action&&(e.isJump=!0);var i=this.parent.isFrozenGrid()?(e.container.isHeader&&"TD"!==e.element.tagName&&e.isJump&&!this.selectionSettings.allowColumnSelection||(e.container.isContent||"TD"===e.element.tagName)&&!(e.container.isSelectable||"TD"===e.element.tagName))&&!(e.byKey&&"space"===e.keyArgs.action):(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&"space"===e.keyArgs.action)&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),r=e.container.isHeader&&"TD"!==e.element.tagName&&!sf.base.closest(e.element,".e-rowcell")&&!(e.byKey&&"space"===e.keyArgs.action);if(e.byKey&&!i){var n=e.container.isContent?e.container.indexes:e.indexes,s=n[0],o=n[1],a=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(e.container.isHeader&&("TD"===e.element.tagName||sf.base.closest(e.element,".e-rowcell"))){var l=this.parent.getHeaderTable().querySelector("thead").childElementCount;s-=l,a.rowIndex=sf.base.isNullOrUndefined(a.rowIndex)?null:a.rowIndex-l}else s+=this.parent.frozenRows,a.rowIndex=0!==a.rowIndex&&sf.base.isNullOrUndefined(a.rowIndex)?null:a.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){var h=Number(e.element.getAttribute("aria-colindex")),d=this.parent.getSelectedRowCellIndexes();d.length&&0===a.cellIndex&&(a.cellIndex=d[d.length-1].cellIndexes[0]),a.cellIndex=sf.base.isNullOrUndefined(a.cellIndex)?null:a.cellIndex===o?h:h-1,o=h}if(!(r||-1===["ctrlPlusA","escape"].indexOf(e.keyArgs.action)&&"space"!==e.keyArgs.action&&s===a.rowIndex&&o===a.cellIndex)||this.selectionSettings.allowColumnSelection){this.preventFocus=!0;var c=this.getKeyColIndex(e);switch(this.needColumnSelection&&(o=c),e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.applyDownUpKey(s,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,o);break;case"home":case"end":o="end"===e.keyArgs.action?this.getLastColIndex(s):0,this.applyHomeEndKey(s,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,o);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else i&&!this.parent.isCheckBoxSelection&&this.clearSelection()},e.prototype.getKeyColIndex=function(e){var t,i=null,r=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&Ct(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,r){if("rightArrow"===e.keyArgs.action||"leftArrow"===e.keyArgs.action)return i;t=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(t).columns),s=this.parent.getColumnIndexByUid(n[n.length-1].uid),o=this.parent.getColumnIndexByUid(n[0].uid);i=this.prevColIndex>=s?o:s}else i=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},e.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},e.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},e.prototype.applyDownUpKey=function(e,t){var i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&(this.parent.frozenRows,this.selectRow(e,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(t)},e.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var t=parseInt(this.target.getAttribute("aria-colindex"),10),i=this.parent.getFrozenColumns();this.target=i&&t>=i?this.contentRenderer.getMovableRowByIndex(e).querySelectorAll(".e-rowcell")[t-i]:this.contentRenderer.getRowByIndex(e).querySelectorAll(".e-rowcell")[t],this.addAttribute(this.target)}},e.prototype.applyRightLeftKey=function(e,t){this.parent;this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(t):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:t},!0),this.addAttribute(this.target))},e.prototype.applyHomeEndKey=function(e,t){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:t},!0):this.addAttribute(this.parent.getCellFromIndex(e,t))},e.prototype.shiftDownKey=function(e,t){this.parent;this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(sf.base.isUndefined(this.prevRowIndex)?this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},e.prototype.applyShiftLeftRightKey=function(e,t){this.parent;this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,t):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:t}),this.isMultiShiftRequest=!1},e.prototype.getstackedColumns=function(e){for(var t=[],i=0,r=e.length;i<r;i++)e[i].columns?this.getstackedColumns(e[i].columns):t.push(e[i]);return t},e.prototype.applyCtrlHomeEndKey=function(e,t){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,t))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:t},!0)},e.prototype.addRemoveClassesForRow=function(e,t,i){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var s=[].slice.call(e.querySelectorAll(".e-rowcell")),o=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),a=e.querySelector(".e-rowdragdrop");o&&s.push(o),a&&s.push(a),Pt.apply(void 0,[s,t].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,t,i)},e.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},e.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},e.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},e.prototype.getRenderer=function(){return sf.base.isNullOrUndefined(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(r.Content)),this.contentRenderer},e.prototype.getSelectedRecords=function(){return this.selectionSettings.persistSelection?this.persistSelectedData:this.parent.getRowsObject().filter((function(e){return e.isSelected})).map((function(e){return e.data}))},e.prototype.selectColumn=function(e){var t=this.parent;if(!sf.base.isNullOrUndefined(t.getColumns()[e])){var i=t.getColumnByIndex(e),r=t.getColumnHeaderByUid(i.uid),n=r.classList.contains("e-columnselection");if(t.selectionSettings.allowColumnSelection){var s=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||s){var o={columnIndex:e,headerCell:r,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(o,"columnSelecting"),o.cancel)return void this.disableInteracted();t.selectionSettings.enableToggle&&e===this.prevColIndex&&n&&!s||this.updateColSelection(r,e);var a={columnIndex:e,headerCell:r,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,"columnSelected")}this.updateColProps(e)}}},e.prototype.selectColumnsByRange=function(e,t){var i=this.parent;if(!sf.base.isNullOrUndefined(i.getColumns()[e])){var r=[];if("Single"===i.selectionSettings.type||sf.base.isNullOrUndefined(t))r[0]=e;else for(var n=e<t,s=e;n?s<=t:s>=t;n?s++:s--)r.push(s);this.selectColumns(r)}},e.prototype.selectColumns=function(e){var t=this.parent,i=this.getselectedCols();if("Single"===t.selectionSettings.type&&(e=[e[0]]),t.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,"columnSelecting"),r.cancel)this.disableInteracted();else{for(var n=0,s=e.length;n<s;n++)this.updateColSelection(t.getColumnHeaderByUid(t.getColumnByIndex(e[n]).uid),e[n]);i=this.getselectedCols();var o={columnIndex:e[0],headerCell:i,columnIndexes:e,column:t.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,"columnSelected"),this.updateColProps(e[0])}}},e.prototype.selectColumnWithExisting=function(e){var t=this.parent;if(!sf.base.isNullOrUndefined(t.getColumns()[e])){var i=t.getFrozenColumns(),r=i&&e>=i,n=t.getColumnHeaderByUid(t.getColumnByIndex(e).uid),s=this.getselectedCols();if("Single"===t.selectionSettings.type&&this.clearColDependency(),t.selectionSettings.allowColumnSelection){r?t.getMovableRows():t.getDataRows();if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var o={columnIndex:e,headerCell:s,columnIndexes:this.selectedColumnsIndexes,column:t.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(o,"columnSelecting"),o.cancel)return void this.disableInteracted();this.updateColSelection(n,e);var a={columnIndex:e,headerCell:s=this.getselectedCols(),column:t.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,"columnSelected")}this.updateColProps(e)}}},e.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var t=this.parent;if(!sf.base.isNullOrUndefined(e)&&-1===this.selectedColumnsIndexes.indexOf(e))return;var i=sf.base.isNullOrUndefined(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,r=t.getColumnByIndex(i),n=void 0,s=t.getColumnByIndex(i),o={columnIndex:i,headerCell:n="frozen-right"===r.getFreezeTableName()?t.getFrozenRightColumnHeaderByIndex(i):"movable"===r.getFreezeTableName()?t.getMovableColumnHeaderByIndex(i):t.getColumnHeaderByUid(s.uid),columnIndexes:this.selectedColumnsIndexes,column:s,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(o,"columnDeselecting"))return void this.disableInteracted();for(var a=sf.base.isNullOrUndefined(e)?[].slice.call(t.getHeaderContent().querySelectorAll(".e-columnselection")):[n],l=this.getSelectedColumnCells(e),h=0,d=a.length;h<d;h++)Pt([a[h]],!1,"e-columnselection");for(h=0,d=l.length;h<d;h++)Pt([l[h]],!1,"e-columnselection");sf.base.isNullOrUndefined(e)?(this.columnDeselect(o,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter((function(e){return e.isSelected=!1}))):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[e].isSelected=!1)}},e.prototype.getselectedCols=function(){var e,t=this.parent;if(this.selectedColumnsIndexes.length>1){e=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)e.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else e=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return e},e.prototype.getSelectedColumnCells=function(e){var t,i,r=this.parent,n=!sf.base.isNullOrUndefined(this.parent.rowTemplate),s=n?r.getRows():r.getDataRows();r.isFrozenGrid()&&r.getContent().querySelector(".e-movablecontent")&&(t=n?r.getMovableRows():r.getMovableDataRows(),s=r.addMovableRows(s,t),"Left-Right"===r.getFrozenMode()&&(i=n?r.getFrozenRightRows():r.getFrozenRightDataRows(),s=r.addMovableRows(s,i)));for(var o=[],a=sf.base.isNullOrUndefined(e)?".e-columnselection":'[aria-colindex="'+e+'"]',l=0,h=s.length;l<h;l++)o=o.concat([].slice.call(s[l].querySelectorAll(a)));return o},e.prototype.columnDeselect=function(e,t){return"columnDeselected"===t&&delete e.cancel,this.onActionComplete(e,t),e.cancel},e.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},e.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},e.prototype.updateColSelection=function(e,t){if(!sf.base.isNullOrUndefined(this.parent.getColumns()[t])){var i,r=this.parent.getFrozenLeftCount(),n=this.parent.getMovableColumnsCount(),s=this.parent.getColumnByIndex(t),o=!sf.base.isNullOrUndefined(this.parent.rowTemplate);this.selectedColumnsIndexes.push(t),this.parent.getColumns()[t].isSelected=!0,"frozen-right"===s.getFreezeTableName()?(t-=r+n,i=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===s.getFreezeTableName()?(t-=r,i=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(t+=this.parent.getIndentCount(),i=o?this.parent.getRows():this.parent.getDataRows()),Pt([e],!0,"e-columnselection");for(var a=0,l=i.length;a<l;a++)i[a].classList.contains("e-row")&&(!i[a].classList.contains("e-editedrow")&&!i[a].classList.contains("e-addedrow")||"Normal"!==this.parent.editSettings.mode||sf.base.isNullOrUndefined(i[a].querySelector("tr").childNodes[t])?sf.base.isNullOrUndefined(i[a].childNodes[t])||Pt([i[a].childNodes[t]],!0,"e-columnselection"):Pt([i[a].querySelector("tr").childNodes[t]],!0,"e-columnselection"))}},e.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(sf.base.isUndefined(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},e.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on("data-ready",this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener("dataBound",this.onDataBoundFunction),this.parent.on(p,this.checkBoxSelectionChanged,this),this.parent.on("before-refresh-on-data-change",this.initPerisistSelection,this),this.parent.on(f,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener("actionComplete",this.actionCompleteFunc),this.parent.on("click",this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)},e.prototype.removeEventListener_checkbox=function(){this.parent.off("data-ready",this.dataReady),this.parent.removeEventListener("dataBound",this.onDataBoundFunction),this.parent.removeEventListener("actionComplete",this.actionCompleteFunc),this.parent.off(f,this.setCheckAllForEmptyGrid),this.parent.off("click",this.clickHandler),this.parent.off("before-refresh-on-data-change",this.initPerisistSelection)},e.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var t=e.nextElementSibling;sf.base.removeClass([t],["e-check","e-stop","e-uncheck"])}},e.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var t=this.parent.enableInfiniteScrolling&&"infiniteScroll"===e.requestType;"virtualscroll"===e.requestType||this.parent.isPersistSelection||t||(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},e.prototype.actionCompleteHandler=function(e){"save"===e.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},e.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=e},e.prototype.disableInteracted=function(){this.isInteracted=!1},e.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},e}(),Ue=function(){function e(e){this.parent=e,this.addEventListener()}return e.prototype.search=function(e){var t,i,r=this.parent;(e=sf.base.isNullOrUndefined(e)?"":e,t=r,i=sf.base.select("#"+t.element.id+"EditConfirm",t.element),"Batch"!==t.editSettings.mode||!sf.base.selectAll(".e-updatedtd",t.element).length||!t.editSettings.showConfirmDialog||i&&!i.classList.contains("e-popup-close"))?e!==r.searchSettings.key?(r.searchSettings.key=e.toString(),r.dataBind()):this.refreshSearch&&r.refresh():r.notify("prevent-batch",{instance:this,handler:this.search,arg1:e})},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(g,this.onPropertyChanged,this),this.parent.on("searching-complete",this.onSearchComplete,this),this.parent.on("destroy",this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener("actionComplete",this.actionCompleteFunc),this.parent.on("cancel-Begin",this.cancelBeginEvent,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(g,this.onPropertyChanged),this.parent.off("searching-complete",this.onSearchComplete),this.parent.off("destroy",this.destroy),this.parent.removeEventListener("actionComplete",this.actionCompleteFunc),this.parent.off("cancel-Begin",this.cancelBeginEvent))},e.prototype.destroy=function(){this.removeEventListener()},e.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(sf.base.isNullOrUndefined(e.properties.key)?this.parent.notify("model-changed",{requestType:"searching",type:"actionBegin"}):this.parent.notify("model-changed",{requestType:"searching",type:"actionBegin",searchString:this.parent.searchSettings.key}))},e.prototype.onSearchComplete=function(e){sf.base.isBlazor()&&!this.parent.isJsComponent&&(e.rows=null),this.parent.trigger("actionComplete",sf.base.extend(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:"actionComplete"}))},e.prototype.onActionComplete=function(e){this.refreshSearch="searching"!==e.requestType},e.prototype.cancelBeginEvent=function(e){"searching"===e.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},e.prototype.getModuleName=function(){return"search"},e}(),Ve=function(){function e(e){this.parent=e}return e.prototype.show=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify("tooltip-destroy",{module:"edit"});for(var n=0;n<r.length;n++)r[n].visible=!0;this.setVisible(r)},e.prototype.hide=function(e,t){var i=this.getToggleFields(e),r=this.getColumns(i,t);this.parent.notify("tooltip-destroy",{module:"edit"});for(var n=0;n<r.length;n++)r[n].visible=!1;this.setVisible(r)},e.prototype.getToggleFields=function(e){return"string"==typeof e?[e]:e},e.prototype.getColumns=function(e,t){var i=this;return ft(e,(function(e,r){return ft(i.parent.columnModel,(function(i,r){if(i[t]===e)return i}))[0]}))},e.prototype.setVisible=function(e,t){var i=this;void 0===t&&(t=[]);var r={requestType:"columnstate",cancel:!1,columns:t=t.length>0?t:sf.base.isBlazor()?JSON.parse(JSON.stringify(e)):e};this.parent.trigger("actionBegin",r,(function(r){var n=i.parent.getColumns();if(e=sf.base.isNullOrUndefined(e)?n:e,r.cancel)return i.parent.notify("reset-columns",{showHideArgs:r}),void(e.length>0&&(e[0].visible=!0));(Ht(i.parent)&&i.parent.contentModule.emptyVcRows(),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization)?e.filter((function(e){return n.some((function(t){return e.field===t.field}))})).length&&i.parent.notify("column-visible-changed",e):i.parent.notify("column-visible-changed",e);var s={requestType:"columnstate",columns:t};i.parent.trigger("actionComplete",s),"All"!==i.parent.columnQueryMode&&i.parent.refresh()}))},e}(),Ge=function(){function e(e){this.lastScrollTop=0,this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Se(e),this.addEventListener()}return e.prototype.getModuleName=function(){return"scroll"},e.prototype.setWidth=function(e){this.parent.element.style.width=sf.base.formatUnit(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},e.prototype.setHeight=function(){var t=0,i=this.parent.getContent().querySelector(".e-content"),r=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(r=parseInt(r,10)-e.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){var n=this.parent.getHeaderContent().querySelector("tbody");if(t=n?n.offsetHeight:0,n&&t)t-=n.querySelectorAll(".e-addedrow").length*this.parent.getRowHeight();i.style.height=sf.base.formatUnit(r-t)}else i.style.height=sf.base.formatUnit(r);this.ensureOverflow(i)},e.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),i=e.getScrollBarWidth()-this.getThreshold(),r=this.getCssProperties(),n="Right"===this.parent.getFrozenMode()||"Left-Right"===this.parent.getFrozenMode()?"0.5px":"1px";t.querySelector(".e-headercontent").style[r.border]=i>0?n:"0px",t.style[r.padding]=i>0?i+"px":"0px"},e.prototype.removePadding=function(e){var t=this.getCssProperties(e),i=this.parent.getHeaderContent().querySelector(".e-headercontent");i.style[t.border]="",i.parentElement.style[t.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},e.prototype.refresh=function(){if("100%"===this.parent.height){var e=this.parent.getContent();this.parent.element.style.height="100%";var t=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+t+"px)",this.parent.isFrozenGrid()&&(e.firstElementChild.style.height="calc(100% - "+At()+"px)")}},e.prototype.getThreshold=function(){return"mozilla"===sf.base.Browser.info.name?.5:1},e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(f,this.wireEvents,this),this.parent.on(p,this.wireEvents,this),this.parent.on(u,this.onPropertyChanged,this),this.parent.on("textWrapRefresh",this.wireEvents,this),this.parent.on("header-refreshed",this.setScrollLeft,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(f,this.wireEvents),this.parent.off(p,this.wireEvents),this.parent.off(u,this.onPropertyChanged),this.parent.off("textWrapRefresh",this.wireEvents),this.parent.off("header-refreshed",this.setScrollLeft))},e.prototype.setScrollLeft=function(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector(".e-headercontent").scrollLeft=this.previousValues.left},e.prototype.onFrozenContentScroll=function(){var e=this;return function(t){null===e.content.querySelector("tbody")||e.parent.isPreventScrollEvent||(!sf.base.isNullOrUndefined(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling&&e.parent.notify("infinite-scroll-handler",t),e.previousValues.top=t.target.scrollTop)}},e.prototype.onContentScroll=function(e){var t=this,i=e,r=i.classList.contains("e-headercontent");return function(e){if(null!==t.content.querySelector("tbody")&&!t.parent.isPreventScrollEvent){if(!sf.base.isNullOrUndefined(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&t.parent.notify("infinite-scroll-handler",e),t.parent.groupSettings.columns.length&&t.parent.groupSettings.enableLazyLoading){var n=t.previousValues.top<t.parent.getContent().firstElementChild.scrollTop;t.parent.notify("lazy-load-scroll-handler",{scrollDown:n})}t.parent.notify("virtual-scroll-edit",{});var s=e.target,o=s.scrollLeft,a=(s.scrollWidth,s.classList.contains("e-summarycontent"));t.previousValues.left!==o?(t.parent.notify("close-filter-dialog",e),i.scrollLeft=o,a&&(t.header.scrollLeft=o),t.previousValues.left=o,t.parent.notify("scroll",{left:o})):t.previousValues.top=r?s.scrollTop:t.previousValues.top}}},e.prototype.onCustomScrollbarScroll=function(e,t){var i=this,r=e,n=t;return function(e){if(null!==i.content.querySelector("tbody")){var t=e.target.scrollLeft;i.previousValues.left!==t&&(r.scrollLeft=t,n.scrollLeft=t,i.previousValues.left=t,i.parent.notify("scroll",{left:t}),i.parent.isDestroyed)}}},e.prototype.onTouchScroll=function(e){var t=this,i=e;return function(e){if("mouse"!==e.pointerType){var r=t.parent.isFrozenGrid(),n=t.getPointXY(e),s=i.scrollLeft+(t.pageXY.x-n.x),o=r?t.parent.getHeaderContent().querySelector(".e-movableheader"):t.parent.getHeaderContent().querySelector(".e-headercontent"),a=r?t.parent.getContent().querySelector(".e-movablecontent"):t.parent.getContent().querySelector(".e-content");if(!(t.previousValues.left===s||s<0||o.scrollWidth-o.clientWidth<s)){if(e.preventDefault(),o.scrollLeft=s,a.scrollLeft=s,r)t.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=s;t.pageXY.x=n.x,t.previousValues.left=s}}}},e.prototype.setPageXY=function(){var e=this;return function(t){"mouse"!==t.pointerType&&(e.pageXY=e.getPointXY(t))}},e.prototype.getPointXY=function(e){var t={x:0,y:0};return e.touches&&e.touches.length?(t.x=e.touches[0].pageX,t.y=e.touches[0].pageY):(t.x=e.pageX,t.y=e.pageY),t},e.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var t=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector(".e-content"),this.header=this.parent.getHeaderContent().querySelector(".e-headercontent");var i=this.content.querySelector(".e-movablecontent"),r=(this.content.querySelector(".e-frozencontent"),this.header.querySelector(".e-movableheader")),n=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(sf.base.EventHandler.add(t?r:this.header,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(t?r:this.header,"touchmove pointermove",this.onTouchScroll(t?i:this.content),this)),this.parent.isFrozenGrid()?(sf.base.EventHandler.add(n,"scroll",this.onCustomScrollbarScroll(i,r),this),sf.base.EventHandler.add(i,"scroll",this.onCustomScrollbarScroll(n,r),this),sf.base.EventHandler.add(r,"scroll",this.onCustomScrollbarScroll(n,i),this),sf.base.EventHandler.add(this.content,"scroll",this.onFrozenContentScroll(),this),sf.base.EventHandler.add(r,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(r,"touchmove pointermove",this.onTouchScroll(i),this),sf.base.EventHandler.add(i,"touchstart pointerdown",this.setPageXY(),this),sf.base.EventHandler.add(i,"touchmove pointermove",this.onTouchScroll(r),this)):(sf.base.EventHandler.add(this.content,"scroll",this.onContentScroll(this.header),this),sf.base.EventHandler.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&sf.base.EventHandler.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.refresh(),this.oneTimeReady=!1}var s,o,a,l=this.parent.getContentTable();ut((function(){s=e.header.scrollLeft,o=l.scrollHeight,a=e.parent.getContent().clientHeight}),(function(){var t={cancel:!1};e.parent.notify("check-scroll-reset",t),e.parent.enableVirtualization||e.parent.enableInfiniteScrolling||(o<a&&(sf.base.addClass(l.querySelectorAll("tr:last-child td"),"e-lastrowcell"),e.parent.isFrozenGrid()&&sf.base.addClass(e.parent.getContent().querySelector(".e-movablecontent").querySelectorAll("tr:last-child td"),"e-lastrowcell")),t.cancel||((e.parent.frozenRows>0||e.parent.isFrozenGrid())&&e.header.querySelector(".e-movableheader")?e.header.querySelector(".e-movableheader").scrollLeft=e.previousValues.left:e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top)),e.parent.enableColumnVirtualization||(e.content.scrollLeft=s),e.parent.isFrozenGrid()&&e.header.querySelector(".e-movableheader")&&(e.header.querySelector(".e-movableheader").scrollLeft=e.content.querySelector(".e-movablecontent").scrollLeft)})),this.parent.isPreventScrollEvent=!1},e.prototype.getCssProperties=function(e){var t={},i=sf.base.isNullOrUndefined(e)?this.parent.enableRtl:e;return t.border=i?"borderLeftWidth":"borderRightWidth",t.padding=i?"paddingLeft":"paddingRight",t},e.prototype.ensureOverflow=function(e){e.style.overflowY="auto"===this.parent.height?"auto":"scroll"},e.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight();this.setWidth(!sf.base.isNullOrUndefined(e.properties.width))}},e.prototype.destroy=function(){var e=this.parent.element;if(e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))){this.removeEventListener(),this.removePadding();var t=this.parent.getContent().querySelector(".e-content");sf.base.removeClass([this.parent.getHeaderContent().querySelector(".e-headercontent")],"e-headercontent"),sf.base.removeClass([t],"e-content"),t.style.height="",this.parent.element.style.width="",sf.base.EventHandler.remove(t,"scroll",this.onContentScroll)}},e.getScrollBarWidth=function(){return At()},e}(),je=(J=function(e,t){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}J(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ke=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},We=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateFn={},t}return je(i,e),i.prototype.setFormatter=function(e){this.formatFn=e},i.prototype.getFormatter=function(){return this.formatFn},i.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[sf.base.getEnumValue(t,t.Summary)]={fn:sf.base.compile(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[sf.base.getEnumValue(t,t.GroupSummary)]={fn:sf.base.compile(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[sf.base.getEnumValue(t,t.CaptionSummary)]={fn:sf.base.compile(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},i.prototype.getTemplate=function(e){return this.templateFn[sf.base.getEnumValue(t,e)]},i.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},Ke([sf.base.Property()],i.prototype,"type",void 0),Ke([sf.base.Property()],i.prototype,"field",void 0),Ke([sf.base.Property()],i.prototype,"columnName",void 0),Ke([sf.base.Property()],i.prototype,"format",void 0),Ke([sf.base.Property()],i.prototype,"footerTemplate",void 0),Ke([sf.base.Property()],i.prototype,"groupFooterTemplate",void 0),Ke([sf.base.Property()],i.prototype,"groupCaptionTemplate",void 0),Ke([sf.base.Property()],i.prototype,"customAggregate",void 0),i}(sf.base.ChildProperty),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return je(t,e),Ke([sf.base.Collection([],We)],t.prototype,"columns",void 0),t}(sf.base.ChildProperty),Qe=function(){function e(e){this.copyContent="",this.isSelect=!1,this.parent=e,this.addEventListener()}return e.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(p,this.initialEnd,this),this.parent.on("key-pressed",this.keyDownHandler,this),this.parent.on("click",this.clickHandler,this),sf.base.EventHandler.add(this.parent.element,"keydown",this.pasteHandler,this))},e.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("key-pressed",this.keyDownHandler),this.parent.off(p,this.initialEnd),this.parent.off("click",this.clickHandler),sf.base.EventHandler.remove(this.parent.element,"keydown",this.pasteHandler))},e.prototype.clickHandler=function(e){var t=e.target;t=Ct(t,"e-rowcell")},e.prototype.pasteHandler=function(e){var t=this,i=this.parent,r=/(Mac)/i.test(navigator.platform);if(86===e.keyCode&&(e.ctrlKey||r&&e.metaKey)&&!i.isEdit){if(!sf.base.closest(document.activeElement,".e-rowcell")||!i.editSettings.allowEditing||"Batch"!==i.editSettings.mode||"Cell"!==i.selectionSettings.mode||"Flow"===i.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var n=window.scrollX,s=window.scrollY;this.clipBoardTextArea.focus(),setTimeout((function(){t.activeElement.focus(),window.scrollTo(n,s),t.paste(t.clipBoardTextArea.value,t.parent.getSelectedRowCellIndexes()[0].rowIndex,t.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])}),10)}},e.prototype.paste=function(e,t,i){var r,n,s,o=this.parent,a=i,l=t;if(o.editSettings.allowEditing&&"Batch"===o.editSettings.mode&&"Cell"===o.selectionSettings.mode&&"Flow"!==o.selectionSettings.cellSelectionMode){var h,d,c,p=e.split("\n"),u=o.getDataRows(),f=this.parent.isFrozenGrid();f&&(d=o.getMovableDataRows(),o.getFrozenRightColumnsCount()&&(c=o.getFrozenRightDataRows()));for(var g=0;g<p.length;g++){if(h=p[g].split("\t"),a=i,g===p.length-1&&""===p[g]||sf.base.isUndefined(o.getRowByIndex(l))){a++;break}for(var m=0;m<h.length;m++){if(s=o.getCellFromIndex(l,a),f){var y=u[l],b=d[l];if(s=!!y.querySelector('[aria-colindex="'+a+'"]')||b.querySelector('[aria-colindex="'+a+'"]'),c&&!s)s=c[l].querySelector('[aria-colindex="'+a+'"]')}if(!s){a++;break}if(n=(r=o.getColumnByIndex(a)).getParser()?r.getParser()(h[m]):h[m],r.allowEditing&&!r.isPrimaryKey&&!r.template){var v={column:r,data:n,rowIndex:l};this.parent.trigger("beforePaste",v),l=v.rowIndex,v.cancel||o.editModule&&("number"===r.type?this.parent.editModule.updateCell(l,r.field,parseFloat(v.data)):o.editModule.updateCell(l,r.field,v.data))}a++}l++}o.selectionModule.selectCellsByRange({rowIndex:t,cellIndex:i},{rowIndex:l-1,cellIndex:a-1});var C=this.parent.getCellFromIndex(l-1,a-1);C&&sf.base.classList(C,["e-focus","e-focused"],[])}},e.prototype.initialEnd=function(){this.parent.off(p,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":"clipboard"}}),this.parent.element.appendChild(this.clipBoardTextArea)},e.prototype.keyDownHandler=function(e){"ctrlPlusC"===e.action?this.copy():"ctrlShiftPlusH"===e.action&&this.copy(!0)},e.prototype.setCopyData=function(e){if(""===window.getSelection().toString()){var t=this.parent.isFrozenGrid();this.clipBoardTextArea.value=this.copyContent="";var i=void 0,r=void 0,n=this.parent.getRows();if(t&&(i=this.parent.getMovableDataRows(),"Left-Right"===this.parent.getFrozenMode()&&(r=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){var s=this.parent.getSelectedRowIndexes().sort((function(e,t){return e-t}));if(e){for(var o=[],a=0;a<this.parent.getVisibleColumns().length;a++)o[a]=this.parent.getVisibleColumns()[a].headerText;this.getCopyData(o,!1,"\t",e),this.copyContent+="\n"}for(a=0;a<s.length;a++){a>0&&(this.copyContent+="\n");var l=[].slice.call(n[s[a]].querySelectorAll(".e-rowcell:not(.e-hide)"));t&&(l.push.apply(l,[].slice.call(i[s[a]].querySelectorAll(".e-rowcell:not(.e-hide)"))),r&&l.push.apply(l,[].slice.call(r[s[a]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(l,!1,"\t",e)}}else{var h=this.checkBoxSelection();if(h.status){if(e){var d=[];for(a=0;a<h.colIndexes.length;a++)d.push(this.parent.getColumnHeaderByIndex(h.colIndexes[a]));this.getCopyData(d,!1,"\t",e),this.copyContent+="\n"}for(a=0;a<h.rowIndexes.length;a++){a>0&&(this.copyContent+="\n");l=[].slice.call(n[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground"));t&&(l.push.apply(l,[].slice.call(i[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground"))),r&&l.push.apply(l,[].slice.call(r[h.rowIndexes[a]].querySelectorAll(".e-cellselectionbackground")))),this.getCopyData(l,!1,"\t",e)}}else this.getCopyData([].slice.call(this.parent.element.querySelectorAll(".e-cellselectionbackground")),!0,"\n",e)}var c={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",c),c.cancel)return;this.clipBoardTextArea.value=this.copyContent=c.data,sf.base.Browser.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},e.prototype.getCopyData=function(e,t,i,r){for(var n="string"!=typeof e[0],s=0;s<e.length;s++)r&&t&&(this.copyContent+=this.parent.getColumns()[parseInt(e[s].getAttribute("aria-colindex"),10)].headerText+"\n"),n?e[s].classList.contains("e-hide")||(sf.base.isBlazor()?!e[s].classList.contains("e-gridchkbox")&&Object.keys(e[s].querySelectorAll(".e-check")).length?this.copyContent+=!0:!e[s].classList.contains("e-gridchkbox")&&Object.keys(e[s].querySelectorAll(".e-uncheck")).length?this.copyContent+=!1:this.copyContent+=e[s].innerText:this.copyContent+=e[s].innerText):this.copyContent+=e[s],s<e.length-1&&(this.copyContent+=i)},e.prototype.copy=function(e){document.queryCommandSupported("copy")&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},e.prototype.getModuleName=function(){return"clipboard"},e.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&sf.base.remove(this.clipBoardTextArea)},e.prototype.checkBoxSelection=function(){var e=this.parent,t={status:!1};if("Cell"===e.selectionSettings.mode){var i=e.getSelectedRowCellIndexes(),r=void 0,n=[],s=void 0;for(s=0;s<i.length&&(i[s].cellIndexes.length&&n.push(i[s].rowIndex),!i[s].cellIndexes.length||(r||(r=JSON.stringify(i[s].cellIndexes.sort())),r===JSON.stringify(i[s].cellIndexes.sort())));s++);n.sort((function(e,t){return e-t})),s===i.length&&n[n.length-1]-n[0]==n.length-1&&(t={status:!0,rowIndexes:n,colIndexes:i[0].cellIndexes})}return t},e}(),Je=new sf.base.Observer,Xe=(X=function(e,t){return(X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ye=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property()],t.prototype,"field",void 0),Ye([sf.base.Property()],t.prototype,"direction",void 0),Ye([sf.base.Property(!1)],t.prototype,"isFromGroup",void 0),t}(sf.base.ChildProperty),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Collection([],Ze)],t.prototype,"columns",void 0),Ye([sf.base.Property(!0)],t.prototype,"allowUnsort",void 0),t}(sf.base.ChildProperty),et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property()],t.prototype,"field",void 0),Ye([sf.base.Property()],t.prototype,"operator",void 0),Ye([sf.base.Property()],t.prototype,"value",void 0),Ye([sf.base.Property()],t.prototype,"matchCase",void 0),Ye([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),Ye([sf.base.Property()],t.prototype,"predicate",void 0),Ye([sf.base.Property({})],t.prototype,"actualFilterValue",void 0),Ye([sf.base.Property({})],t.prototype,"actualOperator",void 0),Ye([sf.base.Property()],t.prototype,"type",void 0),Ye([sf.base.Property()],t.prototype,"ejpredicate",void 0),Ye([sf.base.Property()],t.prototype,"uid",void 0),Ye([sf.base.Property()],t.prototype,"isForeignKey",void 0),t}(sf.base.ChildProperty),tt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property(!1)],t.prototype,"enableCache",void 0),Ye([sf.base.Property(3)],t.prototype,"maxBlocks",void 0),Ye([sf.base.Property(3)],t.prototype,"initialBlocks",void 0),t}(sf.base.ChildProperty),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Collection([],et)],t.prototype,"columns",void 0),Ye([sf.base.Property("FilterBar")],t.prototype,"type",void 0),Ye([sf.base.Property()],t.prototype,"mode",void 0),Ye([sf.base.Property(!0)],t.prototype,"showFilterBarStatus",void 0),Ye([sf.base.Property(1500)],t.prototype,"immediateModeDelay",void 0),Ye([sf.base.Property()],t.prototype,"operators",void 0),Ye([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableCaseSensitivity",void 0),Ye([sf.base.Property(!1)],t.prototype,"showFilterBarOperator",void 0),t}(sf.base.ChildProperty),rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property("Row")],t.prototype,"mode",void 0),Ye([sf.base.Property("Flow")],t.prototype,"cellSelectionMode",void 0),Ye([sf.base.Property("Single")],t.prototype,"type",void 0),Ye([sf.base.Property(!1)],t.prototype,"checkboxOnly",void 0),Ye([sf.base.Property(!1)],t.prototype,"persistSelection",void 0),Ye([sf.base.Property("Default")],t.prototype,"checkboxMode",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),Ye([sf.base.Property(!0)],t.prototype,"enableToggle",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowColumnSelection",void 0),t}(sf.base.ChildProperty),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property([])],t.prototype,"fields",void 0),Ye([sf.base.Property("")],t.prototype,"key",void 0),Ye([sf.base.Property("contains")],t.prototype,"operator",void 0),Ye([sf.base.Property(!0)],t.prototype,"ignoreCase",void 0),Ye([sf.base.Property(!1)],t.prototype,"ignoreAccent",void 0),t}(sf.base.ChildProperty),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property()],t.prototype,"targetID",void 0),t}(sf.base.ChildProperty),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property("Both")],t.prototype,"wrapMode",void 0),t}(sf.base.ChildProperty),at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property("Normal")],t.prototype,"mode",void 0),t}(sf.base.ChildProperty),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property(!0)],t.prototype,"showDropArea",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowReordering",void 0),Ye([sf.base.Property(!1)],t.prototype,"showToggleButton",void 0),Ye([sf.base.Property(!1)],t.prototype,"showGroupedColumn",void 0),Ye([sf.base.Property(!0)],t.prototype,"showUngroupButton",void 0),Ye([sf.base.Property(!1)],t.prototype,"disablePageWiseAggregates",void 0),Ye([sf.base.Property([])],t.prototype,"columns",void 0),Ye([sf.base.Property()],t.prototype,"captionTemplate",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableLazyLoading",void 0),t}(sf.base.ChildProperty),ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xe(t,e),Ye([sf.base.Property(!1)],t.prototype,"allowAdding",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowEditing",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowDeleting",void 0),Ye([sf.base.Property("Normal")],t.prototype,"mode",void 0),Ye([sf.base.Property(!0)],t.prototype,"allowEditOnDblClick",void 0),Ye([sf.base.Property(!0)],t.prototype,"showConfirmDialog",void 0),Ye([sf.base.Property(!1)],t.prototype,"showDeleteConfirmDialog",void 0),Ye([sf.base.Property("")],t.prototype,"template",void 0),Ye([sf.base.Property("")],t.prototype,"headerTemplate",void 0),Ye([sf.base.Property("")],t.prototype,"footerTemplate",void 0),Ye([sf.base.Property("Top")],t.prototype,"newRowPosition",void 0),Ye([sf.base.Property({})],t.prototype,"dialog",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowNextRowEdit",void 0),t}(sf.base.ChildProperty),dt=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.isPreventScrollEvent=!1,r.inViewIndexes=[],r.keyA=!1,r.frozenRightCount=0,r.frozenLeftCount=0,r.tablesCount=1,r.movableCount=0,r.visibleFrozenLeft=0,r.visibleFrozenRight=0,r.visibleMovable=0,r.frozenLeftColumns=[],r.frozenRightColumns=[],r.movableColumns=[],r.media={},r.isFreezeRefresh=!1,r.tableIndex=0,r.componentRefresh=sf.base.Component.prototype.refresh,r.isVirtualAdaptive=!1,r.vRows=[],r.vcRows=[],r.vGroupOffsets={},r.rowUid=0,r.currentViewData=[],r.lockcolPositionCount=0,r.prevPageMoving=!1,r.pageTemplateChange=!1,r.isAutoGen=!1,r.mediaBindInstance={},r.commandDelIndex=void 0,r.asyncTimeOut=50,r.enableLogger=!0,r.needsID=!0,n.Inject(He),sf.base.setValue("mergePersistData",r.mergePersistGridData,r),r}var n;return Xe(t,e),n=t,t.prototype.getPersistData=function(){for(var e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],t={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},i=0;i<e.length;i++)for(var r=this[e[i]],n=0,s=t[e[i]];n<s.length;n++){delete r[s[n]]}return this.pageSettings.template=void 0,this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!sf.base.isNullOrUndefined(this.pagerTemplate),this.addOnPersist(e)},t.prototype.requiredModules=function(){this.setFrozenCount();var e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e},t.prototype.extendRequiredModules=function(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]}),sf.base.isBlazor()&&e.push({member:"blazor",args:[this]})},t.prototype.preRender=function(){this.serviceLocator=new we,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){if(this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,sf.base.isBlazor()&&this.enableVirtualization&&this.allowGrouping){this.isExpanded=!1}this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=sf.base.Component.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No Matches Found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No Matches Found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},t.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),sf.base.isBlazor()&&this.renderComplete(),sf.popups.createSpinner({target:this.element},this.createElement),this.renderModule=new ve(this,this.serviceLocator),this.searchModule=new Ue(this),this.scrollModule=new Ge(this),this.notify("initial-load",{}),!0!==this.getDataModule().dataManager.dataSource.offline&&void 0!==this.getDataModule().dataManager.dataSource.url||(this.isVirtualAdaptive=!0),this.trigger("load"),bt(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify("columns-prepared",{}),sf.base.isBlazor()&&this.isServerRendered||(this.getMediaColumns(),yt(this.columns)),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.showSpinner(),this.notify("initial-end",{}),sf.base.isBlazor()&&this.isServerRendered&&Je.notify("component-rendered",{id:this.element.id,grid:this})},t.prototype.showSpinner=function(){sf.popups.showSpinner(this.element)},t.prototype.hideSpinner=function(){sf.popups.hideSpinner(this.element)},t.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().querySelectorAll(".e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!sf.base.isNullOrUndefined(e))for(var t=0;t<e.length;t++)sf.base.isNullOrUndefined(e[t].hideAtMedia)||!sf.base.isNullOrUndefined(e[t].visible)&&!e[t].visible||this.pushMediaColumn(e[t],t)}},t.prototype.pushMediaColumn=function(e,t){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(t,this.media[e.uid]),this.mediaBindInstance[t]=this.mediaQueryUpdate.bind(this,t),this.media[e.uid].addListener(this.mediaBindInstance[t])},t.prototype.updateMediaColumns=function(e){if(!this.enableColumnVirtualization){for(var t=this.getColumnIndexByUid(e.uid),i=0;i<this.mediaCol.length;i++)if(e.uid===this.mediaCol[i].uid)return void this.mediaCol.splice(i,1);this.pushMediaColumn(e,t)}},t.prototype.mediaQueryUpdate=function(e,t){var i=this.getColumns()[e];this.mediaCol.some((function(e){return e.uid===i.uid}))&&(i.visible=t.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,i.visible?this.showHider.show(i.headerText,"headerText"):this.showHider.hide(i.headerText,"headerText")))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var e=this.element.querySelector(".e-gridfooter");this.aggregates.length&&this.element.scrollHeight>this.height&&e&&sf.base.addClass([e],["e-footerpadding"]),this.getColumns().filter((function(e){return"checkbox"===e.type})).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&(this.enableAdaptiveUI||(this.setProperties({enableAdaptiveUI:!0},!0),this.notify("set-fullscreen-dialog",{})),this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),sf.base.removeClass([this.element],"e-gridhover")))},t.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[e].uid].removeListener(this.mediaBindInstance[this.mediaCol[e].index])},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var t=this.element;if(t){var i=!(!t.querySelector(".e-gridheader")||!t.querySelector(".e-gridcontent"));i&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify("destroy",{}),this.destroyDependentModules(),i&&e.prototype.destroy.call(this),this.toolTipObj.destroy();for(var r=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],n=0;n<r.length;n++)this[r[n]]&&(this[r[n]]=null);sf.base.isBlazor()&&this.isServerRendered?this.element.style.display="none":this.element.innerHTML="",sf.base.classList(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isAngular&&!this.isFreezeRefresh&&(this.element=null),this.isFreezeRefresh=!1}},t.prototype.destroyDependentModules=function(){var e=this.element;e&&(e.querySelector(".e-gridheader")||e.querySelector(".e-gridcontent"))&&(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")},t.prototype.onPropertyChanged=function(e,t){var i,r=!1,n=!1,s=!1;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var o=Object.keys(e);o.indexOf("columns")>-1&&(this.updateColumnObject(),n=!0);for(var a=0,l=o;a<l.length;a++){var h=l[a];switch(h){case"allowPaging":this.notify(u,{module:"pager",enable:this.allowPaging}),r=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(g,{module:"pager",properties:e.pageSettings});break}this.notify(g,{module:"pager",properties:e.pageSettings}),(sf.base.isNullOrUndefined(e.pageSettings.currentPage)&&sf.base.isNullOrUndefined(e.pageSettings.pageSize)&&sf.base.isNullOrUndefined(e.pageSettings.totalRecordsCount)||!sf.base.isNullOrUndefined(t.pageSettings)&&e.pageSettings.currentPage!==t.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(r=!0);break;case"allowSorting":this.notify(u,{module:"sort",enable:this.allowSorting}),r=!0,i=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(u,{module:"filter",enable:this.allowFiltering}),r=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(u,{module:"scroll",properties:{width:e.width,height:e.height}});break;case"allowReordering":this.headerModule.refreshUI(),i=!0;break;case"allowRowDragAndDrop":this.notify(u,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(u,{module:"selection",enable:this.allowSelection});break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=gt(this.rowTemplate),r=!0;break;case"detailTemplate":this.detailTemplateFn=gt(this.detailTemplate),r=!0;break;case"allowGrouping":this.notify(u,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),r=!0,i=!0;break;case"enableInfiniteScrolling":case"childGrid":r=!0;break;case"toolbar":this.notify(u,{module:"toolbar"});break;case"groupSettings":this.notify(g,{module:"group",properties:e.groupSettings,oldProperties:t.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(r=!0),this.notify(u,{module:"aggregate",properties:e});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),s=!0,n=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(r=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(h,e,n)}}i&&this.updateDefaultCursor(),n?s||this.getFrozenColumns()||this.frozenRows?sf.base.isBlazor()&&this.isServerRendered||this.freezeRefresh():this.refresh():r&&(this.notify("model-changed",{requestType:"refresh"}),r=!1,this.maintainSelection(e.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(e,t,i){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=t.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!t.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=t.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=t.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=t.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?sf.base.addClass([this.element],"e-grid-min-height"):sf.base.removeClass([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(u,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(u,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(u,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(u,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(g,{module:"filter",properties:t.filterSettings});break;case"searchSettings":this.notify(g,{module:"search",properties:t.searchSettings});break;case"sortSettings":this.notify(g,{module:"sort"});break;case"selectionSettings":this.notify(g,{module:"selection",properties:t.selectionSettings});break;case"editSettings":this.notify(g,{module:"edit",properties:t.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify("freezerender",{case:"textwrap",isModeChg:"textWrapSettings"===e});break;case"dataSource":var r=this.getDataModule().getState();if(Object.getPrototypeOf(t).deepWatch)for(var n=this.getPrimaryKeyFieldNames()[0],s=0,o=Object.keys(t.dataSource);s<o.length;s++)this.setRowData(sf.base.getValue(n,this.dataSource[o[s]]),this.dataSource[o[s]]);else if(r.isPending){var a=sf.base.isNullOrUndefined(this.dataSource)?[]:this.dataSource.result,l=r.group||[];for(s=0;s<l.length;s++)a=sf.data.DataUtil.group(a,l[s],r.aggregates||[]);this.dataSource={result:a,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),r.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify("datasource-modified",{}),i||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify("before-refresh-on-data-change",{}));this.scrollRefresh();break;case"enableHover":(t.enableHover?sf.base.addClass:sf.base.removeClass)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(t.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify("set-fullscreen-dialog",{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.refresh()}},t.prototype.maintainSelection=function(e){var t=this;if(-1!==e){this.on(p,(function i(){t.selectRow(e),t.off(p,i)}),this)}},t.prototype.setProperties=function(t,i){e.prototype.setProperties.call(this,t,i);t.filterSettings&&this.filterModule&&i&&this.filterModule.refreshFilter()},t.prototype.setTablesCount=function(){var e=this.getFrozenColumns(),t=this.getFrozenLeftColumnsCount(),i=this.getFrozenRightColumnsCount();!e||t||i?e||!t&&!i||(t&&!i||i&&!t?this.tablesCount=2:t&&i&&(this.tablesCount=3)):this.tablesCount=2},t.prototype.getTablesCount=function(){return this.tablesCount},t.prototype.updateDefaultCursor=function(){var e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),t=[].slice.call(this.getHeaderContent().querySelectorAll(".e-stackedheadercell")),i=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){var r=this.contentModule.getHeaderCells();e=r.length?r:e}for(var n=0;n<e.length;n++){var s=e[n];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(i[n].allowReordering&&i[n].allowSorting&&i[n].allowGrouping?s.classList.add("e-mousepointer"):s.classList.add("e-defaultcursor"))}for(var o=0;o<t.length;o++)this.allowReordering&&t[o].classList.add("e-mousepointer")},t.prototype.updateColumnModel=function(e){for(var t=0,i=e.length;t<i;t++)e[t].columns?this.updateColumnModel(e[t].columns):this.columnModel.push(e[t]);this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns()},t.prototype.updateColumnLevelFrozen=function(){var e=this.columnModel,t=[],i=[],r=[];if(this.frozenLeftCount||this.frozenRightCount){for(var n=0,s=e.length;n<s;n++){var o=e[n];"Left"===o.freeze?(o.freezeTable="frozen-left",t.push(o)):"Right"===o.freeze?(o.freezeTable="frozen-right",i.push(o)):(o.freezeTable="movable",r.push(o))}this.columnModel=t.concat(r).concat(i)}},t.prototype.updateFrozenColumns=function(){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var e=this.columnModel,t=this.frozenColumns,i=this.getFrozenColumns(),r=0,n=0,s=e.length;n<s;n++){var o=e[n];t&&(o.freezeTable=n<t?"frozen-left":"movable"),o.isFrozen&&n>=t?(o.freezeTable="frozen-left",e.splice(this.frozenColumns+r,0,e.splice(n,1)[0]),r++):i&&!t&&(o.freezeTable="movable")}},t.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},t.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()},t.prototype.getFrozenMode=function(){return this.frozenName},t.prototype.updateLockableColumns=function(){for(var e=this.columnModel,t=0,i=0,r=this.getFrozenColumns(),n=0;n<e.length;n++)e[n].lockColumn&&(n<r?(e.splice(t,0,e.splice(n,1)[0]),t++):(e.splice(r+i,0,e.splice(n,1)[0]),i++))},t.prototype.checkLockColumns=function(e){for(var t=0;t<e.length;t++)e[t].columns?this.checkLockColumns(e[t].columns):e[t].lockColumn&&this.lockcolPositionCount++},t.prototype.getColumns=function(e){var t=this,i=this.inViewIndexes.map((function(e){return e-t.groupSettings.columns.length})).filter((function(e){return e>-1})),r=i.length;(!this.enableColumnVirtualization||sf.base.isNullOrUndefined(this.columnModel)||0===this.columnModel.length||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));var n=0===r?this.columnModel:this.columnModel.slice(i[0],i[r-1]+1);this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&i.length&&i[0]>0&&(n=this.contentModule.ensureFrozenCols(n));return n},t.prototype.getStackedHeaderColumnByHeaderText=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];if(r.field===e||r.headerText===e){this.stackedColumn=r;break}r.columns&&this.getStackedHeaderColumnByHeaderText(e,r.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},t.prototype.getVisibleColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var r=i[t];r.visible&&e.push(r)}return e},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(e){this.headerModule.setPanel(e)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(e){this.contentModule.setTable(e)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(e){this.contentModule.setPanel(e)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(e){this.headerModule.setTable(e)},t.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0],this.footerElement},t.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName("e-gridfooter")[0],this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(e){this.gridPager=e},t.prototype.getRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},t.prototype.getMovableRowByIndex=function(e){return this.contentModule.getMovableRowByIndex(e)},t.prototype.getFrozenRowByIndex=function(e){return this.getFrozenDataRows()[e]},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRowByIndex=function(e){return this.contentModule.getFrozenRightRowByIndex(e)},t.prototype.getRowInfo=function(e){var t=e,i={target:e};if(!sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(Ct(t,"e-detailrowcollapse")&&sf.base.isNullOrUndefined(Ct(t,"e-recordplusexpand")))){var r=sf.base.closest(t,".e-rowcell");if(!r){var n=sf.base.closest(t,".e-row");if(!sf.base.isNullOrUndefined(n)){var s=this.getRowObjectFromUID(n.getAttribute("data-uid")),o=parseInt(n.getAttribute("aria-rowindex"),10);i={row:n,rowData:s.data,rowIndex:o}}return i}var a=parseInt(r.getAttribute("aria-colindex"),10);if(!sf.base.isNullOrUndefined(r)&&!isNaN(a)){var l=sf.base.closest(r,".e-row"),h=(o=parseInt(l.getAttribute("aria-rowindex"),10),this.getFrozenColumns()),d=this.columnModel[a].getFreezeTableName(),c=this.contentModule.getRows(),p=a+this.getIndentCount();this.isFrozenGrid()&&("frozen-left"===d?c=this.contentModule.getRows():"movable"===d?(p=a-h-this.frozenLeftCount,c=this.contentModule.getMovableRows()):"frozen-right"===d&&(p=a-(this.frozenLeftCount+this.movableCount),c=this.contentModule.getFrozenRightRows()));var u=c.filter((function(e){return e.uid===l.getAttribute("data-uid")})),f={},g=void 0;Object.keys(u).length&&(f=u[0].data,g=u[0].cells[p].column),i={cell:r,cellIndex:a,row:l,rowIndex:o,rowData:f,column:g,target:e}}}return i},t.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},t.prototype.getFrozenRightRows=function(){return this.contentModule.getFrozenRightRowElements()},t.prototype.getDataRows=function(){return this.getAllDataRows()},t.prototype.getAllDataRows=function(e){if(sf.base.isNullOrUndefined(this.getContentTable().querySelector("tbody")))return[];var t=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector("tbody"),i=[].slice.call(t.children);if(this.frozenRows){var r=this.isFrozenGrid()?this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody"):this.getHeaderTable().querySelector("tbody"),n=[].slice.call(r.children);i=this.addMovableRows(n,i)}return this.generateDataRows(i,e)},t.prototype.addMovableRows=function(e,t){for(var i=0,r=t.length;i<r;i++)e.push(t[i]);return e},t.prototype.generateDataRows=function(e,t){for(var i=[],r=0,n=e.length;r<n;r++)!e[r].classList.contains("e-row")||e[r].classList.contains("e-hiddenrow")&&!t||(this.isCollapseStateEnabled()?i[parseInt(e[r].getAttribute("aria-rowindex"))]=e[r]:i.push(e[r]));return i},t.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},t.prototype.getAllMovableDataRows=function(e){if(!this.isFrozenGrid())return[];var t=[].slice.call(this.getContent().querySelector(".e-movablecontent").querySelector("tbody").children);if(this.frozenRows){var i=[].slice.call(this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody").children);t=this.addMovableRows(i,t)}return this.generateDataRows(t,e)},t.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},t.prototype.getAllFrozenDataRows=function(e){var t=[].slice.call(this.getContent().querySelector(".e-frozencontent").querySelector("tbody").children);if(this.frozenRows){var i=[].slice.call(this.getHeaderContent().querySelector(".e-frozenheader").querySelector("tbody").children);t=this.addMovableRows(i,t)}return this.generateDataRows(t,e)},t.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},t.prototype.getAllFrozenRightDataRows=function(e){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];var t=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector("tbody").children);if(this.frozenRows){var i=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("tbody").children);t=this.addMovableRows(i,t)}return this.generateDataRows(t,e)},t.prototype.setCellValue=function(e,t,i){var r,n,s,o,a,l=this.getPrimaryKeyFieldNames()[0],h=new P(this,this.serviceLocator),d={},c=this.contentModule.getRows(),p=this.contentModule.getMovableRows();if(r=this.getColumnIndexByField(t),this.groupSettings.columns.length&&(r+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&r++,this.isRowDragable()&&r++,n=this.getColumnByField(t),a=c.filter((function(t){return sf.base.getValue(l,t.data)===e}))[0],d=p.filter((function(t){return sf.base.getValue(l,t.data)===e}))[0],s=sf.base.isNullOrUndefined(a)?null:this.element.querySelector("[data-uid="+a.uid+"]"),o=sf.base.isNullOrUndefined(d)?null:this.element.querySelector("[data-uid="+d.uid+"]"),!sf.base.isNullOrUndefined(s)){sf.base.setValue(t,i,a.data);var u=sf.base.isNullOrUndefined(s.cells[r])?o.cells[r-this.frozenColumns]:s.cells[r];if(!sf.base.isNullOrUndefined(u)){var f=a.cells[r],g=void 0;this.frozenColumns&&(g=d.cells[r-this.frozenColumns]),h.refreshTD(u,sf.base.isNullOrUndefined(f)?g:f,a.data,{index:a.index}),this.aggregates.length>0&&(this.notify("refresh-footer-rendered",{}),this.groupSettings.columns.length>0&&this.notify("group-aggregates",{})),sf.base.isNullOrUndefined(d)||sf.base.isNullOrUndefined(d.changes)||(d.changes[t]=i),this.trigger("queryCellInfo",{cell:u,column:n,data:a.data})}}},t.prototype.refreshReactColumnTemplateByUid=function(e){var t=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,(function(){for(var i=t.getRowsObject(),r=t.getIndentCount(),n=t.getNormalizedColumnIndex(e),s=0;s<i.length;s++)if(i[s].isDataRow&&!sf.base.isNullOrUndefined(i[s].index)){var o=i[s].cells[n],a=new P(t,t.serviceLocator),l=t.getCellFromIndex(i[s].index,n-r);a.refreshTD(l,o,i[s].data,{index:i[s].index})}}))},t.prototype.setRowData=function(e,t){var i,r=this.contentModule.getRows(),n=this.getPrimaryKeyFieldNames()[0],s=new S(this.serviceLocator,null,this);this.groupSettings.columns.length>0&&this.aggregates.length>0&&(r=r.filter((function(e){return e.isDataRow}))),i=r.filter((function(t){return sf.base.getValue(n,t.data)===e}))[0],!sf.base.isNullOrUndefined(i)&&this.element.querySelectorAll("[data-uid="+i.uid+"]").length&&(i.changes=t,function(e,t,i){for(var r=0;r<t.length;r++)sf.base.setValue(t[r].field,Ot(t[r],i),e.foreignKeyData);var n=e.cells;for(r=0;r<n.length;r++)n[r].isForeignKey&&sf.base.setValue("foreignKeyData",sf.base.getValue(n[r].column.field,e.foreignKeyData),n[r])}(i,this.getForeignKeyColumns(),i.changes),s.refresh(i,this.getColumns(),!0),this.aggregates.length>0&&(this.notify("refresh-footer-rendered",{}),this.groupSettings.columns.length>0&&this.notify("group-aggregates",{})))},t.prototype.getCellFromIndex=function(e,t){return Jt(this,this.getColumnByIndex(t),e,t)},t.prototype.getMovableCellFromIndex=function(e,t){if(!("Left-Right"===this.frozenName&&t>=this.movableCount)){var i=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[e]&&this.getMovableDataRows()[e].querySelectorAll(".e-rowcell")[t-i]}},t.prototype.getFrozenRightCellFromIndex=function(e,t){var i=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),r=this.getFrozenRightDataRows();return r[e]&&r[e].querySelectorAll(".e-rowcell")[t-i]},t.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().querySelectorAll(".e-headercell")[e]},t.prototype.getMovableColumnHeaderByIndex=function(e){var t=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().querySelectorAll(".e-headercell")[e-t]},t.prototype.getFrozenRightColumnHeaderByIndex=function(e){var t=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().querySelectorAll(".e-headercell")[e-t]},t.prototype.getFrozenLeftColumnHeaderByIndex=function(e){return this.getFrozenVirtualHeader().querySelectorAll(".e-headercell")[e]},t.prototype.getRowObjectFromUID=function(e,t,i){var r=this.contentModule.getRows(),n=this.rowObject(r,e);return this.isFrozenGrid()&&(!n||t||i)?((!(n=this.rowObject(this.contentModule.getMovableRows(),e))&&"Left-Right"===this.getFrozenMode()||i)&&(n=this.rowObject(this.contentModule.getFrozenRightRows(),e)),n):sf.base.isNullOrUndefined(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0?n=this.rowObject(this.vRows,e):n},t.prototype.rowObject=function(e,t){for(var i=0,r=e;i<r.length;i++){var n=r[i];if(n.uid===t)return n}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){var e=[];return this.isFrozenGrid()&&(e=this.contentModule.getMovableRows()),e},t.prototype.getFrozenRightRowsObject=function(){var e=[];return"Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode()||(e=this.contentModule.getFrozenRightRows()),e},t.prototype.getColumnHeaderByField=function(e){var t=this.getColumnByField(e);return t?this.getColumnHeaderByUid(t.uid):void 0},t.prototype.getColumnHeaderByUid=function(e){var t=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return t?t.parentElement:void 0},t.prototype.getColumnByIndex=function(e){var t;return this.getColumns().some((function(i,r){return t=i,r===e})),t},t.prototype.getColumnByField=function(e){return ft(this.getColumns(),(function(t,i){if(t.field===e)return t}))[0]},t.prototype.getColumnIndexByField=function(e){for(var t=this.getColumns(),i=0;i<t.length;i++)if(t[i].field===e)return i;return-1},t.prototype.getColumnByUid=function(e){return ft(this.getColumns().concat(this.getStackedColumns(this.columns)),(function(t,i){if(t.uid===e)return t}))[0]},t.prototype.getStackedColumns=function(e,t){void 0===t&&(t=[]);for(var i=0,r=e;i<r.length;i++){var n=r[i];n.columns&&(t.push(n),this.getStackedColumns(n.columns,t))}return t},t.prototype.getColumnIndexByUid=function(e){var t=ft(this.getColumns(),(function(t,i){if(t.uid===e)return i}))[0];return sf.base.isNullOrUndefined(t)?-1:t},t.prototype.getUidByColumnField=function(e){return ft(this.getColumns(),(function(t,i){if(t.field===e)return t.uid}))[0]},t.prototype.getNormalizedColumnIndex=function(e){return this.getColumnIndexByUid(e)+this.getIndentCount()},t.prototype.getIndentCount=function(){var e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&sf.base.isNullOrUndefined(this.rowDropSettings.targetID)&&e++,e},t.prototype.getColumnFieldNames=function(){for(var e,t=[],i=0,r=this.getColumns().length;i<r;i++)(e=this.getColumns()[i]).visible&&t.push(e.field);return t},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},t.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var e=[],t=0;t<this.columnModel.length;t++)this.columnModel[t].isPrimaryKey&&e.push(this.columnModel[t].field);return e},t.prototype.refresh=function(){this.isDestroyed||(this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getSelectedColumnsUid=function(){var e=this,t=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter((function(i){return t.push(e.getColumns()[i].uid)})),t},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(e,t){t=t||"headerText",this.showHider.show(e,t)},t.prototype.hideColumns=function(e,t){t=t||"headerText",this.showHider.hide(e,t)},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},t.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount},t.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount},t.prototype.getMovableColumnsCount=function(){return this.movableCount},t.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount&&(this.frozenName="Left-Right")},t.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},t.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},t.prototype.getVisibleMovableCount=function(){return this.visibleMovable},t.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},t.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},t.prototype.getMovableColumns=function(){return this.movableColumns},t.prototype.splitFrozenCount=function(e){for(var t=0;t<e.length;t++)e[t].columns?this.splitFrozenCount(e[t].columns):"Right"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[t]),this.frozenRightCount++):"Left"===e[t].freeze?(!1!==e[t].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[t]),this.frozenLeftCount++):(!1!==e[t].visible&&this.visibleMovable++,this.movableColumns.push(e[t]),this.movableCount++)},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t.prototype.getVisibleFrozenColumnsCount=function(){for(var e=0,t=this.columnModel,i=0;i<this.frozenColumns;i++)t[i].visible&&e++;if(this.frozenLeftCount||this.frozenRightCount)for(i=0;i<t.length;i++)!t[i].visible||"Left"!==t[i].freeze&&"Right"!==t[i].freeze||e++;return e},t.prototype.getVisibleFrozenCount=function(e,t){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var i=0,r=e.length;i<r;i++)e[i].columns?t=this.getVisibleFrozenCount(e[i].columns,t):e[i].isFrozen&&e[i].visible&&t++;return t},t.prototype.getFrozenCount=function(e,t,i){for(var r=0,n=e.length;r<n;r++)e[r].columns?t=this.getFrozenCount(e[r].columns,t,i):(e[r].isFrozen&&i>this.frozenColumns-1&&t++,i++);return t},t.prototype.goToPage=function(e){this.pagerModule&&this.pagerModule.goToPage(e)},t.prototype.updateExternalMessage=function(e){this.pagerModule&&this.pagerModule.updateExternalMessage(e)},t.prototype.sortColumn=function(e,t,i){this.sortModule&&this.sortModule.sortColumn(e,t,i)},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(e){this.sortModule&&this.sortModule.removeSortColumn(e)},t.prototype.filterByColumn=function(e,t,i,r,n,s,o,a){this.filterModule&&this.filterModule.filterByColumn(e,t,i,r,n,s,o,a)},t.prototype.clearFiltering=function(e){this.filterModule&&this.filterModule.clearFiltering(e)},t.prototype.removeFilteredColsByField=function(e,t){this.filterModule&&this.filterModule.removeFilteredColsByField(e,t)},t.prototype.selectRow=function(e,t){this.selectionModule&&this.selectionModule.selectRow(e,t)},t.prototype.selectRows=function(e){this.selectionModule&&this.selectionModule.selectRows(e)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(e,t){this.selectionModule&&this.selectionModule.selectCell(e,t)},t.prototype.selectCellsByRange=function(e,t){this.selectionModule.selectCellsByRange(e,t)},t.prototype.search=function(e){this.searchModule&&this.searchModule.search(e)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(e,t){this.editModule&&this.editModule.deleteRecord(e,t)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(e,t){this.editModule&&this.editModule.addRecord(e,t)},t.prototype.deleteRow=function(e){this.editModule&&this.editModule.deleteRow(e)},t.prototype.editCell=function(e,t){this.editModule&&this.editModule.editCell(e,t)},t.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},t.prototype.updateCell=function(e,t,i){this.editModule&&this.editModule.updateCell(e,t,i)},t.prototype.updateRow=function(e,t){this.editModule&&this.editModule.updateRow(e,t)},t.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},t.prototype.enableToolbarItems=function(e,t){this.toolbarModule&&this.toolbarModule.enableItems(e,t)},t.prototype.copy=function(e){this.clipboardModule&&this.clipboardModule.copy(e)},t.prototype.recalcIndentWidth=function(){var e=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var t=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,i=[].slice.call(this.getHeaderTable().querySelector("colgroup").childNodes),r=[].slice.call(this.getContentTable().querySelector("colgroup").childNodes),n=t/30,s="Right"===this.getFrozenMode()?this.frozenRightCount:0,o=this.element.offsetWidth,a=function(t,n){if(Wt(e)){var s=(n/o*100).toFixed(1)+"%";i[t].style.width=s,r[t].style.width=s}else i[t].style.width=n+"px",r[t].style.width=n+"px";e.notify("column-width-changed",{index:t,width:n})};for(n>=1&&(t=30/n),(this.enableColumnVirtualization||this.isAutoGen)&&(t=30);s<this.groupSettings.columns.length;)a(s,t),s++;this.isDetail()&&(a(s,t),s++),this.isRowDragable()&&a(s,t),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},t.prototype.resetIndentWidth=function(){if(Wt(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter((function(e){return(!e.width||"auto"===e.width)&&e.minWidth})).length>0){var e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar()},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(e,t){this.reorderModule&&this.reorderModule.reorderColumns(e,t)},t.prototype.reorderColumnByIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,t)},t.prototype.reorderColumnByTargetIndex=function(e,t){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,t)},t.prototype.reorderRows=function(e,t){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,t)},t.prototype.refreshDataSource=function(e,t){this.notify("refreshdataSource",e)},t.prototype.disableRowDD=function(e){var t=this.getHeaderTable(),i=this.getContentTable(),r=t.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),n=this.getRows(),s=e?"none":"";sf.base.setStyleAttribute(t.querySelector("colgroup").childNodes[0],{display:s}),sf.base.setStyleAttribute(i.querySelector("colgroup").childNodes[0],{display:s});for(var o=0;o<this.getRows().length;o++){var a=n[o].firstElementChild;e?sf.base.addClass([a],"e-hide"):sf.base.removeClass([a],["e-hide"])}for(var l=0;l<t.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;l++){a=r[l];e?sf.base.addClass([a],"e-hide"):sf.base.removeClass([a],["e-hide"])}},t.prototype.autoFitColumns=function(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)},t.prototype.createColumnchooser=function(e,t,i){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,t,i)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Se(this)),this.serviceLocator.register("cellRendererFactory",new Ce),this.serviceLocator.register("rendererFactory",new xe),this.serviceLocator.register("localization",this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new h(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new Ve(this)),this.serviceLocator.register("ariaService",this.ariaService=new D),this.serviceLocator.register("focus",this.focusModule=new Ie(this))},t.prototype.processModel=function(){var e,t,i=this.groupSettings.columns,r=this.sortSettings.columns;if(this.allowGrouping)for(var n=function(n,o){t=0;for(var a=r.length;t<a;t++)if(r[t].field===i[n]){e=!0;break}if(e?s.allowSorting?s.sortedColumns.push(r[t].field):r[t].direction="Ascending":r.push({field:i[n],direction:"Ascending",isFromGroup:!0}),!s.groupSettings.showGroupedColumn){var l=s.enableColumnVirtualization?s.columns.filter((function(e){return e.field===i[n]}))[0]:s.getColumnByField(i[n]);l?l.visible=!1:s.log("initial_action",{moduleName:"group",columnName:i[n]})}},s=this,o=0,a=i.length;o<a;o++)n(o);if(!i.length)for(o=0;o<r.length;o++)this.sortedColumns.push(r[o].field);if(this.rowTemplateFn=gt(this.rowTemplate),this.detailTemplateFn=gt(this.detailTemplate),this.editTemplateFn=gt(this.editSettings.template),this.editHeaderTemplateFn=gt(this.editSettings.headerTemplate),this.editFooterTemplateFn=gt(this.editSettings.footerTemplate),!sf.base.isNullOrUndefined(this.parentDetails)){var l=sf.base.isNullOrUndefined(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",l,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify("initForeignKeyColumn",this.getForeignKeyColumns())},t.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?(this.element.classList.add("e-row-responsive"),this.setProperties({enableAdaptiveUI:!0},!0)):(this.element.classList.remove("e-row-responsive"),this.setProperties({enableAdaptiveUI:!1},!0)),this.notify("set-fullscreen-dialog",{})},t.prototype.gridRender=function(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),sf.base.Browser.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),sf.base.classList(this.element,["e-responsive","e-default"],[]);var e=this.serviceLocator.getService("rendererFactory");this.headerModule=e.getRenderer(r.Header),this.contentModule=e.getRenderer(r.Content),this.printModule=new ct(this,this.scrollModule),this.clipboardModule=new Qe(this),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),t=this.createElement("div",{className:"e-content",attrs:{tabIndex:"-1"}});sf.base.append([t,this.createElement("div",{className:"e-uptail e-tail"})],e),t.appendChild(this.createElement("span")),sf.base.append([t,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)},t.prototype.updateGridLines=function(){switch(sf.base.classList(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var e=[].slice.call(this.element.querySelectorAll(".e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":kt(this.element,!1),kt(this.getContent(),!1),kt(e,!0);break;case"Content":kt(this.getContent(),!0),kt(this.element,!1),kt(e,!1);break;default:kt(this.element,!0),kt(this.getContent(),!1),kt(e,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify("refreshResizeHandlers",{})}},t.prototype.removeTextWrap=function(){kt(this.element,!1),kt([].slice.call(this.element.querySelectorAll(".e-columnheader")),!1),kt(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify("refreshResizeHandlers",{})},t.prototype.createTooltip=function(){this.toolTipObj=new sf.popups.Tooltip({opensOn:"custom",content:""},this.element)},t.prototype.freezeRefresh=function(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()},t.prototype.getTooltipStatus=function(e){var t,i=this.getHeaderTable(),r=(this.getContentTable(),this.createTable(i,"e-gridheader","header")),n=this.createTable(i,"e-gridheader","content"),s=e.classList.contains("e-headercell")?r:n,o=e.classList.contains("e-headercell")?"th":"tr";return s.querySelector(o).className=e.className,s.querySelector(o).innerHTML=e.innerHTML,t=s.querySelector(o).getBoundingClientRect().width,document.body.removeChild(r),document.body.removeChild(n),t>e.getBoundingClientRect().width},t.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){var t=Ct(e.target,"e-ellipsistooltip");this.prevElement===t&&"mouseout"!==e.type||this.toolTipObj.close();var i=e.target.tagName;if(t&&"mouseout"!==e.type&&(!sf.base.Browser.isDevice||-1===["A","BUTTON","INPUT"].indexOf(i))){if(t.getAttribute("aria-describedby"))return;this.getTooltipStatus(t)&&(t.getElementsByClassName("e-headertext").length?this.toolTipObj.content=t.getElementsByClassName("e-headertext")[0].innerText:this.toolTipObj.content=t.innerText,this.prevElement=t,this.toolTipObj.open(t))}}this.hoverFrozenRows(e)},t.prototype.hoverFrozenRows=function(e){if(this.isFrozenGrid()){var t=Ct(e.target,"e-row");if([].slice.call(this.element.querySelectorAll(".e-frozenhover")).length&&"mouseout"===e.type)for(var i=[].slice.call(this.element.querySelectorAll(".e-frozenhover")),r=0;r<i.length;r++)i[r].classList.remove("e-frozenhover");else if(t){(i=[].slice.call(this.element.querySelectorAll('tr[aria-rowindex="'+t.getAttribute("aria-rowindex")+'"]'))).splice(i.indexOf(t),1);for(r=0;r<i.length;r++)"true"!=t.getAttribute("aria-selected")&&i[r]?i[r].classList.add("e-frozenhover"):i[r]&&i[r].classList.remove("e-frozenhover")}}},t.prototype.isEllipsisTooltip=function(){var e=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var t=0;t<e.length;t++)if("EllipsisWithTooltip"===e[t].clipMode)return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(e,t,i){var r=this.createElement("div");r.className=this.element.className,r.style.cssText="display: inline-block;visibility:hidden;position:absolute";var n=this.createElement("div");n.className=t;var s=this.createElement("table");s.className=e.className,s.style.cssText="table-layout: auto;width: auto";var o="header"===i?"th":"td",a=this.createElement("tr"),l=this.createElement(o);return a.appendChild(l),s.appendChild(a),n.appendChild(s),r.appendChild(n),document.body.appendChild(r),r},t.prototype.onKeyPressed=function(e){"tab"!==e.action&&"shiftTab"!==e.action||this.toolTipObj.close()},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,"touchend",this.mouseClickHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"dblclick",this.dblClickHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyPressHandler,this),sf.base.EventHandler.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),sf.base.EventHandler.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),sf.base.EventHandler.add(this.element,"mousemove",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseMoveHandler,this),sf.base.EventHandler.add(this.getContent(),"touchstart",this.tapEvent,this),sf.base.EventHandler.add(document.body,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,"touchend",this.mouseClickHandler),sf.base.EventHandler.remove(this.element,"focusout",this.focusOutHandler),sf.base.EventHandler.remove(this.element,"dblclick",this.dblClickHandler),sf.base.EventHandler.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),sf.base.EventHandler.remove(this.element,"mousemove",this.mouseMoveHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseMoveHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyPressHandler),sf.base.EventHandler.remove(this.getContent(),"touchstart",this.tapEvent),sf.base.EventHandler.remove(document.body,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(window,"resize",this.resetIndentWidth)},t.prototype.addListener=function(){this.isDestroyed||(this.on("data-ready",this.dataReady,this),this.on(p,this.recalcIndentWidth,this),this.on("header-refreshed",this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener("dataBound",this.dataBoundFunction),this.on("key-pressed",this.onKeyPressed,this),this.on(p,this.blazorTemplate,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off("data-ready",this.dataReady),this.off(p,this.recalcIndentWidth),this.off("header-refreshed",this.recalcIndentWidth),this.removeEventListener("dataBound",this.dataBoundFunction),this.off("key-pressed",this.onKeyPressed))},t.prototype.blazorTemplate=function(){if(sf.base.isBlazor()){this.pageSettings.template&&sf.base.updateBlazorTemplate(this.element.id+"_template","Template",this.pageSettings);for(var e=0;e<this.columnModel.length;e++){if(this.columnModel[e].template&&sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid,"Template",this.columnModel[e],!1),this.columnModel[e].headerTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid+"headerTemplate","HeaderTemplate",this.columnModel[e],!1),"FilterBar"==this.filterSettings.type&&this.columnModel[e].filterTemplate){for(var t=this.columnModel[e].field,i=this.element.id+this.columnModel[e].uid+"filterTemplate",r=this.filterSettings.columns,n=0;n<r.length;n++)t==r[n].field&&(sf.base.blazorTemplates[i][0][t]=r[n].value);sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid+"filterTemplate","FilterTemplate",this.columnModel[e],!1)}"FilterBar"!=this.filterSettings.type&&this.columnModel[e].filterTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.columnModel[e].uid+"filterTemplate","FilterTemplate",this.columnModel[e])}this.groupSettings.captionTemplate&&sf.base.updateBlazorTemplate(this.element.id+"captionTemplate","CaptionTemplate",this.groupSettings);for(n=0;n<this.aggregates.length;n++)for(var s=0;s<this.aggregates[n].columns.length;s++)this.aggregates[n].columns[s].footerTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.aggregates[n].columns[s].guid+"footerTemplate","FooterTemplate",this.aggregates[n].columns[s]),this.aggregates[n].columns[s].groupFooterTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.aggregates[n].columns[s].guid+"groupFooterTemplate","GroupFooterTemplate",this.aggregates[n].columns[s]),this.aggregates[n].columns[s].groupCaptionTemplate&&sf.base.updateBlazorTemplate(this.element.id+this.aggregates[n].columns[s].guid+"groupCaptionTemplate","GroupCaptionTemplate",this.aggregates[n].columns[s])}},t.prototype.getCurrentViewRecords=function(){return Ht(this)?sf.base.isNullOrUndefined(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(e){if(!(this.isChildGrid(e)||Ct(e.target,"e-gridpopup")&&e.touches||this.element.querySelectorAll(".e-cloneproperties").length||this.checkEdit(e))&&((this.allowRowDragAndDrop||!Ct(e.target,"e-gridcontent")&&"TD"!==e.target.tagName)&&(this.allowGrouping||this.allowReordering||!Ct(e.target,"e-gridheader"))||!e.touches)){Ct(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!Ct(e.target,"e-filterbarcell")&&e.preventDefault();var t=this.getRowInfo(e.target);t.cancel=!1;var i=!1,r=sf.base.closest(e.target,"tr");if(r&&r.getAttribute("data-uid")){var n=this.getRowObjectFromUID(r.getAttribute("data-uid"));i=!!n&&n.isDataRow}if(sf.base.isBlazor()){var s=sf.base.extend({},t.column);t={rowData:t.rowData,rowIndex:t.rowIndex,cellIndex:t.cellIndex,column:s}}i&&this.trigger("recordClick",t),this.notify("click",e)}},t.prototype.checkEdit=function(e){var t=Ct(e.target,"e-row"),i="Batch"!==this.editSettings.mode&&this.isEdit&&t&&(t.classList.contains("e-editedrow")||t.classList.contains("e-addedrow"));return!Ct(e.target,"e-unboundcelldiv")&&(i||Ct(e.target,"e-rowcell")&&Ct(e.target,"e-rowcell").classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(e){var t=Ct(e.target,"e-grid");if(!sf.base.isNullOrUndefined(t)&&t.id===this.element.id&&!sf.base.closest(e.target,".e-unboundcelldiv")){var i=!1,r=sf.base.closest(e.target,"tr");if(r&&r.getAttribute("data-uid")){var n=this.getRowObjectFromUID(r.getAttribute("data-uid"));i=!!n&&n.isDataRow}var s=this.getRowInfo(e.target);s.target=e.target,i&&this.trigger("recordDoubleClick",s),this.notify("dblclick",e)}},t.prototype.focusOutHandler=function(e){if(!this.isChildGrid(e)){Ct(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var t=this.element.querySelector(".e-cancel:not(.e-hide)");t&&t.classList.add("e-hide");var i=e.relatedTarget,r=i?i.getAttribute("aria-owns"):null;i&&(Ct(i,"e-grid")||(!sf.base.isNullOrUndefined(r)&&r)===e.target.getAttribute("aria-owns"))||this.keyPress||!this.isEdit||sf.base.Browser.isDevice||("Batch"===this.editSettings.mode&&(this.editModule.saveCell(),this.notify("editNextValCell",{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},t.prototype.isChildGrid=function(e){var t=Ct(e.target,"e-grid");return!(!t||t.id===this.element.id)},t.prototype.mergePersistGridData=function(e){var t=this.getLocalData();if(!sf.base.isNullOrUndefined(t)&&""!==t||!sf.base.isNullOrUndefined(e)){var r=sf.base.isNullOrUndefined(e)?JSON.parse(t):e;this.enableVirtualization&&(r.pageSettings.currentPage=1);var n=Object.keys(r);this.isProtectedOnChange=!0;for(var s=0,o=n;s<o.length;s++){var a=o[s];"object"!==i(this[a])||sf.base.isNullOrUndefined(this[a])?this[a]=r[a]:Array.isArray(this[a])&&"columns"===a?(sf.base.isBlazor()&&this.isServerRendered||yt(this[a]),this.mergeColumns(r[a],this[a]),this[a]=r[a]):sf.base.extend(this[a],r[a])}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(e,t){for(var i=e,r=function(e){var r=t.filter((function(t){return t.index===i[e].index}))[0];if(!sf.base.isNullOrUndefined(r))if(r.columns&&r.columns.length)n.mergeColumns(i[e].columns,r.columns),i[e]=sf.base.extend(r,i[e],{},!0);else{if(sf.base.isBlazor()){i[e].guid=r.guid,i[e].uid=r.uid}i[e]=sf.base.extend(r,i[e],{},!0)}},n=this,s=0;s<i.length;s++)r(s)},t.prototype.isDetail=function(){return!sf.base.isNullOrUndefined(this.detailTemplate)||!sf.base.isNullOrUndefined(this.childGrid)},t.prototype.isCommandColumn=function(e){var t=this;return e.some((function(e){return e.columns?t.isCommandColumn(e.columns):!(!e.commands&&!e.commandsTemplate)}))},t.prototype.isForeignKeyEnabled=function(e){var t=this;return e.some((function(e){return e.columns?t.isForeignKeyEnabled(e.columns):!(!e.dataSource||!e.foreignKeyValue)}))},t.prototype.keyPressHandler=function(e){var t=sf.base.extend(e,{cancel:!1});this.trigger("keyPressed",t),!0===t.cancel&&e.stopImmediatePropagation()},t.prototype.keyDownHandler=function(e){e.altKey&&(74===e.keyCode&&(this.keyA?(this.notify("group-collapse",{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule.focusHeader(),this.focusModule.addOutline())),87===e.keyCode&&(this.focusModule.focusContent(),this.focusModule.addOutline()),65===e.keyCode&&(this.keyA=!0),72===e.keyCode&&this.keyA&&(this.notify("group-collapse",{target:e.target,collapse:!0}),this.keyA=!1))},t.prototype.keyActionHandler=function(e){this.isChildGrid(e)||this.isEdit&&"escape"!==e.action&&"enter"!==e.action&&"shiftEnter"!==e.action&&"tab"!==e.action&&"shiftTab"!==e.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===e.action&&(e.preventDefault(),this.print()),this.notify("key-pressed",e)))},t.prototype.setInjectedModules=function(e){this.injectedModules=e},t.prototype.updateColumnObject=function(){bt(this.columns,this.enableColumnVirtualization,this),sf.base.isBlazor()&&this.isServerRendered||yt(this.columns),this.initForeignColumn(),this.notify("auto-col",{})},t.prototype.getForeignKeyColumns=function(){return this.getColumns().filter((function(e){return e.isForeignColumn()}))},t.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:function(e){if(void 0!==zt)return zt;var t=sf.base.createElement("table",{className:"e-table",styles:"visibility: hidden"});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',e.appendChild(t);var i=t.querySelector("td").getBoundingClientRect();return e.removeChild(t),zt=Math.ceil(i.height)}(this.element)},t.prototype.refreshColumns=function(){this.setFrozenCount();var e=this.getContent().querySelector(".e-frozen-left-content"),t=this.getContent().querySelector(".e-frozen-right-content"),i=!this.frozenRightCount&&!this.frozenLeftCount;if(!(0!==this.getFrozenColumns())&&(!e&&this.frozenLeftCount||!t&&this.frozenRightCount||e&&!this.frozenLeftCount||t&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(i&&(1===this.getFrozenColumns()&&!e||0===this.getFrozenColumns()&&e))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){var r=this.contentModule.getMovableContent().querySelector(".e-table");sf.base.remove(r.querySelector("colgroup"));var n=this.getHeaderContent().querySelector(".e-movableheader").querySelector("colgroup").cloneNode(!0);if(r.insertBefore(n,r.querySelector("tbody")),"Left-Right"===this.getFrozenMode()){var s=this.contentModule.getFrozenRightContent().querySelector(".e-table");sf.base.remove(s.querySelector("colgroup"));var o=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("colgroup").cloneNode(!0);s.insertBefore(o,s.querySelector("tbody"))}}if(this.isFrozenGrid()){var a=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=a,this.contentModule.getMovableContent().scrollLeft=a}},t.prototype.excelExport=function(e,t,i,r){return sf.base.isBlazor()?(this.excelExportModule.Map(this,e,t,i,!1,r),null):this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!1,r):null},t.prototype.csvExport=function(e,t,i,r){return sf.base.isBlazor()?(this.excelExportModule.Map(this,e,t,i,!0,r),null):this.excelExportModule?this.excelExportModule.Map(this,e,t,i,!0,r):null},t.prototype.pdfExport=function(e,t,i,r){return sf.base.isBlazor()?(this.pdfExportModule.Map(this,e,t,i,r),null):this.pdfExportModule?this.pdfExportModule.Map(this,e,t,i,r):null},t.prototype.groupColumn=function(e){this.groupModule&&this.groupModule.groupColumn(e)},t.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},t.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},t.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},t.prototype.ungroupColumn=function(e){this.groupModule&&this.groupModule.ungroupColumn(e)},t.prototype.openColumnChooser=function(e,t){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,t)},t.prototype.scrollRefresh=function(){var e=this;this.on(p,(function t(){e.scrollModule.refresh(),e.off(p,t)}),this)},t.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},t.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},t.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},t.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},t.prototype.selectCells=function(e){this.selectionModule&&this.selectionModule.selectCells(e)},t.prototype.selectRowsByRange=function(e,t){this.selectionModule&&this.selectionModule.selectRowsByRange(e,t)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},t.prototype.log=function(e,t){this.loggerModule&&this.loggerModule.log(e,t)},t.prototype.applyBiggerTheme=function(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")},t.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},t.prototype.hideScroll=function(){var e=this.getContent().querySelector(".e-content"),t=this.getContent().querySelector(".e-scrollbar");if(e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto"),this.isFrozenGrid()&&t){var i=this.getContent().querySelector(".e-movablescrollbar"),r=this.getContent().querySelector(".e-movablechild");t.style.display="flex",i.offsetWidth>=r.offsetWidth&&(t.style.display="none",this.notify("frozenHeight",0))}},t.prototype.getRowIndexByPrimaryKey=function(e){var t=this.getPrimaryKeyFieldNames()[0];e="object"===i(e)?e[t]:e;for(var r=0;r<this.getRowsObject().length;r++)if(this.getRowsObject()[r].data[t]===e)return this.getRowsObject()[r].index;return-1},t.prototype.grabColumnByFieldFromAllCols=function(e){var t;this.columnModel=[],this.updateColumnModel(this.columns);for(var i=this.columnModel,r=0;r<i.length;r++)e===i[r].field&&(t=i[r]);return t},t.prototype.grabColumnByUidFromAllCols=function(e){var t;this.columnModel=[],this.updateColumnModel(this.columns);for(var i=this.columnModel,r=0;r<i.length;r++)e===i[r].uid&&(t=i[r]);return t},t.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length){var e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof sf.data.DataManager?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof sf.data.DataManager?this.dataSource.executeLocal(e):new sf.data.DataManager(this.dataSource,e).executeLocal(e)}return[]},t.prototype.getUserAgent=function(){var e=sf.base.Browser.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(e)},t.prototype.tapEvent=function(e){this.getUserAgent()&&(Mt.timer?(clearTimeout(Mt.timer),Mt.timer=null,this.dblClickHandler(e),this.notify("double-tap",e)):Mt.timer=setTimeout((function(){Mt.timer=null}),300))},t.prototype.getRowUid=function(e){return""+e+this.rowUid++},t.prototype.getMovableVirtualContent=function(){return this.getContent().querySelector(".e-movablecontent")},t.prototype.getFrozenVirtualContent=function(){return this.getContent().querySelector(".e-frozencontent")},t.prototype.getMovableVirtualHeader=function(){return this.getHeaderContent().querySelector(".e-movableheader")},t.prototype.getFrozenVirtualHeader=function(){return this.getHeaderContent().querySelector(".e-frozenheader")},t.prototype.getRowElementByUID=function(e){var t,i=[];if(this.isFrozenGrid()){var r=[].slice.call(this.getFrozenVirtualContent().querySelector("tbody").children),n=[].slice.call(this.getMovableVirtualContent().querySelector("tbody").children),s=[];if(3===this.tablesCount&&(s=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector("tbody").children)),this.frozenRows){if(i=(i=[].slice.call(this.getFrozenVirtualHeader().querySelector("tbody").children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector("tbody").children)),3===this.tablesCount){var o=this.getHeaderContent().querySelector(".e-frozen-right-header");i=i.concat([].slice.call(o.querySelector("tbody").children)).concat(s)}i=i.concat(r).concat(n)}else i=r.concat(n).concat(s)}else{var a=[].slice.call(this.getContent().querySelector("tbody").children);i=this.frozenRows?(i=[].slice.call(this.getHeaderContent().querySelector("tbody").children)).concat(a):a}for(var l=0,h=i;l<h.length;l++){var d=h[l];if(d.getAttribute("data-uid")===e){t=d;break}}return t},t.prototype.getHiddenColumns=function(){for(var e=[],t=0,i=this.columnModel;t<i.length;t++){var r=i[t];!1===r.visible&&e.push(r)}return e},t.prototype.calculatePageSizeByParentHeight=function(e){if(this.allowPaging&&(this.allowTextWrap&&"Header"==this.textWrapSettings.wrapMode||!this.allowTextWrap)){var t=0;if(-1!=e.indexOf("%")&&(e=parseInt(e)/100*this.element.clientHeight),e>this.getNoncontentHeight()+this.getRowHeight()){t=(e-this.getNoncontentHeight())/this.getRowHeight()}if(t>0)return Math.floor(t)}return 0},t.prototype.getNoncontentHeight=function(){var e=0;if(sf.base.isNullOrUndefined(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!sf.base.isNullOrUndefined(this.element.querySelector(".e-summaryrow").clientHeight))for(var t=0;t<this.element.querySelectorAll(".e-summaryrow").length;t++)e+=this.element.querySelectorAll(".e-summaryrow")[t].clientHeight;return e},t.prototype.getSummaryValues=function(e,t){return sf.data.DataUtil.aggregates[e.type.toLowerCase()](t,e.field)},t.prototype.serverExcelExport=function(e){this.exportGrid(e)},t.prototype.serverPdfExport=function(e){this.exportGrid(e)},t.prototype.exportGrid=function(e){var t=this,r=this,n=r.getDataModule().generateQuery(!0),s=(new sf.data.UrlAdaptor).processQuery(new sf.data.DataManager({url:""}),n).data,o=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));o.filterSettings.columns=JSON.parse(s).where,o.columns.forEach((function(e){var n=r.getColumnByUid(e.uid);if(n&&(e.headerText=n.headerText,sf.base.isNullOrUndefined(n.template)||(e.template="true"),e.format)){var s="object"===i(e.format)?e.format.format:e.format;e.format=Xt(s,e.type)}e.columns&&t.setHeaderText(e.columns)}));var a=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),l=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});l.value=JSON.stringify(o),a.method="POST",a.action=e,a.appendChild(l),document.body.appendChild(a),a.submit(),a.remove()},t.prototype.setHeaderText=function(e){for(var t=0;t<e.length;t++){var r=this.getColumnByUid(e[t].uid);if(e[t].headerText=r.headerText,sf.base.isNullOrUndefined(r.template)||(e[t].template="true"),e[t].format){var n=e[t],s="object"===i(n.format)?n.format.format:n.format;e[t].format=Xt(s,e[t].type)}e[t].columns&&this.setHeaderText(e[t].columns)}},t.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},t.prototype.updateRowValue=function(e,t){var i={requestType:"save",data:t};this.showSpinner(),this.notify("update-data",i),this.refresh()},t.prototype.setForeignKeyData=function(){this.dataBind();var e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},t.prototype.resetFilterDlgPosition=function(e){var t=this.getColumnHeaderByField(e);if(t){var i=t.querySelector(".e-filtermenudiv"),r=this.element.querySelector(".e-filter-popup");if(i&&r){var n=this.element.getBoundingClientRect(),s=i.getBoundingClientRect();r&&(r.style.left=(s.right-n.left).toString()+"px")}}},t.prototype.renderTemplates=function(){this.notify("reactTemplateRender",this.portals),this.renderReactTemplates()},t.prototype.batchUpdate=function(e){this.processRowChanges(e)},t.prototype.batchAsyncUpdate=function(e){this.processBulkRowChanges(e)},t.prototype.processBulkRowChanges=function(e){var t=this;if(this.dataToBeUpdated)for(var i=["addedRecords","changedRecords","deletedRecords"],r=this.getPrimaryKeyFieldNames()[0],n=0;n<i.length;n++)e[i[n]]&&_t(this,e,i[n],r);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout((function(){t.processRowChanges(t.dataToBeUpdated),t.dataToBeUpdated=null}),this.asyncTimeOut)},t.prototype.processRowChanges=function(e){var t=this,i=this.getPrimaryKeyFieldNames()[0];e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e);var r=this.getDataModule().saveChanges(e,i,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?r.then((function(e){t.setNewData()})):this.setNewData()},t.prototype.setNewData=function(){var e=this,t=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then((function(i){e.bulkRefresh(i.result,t,i.count)}))},t.prototype.deleteRowElement=function(e){var t=this.getRowElementByUID(e.uid),i=parseInt(t.getAttribute("aria-rowindex"),10);if(sf.base.remove(t),this.getFrozenColumns()){var r=this.getMovableRows()[i];sf.base.remove(r)}},t.prototype.bulkRefresh=function(e,t,i){for(var r,n=this,s=this.getRowsObject(),o=this.getPrimaryKeyFieldNames()[0],a=function(t){e.filter((function(e){return e[o]===s[t].data[o]})).length||(l.deleteRowElement(s[t]),s.splice(t,1),t--),r=t},l=this,h=0;h<s.length;h++)a(h),h=r;var d=function(i){var r;t.filter((function(t){t[o]===e[i][o]&&(t!==e[i]&&n.setRowData(e[i][o],e[i]),r=!0)})),r||c.renderRowElement(e[i],i)},c=this;for(h=0;h<e.length;h++)d(h);this.currentViewData=e;var p=[].slice.call(this.getContentTable().querySelectorAll(".e-row"));!function(e,t,i,r){for(var n=r||0,s=0;s<t.length;s++)if(t[s].isDataRow){t[s].index=n,t[s].isAltRow=!!e.enableAltRow&&n%2!=0,i[s].setAttribute("aria-rowindex",n.toString()),t[s].isAltRow?i[s].classList.add("e-altrow"):i[s].classList.remove("e-altrow");for(var o=0;o<i[s].cells.length;o++)i[s].cells[o].setAttribute("index",n.toString());n++}t.length||e.renderModule.emptyRow(!0)}(this,this.getRowsObject(),p),function(e){if(e.isFrozenGrid()){e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));var t="Left-Right"===e.getFrozenMode()?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";e.contentModule.freezeRowElements=[].slice.call(e.element.querySelectorAll(t)),"Left-Right"===e.getFrozenMode()&&(e.contentModule.frozenRightRowElements=[].slice.call(e.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else e.contentModule.rowElements=[].slice.call(e.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(g,{module:"pager",properties:{totalRecordsCount:i}})},t.prototype.renderRowElement=function(e,t){var i,r=new S(this.serviceLocator,null,this),n=new R(this).generateRows([e]),s=r.render(n[0],this.getColumns());this.addRowObject(n[0],t);var o=this.getContentTable().querySelector("tbody");if(o.querySelector(".e-emptyrow")){var a=o.querySelector(".e-emptyrow");if(a.parentNode.removeChild(a),this.getFrozenColumns()){var l=this.getContent().querySelector(".e-movablecontent").querySelector("tbody");l.firstElementChild.parentNode.removeChild(l.firstElementChild)}}this.getFrozenColumns()&&(i=function(e,t,i){t=t&&i&&i.isRowDragable()?t+1:t;for(var r=e.cloneNode(!0),n=0;n<t;n++)r.removeChild(r.children[0]);n=t;for(var s=e.childElementCount;n<s;n++)e.removeChild(e.children[e.childElementCount-1]);return r}(s,this.getFrozenColumns(),this),(this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector(".e-movableheader").querySelector("tbody"):this.getContent().querySelector(".e-movablecontent").querySelector("tbody")).appendChild(i),"auto"===this.height&&this.notify("frozenHeight",{})),o=this.frozenRows&&t<this.frozenRows?this.getHeaderContent().querySelector("tbody"):this.getContent().querySelector("tbody"),(o=this.getContent().querySelector("tbody")).appendChild(s)},t.prototype.addRowObject=function(e,t){var i=this.getFrozenColumns();if(i){var r=this.getMovableRowsObject(),n=e.clone();n.cells=n.cells.slice(i),e.cells=e.cells.slice(0,i),r.splice(t,1,n)}this.getRowsObject().splice(t,1,e)},t.prototype.getHeight=function(e){return e=Number.isInteger(e)||-1==e.indexOf("%")?Number.isInteger(e)||"auto"===this.height?this.height:parseInt(e):parseInt(e)/100*this.element.clientHeight},t.prototype.getFrozenRightContent=function(){return this.getContent().querySelector(".e-frozen-right-content")},t.prototype.getFrozenRightHeader=function(){return this.getHeaderContent().querySelector(".e-frozen-right-header")},t.prototype.getMovableHeaderTbody=function(){return this.getMovableVirtualHeader().querySelector("tbody")},t.prototype.getMovableContentTbody=function(){return this.getMovableVirtualContent().querySelector("tbody")},t.prototype.getFrozenHeaderTbody=function(){return this.getFrozenVirtualHeader().querySelector("tbody")},t.prototype.getFrozenLeftContentTbody=function(){return this.getFrozenVirtualContent().querySelector("tbody")},t.prototype.getFrozenRightHeaderTbody=function(){return this.getFrozenRightHeader().querySelector("tbody")},t.prototype.getFrozenRightContentTbody=function(){var e;return this.getFrozenRightContent()&&(e=this.getFrozenRightContent().querySelector("tbody")),e},t.prototype.showResponsiveCustomFilter=function(){this.filterModule&&this.filterModule.showCustomFilter()},t.prototype.showResponsiveCustomSort=function(){this.sortModule&&this.sortModule.showCustomFilter()},Ye([sf.base.Property()],t.prototype,"parentDetails",void 0),Ye([sf.base.Property([])],t.prototype,"columns",void 0),Ye([sf.base.Property(!0)],t.prototype,"enableAltRow",void 0),Ye([sf.base.Property(!0)],t.prototype,"enableHover",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableAutoFill",void 0),Ye([sf.base.Property(!0)],t.prototype,"allowKeyboard",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowTextWrap",void 0),Ye([sf.base.Complex({},ot)],t.prototype,"textWrapSettings",void 0),Ye([sf.base.Complex({},at)],t.prototype,"resizeSettings",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowPaging",void 0),Ye([sf.base.Complex({},Le)],t.prototype,"pageSettings",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableVirtualization",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableColumnVirtualization",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableInfiniteScrolling",void 0),Ye([sf.base.Complex({},nt)],t.prototype,"searchSettings",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowSorting",void 0),Ye([sf.base.Property("Ellipsis")],t.prototype,"clipMode",void 0),Ye([sf.base.Property(!0)],t.prototype,"allowMultiSorting",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowExcelExport",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowPdfExport",void 0),Ye([sf.base.Complex({},$e)],t.prototype,"sortSettings",void 0),Ye([sf.base.Complex({},tt)],t.prototype,"infiniteScrollSettings",void 0),Ye([sf.base.Property(!0)],t.prototype,"allowSelection",void 0),Ye([sf.base.Property(-1)],t.prototype,"selectedRowIndex",void 0),Ye([sf.base.Complex({},rt)],t.prototype,"selectionSettings",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowFiltering",void 0),Ye([sf.base.Property("Horizontal")],t.prototype,"rowRenderingMode",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableAdaptiveUI",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowReordering",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowResizing",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowRowDragAndDrop",void 0),Ye([sf.base.Complex({},st)],t.prototype,"rowDropSettings",void 0),Ye([sf.base.Complex({},it)],t.prototype,"filterSettings",void 0),Ye([sf.base.Property(!1)],t.prototype,"allowGrouping",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableImmutableMode",void 0),Ye([sf.base.Property(!1)],t.prototype,"showColumnMenu",void 0),Ye([sf.base.Complex({},lt)],t.prototype,"groupSettings",void 0),Ye([sf.base.Complex({},ht)],t.prototype,"editSettings",void 0),Ye([sf.base.Collection([],_e)],t.prototype,"aggregates",void 0),Ye([sf.base.Property(!1)],t.prototype,"showColumnChooser",void 0),Ye([sf.base.Complex({},Ne)],t.prototype,"columnChooserSettings",void 0),Ye([sf.base.Property(!1)],t.prototype,"enableHeaderFocus",void 0),Ye([sf.base.Property("auto")],t.prototype,"height",void 0),Ye([sf.base.Property("auto")],t.prototype,"width",void 0),Ye([sf.base.Property("Default")],t.prototype,"gridLines",void 0),Ye([sf.base.Property()],t.prototype,"rowTemplate",void 0),Ye([sf.base.Property()],t.prototype,"detailTemplate",void 0),Ye([sf.base.Property()],t.prototype,"childGrid",void 0),Ye([sf.base.Property()],t.prototype,"queryString",void 0),Ye([sf.base.Property("AllPages")],t.prototype,"printMode",void 0),Ye([sf.base.Property("Expanded")],t.prototype,"hierarchyPrintMode",void 0),Ye([sf.base.Property([])],t.prototype,"dataSource",void 0),Ye([sf.base.Property(null)],t.prototype,"rowHeight",void 0),Ye([sf.base.Property()],t.prototype,"query",void 0),Ye([sf.base.Property("USD")],t.prototype,"currencyCode",void 0),Ye([sf.base.Property()],t.prototype,"toolbar",void 0),Ye([sf.base.Property()],t.prototype,"contextMenuItems",void 0),Ye([sf.base.Property()],t.prototype,"columnMenuItems",void 0),Ye([sf.base.Property()],t.prototype,"toolbarTemplate",void 0),Ye([sf.base.Property()],t.prototype,"pagerTemplate",void 0),Ye([sf.base.Property(0)],t.prototype,"frozenRows",void 0),Ye([sf.base.Property(0)],t.prototype,"frozenColumns",void 0),Ye([sf.base.Property("All")],t.prototype,"columnQueryMode",void 0),Ye([sf.base.Property({})],t.prototype,"currentAction",void 0),Ye([sf.base.Property("default version")],t.prototype,"ej2StatePersistenceVersion",void 0),Ye([sf.base.Event()],t.prototype,"created",void 0),Ye([sf.base.Event()],t.prototype,"destroyed",void 0),Ye([sf.base.Event()],t.prototype,"load",void 0),Ye([sf.base.Event()],t.prototype,"rowDataBound",void 0),Ye([sf.base.Event()],t.prototype,"queryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"headerCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"actionBegin",void 0),Ye([sf.base.Event()],t.prototype,"actionComplete",void 0),Ye([sf.base.Event()],t.prototype,"actionFailure",void 0),Ye([sf.base.Event()],t.prototype,"dataBound",void 0),Ye([sf.base.Event()],t.prototype,"recordDoubleClick",void 0),Ye([sf.base.Event()],t.prototype,"recordClick",void 0),Ye([sf.base.Event()],t.prototype,"rowSelecting",void 0),Ye([sf.base.Event()],t.prototype,"rowSelected",void 0),Ye([sf.base.Event()],t.prototype,"rowDeselecting",void 0),Ye([sf.base.Event()],t.prototype,"rowDeselected",void 0),Ye([sf.base.Event()],t.prototype,"cellSelecting",void 0),Ye([sf.base.Event()],t.prototype,"cellSelected",void 0),Ye([sf.base.Event()],t.prototype,"cellDeselecting",void 0),Ye([sf.base.Event()],t.prototype,"cellDeselected",void 0),Ye([sf.base.Event()],t.prototype,"columnSelecting",void 0),Ye([sf.base.Event()],t.prototype,"columnSelected",void 0),Ye([sf.base.Event()],t.prototype,"columnDeselecting",void 0),Ye([sf.base.Event()],t.prototype,"columnDeselected",void 0),Ye([sf.base.Event()],t.prototype,"columnDragStart",void 0),Ye([sf.base.Event()],t.prototype,"columnDrag",void 0),Ye([sf.base.Event()],t.prototype,"columnDrop",void 0),Ye([sf.base.Event()],t.prototype,"printComplete",void 0),Ye([sf.base.Event()],t.prototype,"beforePrint",void 0),Ye([sf.base.Event()],t.prototype,"pdfQueryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"pdfHeaderQueryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"pdfAggregateQueryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"excelAggregateQueryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"exportDetailDataBound",void 0),Ye([sf.base.Event()],t.prototype,"excelQueryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"excelHeaderQueryCellInfo",void 0),Ye([sf.base.Event()],t.prototype,"beforeExcelExport",void 0),Ye([sf.base.Event()],t.prototype,"excelExportComplete",void 0),Ye([sf.base.Event()],t.prototype,"beforePdfExport",void 0),Ye([sf.base.Event()],t.prototype,"pdfExportComplete",void 0),Ye([sf.base.Event()],t.prototype,"rowDragStartHelper",void 0),Ye([sf.base.Event()],t.prototype,"detailDataBound",void 0),Ye([sf.base.Event()],t.prototype,"rowDragStart",void 0),Ye([sf.base.Event()],t.prototype,"rowDrag",void 0),Ye([sf.base.Event()],t.prototype,"rowDrop",void 0),Ye([sf.base.Event()],t.prototype,"toolbarClick",void 0),Ye([sf.base.Event()],t.prototype,"beforeOpenColumnChooser",void 0),Ye([sf.base.Event()],t.prototype,"batchAdd",void 0),Ye([sf.base.Event()],t.prototype,"batchDelete",void 0),Ye([sf.base.Event()],t.prototype,"batchCancel",void 0),Ye([sf.base.Event()],t.prototype,"beforeBatchAdd",void 0),Ye([sf.base.Event()],t.prototype,"beforeBatchDelete",void 0),Ye([sf.base.Event()],t.prototype,"beforeBatchSave",void 0),Ye([sf.base.Event()],t.prototype,"beginEdit",void 0),Ye([sf.base.Event()],t.prototype,"commandClick",void 0),Ye([sf.base.Event()],t.prototype,"cellEdit",void 0),Ye([sf.base.Event()],t.prototype,"cellSave",void 0),Ye([sf.base.Event()],t.prototype,"cellSaved",void 0),Ye([sf.base.Event()],t.prototype,"resizeStart",void 0),Ye([sf.base.Event()],t.prototype,"resizing",void 0),Ye([sf.base.Event()],t.prototype,"resizeStop",void 0),Ye([sf.base.Event()],t.prototype,"keyPressed",void 0),Ye([sf.base.Event()],t.prototype,"beforeDataBound",void 0),Ye([sf.base.Event()],t.prototype,"contextMenuOpen",void 0),Ye([sf.base.Event()],t.prototype,"contextMenuClick",void 0),Ye([sf.base.Event()],t.prototype,"columnMenuOpen",void 0),Ye([sf.base.Event()],t.prototype,"columnMenuClick",void 0),Ye([sf.base.Event()],t.prototype,"checkBoxChange",void 0),Ye([sf.base.Event()],t.prototype,"beforeCopy",void 0),Ye([sf.base.Event()],t.prototype,"beforePaste",void 0),Ye([sf.base.Event()],t.prototype,"beforeAutoFill",void 0),Ye([sf.base.Event()],t.prototype,"columnDataStateChange",void 0),Ye([sf.base.Event()],t.prototype,"dataStateChange",void 0),Ye([sf.base.Event()],t.prototype,"dataSourceChanged",void 0),Ye([sf.base.Event()],t.prototype,"exportGroupCaption",void 0),Ye([sf.base.Event()],t.prototype,"lazyLoadGroupExpand",void 0),Ye([sf.base.Event()],t.prototype,"lazyLoadGroupCollapse",void 0),t=n=Ye([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);var ct=function(){function e(e,t){this.isAsyncPrint=!1,this.defered=new sf.data.Deferred,this.parent=e,this.parent.isDestroyed||(this.parent.on(p,this.isContentReady(),this),this.parent.addEventListener("actionBegin",this.actionBegin.bind(this)),this.parent.on(f,this.onEmpty.bind(this)),this.parent.on("hierarchyprint",this.hierarchyPrint,this),this.scrollModule=t)}return e.prototype.isContentReady=function(){var e=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){e.defered.promise.then((function(){e.contentReady()})),e.isPrintGrid()&&e.hierarchyPrint()}:this.contentReady},e.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},e.prototype.print=function(){this.renderPrintGrid(),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight)},e.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},e.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},e.prototype.renderPrintGrid=function(){var e=this.parent,t=sf.base.createElement("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});document.body.appendChild(t);var i=new dt(Vt(e,e.hierarchyPrintMode));if(e.isFrozenGrid()&&!e.getFrozenColumns())for(var r=0;r<i.columns.length;r++)i.columns[r]=sf.base.extend({},i.columns[r]),i.columns[r].freeze=void 0;this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=e.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var n=i.getInjectedModules(),s=e.getInjectedModules();n&&n.length===s.length||i.setInjectedModules(s),e.notify("printGrid-Init",{element:t,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.appendTo(t),i.trigger=e.trigger},e.prototype.contentReady=function(){if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint)return void this.printGrid();var t={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger("beforePrint",t),t.cancel)return void sf.base.detach(e.element);this.isAsyncPrint||this.printGrid()}},e.prototype.printGrid=function(){var e=this.parent;if("auto"!==e.height){var t=this.scrollModule.getCssProperties(),i=e.element.querySelector(".e-content"),r=e.element.querySelector(".e-gridheader");i.style.height="auto",i.style.overflowY="auto",r.style[t.padding]="",r.firstElementChild.style[t.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,s=[].slice.call(e.element.querySelectorAll(".e-content"));n<s.length;n++){(h=s[n]).style.overflowX="hidden"}for(var o=e.element.querySelectorAll(".e-spin-show"),a=0,l=[].slice.call(o);a<l.length;a++){var h=l[a];sf.base.classList(h,["e-spin-hide"],["e-spin-show"])}this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj;var d={element:e.element};e.trigger("printComplete",d),this.parent.log("exporting_complete",this.getModuleName())},e.prototype.printGridElement=function(e){sf.base.classList(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&sf.base.detach(e.element),this.printWind=sf.base.print(e.element,this.printWind)},e.prototype.removeColGroup=function(e){var t=e.groupSettings.columns.length,i=e.element,r="#"+e.element.id;if(t){for(var n=sf.base.selectAll(r+"captioncell.e-groupcaption",i),s=n[t-1].getAttribute("colspan"),o=0;o<n.length;o++)n[o].setAttribute("colspan",s);var a=sf.base.selectAll("colgroup"+r+"colGroup",i),l=sf.base.selectAll(".e-content colgroup",i);this.hideColGroup(a,t),this.hideColGroup(l,t)}},e.prototype.hideColGroup=function(e,t){for(var i=0;i<e.length;i++)for(var r=0;r<t;r++)e[i].children[r].style.display="none"},e.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},e.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(p,this.contentReady.bind(this)),this.parent.removeEventListener("actionBegin",this.actionBegin.bind(this)),this.parent.off(f,this.onEmpty.bind(this)),this.parent.off("hierarchyprint",this.hierarchyPrint))},e.prototype.getModuleName=function(){return"print"},e.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"].concat(["beforePrint","printComplete","load"]),e}();function pt(e,t,i){return sf.base.isNullOrUndefined(e)||""===e?"":sf.data.DataUtil.getObject(e,t)}function ut(e,t){requestAnimationFrame((function(){try{t(null,e())}catch(e){t(e)}}))}function ft(e,t){for(var i=[],r=0,n=e.length;r<n;r++){var s=t(e[r],r);sf.base.isNullOrUndefined(s)||i.push(s)}return i}function gt(e){if(e)try{if(document.querySelectorAll(e).length)return sf.base.compile(document.querySelector(e).innerHTML.trim())}catch(t){return sf.base.compile(e)}}function mt(e,t){var i={},r=["style","class"];sf.base.extend(i,t,{}),"style"in i&&(sf.base.setStyleAttribute(e,i[r[0]]),delete i[r[0]]),"class"in i&&(sf.base.addClass([e],i[r[1]]),delete i[r[1]]),sf.base.attributes(e,i)}function yt(e,t){void 0===t&&(t=0);for(var i=0,r=e.length;i<r;i++)e[i].columns?(e[i].index=sf.base.isNullOrUndefined(e[i].index)?t:e[i].index,t++,t=yt(e[i].columns,t)):(e[i].index=sf.base.isNullOrUndefined(e[i].index)?t:e[i].index,t++);return t}function bt(e,t,i){for(var r=0,n=e.length;r<n;r++){var s=void 0;"string"==typeof e[r]?s=new c({field:e[r]},i):e[r]instanceof c?s=e[r]:e[r].columns?(e[r].columns=bt(e[r].columns,null,i),s=new c(e[r],i)):s=new c(e[r],i),s.type&&"checkbox"===s.type.toLowerCase()&&(s.allowReordering=!1),s.headerText=sf.base.isNullOrUndefined(s.headerText)?s.foreignKeyValue||s.field||"":s.headerText,s.foreignKeyField=s.foreignKeyField||s.field,s.valueAccessor=("string"==typeof s.valueAccessor?sf.base.getValue(s.valueAccessor,window):s.valueAccessor)||pt,s.width=t&&sf.base.isNullOrUndefined(s.width)?200:s.width,sf.base.isNullOrUndefined(s.visible)&&(s.visible=!0),e[r]=s}return e}function vt(e){return e instanceof sf.base.ChildProperty?sf.base.getValue("properties",e):e}function Ct(e,t,i){for(var r=e;r&&!(i?r.id===t:r.classList.contains(t));)r=r.parentElement;return r}function wt(e){for(var t=[],i=0,r=e.length;i<r;i++)e[i].hasOwnProperty("properties")?t.push(e[i].properties):t.push(e[i]);return t}function xt(e){var t={};return t.x=sf.base.isNullOrUndefined(e.clientX)?e.changedTouches[0].clientX:e.clientX,t.y=sf.base.isNullOrUndefined(e.clientY)?e.changedTouches[0].clientY:e.clientY,t}var St=0;function Rt(e){return e+St++}function It(e,t){for(var i=0,r=t.length;i<r;i++)r===t.length?e.appendChild(t[i]):e.appendChild(t[0]);return e}function Ft(e,t,i,r){if("Custom"===e){var n=i.customAggregate;return"string"==typeof n&&(n=sf.base.getValue(n,window)),n?n.call(r,t,i):""}return i.field in t||t instanceof Array?sf.data.DataUtil.aggregates[e.toLowerCase()](t,i.field):null}var zt,Mt,Tt=null;function At(){if(null!==Tt)return Tt;var e,t=document.createElement("div");return t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t),e=t.offsetWidth-t.clientWidth|0,document.body.removeChild(t),Tt=e}function kt(e,t){e=e instanceof Array?e:[e];for(var i=0;i<e.length;i++)t?e[i].classList.add("e-wrap"):e[i].classList.remove("e-wrap")}function Et(e,t,i){var r,n=e.getService("valueFormatter");if("date"===t.type||"datetime"===t.type){if(r={type:t.type,skeleton:t.format},sf.base.isBlazor()&&i){r.isServerRendered=i}"string"==typeof t.format&&"yMd"!==t.format&&(r.format=t.format)}switch(t.type){case"date":case"datetime":t.setFormatter(n.getFormatFunction(r)),t.setParser(n.getParserFunction(r));break;case"number":t.setFormatter(n.getFormatFunction({format:t.format})),t.setParser(n.getParserFunction({format:t.format}))}}function Pt(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];for(var n=0,s=e.length;n<s;n++)t?(sf.base.classList(e[n],i.slice(),[]),e[n].setAttribute("aria-selected","true")):(sf.base.classList(e[n],[],i.slice()),e[n].removeAttribute("aria-selected"))}function Dt(e,t){e.checked=t}function Lt(e,t,i){var r=sf.base.createElement("div",{className:i});return r.appendChild(t),r.setAttribute("uid",e),r}function Bt(e,t){sf.base.removeClass([e],["e-check","e-stop","e-uncheck"]),t?e.classList.add("e-check"):e.classList.add("e-uncheck")}function Ot(e,t,i,r){var n=e.foreignKeyField,s=sf.base.isNullOrUndefined(i)?pt(e.field,t):i;s=sf.base.isNullOrUndefined(s)?"":s;var o=new sf.data.Query,a=r||(e.dataSource instanceof sf.data.DataManager&&e.dataSource.dataSource.json.length?e.dataSource.dataSource.json:e.columnData);return s.getDay?o.where(qt({field:n,operator:"equal",value:s,matchCase:!1})):o.where(n,"==",s,!1),new sf.data.DataManager(a).executeLocal(o)}function Nt(e,t){var i;return t.some((function(t){return i=t,t.foreignKeyValue===e}))&&i}function qt(e,t){var i,r,n,s=sf.base.extend({},vt(e)),o=sf.base.extend({},vt(e));if(sf.base.isNullOrUndefined(e.value))return i=new sf.data.Predicate(s.field,s.operator,s.value,!1);var a=new Date(e.value);if("equal"===e.operator||"notequal"===e.operator){"datetime"===t?(r=new Date(a.setSeconds(a.getSeconds()-1)),n=new Date(a.setSeconds(a.getSeconds()+2)),e.value=new Date(a.setSeconds(n.getSeconds()-1))):(r=new Date(a.setHours(0)-1),n=new Date(a.setHours(24))),s.value=r,o.value=n,"equal"===e.operator?(s.operator="greaterthan",o.operator="lessthan"):"notequal"===e.operator&&(s.operator="lessthanorequal",o.operator="greaterthanorequal");var l=new sf.data.Predicate(s.field,s.operator,s.value,!1),h=new sf.data.Predicate(o.field,o.operator,o.value,!1);i="equal"===e.operator?l.and(h):l.or(h)}else{"string"==typeof s.value&&(s.value=new Date(s.value)),i=new sf.data.Predicate(s.field,s.operator,s.value,!1)}return e.setProperties?e.setProperties({ejpredicate:i},!0):e.ejpredicate=i,i}function Ht(e){return e.enableVirtualization&&e.groupSettings.columns.length>0&&e.isVirtualAdaptive}function Ut(e,t){if(void 0===e&&(e=""),e){for(var i=t,r=e.split("."),n=0;n<r.length&&!sf.base.isNullOrUndefined(i);n++)i=i[r[n]];return i}}function Vt(e,t){void 0===t&&(t="Expanded");var i={};if(!e)return i;for(var r=e.isFrozenGrid()&&!e.getFrozenColumns(),n=0,s=ct.printGridProp;n<s.length;n++){var o=s[n];i[o]="columns"===o?wt(r?e.getColumns():e[o]):"allowPaging"===o?"CurrentPage"===e.printMode:vt(e[o])}return e.childGrid&&"None"!==t&&(i.expandedRows=function(e,t){for(var i={},r=0,n=e.getRowsObject();r<n.length;r++){var s=n[r];if(s.isExpand&&!s.isDetailRow){var o=e.allowPaging&&"AllPages"===e.printMode?s.index+e.pageSettings.currentPage*e.pageSettings.pageSize-e.pageSettings.pageSize:s.index;i[o]={},i[o].isExpand=!0,i[o].gridModel=Vt(s.childGrid,t),i[o].gridModel.query=e.childGrid.query}}return i}(e,t)),i}function Gt(e,t,i,r){var n=e||{},s=arguments.length;r&&(s-=1);for(var o=1;o<s;o++)if(arguments[o])for(var a=arguments[o],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(jt(a)):Object.keys(a),h=0;h<l.length;h++){var d=n[l[h]],c=a[l[h]],p=void 0;r&&(sf.base.isObject(c)||Array.isArray(c))?sf.base.isObject(c)?(p=d||{},n[l[h]]=sf.base.extend({},p,c,r)):(p=d||[],n[l[h]]=sf.base.extend([],p,c,r)):n[l[h]]=c}return n}function jt(e){for(var t=[];Object.getPrototypeOf(e)&&Object.keys(Object.getPrototypeOf(e)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(e))),e=Object.getPrototypeOf(e);return t}function Kt(e,t){var i=t,r=[];if(e.columns){t++;for(var n=0;n<e.columns.length;n++)r[n]=Kt(e.columns[n],t);for(var s=0;s<r.length;s++)i<r[s]&&(i=r[s]);t=i}return t}function Wt(e){for(var t=e.getVisibleColumns(),i=0,r=0,n=0;n<t.length;n++)sf.base.isUndefined(t[n].width)?r++:-1!==t[n].width.toString().indexOf("%")&&i++;return("auto"===e.width||"string"==typeof e.width&&-1!==e.width.indexOf("%"))&&"chrome"!==sf.base.Browser.info.name&&!e.groupSettings.showGroupedColumn&&e.groupSettings.columns.length&&i&&!r}function _t(e,t,i,r){var n=e.dataToBeUpdated[i].concat(t[i]).reduce((function(e,t){return e[t[r]]=void 0===e[t[r]]?t:Object.assign(e[t[r]],t),e}),{});e.dataToBeUpdated[i]=Object.keys(n).map((function(e){return n[e]}))}function Qt(e,t,i){return"movable"===t.getFreezeTableName()?[].slice.call(e.getMovableDataRows()[i].querySelectorAll(".e-rowcell")):"frozen-right"===t.getFreezeTableName()?[].slice.call(e.getFrozenRightDataRows()[i].querySelectorAll(".e-rowcell")):[].slice.call(e.getDataRows()[i].querySelectorAll(".e-rowcell"))}function Jt(e,t,i,r){var n=e.getFrozenLeftCount(),s=e.getMovableColumnsCount();return r="movable"===t.getFreezeTableName()?r-n:"frozen-right"===t.getFreezeTableName()?r-(n+s):r,Qt(e,t,i)[r]}function Xt(e,t){var i,r=new sf.base.Internationalization;if("number"===t)try{i=r.getNumberPattern({format:e,currency:this.currency,useGrouping:!0},!0)}catch(t){i=e}else if("date"===t||"time"===t||"datetime"===t)try{i=r.getDatePattern({skeleton:e,type:t},!1)}catch(n){try{i=r.getDatePattern({format:e,type:t},!1)}catch(t){i=e}}else i=e;if("number"!==t){var n={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};i=i.replace(/G|H|c|'| a|yy|y|EEEE|E/g,(function(e){return n[e]}))}return i}!function(e){e.timer=null}(Mt||(Mt={}));var Yt,Zt=(Yt=function(e,t){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Yt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),$t=function(e,t,r,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(o<3?s(a):o>3?s(t,r,a):s(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},ei=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.hasParent=!1,r}return Zt(t,e),t.prototype.requiredModules=function(){var e=[];return this.enableExternalMessage&&e.push({member:"externalMessage",args:[this]}),this.checkpagesizes()&&e.push({member:"pagerdropdown",args:[this]}),e},t.prototype.preRender=function(){this.defaultConstants={currentPageInfo:"{0} of {1} pages",totalItemsInfo:"({0} items)",totalItemInfo:"({0} item)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager",pagerDropDown:"Items per page",pagerAllDropDown:"Items",CurrentPageInfo:"{0} of {1} pages",TotalItemsInfo:"({0} items)",FirstPageTooltip:"Go to first page",LastPageTooltip:"Go to last page",NextPageTooltip:"Go to next page",PreviousPageTooltip:"Go to previous page",NextPagerTooltip:"Go to next pager",PreviousPagerTooltip:"Go to previous pager",PagerDropDown:"Items per page",PagerAllDropDown:"Items",All:"All"},this.containerModule=new a(this),this.pagerMessageModule=new l(this)},t.prototype.render=function(){this.template?this.isReactTemplate()?(this.on("pager-refresh",this.pagerTemplate,this),this.notify("pager-refresh",{})):this.pagerTemplate():(this.initLocalization(),this.updateRTL(),this.totalRecordsCount=this.totalRecordsCount||0,this.renderFirstPrevDivForDevice(),this.containerModule.render(),this.enablePagerMessage&&this.pagerMessageModule.render(),this.renderNextLastDivForDevice(),this.checkpagesizes()&&this.pagerdropdownModule&&this.pagerdropdownModule.render(),this.addAriaLabel(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render(),this.refresh(),this.trigger("created",{currentPage:this.currentPage,totalRecordsCount:this.totalRecordsCount}))},t.prototype.getPersistData=function(){return this.addOnPersist(["currentPage","pageSize"])},t.prototype.destroy=function(){this.isReactTemplate()&&(this.off("pager-refresh",this.pagerTemplate),this.hasParent||this.destroyTemplate(["template"])),e.prototype.destroy.call(this),this.containerModule.destroy(),this.pagerMessageModule.destroy(),this.isReactTemplate()||(this.element.innerHTML="")},t.prototype.destroyTemplate=function(e,t){this.clearTemplate(e,t)},t.prototype.getModuleName=function(){return"pager"},t.prototype.onPropertyChanged=function(e,t){if(!this.isDestroyed){e.pageCount!==t.pageCount&&(this.containerModule.refreshNumericLinks(),this.containerModule.refresh());for(var i=0,r=Object.keys(e);i<r.length;i++){switch(r[i]){case"currentPage":this.checkGoToPage(e.currentPage,t.currentPage)&&this.currentPageChanged(e,t);break;case"pageSize":case"totalRecordsCount":case"customText":this.checkpagesizes()&&this.pagerdropdownModule&&(t.pageSize!==e.pageSize&&(this.currentPage=1),this.pagerdropdownModule.setDropDownValue("value",this.pageSize)),e.pageSize!==t.pageSize?(this.pageSize=e.pageSize,this.currentPageChanged(e,t)):this.refresh();break;case"pageSizes":this.checkpagesizes()&&this.pagerdropdownModule&&(this.pagerdropdownModule.destroy(),this.pagerdropdownModule.render()),this.refresh();break;case"template":this.templateFn=this.compile(this.template),this.refresh();break;case"locale":this.initLocalization(),this.refresh();break;case"enableExternalMessage":this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.render();break;case"externalMessage":this.externalMessageModule&&this.externalMessageModule.refresh();break;case"enableRtl":this.updateRTL();break;case"enablePagerMessage":this.enablePagerMessage?this.pagerMessageModule.showMessage():this.pagerMessageModule.hideMessage()}}}},t.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},t.prototype.goToPage=function(e){this.checkGoToPage(e)&&(this.currentPage=e,this.dataBind())},t.prototype.setPageSize=function(e){this.pageSize=e,this.dataBind()},t.prototype.checkpagesizes=function(){return!(!0!==this.pageSizes&&!this.pageSizes.length)},t.prototype.checkGoToPage=function(e,t){return e!==this.currentPage&&(this.previousPageNo=this.currentPage),sf.base.isNullOrUndefined(t)||(this.previousPageNo=t),this.previousPageNo!==e&&e>=1&&e<=this.totalPages},t.prototype.currentPageChanged=function(e,t){if(this.enableQueryString&&this.updateQueryString(this.currentPage),e.currentPage!==t.currentPage||e.pageSize!==t.pageSize){var i={currentPage:this.currentPage,newProp:e,oldProp:t,cancel:!1};this.trigger("click",i),i.cancel||this.refresh()}},t.prototype.pagerTemplate=function(){if(!this.isReactTemplate()||!this.hasParent){var e;this.element.classList.add("e-pagertemplate"),this.compile(this.template);var t={currentPage:this.currentPage,pageSize:this.pageSize,pageCount:this.pageCount,totalRecordsCount:this.totalRecordsCount,totalPages:this.totalPages},i=this.element.parentElement.id+"_template";this.isReactTemplate()?(this.getPagerTemplate()(t,this,"template",i,null,null,this.element),this.renderReactTemplates()):(e=sf.base.isBlazor()?this.getPagerTemplate()(t,this,"template",i,this.isStringTemplate):this.getPagerTemplate()(t),It(this.element,e))}},t.prototype.updateTotalPages=function(){this.totalPages=this.totalRecordsCount%this.pageSize==0?this.totalRecordsCount/this.pageSize:parseInt((this.totalRecordsCount/this.pageSize).toString(),10)+1},t.prototype.getPagerTemplate=function(){return this.templateFn},t.prototype.compile=function(e){if(e)try{document.querySelectorAll(e).length&&(this.templateFn=sf.base.compile(document.querySelector(e).innerHTML.trim()))}catch(t){this.templateFn=sf.base.compile(e)}},t.prototype.refresh=function(){this.template?this.isReactTemplate()?(this.updateTotalPages(),this.notify("pager-refresh",{})):(this.element.innerHTML="",this.updateTotalPages(),this.pagerTemplate()):(this.updateRTL(),this.containerModule.refresh(),this.enablePagerMessage&&this.pagerMessageModule.refresh(),this.pagerdropdownModule&&this.pagerdropdownModule.refresh(),this.enableExternalMessage&&this.externalMessageModule&&this.externalMessageModule.refresh())},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.initLocalization=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultConstants,this.locale)},t.prototype.updateQueryString=function(e){var t=this.getUpdatedURL(window.location.href,"page",e.toString());window.history.pushState({path:t},"",t)},t.prototype.getUpdatedURL=function(e,t,i){var r=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(r))return e.replace(r,"$1"+t+"="+i+"$2");var n="";return-1!==e.indexOf("#")&&(n=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+(-1!==e.indexOf("?")?"&":"?")+t+"="+i+n},t.prototype.renderFirstPrevDivForDevice=function(){this.element.appendChild(sf.base.createElement("div",{className:"e-mfirst e-icons e-icon-first",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("FirstPageTooltip"):this.getLocalizedLabel("firstPageTooltip"),tabindex:"-1"}})),this.element.appendChild(sf.base.createElement("div",{className:"e-mprev e-icons e-icon-prev",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("PreviousPageTooltip"):this.getLocalizedLabel("previousPageTooltip"),tabindex:"-1"}}))},t.prototype.renderNextLastDivForDevice=function(){this.element.appendChild(sf.base.createElement("div",{className:"e-mnext e-icons e-icon-next",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("NextPageTooltip"):this.getLocalizedLabel("nextPageTooltip"),tabindex:"-1"}})),this.element.appendChild(sf.base.createElement("div",{className:"e-mlast e-icons e-icon-last",attrs:{title:sf.base.isBlazor()?this.getLocalizedLabel("LastPageTooltip"):this.getLocalizedLabel("lastPageTooltip"),tabindex:"-1"}}))},t.prototype.addAriaLabel=function(){var e=[".e-mfirst",".e-mprev",".e-mnext",".e-mlast"];if(!sf.base.Browser.isDevice)for(var t=0;t<e.length;t++){var i=this.element.querySelector(e[t]);i.setAttribute("aria-label",i.getAttribute("title"))}},t.prototype.isReactTemplate=function(){return this.isReact&&this.template&&"string"!=typeof this.template},$t([sf.base.Property(!1)],t.prototype,"enableQueryString",void 0),$t([sf.base.Property(!1)],t.prototype,"enableExternalMessage",void 0),$t([sf.base.Property(!0)],t.prototype,"enablePagerMessage",void 0),$t([sf.base.Property(12)],t.prototype,"pageSize",void 0),$t([sf.base.Property(10)],t.prototype,"pageCount",void 0),$t([sf.base.Property(1)],t.prototype,"currentPage",void 0),$t([sf.base.Property()],t.prototype,"totalRecordsCount",void 0),$t([sf.base.Property()],t.prototype,"externalMessage",void 0),$t([sf.base.Property(!1)],t.prototype,"pageSizes",void 0),$t([sf.base.Property()],t.prototype,"template",void 0),$t([sf.base.Property("")],t.prototype,"customText",void 0),$t([sf.base.Event()],t.prototype,"click",void 0),$t([sf.base.Event()],t.prototype,"dropDownChanged",void 0),$t([sf.base.Event()],t.prototype,"created",void 0),t=$t([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),ti=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"externalMessage"},e.prototype.render=function(){this.element=sf.base.createElement("div",{className:"e-pagerexternalmsg",attrs:{"aria-label":"Pager external message"}}),this.pagerModule.element.appendChild(this.element),this.refresh()},e.prototype.refresh=function(){this.pagerModule.externalMessage&&this.pagerModule.externalMessage.toString().length?(this.showMessage(),this.element.innerHTML=this.pagerModule.externalMessage):this.hideMessage()},e.prototype.hideMessage=function(){sf.base.isNullOrUndefined(this.element)||(this.element.style.display="none")},e.prototype.showMessage=function(){this.element.style.display=""},e.prototype.destroy=function(){sf.base.remove(this.element)},e}(),ii=function(){function e(e){this.pagerModule=e}return e.prototype.getModuleName=function(){return"pagerdropdown"},e.prototype.render=function(){var e=this.pagerModule;this.pagerDropDownDiv=sf.base.createElement("div",{className:"e-pagesizes"});var t=sf.base.createElement("div",{className:"e-pagerdropdown"}),i=sf.base.createElement("div",{className:"e-pagerconstant"}),r=sf.base.createElement("input",{attrs:{type:"text",tabindex:"1"}});this.pagerCons=sf.base.createElement("span",{className:"e-constant",innerHTML:sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown")}),t.appendChild(r),i.appendChild(this.pagerCons),this.pagerDropDownDiv.appendChild(t),this.pagerDropDownDiv.appendChild(i),this.pagerModule.element.appendChild(this.pagerDropDownDiv);var n=this.pagerModule.pageSizes,s=n.length?this.convertValue(n):[this.pagerModule.getLocalizedLabel("All"),"5","10","12","20"],o=this.pagerModule.pageSize;this.dropDownListObject=new sf.dropdowns.DropDownList({dataSource:s,value:o.toString(),change:this.onChange.bind(this),cssClass:"e-alldrop"}),this.dropDownListObject.appendTo(r),n.length&&(this.dropDownListObject.element.value=this.pagerModule.pageSize.toString()),e.pageSize=o,e.dataBind(),e.trigger("dropDownChanged",{pageSize:o}),this.addEventListener()},e.prototype.onChange=function(e){this.dropDownListObject.value===this.pagerModule.getLocalizedLabel("All")?(this.pagerModule.pageSize=this.pagerModule.totalRecordsCount,this.refresh(),e.value=this.pagerModule.pageSize,document.getElementsByClassName("e-popup-open e-alldrop").length&&(document.getElementsByClassName("e-popup-open e-alldrop")[0].style.display="none")):(this.pagerModule.pageSize=parseInt(this.dropDownListObject.value,10),this.pagerCons.innerHTML!==this.pagerModule.getLocalizedLabel("pagerDropDown")&&this.refresh()),this.pagerModule.dataBind(),this.pagerModule.trigger("dropDownChanged",{pageSize:parseInt(this.dropDownListObject.value,10)})},e.prototype.refresh=function(){this.pagerCons&&(this.pagerModule.pageSize===this.pagerModule.totalRecordsCount?this.pagerCons.innerHTML=sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PagerAllDropDown"):this.pagerModule.getLocalizedLabel("pagerAllDropDown"):this.pagerCons.innerHTML=sf.base.isBlazor()?this.pagerModule.getLocalizedLabel("PagerDropDown"):this.pagerModule.getLocalizedLabel("pagerDropDown"))},e.prototype.beforeValueChange=function(e){if("number"==typeof e.newProp.value){var t=e.newProp.value.toString();e.newProp.value=t}},e.prototype.convertValue=function(e){for(var t=e,i=0;i<t.length;i++)t[i]=parseInt(t[i],10)?t[i].toString():""!==this.pagerModule.getLocalizedLabel(t[i])?this.pagerModule.getLocalizedLabel(t[i]):t[i];return t},e.prototype.setDropDownValue=function(e,t){this.dropDownListObject&&(this.dropDownListObject[e]=t)},e.prototype.addEventListener=function(){this.dropDownListObject.on("beforeValueChange",this.beforeValueChange,this)},e.prototype.removeEventListener=function(){this.dropDownListObject.off("beforeValueChange",this.beforeValueChange)},e.prototype.destroy=function(e){this.dropDownListObject&&!this.dropDownListObject.isDestroyed&&(this.removeEventListener(),this.dropDownListObject.destroy(),sf.base.remove(this.pagerDropDownDiv))},e}();return e.Pager=ei,e.ExternalMessage=ti,e.NumericContainer=a,e.PagerMessage=l,e.PagerDropDown=ii,e}({}))}});