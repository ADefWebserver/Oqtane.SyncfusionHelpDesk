!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="_content/Syncfusion.Blazor/scripts/",i(i.s="./bundles/sf-schedule.js")}({"./bundles/sf-schedule.js":function(e,t,i){"use strict";i.r(t);i("./modules/sf-schedule.js")},"./modules/sf-schedule.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Schedule=function(){"use strict";var e="e-popup-open";function t(e,t){var i,n=sf.base.createElement("div",{className:t}).cloneNode();return n.style.visibility="hidden",n.style.position="absolute",e.appendChild(n),i=n.offsetHeight,sf.base.remove(n),i}function i(e){var t=getComputedStyle(e);return window.WebKitCSSMatrix?new WebKitCSSMatrix(t.webkitTransform).m42:0}function n(e,t){var i=new Date(e.getTime());return t=(t-i.getDay()-7)%7,new Date(i.setDate(i.getDate()+t))}function s(e){return new Date(e.getFullYear(),e.getMonth())}function r(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function o(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function a(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTimezoneOffset(),i=e.getTimezoneOffset()-t;return e.getTime()-new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0).getTime()-60*i*1e3}function l(e,t){return e=new Date(""+e),new Date(e.setDate(e.getDate()+t))}function c(e,t){var i,n=(e=new Date(""+e)).getDate();return e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(n,(i=e,new Date(i.getFullYear(),i.getMonth()+1,0).getDate()))),e}function p(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s=l(s,1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}}var h=null;function u(){if(null!==h)return h;var e,t=sf.base.createElement("div");t.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(t);var i=devicePixelRatio?"1.10"===devicePixelRatio.toFixed(2)||devicePixelRatio<=1?Math.ceil(devicePixelRatio%1):Math.floor(devicePixelRatio%1):0;return e=t.offsetWidth-t.clientWidth-i|0,document.body.removeChild(t),h=e}function d(e){var t=getComputedStyle(e);return e.offsetHeight+(parseInt(t.marginTop,10)||0)+(parseInt(t.marginBottom,10)||0)}function f(e){return new Date(+e-6e4*e.getTimezoneOffset())}function g(e){var t=new Date(+e+6e4*e.getTimezoneOffset());return new Date(t.getTime()+6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))}var m,v,b,y,w,O,S,T,E,C,A,j=function(){function e(e){this.parent=e}return e.prototype.onDataReady=function(e){},e.prototype.getScrollXIndent=function(e){return e.offsetHeight-e.clientHeight>0?u():0},e.prototype.scrollTopPanel=function(e){this.getDatesHeaderElement().firstElementChild.scrollLeft=e.scrollLeft},e.prototype.scrollHeaderLabels=function(e){for(var t=this.element.querySelector(".e-date-header-wrap table"),i=t.offsetWidth/t.querySelectorAll("colgroup col").length,n=function(t,n){for(var s,r=0,o=0,a=n?e.scrollWidth-e.offsetWidth-e.scrollLeft:e.scrollLeft,l=0,c=t;l<c.length;l++){var p=c[l];if((o+=parseInt(p.getAttribute("colSpan"),10))>Math.floor(a/i)){s=p;break}r+=p.offsetWidth}sf.base.isNullOrUndefined(s)||(s.children[0].style[n?"right":"left"]=a-r+"px")},s=0,r=[".e-header-year-cell",".e-header-month-cell",".e-header-week-cell",".e-header-cells"];s<r.length;s++){var o=r[s],a=[].slice.call(this.element.querySelectorAll(o));if(a.length>0){for(var l=0,c=a;l<c.length;l++){c[l].children[0].style[this.parent.options.enableRtl?"right":"left"]=""}n(a,this.parent.options.enableRtl)}}},e.prototype.getHeaderBarHeight=function(e){void 0===e&&(e=!1);var t=2,i=this.parent.element.querySelector(".e-schedule-toolbar");if(i&&(t+=d(i)),this.parent.uiStateValues.isGroupAdaptive||e){var n=this.parent.element.querySelector(".e-schedule-resource-toolbar");n&&(t+=n.offsetHeight)}return t},e.prototype.getDatesHeaderElement=function(){return this.element.querySelector(".e-date-header-container")},e.prototype.highlightCurrentTime=function(){},e.prototype.getStartHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.getEndHour=function(){var e=this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);return sf.base.isNullOrUndefined(e)&&(e=new Date(2e3,0,0,0)),e},e.prototype.isCurrentDate=function(e){return e.setHours(0,0,0,0)===this.parent.getCurrentTime().setHours(0,0,0,0)},e.prototype.isCurrentMonth=function(e){return e.getFullYear()===this.parent.getCurrentTime().getFullYear()&&e.getMonth()===this.parent.getCurrentTime().getMonth()},e.prototype.isWorkDay=function(e,t){return void 0===t&&(t=this.parent.activeViewOptions.workDays),t.indexOf(e.getDay())>=0},e.prototype.isWorkHour=function(e,t,i,n){return!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)&&(t.setMilliseconds(0),i.setMilliseconds(0),!(a(e)<a(t)||a(e)>=a(i)||!this.isWorkDay(e,n)))},e.prototype.getRenderDates=function(e){var t=[];if("Week"===this.parent.options.currentView||"TimelineWeek"===this.parent.options.currentView)for(var i=n(o(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),s=0,r=7*this.parent.activeViewOptions.interval;s<r;s++)(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=l(i,1);else if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView){i=n(o(this.parent.options.selectedDate),this.parent.activeViewOptions.firstDayOfWeek),s=0;for(var a=7*this.parent.activeViewOptions.interval;s<a;s++)this.isWorkDay(i,e)&&t.push(i),i=l(i,1)}else{i=o(this.parent.options.selectedDate);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(i,e))&&t.push(i),i=l(i,1)}while(this.parent.activeViewOptions.interval!==t.length)}return e||(this.renderDates=t),t},e.prototype.getColElements=function(){return[].slice.call(this.element.querySelectorAll(".e-content-wrap col, .e-date-header-wrap col"))},e.prototype.setColWidth=function(e){if(this.parent.isTimelineView()){var t=this.getColElements(),i=this.element.querySelector(".e-content-table tbody"),n=Math.ceil(i.offsetWidth/(t.length/2));if(t.forEach((function(e){return sf.base.setStyleAttribute(e,{width:sf.base.formatUnit(n)})})),e.offsetHeight!==e.clientHeight){var s=this.parent.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");sf.base.isNullOrUndefined(s)||sf.base.setStyleAttribute(s,{height:sf.base.formatUnit(e.clientHeight)})}}},e.prototype.resetColWidth=function(){for(var e=0,t=this.getColElements();e<t.length;e++){t[e].style.width=""}},e.prototype.getContentAreaElement=function(){return this.element.querySelector(".e-content-wrap")},e.prototype.scrollToDate=function(e){if(-1!==["Month","TimelineMonth"].indexOf(this.parent.options.currentView)&&!sf.base.isNullOrUndefined(e)){var t=this.getContentAreaElement(),i=this.parent.getMsFromDate(new Date(o(new Date(+e)).getTime())),n=t.querySelector('.e-work-cells[data-date="'+i+'"]');"Month"===this.parent.options.currentView&&n&&(t.scrollTop=n.offsetTop),"TimelineMonth"===this.parent.options.currentView&&n&&(t.scrollLeft=n.offsetLeft)}},e.prototype.getPanel=function(){return this.element},e.prototype.retainScrollPosition=function(){if(this.parent.options.enablePersistence){var e=this.element.querySelector(".e-content-wrap");if(!sf.base.isNullOrUndefined(e)){var t=JSON.parse(window.localStorage.getItem(this.parent.element.id));if(!sf.base.isNullOrUndefined(t)){var i=t.top,n=t.left;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n)||(e.scrollTop=i,e.scrollLeft=n)}}}},e}(),D=function(){function e(e){this.allDayLevel=0,this.parent=e,this.slotCount=e.activeViewOptions.timeScale.slotCount,this.interval=e.activeViewOptions.timeScale.interval,this.element=this.parent.activeView.getPanel()}return e.prototype.renderAppointments=function(){var e=this.element.querySelector(".e-all-day-appointment-section");e&&(sf.base.EventHandler.remove(e,"click",this.rowExpandCollapse),sf.base.EventHandler.add(e,"click",this.rowExpandCollapse,this));var t=this.parent.element.querySelector(".e-work-cells");if(t){var i,n,s=this.parent.element.querySelector(".e-content-wrap"),r=[].slice.call(s.querySelectorAll(".e-appointment")),o=[].slice.call(s.querySelectorAll(".e-block-appointment")),a=r.concat(o),l=t.offsetParent;i=l.offsetHeight/l.querySelector("tbody").childElementCount,n=l.offsetWidth/l.querySelector("tbody tr").childElementCount;for(var c=0;c<a.length;c++){var p=a[c],h=this.getColumn(p),u=this.getAppWidth(this.getColumnCounts(p));p.style.top=this.getTopStartDuration(p)/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4)*i+"px",p.style.left=this.getEventLeft(u,h),p.style.width=p.classList.contains("e-block-appointment")?"100%":u,p.style.height=(this.getTopStartDuration(p)+this.getDuration(p))/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4)*i-this.getTopStartDuration(p)/(this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount*6e4)*i+"px",this.parent.eventBase.wireAppointmentEvents(p)}var d=this.parent.element.querySelector(".e-all-day-row").offsetTop,f=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),g=f.length>0?f[0].offsetHeight:0,m=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment-wrapper"));this.setAllDayRowHeight(0);for(var v=0;v<m.length;v++){var b=m[v].children;for(c=0;c<b.length;c++){var y=0;if((p=b[c]).classList.contains("e-row-count-wrapper"))p.style.top=d+4*g+"px",y=4*g+4;else{var w=this.getRowCount(p),O=this.getTotalLength(p);this.allDayLevel=this.allDayLevel<w?w:this.allDayLevel,p.style.top=d+w*g+"px",p.style.width=n*O-15+"px",y=4+(!this.parent.uiStateValues.expand&&this.allDayLevel>3?4*g:(this.allDayLevel+1)*g),this.parent.eventBase.wireAppointmentEvents(p)}this.setAllDayRowHeight(y)}}var S=[].slice.call(this.element.querySelectorAll(".e-more-indicator"));for(c=0;c<S.length;c++)sf.base.EventHandler.clearEvents(S[c]),sf.base.EventHandler.add(S[c],"click",this.rowExpandCollapse,this);this.parent.setDimensions()}},e.prototype.getAppWidth=function(e){var t=(("Day"===this.parent.options.currentView?97:94)-e)/e;return(t<0?0:t)+"%"},e.prototype.getEventLeft=function(e,t){var i=(parseFloat(e)+1)*t;return(i>99?99:i)+"%"},e.prototype.setAllDayRowHeight=function(e){for(var t=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells")),i=0;i<t.length;i++)t[i].style.height=e/12+"em"},e.prototype.getRowCount=function(e){return parseInt(e.getAttribute("data-row-index"),10)},e.prototype.getTotalLength=function(e){return parseInt(e.getAttribute("data-total-length"),10)},e.prototype.getDuration=function(e){return parseInt(e.getAttribute("data-duration"),10)},e.prototype.getTopStartDuration=function(e){return parseInt(e.getAttribute("data-top-start-duration"),10)},e.prototype.getColumnCounts=function(e){return parseInt(e.getAttribute("data-columns-count"),10)},e.prototype.getColumn=function(e){return parseInt(e.getAttribute("data-columns"),10)},e.prototype.rowExpandCollapse=function(){var e=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand=e.classList.contains("e-appointment-expand");var t,i=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),n=i.length>0?i[0].offsetHeight:0;this.parent.uiStateValues.expand?(e.setAttribute("title","Collapse-all-day-section"),e.setAttribute("aria-label","Collapse section"),t=(this.allDayLevel+1)*n+4):(e.setAttribute("title","Expand-all-day-section"),e.setAttribute("aria-label","Expand section"),t=4*n+4),this.setAllDayRowHeight(t),this.addOrRemoveClass(),this.parent.setDimensions()},e.prototype.addOrRemoveClass=function(){var e=this;[].slice.call(this.parent.element.querySelectorAll(".e-more-event")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?(sf.base.addClass([t],"e-appointment-hide"),t.setAttribute("tabindex","-1")):(sf.base.removeClass([t],"e-appointment-hide"),t.setAttribute("tabindex","0"))}));var t=this.element.querySelector(".e-all-day-appointment-section");this.parent.uiStateValues.expand?(sf.base.removeClass([t],"e-appointment-expand"),sf.base.addClass([t],"e-appointment-collapse")):(sf.base.removeClass([t],"e-appointment-collapse"),sf.base.addClass([t],"e-appointment-expand")),this.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable"),[].slice.call(this.element.querySelectorAll(".e-row-count-wrapper")).filter((function(t){!e.parent.uiStateValues.expand&&e.allDayLevel>2?sf.base.removeClass([t],"e-disable"):sf.base.addClass([t],"e-disable")}))},e.prototype.initializeValues=function(){this.cellHeight=parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2))},e.prototype.getHeight=function(e,t){var i=(t.getTime()-e.getTime())/6e4*(this.cellHeight*this.slotCount)/this.interval;return i=i<=0?this.cellHeight:i},e.prototype.renderNormalEvents=function(e,t,i,n){var s,r,o=e,a=o.startTime,l=o.endTime,c=this.getHeight(a,l);s=this.getTopValue(a,t),r=this.parent.inlineModule.createInlineAppointmentElement(),sf.base.setStyleAttribute(r,{width:this.getEventWidth(),height:c+"px",top:s+"px"});var p=this.parent.activeViewOptions.group.byDate?t+i:n;[].slice.call(this.parent.element.querySelectorAll(".e-appointment-wrapper"))[p].appendChild(r)},e.prototype.getEventWidth=function(){var e="Day"===this.parent.options.currentView?97:94;return(e<0?0:e)+"%"},e.prototype.getTopValue=function(e,t){var i=o(this.parent.activeView.renderDates[t]),n=new Date;n.setHours(0,0,0,0);var s=this.parent.eventBase.getStEdHours(i,n,l(new Date(n.getTime()),1)).startHour;return(60*(e.getHours()-s.getHours())+(e.getMinutes()-s.getMinutes()))*this.cellHeight*this.slotCount/this.interval},e.prototype.renderAllDayEvents=function(e,t,i,n){var s,r=e,o=this.parent.element.querySelector(".e-all-day-cells:first-child").offsetTop,a=1;r.Index=0,this.allDayLevel=this.allDayLevel<0?0:this.allDayLevel,s=100-("Day"===this.parent.options.currentView?4:7);var l,c=this.parent.activeViewOptions.group.byDate?t+i:n,p=this.parent.element.querySelector(".e-all-day-appointment-wrapper:nth-child("+(c+1)+")");l=this.parent.inlineModule.createInlineAppointmentElement(),p.appendChild(l),a+=o+1,sf.base.setStyleAttribute(l,{width:s+"%",top:sf.base.formatUnit(a)}),sf.base.addClass([l],"e-all-day-appointment")},e}(),H=function(){function t(e){this.slots=[],this.isDoubleTapped=!1,this.parent=e}return t.prototype.getSelectedEventElements=function(e){if(this.removeSelectedAppointmentClass(),this.parent.selectedElements.length<=0)this.parent.selectedElements.push(e);else if(this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")===e.getAttribute("data-guid")})).length<=0)for(var t='div[data-guid="'+e.getAttribute("data-guid")+'"]',i=0,n=[].slice.call(this.parent.element.querySelectorAll(t));i<n.length;i++){var s=n[i];this.parent.selectedElements.push(s)}else{var r=this.parent.selectedElements.filter((function(t){return t.getAttribute("data-guid")!==e.getAttribute("data-guid")}));this.parent.selectedElements=r}return e&&this.parent.selectedElements.length>0&&this.addSelectedAppointments(this.parent.selectedElements),this.parent.selectedElements},t.prototype.getSelectedEvents=function(){var e=[],t=[];return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border")).filter((function(i){0===e.filter((function(e){return e===i.getAttribute("data-guid")})).length&&e.push(i.getAttribute("data-guid")),t.push(i)})),{element:t.length>1?t:t[0],guid:e}},t.prototype.removeSelectedAppointmentClass=function(){for(var e=this.getSelectedAppointments(),t=0,i=e;t<i.length;t++){i[t].setAttribute("aria-selected","false")}sf.base.removeClass(e,"e-appointment-border"),"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||sf.base.removeClass(e,"e-active-appointment-agenda")},t.prototype.addSelectedAppointments=function(e){for(var t=0,i=e;t<i.length;t++){i[t].setAttribute("aria-selected","true")}"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass(),sf.base.addClass(e,"e-appointment-border")},t.prototype.getSelectedAppointments=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border,.e-appointment:focus"))},t.prototype.focusElement=function(){var e=document.querySelector("#"+this.parent.element.id+"_dialog_wrapper");if(!e||!e.classList.contains("e-popup-open")){var t=this.parent.getSelectedElements();if(t.length>0){if(this.parent.keyboardInteractionModule){var i=!sf.base.isNullOrUndefined(this.parent.activeCellsData)&&this.parent.activeCellsData.element||t[t.length-1];this.parent.keyboardInteractionModule.selectCells(i instanceof Array,i)}}else{var n=this.getSelectedAppointments();n.length>0&&n[n.length-1].focus()}}},t.prototype.splitEvent=function(e,t){var i=o(new Date(e.startTime+"")).getTime(),n=o(new Date(e.endTime+"")).getTime();if(a(e.endTime)<=0){var s=l(o(new Date(e.endTime+"")),-1).getTime();n=i>s?i:s}var r=i,c=n,p=[];if(i!==n){i<t[0].getTime()&&(i=t[0].getTime()),n>t[t.length-1].getTime()&&(n=t[t.length-1].getTime());for(var h=i,u=0;u<this.slots.length;u++){var d=this.slots[u];if("WorkWeek"===this.parent.options.currentView||"TimelineWorkWeek"===this.parent.options.currentView||this.parent.activeViewOptions.group.byDate||this.parent.activeViewOptions.showWeekend){for(var f=[],g=0,m=d;g<m.length;g++){var v=m[g];f.push(new Date(v))}var b=this.getRenderedDates(f);if(!sf.base.isNullOrUndefined(b)&&b.length>0){d=[];for(var y=0,w=b;y<w.length;y++){var O=w[y];d.push(O.getTime())}}}var S=d[0];if((h=h<=S&&n>=S?S:h)>n||S>n)break;if(!this.parent.activeViewOptions.group.byDate&&this.parent.activeViewOptions.showWeekend&&"WorkWeek"!==this.parent.options.currentView&&"TimelineWorkWeek"!==this.parent.options.currentView){var T=d.indexOf(h);if(-1!==T){var E=d.indexOf(n),C=-1!==E,A=(E=C?E:d.length-1)-T+1,j=d[T]!==r,D=d[E]!==c;if(p.push(this.cloneEventObject(e,d[T],d[E],A,j,D)),C)break}}else if(this.dateInRange(h,d[0],d[d.length-1])){for(var H=[],x=0;x<d.length;x++)this.dateInRange(d[x],r,c)&&H.push(d[x]);if(H.length>0)if(this.parent.activeViewOptions.group.byDate)for(var V=0,k=H;V<k.length;V++){var M=k[V];p.push(this.cloneEventObject(e,M,M,1,M!==r,M!==c))}else{j=H[0]!==r,D=H[H.length-1]!==c;p.push(this.cloneEventObject(e,H[0],H[H.length-1],H.length,j,D))}}}}else p.push(this.cloneEventObject(e,i,n,1,!1,!1));return p},t.prototype.dateInRange=function(e,t,i){return t<=e&&e<=i},t.prototype.cloneEventObject=function(e,t,i,n,s,r){var o=sf.base.extend({},e,null,!0),a={count:n,isLeft:s,isRight:r};return a.startTime=e.startTime,a.endTime=e.endTime,o.data=a,o.startTime=new Date(t),o.endTime=new Date(i),o},t.prototype.getRenderedDates=function(e){var t,i=0,n=e.length;if(e[0]<this.parent.options.minDate&&e[e.length-1]>this.parent.options.maxDate){for(var s=0;s<e.length;s++)e[s].getTime()===this.parent.options.minDate.getTime()&&(i=s),e[s].getTime()===this.parent.options.maxDate.getTime()&&(n=s);t=e.filter((function(t){return t>=e[i]&&t<=e[n]}))}return t},t.prototype.isValidEvent=function(e,t,i,n){var s=i.getTime()>n.startHour.getTime()&&t.getTime()<n.endHour.getTime(),r=n.startHour.getTime()<=t.getTime()&&e.startTime.getTime()>=n.startHour.getTime()&&e.endTime.getTime()<n.endHour.getTime()&&t.getTime()===i.getTime();return s||r},t.prototype.getStEdHours=function(e,t,i){var n=new Date(e.getTime());n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n.setSeconds(t.getSeconds());var s=new Date(e.getTime());return 0===i.getHours()?s.setDate(s.getDate()+1):(s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),s.setSeconds(i.getSeconds())),{startHour:n,endHour:s}},t.prototype.appointmentBorderRemove=function(t){var i=t.target;sf.base.closest(i,".e-appointment")?"MonthAgenda"!==this.parent.options.currentView&&this.parent.removeSelectedClass():sf.base.closest(i,"."+e)||this.removeSelectedAppointmentClass()},t.prototype.wireAppointmentEvents=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n="true"===e.getAttribute("aria-readonly");sf.base.EventHandler.clearEvents(e),("TimelineYear"!==this.parent.options.currentView||i)&&(sf.base.EventHandler.add(e,"click",this.eventClick,this),this.parent.isAdaptive||sf.base.EventHandler.add(e,"touchstart",this.eventTouchClick,this),this.parent.isAdaptive||this.parent.activeViewOptions.readonly||n||sf.base.EventHandler.add(e,"dblclick",this.eventDoubleClick,this)),this.parent.activeViewOptions.readonly||n||t||(this.parent.resizeModule&&this.parent.resizeModule.wireResizeEvent(e),this.parent.dragAndDropModule&&this.parent.dragAndDropModule.wireDragEvent(e))},t.prototype.eventTouchClick=function(e){var t=this;setTimeout((function(){return t.isDoubleTapped=!1}),250),e.preventDefault(),this.isDoubleTapped?this.eventDoubleClick(e):this.isDoubleTapped||(this.isDoubleTapped=!0,this.eventClick(e))},t.prototype.eventClick=function(e){var t=e.target;if(!(t.classList.contains("e-drag-clone")||t.classList.contains("e-resize-clone")||t.classList.contains("e-block-appointment"))){if(this.parent.isAdaptive&&this.parent.isTapHold){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border"));var i=sf.base.closest(e.target,".e-appointment"),n=this.getSelectedEventElements(i);if(n.length>0){var s=1===n.length?n[0].querySelector(".e-subject").innerHTML:"("+n.length+")&nbsp;selected item(s)";this.parent.quickPopup.element.querySelector(".e-subject").innerHTML=s,n.length>1?sf.base.addClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden"):sf.base.removeClass([this.parent.quickPopup.element.querySelector(".e-edit-icon")],"e-hidden")}else this.parent.selectedElements=[],this.parent.onQuickPopupClose()}if(e.ctrlKey&&1===e.which&&this.parent.keyboardInteractionModule){this.parent.selectedElements=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-border"));var r=sf.base.closest(e.target,".e-appointment");this.getSelectedEventElements(r);var o=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",o,this.getMouseEvent(e),!0)}else{this.removeSelectedAppointmentClass();o=this.activeEventData(e,!0);this.parent.dotNetRef.invokeMethodAsync("TriggerEventClick",o,this.getMouseEvent(e),!1)}}},t.prototype.eventDoubleClick=function(e){if("touchstart"===e.type&&this.activeEventData(e,!0),this.removeSelectedAppointmentClass(),!this.parent.activeEventData.element.classList.contains("e-inline-appointment")&&!this.parent.activeEventData.element.querySelector(".e-inline-subject")){var t=this.activeEventData(e,!1);this.parent.dotNetRef.invokeMethodAsync("TriggerEventDoubleClick",t,this.getMouseEvent(e))}},t.prototype.getMouseEvent=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},t.prototype.activeEventData=function(e,t){var i=sf.base.closest(e.target,".e-appointment"),n=i.getAttribute("data-guid");return t&&(this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+n+'"]'))),i.focus()),this.parent.activeEventData={element:i,guid:[n]},n},t}(),x=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),V=function(e){function i(t){var i=e.call(this,t)||this;return i.renderedEvents=[],i.allDayLevel=0,i.moreIndicatorHeight=19,i.monthHeaderHeight=0,i.maxHeight=i.parent.options.enableMaxHeight&&!i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight,i.withIndicator=i.parent.options.enableMaxHeight&&i.parent.options.enableIndicator&&!i.parent.options.rowAutoHeight,i.maxOrIndicator=i.maxHeight||i.withIndicator,i.moreIndicatorHeight=i.parent.options.rowAutoHeight&&i.parent.options.ignoreWhitespace?0:i.moreIndicatorHeight,i.eventTop="Month"===i.parent.options.currentView?10:0,i}return x(i,e),i.prototype.renderAppointments=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var n=this.parent.element.querySelector(".e-content-wrap");this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table");for(var s=0;s<e.length;s++)this.removedPositionedStyles(e[s]);var r=i.offsetParent;this.cellHeight=r.offsetHeight/r.querySelector("tbody").childElementCount,this.cellWidth=r.offsetWidth/r.querySelector("tbody tr").childElementCount;var o=t(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates;for(s=0;s<e.length;s++){var a,l,c=e[s],p=this.getStartTime(c),h=this.getOverLapCount(c),u=this.getDataCount(c)*this.cellWidth-5,d=this.getGroupIndex(c),f=this.getCellTd(d,p),g=sf.base.closest(f,"tr");this.monthHeaderHeight="Month"===this.parent.options.currentView?f.firstElementChild.offsetHeight:0;var m=this.monthHeaderHeight+(h+1)*o+this.moreIndicatorHeight;this.parent.options.rowAutoHeight&&this.updateCellHeight(g.firstElementChild,m);var v=f.offsetTop,b=this.monthHeaderHeight+(c.classList.contains("e-block-appointment")?v:v+h*o)+this.eventTop;a=this.parent.options.enableRtl?0:f.offsetLeft,l=this.parent.options.enableRtl?f.parentElement.offsetWidth-f.offsetLeft-this.cellWidth:0,c.classList.contains("e-more-indicator")?this.updateMoreIndicator(c,l,a,v):c.classList.contains("e-block-indicator")?this.updateBlockIndicator(c,l,a,f):(sf.base.setStyleAttribute(c,{width:u+"px",left:a+"px",right:l+"px",top:b+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(c,f),c.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(c,{height:f.offsetHeight-(b-f.offsetTop)+"px"}),c.classList.contains("e-appointment")&&this.parent.eventBase.wireAppointmentEvents(c))}this.updateRowHeight(o)}},i.prototype.removedPositionedStyles=function(e){e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.removeProperty("left"),e.style.removeProperty("right"),e.style.removeProperty("top"),e.style.removeProperty("display")},i.prototype.updateMoreIndicator=function(e,t,i,n){var s=this.cellHeight-this.moreIndicatorHeight;sf.base.setStyleAttribute(e,{top:n+s+"px",width:this.cellWidth-2+"px",left:i+"px",right:t+"px"})},i.prototype.updateBlockIndicator=function(e,t,i,n){this.parent.options.enableRtl?e.style.right=t+this.cellWidth-24+"px":e.style.left=i+this.cellWidth-24+"px",e.style.top=n.offsetTop+n.firstElementChild.offsetTop+22+"px",e.style.position="absolute"},i.prototype.setMaxEventHeight=function(e,t){var i="Month"===this.parent.options.currentView?d(t.querySelector(".e-date-header")):0,n=t.offsetHeight-i-(this.maxHeight?0:this.moreIndicatorHeight);sf.base.setStyleAttribute(e,{height:n+"px","align-items":"center"})},i.prototype.getCellTd=function(e,t){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"][data-date="'+t.getTime()+'"]'):this.parent.element.querySelector('.e-content-wrap tbody td[data-date="'+t.getTime()+'"]')},i.prototype.getGroupIndex=function(e){var t=parseInt(e.getAttribute("data-group-index"),10);return t||0},i.prototype.getOverLapCount=function(e){return parseInt(e.getAttribute("data-index"),10)},i.prototype.getTotalLength=function(e){return parseInt(e.getAttribute("data-total-length"),10)},i.prototype.getRowCount=function(e){return parseInt(e.getAttribute("data-row-index"),10)},i.prototype.getStartTime=function(e){return new Date(parseInt(e.getAttribute("data-start"),10))},i.prototype.getEndTime=function(e){return new Date(parseInt(e.getAttribute("data-end"),10))},i.prototype.getDataCount=function(e){return parseInt(e.getAttribute("data-total-length"),10)},i.prototype.updateRowHeight=function(e){if(this.parent.options.rowAutoHeight){this.updateBlockElements(),this.updateNormalEventElements(e),this.updateBlockIndicatorEle();var t={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.onScrollUiUpdate(t)}},i.prototype.updateBlockIndicatorEle=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),r=this.getCellTd(s,n),o=this.parent.options.enableRtl?0:r.offsetLeft,a=this.parent.options.enableRtl?r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:0;this.updateBlockIndicator(i,a,o,r)}},i.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=this.getStartTime(i),s=this.getGroupIndex(i),r=this.getCellTd(s,n),o=r.offsetHeight-this.monthHeaderHeight-1,a=Math.round(i.offsetWidth/r.offsetWidth);a=r.offsetWidth*a;var l=this.parent.options.enableRtl?0:r.offsetLeft,c=this.parent.options.enableRtl?r.parentElement.offsetWidth-r.offsetLeft-this.cellWidth:0,p=r.offsetTop+this.monthHeaderHeight+this.eventTop;sf.base.setStyleAttribute(i,{width:a+"px",left:l+"px",right:c+"px",height:o+"px",top:p+"px"})}},i.prototype.updateNormalEventElements=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));t<i.length;t++){var n=i[t],s=this.getStartTime(n),r=this.getGroupIndex(n),o=this.getCellTd(r,s),a=this.getOverLapCount(n),l=this.parent.options.enableRtl?0:o.offsetLeft,c=this.parent.options.enableRtl?o.parentElement.offsetWidth-o.offsetLeft-this.cellWidth:0,p=this.monthHeaderHeight+o.offsetTop+a*e+this.eventTop;sf.base.setStyleAttribute(n,{left:l+"px",right:c+"px",top:p+"px"})}},i.prototype.updateCellHeight=function(e,t){t>e.offsetHeight&&sf.base.setStyleAttribute(e,{height:t+"px"})},i.prototype.getSlotDates=function(e){this.slots=[];for(var t=this.dateRender.map((function(e){return+e})),i=this.parent.activeViewOptions.showWeekend?7:e.length;t.length>0;)this.slots.push(t.splice(0,i))},i.prototype.renderEvents=function(e,t,i){var n,s=e.startTime,r=this.parent.getIndexOfDate(this.dateRender,o(s)),a=e.data.count*this.cellWidth-5,l=this.workCells[r];n=this.parent.inlineModule.createInlineAppointmentElement(),sf.base.setStyleAttribute(n,{width:a+"px"}),this.renderEventElement(n,l)},i.prototype.renderEventElement=function(e,t){var i=sf.base.createElement("div",{className:"e-appointment-wrapper"});i.appendChild(e),t.appendChild(i)},i.prototype.removeHeightProperty=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll("."+e+" tbody tr"));t<i.length;t++){i[t].firstElementChild.style.height=""}},i}(H),k=(v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),M=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i.baseCssClass="e-vertical-view",i}return k(t,e),t.prototype.onDataReady=function(){this.parent.activeViewOptions.timeScale.enable?new D(this.parent).renderAppointments():new V(this.parent).renderAppointments()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement();var t=e.target;this.parent.onVirtualScroll(),this.scrollLeftPanel(t),this.scrollTopPanel(t),this.parent.isAdaptive||(this.parent.uiStateValues.top=t.scrollTop),this.parent.uiStateValues.left=t.scrollLeft,sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.hide(),this.parent.setPersistence()},t.prototype.onApaptiveMove=function(e){this.parent.uiStateValues.action&&e.preventDefault()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();sf.base.isNullOrUndefined(t)||(t.scrollTop=e.scrollTop)},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getLeftPanelElement(),n=this.getContentAreaElement(),s=this.getDatesHeaderElement(),r=this.parent.element.offsetHeight-t-s.offsetHeight;this.setColWidth(n),this.setContentHeight(n,i,r);var o=u();s.firstElementChild.style[e.cssProperties.rtlBorder]="",s.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(s.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",s.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(s.firstElementChild.style[e.cssProperties.border]="",s.style[e.cssProperties.padding]=""),e.isPreventScrollUpdate||(this.parent.uiStateValues.isInitial?(this.scrollToWorkHour(),this.parent.uiStateValues.isInitial=!1):(i&&(i.scrollTop=this.parent.uiStateValues.top),n.scrollTop=this.parent.uiStateValues.top,n.scrollLeft=this.parent.uiStateValues.left)),this.parent.activeViewOptions.timeScale.enable&&this.highlightCurrentTime(),this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){sf.base.isNullOrUndefined(t)||(t.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height="auto"===this.parent.options.height?"auto":sf.base.formatUnit(i)},t.prototype.scrollToWorkHour=function(){if(this.parent.options.workHours.highlight){var e=this.element.querySelector(".e-work-hours");e&&(this.getContentAreaElement().scrollTop=e.offsetTop,this.parent.uiStateValues.top=e.offsetTop,this.parent.uiStateValues.left=0)}},t.prototype.scrollToHour=function(e,t){var i=this.parent.getStartEndTime(e);!sf.base.isNullOrUndefined(i)&&sf.base.isNullOrUndefined(t)&&(this.getContentAreaElement().scrollTop=this.getTopFromDateTime(i))},t.prototype.isWorkHourRange=function(e){return this.getStartHour().getTime()<=e.getTime()&&this.getEndHour().getTime()>=e.getTime()},t.prototype.highlightCurrentTime=function(){var e=this;if(!(this.parent.activeViewOptions.headerRows&&this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows.slice(-1)[0].option)){var t=[].slice.call(this.element.querySelectorAll(".e-current-day"));t.length>0&&sf.base.removeClass(t,"e-current-day");for(var i='.e-date-header[data-date="'+f(new Date((new Date).setHours(0,0,0,0))).getTime().toString()+'"]',n=0,s=t=[].slice.call(this.element.querySelectorAll(i));n<s.length;n++){var r=s[n];sf.base.addClass([r],"e-current-day")}if(this.parent.options.showTimeIndicator&&this.isWorkHourRange(this.parent.getCurrentTime())){var o=this.getCurrentTimeIndicatorIndex(),a=this.getLeftPanelElement();if(sf.base.isNullOrUndefined(a)||sf.base.removeClass(a.querySelectorAll(".e-hide-childs"),"e-hide-childs"),o.length>0)[].slice.call(this.element.querySelectorAll(".e-work-cells")).length>0&&this.changeCurrentTimePosition(),sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)&&(this.currentTimeIndicatorTimer=window.setInterval((function(){e.changeCurrentTimePosition()}),6e4));else this.clearCurrentTimeIndicatorTimer()}else this.clearCurrentTimeIndicatorTimer()}},t.prototype.getCurrentTimeIndicatorIndex=function(){for(var e=[],t=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),i=f(new Date((new Date).setHours(0,0,0,0))).getTime().toString(),n=0,s=t.length;n<s;n++)t[n].getAttribute("data-date")===i&&e.push(n);return e},t.prototype.clearCurrentTimeIndicatorTimer=function(){sf.base.isNullOrUndefined(this.currentTimeIndicatorTimer)||(window.clearInterval(this.currentTimeIndicatorTimer),this.currentTimeIndicatorTimer=null,this.removeCurrentTimeIndicatorElements())},t.prototype.removeCurrentTimeIndicatorElements=function(){for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-previous-timeline,.e-current-timeline,.e-current-time"));e<t.length;e++){var i=t[e];sf.base.remove(i)}},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.parent.getContentTable().rows[0],i=this.getTopFromDateTime(this.parent.getCurrentTime()),n=sf.base.formatUnit(i),s=Math.floor(i/t.cells[0].offsetHeight);if(!sf.base.isNullOrUndefined(s)&&!isNaN(s)){for(var r=[].slice.call(this.element.querySelectorAll(".e-timeline-wrapper")),o=0,a=e[0];o<a;o++)r[o].appendChild(sf.base.createElement("div",{className:"e-previous-timeline",styles:"top:"+n}));for(var l=0,c=e;l<c.length;l++){r[c[l]].appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:"top:"+n}))}var p=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time",styles:"top:"+n}),h=this.getLeftPanelElement();if(!sf.base.isNullOrUndefined(h)){var u=[].slice.call(h.querySelectorAll("tr"));s<=u.length&&(sf.base.removeClass(h.querySelectorAll(".e-hide-childs"),"e-hide-childs"),sf.base.addClass([u[s].lastElementChild],"e-hide-childs"),sf.base.prepend([p],h),p.style.top=sf.base.formatUnit(p.offsetTop-p.offsetHeight/2))}}}},t.prototype.getTopFromDateTime=function(e){var t=this.getStartHour();return(60*(e.getHours()-t.getHours())+(e.getMinutes()-t.getMinutes()))*this.getWorkCellHeight()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellHeight=function(){return this.element.querySelector(".e-work-cells").offsetHeight},t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap");for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireMouseEvents(i)}for(var n=0,s=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-all-day-cells"));n<s.length;n++){i=s[n];sf.base.EventHandler.clearEvents(i),this.wireCellEvents(i)}this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var r=this.element.querySelector(".e-content-wrap"),o=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(o),this.wireCellEvents(o),sf.base.EventHandler.clearEvents(r),sf.base.EventHandler.add(r,"scroll",this.onContentScroll,this),sf.base.EventHandler.add(r,sf.base.Browser.touchMoveEvent,this.onApaptiveMove,this),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),this.wireMouseEvents(e)},t.prototype.wireMouseEvents=function(e){sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-time-cells-wrap")},t.prototype.getEndDateFromStartDate=function(e){var t=6e4*this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,i=new Date(e.getTime());return i.setMilliseconds(i.getMilliseconds()+t),i},t.prototype.destroy=function(){if(this.clearCurrentTimeIndicatorTimer(),this.element){var e=this.getContentAreaElement();e&&sf.base.EventHandler.remove(e,"scroll",this.onContentScroll),this.element=null}},t}(j),q=(b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),P=function(e){function i(t,i){var n=e.call(this,t)||this;n.startHour=n.parent.activeView.getStartHour(),n.endHour=n.parent.activeView.getEndHour(),n.slotCount=n.parent.activeViewOptions.timeScale.slotCount,n.interval=n.parent.activeViewOptions.timeScale.interval,n.day=0,n.rowIndex=0,n.renderType=i;var s=[].slice.call(n.parent.element.querySelectorAll(".e-content-table tbody tr"));return n.dayLength=0===s.length?0:s[0].children.length,n.content=n.parent.element.querySelector(".e-content-table"),n}return q(i,e),i.prototype.getSlotDates=function(){this.slots=[],this.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.headerRows.length>0&&"Hour"!==this.parent.activeViewOptions.headerRows[this.parent.activeViewOptions.headerRows.length-1].option?(this.renderType="day",this.cellWidth=this.content.offsetWidth/this.dateRender.length,this.slotsPerDay=1):this.slotsPerDay=this.dayLength/this.dateRender.length},i.prototype.renderAppointments=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-appointment, .e-more-indicator, .e-block-appointment, .e-block-indicator")),i=this.parent.element.querySelector(".e-work-cells");if(i){var n=this.parent.element.querySelector(".e-content-wrap");this.parent.options.rowAutoHeight&&(this.parent.uiStateValues.top=n.scrollTop,this.parent.uiStateValues.left=n.scrollLeft),this.removeHeightProperty("e-content-table"),this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&this.removeHeightProperty("e-resource-column-table");var s=i.offsetParent;this.cellHeight=s.offsetHeight/s.querySelector("tbody").childElementCount,this.cellWidth=s.offsetWidth/s.querySelector("tbody tr").childElementCount;var r=t(this.parent.element.querySelector(".e-current-panel"),"e-appointment");this.dateRender=this.parent.activeView.renderDates,this.getSlotDates();for(var a=0;a<e.length;a++){var l=e[a];this.removedPositionedStyles(l);var c=g(this.getStartTime(l)),p=g(this.getEndTime(l));if(this.day=this.parent.getIndexOfDate(this.dateRender,o(new Date(c.getTime()))),this.day>=0){var h=this.getOverLapCount(l),u=this.getDataCount(l),d="true"===this.isAllDayData(l),f=this.getEventWidth(c,p,d,u);f="day"===this.renderType?f-2:f;var m,v,b=this.getPosition(c,p,!l.classList.contains("e-more-indicator")&&d,this.day);f=f<=0?this.cellWidth:f;var y=this.getGroupIndex(l),w=this.getRowTop(y),O=l.classList.contains("e-block-appointment")?w:w+2+h*(r+2);m=this.parent.options.enableRtl?0:b,v=this.parent.options.enableRtl?b:0;var S=(h+1)*(r+2)+this.moreIndicatorHeight;if(l.classList.contains("e-more-indicator")){var T=this.cellHeight-this.moreIndicatorHeight;l.style.top=w+T+"px",l.style.width=this.cellWidth+"px",l.style.left=Math.floor(m/this.cellWidth)*this.cellWidth+"px",l.style.right=Math.floor(v/this.cellWidth)*this.cellWidth+"px"}else if(l.classList.contains("e-block-indicator"))b=Math.floor(b/this.cellWidth)*this.cellWidth+this.cellWidth-22,this.parent.options.enableRtl?l.style.right=b+"px":l.style.left=b+"px",l.style.top=w+this.cellHeight-18+"px";else if(sf.base.setStyleAttribute(l,{width:f+"px",left:m+"px",right:v+"px",top:O+"px"}),this.maxOrIndicator&&this.setMaxEventHeight(l),l.classList.contains("e-block-appointment")&&sf.base.setStyleAttribute(l,{height:this.cellHeight-1+"px"}),l.classList.contains("e-appointment")&&this.parent.eventBase.wireAppointmentEvents(l),this.parent.options.rowAutoHeight){var E=this.getFirstChild(y);this.updateCellHeight(E,S)}}}this.updateRowHeight()}},i.prototype.updateRowHeight=function(){if(this.parent.options.rowAutoHeight){this.updateBlockElements();var e={cssProperties:this.parent.getCssProperties(),isPreventScrollUpdate:!0,scrollPosition:{left:this.parent.uiStateValues.left,top:this.parent.uiStateValues.top}};this.parent.virtualScrollModule&&this.parent.virtualScrollModule.updateVirtualScrollHeight(),this.parent.onScrollUiUpdate(e)}},i.prototype.updateBlockElements=function(){for(var e=0,t=[].slice.call(this.parent.element.querySelectorAll(".e-block-appointment"));e<t.length;e++){var i=t[e],n=parseInt(i.getAttribute("data-group-index"),10),s=this.getFirstChild(n);i.style.height=s.offsetHeight+"px";var r=Math.round(i.offsetWidth/s.offsetWidth);i.style.width=s.offsetWidth*r+"px"}for(var o=0,a=[].slice.call(this.parent.element.querySelectorAll(".e-block-indicator"));o<a.length;o++){i=a[o],n=parseInt(i.getAttribute("data-group-index"),10);i.style.top=this.getRowTop(n)+this.getFirstChild(n).offsetHeight-18+"px"}},i.prototype.setMaxEventHeight=function(e){sf.base.setStyleAttribute(e,{height:this.cellHeight-(this.maxHeight?0:2)-(this.maxHeight?0:this.moreIndicatorHeight)+"px"})},i.prototype.getFirstChild=function(e){var t="";return this.parent.activeViewOptions.group.resources.length>0&&(t='[data-group-index="'+e.toString()+'"]'),this.parent.element.querySelector(".e-content-table tbody td"+t)},i.prototype.updateCellHeight=function(e,t){if(t>e.offsetHeight){if(sf.base.setStyleAttribute(e,{height:t+"px"}),this.parent.activeViewOptions.group.resources.length>0){var i=this.parent.element.querySelector('.e-resource-column-table tbody td[data-group-index="'+e.getAttribute("data-group-index")+'"]');i&&sf.base.setStyleAttribute(i,{height:t+"px"})}var n=this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child("+(e.parentElement.rowIndex+1)+") td");n&&sf.base.setStyleAttribute(n,{height:t+"px"})}},i.prototype.isAllDayData=function(e){return e.getAttribute("data-all-day")},i.prototype.getEventWidth=function(e,t,i,n){return"day"===this.renderType||i?n*this.slotsPerDay*this.cellWidth:this.isSameDay(e,t)?this.getSameDayEventsWidth(e,t):this.getSpannedEventsWidth(e,t,n)},i.prototype.getSameDayEventsWidth=function(e,t){return(t.getTime()-e.getTime())/6e4*(this.cellWidth*this.slotCount)/this.interval},i.prototype.getSpannedEventsWidth=function(e,t,i){var n,s,r=i*this.slotsPerDay*this.cellWidth,a=p(o(new Date(e.getTime())),this.startHour,this.endHour);if(n=this.getSameDayEventsWidth(a.startHour,e),-1===this.parent.getIndexOfDate(this.dateRender,o(new Date(t.getTime()))))s=0;else{var l=p(o(new Date(t.getTime())),this.startHour,this.endHour);s=this.getSameDayEventsWidth(t,l.endHour),s=this.slotsPerDay*this.cellWidth===s?0:s}var c=n+s;return r>c?r-c:s-n},i.prototype.isSameDay=function(e,t){return this.parent.getIndexOfDate(this.dateRender,o(new Date(e.getTime())))===this.parent.getIndexOfDate(this.dateRender,o(new Date(t.getTime())))},i.prototype.getAppointmentLeft=function(e,t,i){var n=this.isSameDay(t,e.startHour)?(t.getTime()-e.startHour.getTime())/(6e4*this.interval)*this.slotCount:0;return 0===i?n:Math.round((e.endHour.getTime()-e.startHour.getTime())/6e4/this.interval*this.slotCount)*i+n},i.prototype.getPosition=function(e,t,i,n){if("day"===this.renderType||i)return n*this.slotsPerDay*this.cellWidth;var s=p(o(new Date(this.dateRender[n].getTime())),this.startHour,this.endHour);return(s.endHour.getTime()<=t.getTime()&&s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):s.endHour.getTime()<=t.getTime()?this.getAppointmentLeft(s,e,n):s.startHour.getTime()>=e.getTime()?this.getAppointmentLeft(s,s.startHour,n):this.getAppointmentLeft(s,e,n))*this.cellWidth},i.prototype.getRowTop=function(e){return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.parent.activeViewOptions.group.resources.length>1||this.parent.virtualScrollModule||this.parent.options.rowAutoHeight?this.parent.element.querySelector('.e-content-wrap tbody td[data-group-index="'+e.toString()+'"]').offsetTop:this.cellHeight*e:0},i.prototype.renderEvents=function(e,t,i){var n=e.data,s=e.startTime,r=e.endTime;this.dateRender=this.parent.activeView.renderDates,this.day=this.parent.getIndexOfDate(this.dateRender,o(new Date(s.getTime())));var a=this.getCellTd(),l=this.eventHeight,c=n.count,p=this.getEventWidth(s,r,e.isAllDay,c);p="day"===this.renderType?p-2:p;var h=this.getPosition(s,r,e.isAllDay,this.day);p=p<=0?this.cellWidth:p;var u,d=this.getRowTop(t)+2+(l+2),f=this.parent.options.enableRtl?0:h,g=this.parent.options.enableRtl?h:0;u=this.parent.inlineModule.createInlineAppointmentElement(),sf.base.setStyleAttribute(u,{width:p+"px",left:f+"px",right:g+"px",top:d+"px"}),this.renderEventElement(u,a)},i.prototype.getCellTd=function(){var e=this.parent.uiStateValues.isGroupAdaptive?0:this.rowIndex;return this.eventContainers[e]},i}(V),I=(y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),W=function(e){function t(t){var i=e.call(this,t)||this;return i.baseCssClass="e-timeline-view",i}return I(t,e),t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.scrollToWorkHour=function(){var e=this.parent.getStartEndTime(this.parent.options.workHours.start),t=this.isWorkDay(this.parent.options.selectedDate)&&this.parent.options.workHours.highlight&&!sf.base.isNullOrUndefined(e)?new Date(+this.parent.options.selectedDate).setHours(e.getHours(),e.getMinutes(),0,0):new Date(+this.parent.options.selectedDate).setHours(0,0,0,0),i='[data-date="'+this.parent.getMsFromDate(new Date(t))+'"]',n=this.element.querySelector(i);n&&(this.getContentAreaElement().scrollLeft=n.offsetLeft)},t.prototype.scrollToHour=function(e,t){var i,n;if(t&&(n=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(t)))>=0){var s=e.split(":");2===s.length&&(i=new Date(t.setHours(parseInt(s[0],10),parseInt(s[1],10),0)))}i=sf.base.isNullOrUndefined(t)?this.parent.getStartEndTime(e):i,sf.base.isNullOrUndefined(i)||(this.getContentAreaElement().scrollLeft=sf.base.isNullOrUndefined(t)?this.getLeftFromDateTime(null,i):this.getLeftFromDateTime([n],i))},t.prototype.changeCurrentTimePosition=function(){if(!this.parent.isDestroyed){this.removeCurrentTimeIndicatorElements();var e=this.getCurrentTimeIndicatorIndex(),t=this.getLeftFromDateTime(e,this.parent.getCurrentTime()),i=this.element.querySelector(".e-content-table").offsetHeight,n=this.element.querySelector(".e-date-header-wrap");if(this.element.querySelector(".e-content-wrap").appendChild(sf.base.createElement("div",{className:"e-current-timeline",styles:(this.parent.options.enableRtl?"right":"left")+":"+sf.base.formatUnit(t)+"; height:"+sf.base.formatUnit(i)})),this.parent.virtualScrollModule){var s=this.parent.element.querySelector(".e-current-timeline"),r=this.parent.element.querySelector(".e-content-wrap table");sf.base.setStyleAttribute(s,{transform:r.style.transform})}var o=sf.base.createElement("div",{innerHTML:this.parent.getTimeString(this.parent.getCurrentTime()),className:"e-current-time"});n.appendChild(o),o.style[this.parent.options.enableRtl?"right":"left"]=sf.base.formatUnit(t-o.offsetWidth/2)}},t.prototype.getLeftFromDateTime=function(e,t){var i=this.getStartHour(),n=this.getEndHour(),s=0,r=60*(t.getHours()-i.getHours())+(t.getMinutes()-i.getMinutes());if(!sf.base.isNullOrUndefined(e)){var o=0===n.getHours()?24:n.getHours();0!==e[0]&&(s=e[0]*(60*(o-i.getHours()))+(n.getMinutes()-i.getMinutes())),r=s+r}return r*this.getWorkCellWidth()*this.parent.activeViewOptions.timeScale.slotCount/this.parent.activeViewOptions.timeScale.interval},t.prototype.getWorkCellWidth=function(){return this.element.querySelector(".e-work-cells").getBoundingClientRect().width},t.prototype.getCurrentTimeIndicatorIndex=function(){var e=[],t=this.parent.getIndexOfDate(this.renderDates,this.parent.resetTime(this.parent.getCurrentTime()));return t>=0&&e.push(t),e},t.prototype.renderEvents=function(){},t.prototype.onDataReady=function(){this.parent.activeViewOptions.timeScale.enable?new P(this.parent,"hour").renderAppointments():new P(this.parent,"day").renderAppointments()},t}(M),L=(w=function(e,t){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),R=function(e){function t(t){var i=e.call(this,t)||this;return i.dayNameFormat="wide",i.isInverseTableSelect=!1,i.allDayLevel=0,i}return L(t,e),t.prototype.onDataReady=function(e){new V(this.parent).renderAppointments()},t.prototype.onContentScroll=function(e){this.parent.removeNewEventElement(),this.parent.onVirtualScroll(),this.scrollTopPanel(e.target),this.scrollLeftPanel(e.target),this.parent.setPersistence()},t.prototype.scrollLeftPanel=function(e){var t=this.getLeftPanelElement();t&&(t.scrollTop=e.scrollTop)},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-week-number-wrapper")},t.prototype.onScrollUiUpdate=function(e){var t=this.getHeaderBarHeight(),i=this.getDatesHeaderElement(),n=this.getContentAreaElement(),s=this.parent.element.offsetHeight-t-i.offsetHeight,r=this.getLeftPanelElement();this.setContentHeight(n,r,s);var o=u();if(i.firstElementChild.style[e.cssProperties.rtlBorder]="",i.style[e.cssProperties.rtlPadding]="",n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=o>0?"1px":"0px",i.style[e.cssProperties.padding]=o>0?o-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]=""),this.setColWidth(n),e.scrollPosition)r&&(r.scrollTop=e.scrollPosition.top),n.scrollTop=e.scrollPosition.top,n.scrollLeft=e.scrollPosition.left;else{var a=document.querySelector('.e-header-cells[data-date="'+this.parent.getMsFromDate(this.parent.options.selectedDate)+'"]');n.scrollLeft=null!==a?a.offsetLeft:0}this.retainScrollPosition()},t.prototype.setContentHeight=function(e,t,i){e.style.height="auto","Month"===this.parent.options.currentView&&(e.style.height=sf.base.formatUnit(i)),t&&("MonthAgenda"===this.parent.options.currentView&&(i=this.element.querySelector(".e-content-table").offsetHeight),t.style.height="auto",t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e)))},t.prototype.renderLayout=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-current-day"));e.length>0&&sf.base.removeClass(e,"e-current-day");var t=f(new Date((new Date).setHours(0,0,0,0))),i='.e-work-cells[data-date="'+t.getTime().toString()+'"]';if("Month"===this.parent.options.currentView||"MonthAgenda"===this.parent.options.currentView){(e=[].slice.call(this.parent.element.querySelectorAll(".e-current-date"))).length>0&&sf.base.removeClass(e,"e-current-date");for(var n=0,s=l=[].slice.call(this.parent.element.querySelectorAll(i));n<s.length;n++){var r=s[n],o=r.cellIndex,a=[].slice.call(this.parent.element.querySelectorAll(".e-header-cells"))[o];sf.base.addClass([r],"e-current-date"),sf.base.addClass([a],"e-current-day")}}if("TimelineMonth"===this.parent.options.currentView){var l=this.parent.element.querySelector('.e-header-cells[data-date="'+t.getTime().toString()+'"]');sf.base.isNullOrUndefined(l)||sf.base.addClass([l],"e-current-day")}this.element=this.parent.element.querySelector(".e-table-wrap");for(var c=0,p=[].slice.call(this.element.querySelectorAll(".e-date-header-wrap td.e-header-cells"));c<p.length;c++){var h=p[c];sf.base.EventHandler.clearEvents(h),this.wireCellEvents(h)}var u=this.element.querySelector(".e-content-table tbody");sf.base.EventHandler.clearEvents(u),this.wireCellEvents(u),this.parent.virtualScrollModule&&this.parent.virtualScrollModule.setTranslateValue();var d=this.element.querySelector(".e-content-wrap");sf.base.EventHandler.clearEvents(d),sf.base.EventHandler.add(d,"scroll",this.onContentScroll,this),this.renderAppointmentContainer(),this.parent.setDimensions()},t.prototype.wireCellEvents=function(e){sf.base.EventHandler.add(e,"mousedown",this.parent.workCellAction.cellMouseDown,this.parent.workCellAction),sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)},t.prototype.renderAppointmentContainer=function(){},t.prototype.getMonthStart=function(e){var t=n(s(e),this.parent.activeViewOptions.firstDayOfWeek);return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){return l(n(r(c(e,this.parent.activeViewOptions.interval-1)),this.parent.activeViewOptions.firstDayOfWeek),6)},t.prototype.getRenderDates=function(e){var t=[],i=o(this.parent.options.selectedDate),n=this.getMonthStart(i),s=this.getMonthEnd(i);do{(this.parent.activeViewOptions.showWeekend||this.isWorkDay(n,e))&&t.push(n),n=l(n,1)}while(n.getTime()<=s.getTime());return e||(this.renderDates=t),t},t.prototype.getEndDateFromStartDate=function(e){return l(new Date(e.getTime()),1)},t.prototype.destroy=function(){this.parent.isDestroyed||(this.element=null)},t}(j),U=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),N=function(e){function t(t){return e.call(this,t)||this}return U(t,e),t.prototype.renderAppointmentContainer=function(){"auto"!==this.getContentAreaElement().style.height&&this.setEventWrapperHeight()},t.prototype.setEventWrapperHeight=function(){var e=this.getHeaderBarHeight(!0),t=this.getContentAreaElement().firstElementChild,i=this.element.querySelector(".e-date-header-wrap"),n=this.parent.element.offsetHeight-e-i.offsetHeight-t.offsetHeight,s=this.element.querySelector(".e-wrapper-container"),r=this.element.querySelector(".e-appointment-wrap");s.style.height=r.style.height=sf.base.formatUnit(n)},t}(R),_=(S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),z=function(e){function t(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!0,i}return _(t,e),t.prototype.onDataReady=function(e){new P(this.parent,"day").renderAppointments()},t.prototype.getLeftPanelElement=function(){return this.element.querySelector(".e-resource-column-wrap")},t.prototype.scrollTopPanel=function(t){e.prototype.scrollTopPanel.call(this,t),this.scrollHeaderLabels(t)},t.prototype.setContentHeight=function(e,t,i){t&&(t.style.height=sf.base.formatUnit(i-this.getScrollXIndent(e))),e.style.height=sf.base.formatUnit(i)},t.prototype.getMonthStart=function(e){var t=s(o(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate())},t.prototype.getMonthEnd=function(e){var t=s(o(e));return r(c(new Date(+t),this.parent.activeViewOptions.interval-1))},t}(R),B=(T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Y=function(e){function i(t){var i=e.call(this,t)||this;return i.isInverseTableSelect=!1,i}return B(i,e),i.prototype.renderLayout=function(){if(this.element=this.parent.element.querySelector(".e-table-wrap"),"TimelineYear"===this.parent.options.currentView)for(var e=0,t=[].slice.call(this.element.querySelectorAll(".e-work-cells:not(.e-other-month)"));e<t.length;e++){var i=t[e];sf.base.EventHandler.clearEvents(i),this.wireEvents(i,"cell")}this.wireEvents(this.element.querySelector(".e-content-wrap"),"scroll"),this.parent.setDimensions()},i.prototype.onContentScroll=function(e){var t=e.target;sf.base.isNullOrUndefined(this.element)&&(this.element=t);var i=this.getDatesHeaderElement();i&&(i.firstElementChild.scrollLeft=t.scrollLeft);var n=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");n&&(n.scrollTop=t.scrollTop),this.parent.setPersistence()},i.prototype.onScrollUiUpdate=function(e){var t=this.parent.element.offsetHeight-this.getHeaderBarHeight(),i=this.element.querySelector(".e-date-header-container");i&&(t-=i.offsetHeight);var n=this.element.querySelector(".e-content-wrap");n&&(n.style.height=sf.base.formatUnit(t));var s=this.element.querySelector(".e-month-header-wrapper,.e-resource-column-wrap");if(s&&(s.style.height=sf.base.formatUnit(t-this.getScrollXIndent(n))),!this.parent.isAdaptive&&i){var r=u();n.offsetWidth-n.clientWidth>0?(i.firstElementChild.style[e.cssProperties.border]=r>0?"1px":"0px",i.style[e.cssProperties.padding]=r>0?r-1+"px":"0px"):(i.firstElementChild.style[e.cssProperties.border]="",i.style[e.cssProperties.padding]="")}this.setColWidth(this.getContentAreaElement()),this.retainScrollPosition()},i.prototype.onDataReady=function(){if("TimelineYear"===this.parent.options.currentView){this.element=this.parent.element.querySelector(".e-table-wrap");var e,i,n=this.element.querySelector(".e-work-cells"),s=n.offsetParent;e=s.offsetHeight/s.querySelector("tbody").childElementCount,i=s.offsetWidth/s.querySelector("tbody tr").childElementCount;for(var r=d(n.querySelector(".e-date-header")),o=t(this.element.querySelector(".e-event-table"),"e-appointment"),a=void 0,l=void 0,c=this.element.querySelectorAll(".e-appointment, .e-more-indicator"),p=0;p<c.length;p++){var h=c[p],u=void 0,f=void 0,g=void 0,m=void 0,v=parseInt(h.getAttribute("data-level"),10);u=null!=this.parent.activeViewOptions.group.resources&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive?this.element.querySelector('.e-work-cells[data-date="'+h.getAttribute("data-date")+'"][data-group-index="'+h.getAttribute("data-group-index")+'"]'):this.element.querySelector('.e-work-cells[data-date="'+h.getAttribute("data-date")+'"]'),this.parent.options.enableRtl?l=u.cellIndex*i:a=u.cellIndex*i,sf.base.isNullOrUndefined(u)||(h.classList.contains("e-appointment")?(f=u.offsetTop+r+o*v+2,g=o,m=i-2,this.parent.eventBase.wireAppointmentEvents(h)):(f=u.offsetTop+(e-h.offsetHeight),m=i-2),h.style.width=m+"px",h.style.height=g+"px",h.style.right=l+"px",h.style.left=a+"px",h.style.top=f+"px")}}},i.prototype.getEndDateFromStartDate=function(e){var t=new Date(e.getTime());return this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&(t=r(t)),l(new Date(t.getTime()),1)},i.prototype.wireEvents=function(e,t){"cell"===t?"TimelineYear"===this.parent.options.currentView&&(sf.base.EventHandler.add(e,"click",this.parent.workCellAction.cellClick,this.parent.workCellAction),this.parent.isAdaptive||sf.base.EventHandler.add(e,"dblclick",this.parent.workCellAction.cellDblClick,this.parent.workCellAction)):sf.base.EventHandler.add(e,"scroll",this.onContentScroll,this)},i.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.element=null)},i}(j),F=(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),X=function(e){function t(t){var i=e.call(this,t)||this;return i.viewClass="e-agenda-view",i.isInverseTableSelect=!1,i.translateY=0,i.itemCount=0,i.elementHeight=70,i.bufferCount=3,i.renderedCount=10,i}return F(t,e),t.prototype.renderLayout=function(){this.element=this.parent.element.querySelector(".e-table-wrap"),this.wireEvents(),this.parent.setDimensions()},t.prototype.onDataReady=function(e,t,i){if(this.parent.options.enablePersistence)this.retainScrollPosition();else{var n=this.element.querySelector(".e-virtual-track");n||(n=sf.base.createElement("div",{className:"e-virtual-track"}));var s=this.element.querySelector(".e-content-wrap");n.style.height=t*this.elementHeight-s.offsetHeight+"px",s.appendChild(n),i&&(s.scrollTop=this.translateY=0,this.setTranslate(s)),this.itemCount=t}},t.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling,this)},t.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element.querySelector(".e-content-wrap"),"scroll",this.agendaScrolling)},t.prototype.agendaScrolling=function(){if(sf.base.isNullOrUndefined(this.parent.quickPopup)||this.parent.quickPopup.hide(),this.parent.activeViewOptions.allowVirtualScrolling){var e=this.element.querySelector(".e-content-wrap"),t=this.element.querySelector(".e-agenda-item");this.elementHeight=t?t.offsetHeight:this.elementHeight;var i=void 0;e.scrollTop-this.translateY<0?(i=~~(e.scrollTop/this.elementHeight),this.translateY=e.scrollTop,this.setTranslate(e),this.beforeInvoke(i)):e.scrollTop-this.translateY>this.elementHeight*this.bufferCount&&(i=(i=~~(e.scrollTop/this.elementHeight))>this.itemCount?this.itemCount-this.renderedCount:i,this.translateY=e.scrollTop,this.translateY>this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight&&(this.translateY=this.itemCount*this.elementHeight-this.renderedCount*this.elementHeight),this.setTranslate(e),this.beforeInvoke(i))}this.parent.setPersistence()},t.prototype.beforeInvoke=function(e){var t=this;window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){t.triggerScrolling(e)}),100)},t.prototype.triggerScrolling=function(e){this.parent.dotNetRef.invokeMethodAsync("AgendaScroll",e)},t.prototype.setTranslate=function(e){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"})},t.prototype.getEndDateFromStartDate=function(e){return o(l(e,1))},t.prototype.onScrollUiUpdate=function(){var e=this.getHeaderBarHeight();this.element.querySelector(".e-content-wrap").style.height=sf.base.formatUnit(this.parent.element.offsetHeight-e)},t.prototype.destroy=function(){this.parent.isDestroyed||this.element&&(this.unWireEvents(),this.element=null)},t}(j),G=function(){function e(e){this.parent=e}return e.prototype.cellMouseDown=function(e){this.isPreventAction(e)||this.parent.onCellMouseDown(e)},e.prototype.cellClick=function(e){if(!this.isPreventAction(e)&&!sf.base.closest(e.target,".e-disable-dates")){var t=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(!sf.base.isNullOrUndefined(t)){if(!sf.base.isNullOrUndefined(sf.base.closest(e.target,".e-new-event")))return(r=sf.base.extend({},this.parent.activeCellsData,null,!0)).startTime=f(r.startTime),r.endTime=f(r.endTime),void this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",r,"Add");var i=sf.base.closest(e.target,".e-navigate"),n=this.parent.getNavigateView(),s=this.parent.options.currentView===n;if(sf.base.isNullOrUndefined(i)||s){if(this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView)return;if(this.parent.isAdaptive&&(e.target.classList.contains("e-more-indicator")||sf.base.closest(e.target,".e-more-indicator")))return;var r;if((t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells"))&&e.shiftKey&&1===e.which&&this.parent.keyboardInteractionModule)return void this.parent.keyboardInteractionModule.onMouseSelection(e);this.parent.activeCellsData=this.parent.getCellDetails(t),this.parent.currentCell=t,(r=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"cellClick"},!0)).startTime=f(r.startTime),r.endTime=f(r.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",r)}else{var o=this.parent.getDateFromElement(t);if(!sf.base.isNullOrUndefined(o)&&!this.parent.isAdaptive){var a=new Date(this.parent.getMsFromDate(o));this.parent.dotNetRef.invokeMethodAsync("OnViewNavigate",a,this.parent.getNavigateView())}}}}},e.prototype.cellDblClick=function(e){if(!(this.parent.activeViewOptions.readonly||this.isPreventAction(e)||sf.base.closest(e.target,".e-disable-dates"))){var t=sf.base.extend({},this.parent.activeCellsData,{cancel:!1,mouseEventArgs:this.parent.eventBase.getMouseEvent(e),name:"OnCellDoubleClick"},!0);t.startTime=f(t.startTime),t.endTime=f(t.endTime),this.parent.dotNetRef.invokeMethodAsync("OnOpenEditor",t,"Add")}},e.prototype.isPreventAction=function(e){if(sf.base.closest(e.target,".e-navigate"))return!1;if(sf.base.closest(e.target,".e-appointment-wrapper")&&!sf.base.closest(e.target,".e-more-indicator"))return!0;var t=sf.base.closest(e.target,".e-appointment,.e-resource-group-cells");return!sf.base.isNullOrUndefined(t)||(t=sf.base.closest(e.target,".e-header-cells"),!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t)))},e}(),K=function(){function t(e){this.selectedCells=[],this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDownArrow:"shift+downarrow",shiftUpArrow:"shift+uparrow",shiftRightArrow:"shift+rightarrow",shiftLeftArrow:"shift+leftarrow",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow",altOne:"alt+1",altTwo:"alt+2",altThree:"alt+3",altFour:"alt+4",altFive:"alt+5",altSix:"alt+6",altSeven:"alt+7",altEight:"alt+8",altNine:"alt+9",enter:"enter",escape:"escape",delete:"delete",home:"home",pageUp:"pageup",pageDown:"pagedown",tab:"tab",shiftTab:"shift+tab"},this.parent=e,this.parent.element.tabIndex=-1===this.parent.element.tabIndex?0:this.parent.element.tabIndex,this.keyboardModule=new sf.base.KeyboardEvents(this.parent.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})}return t.prototype.keyActionHandler=function(e){switch(e.action){case"downArrow":case"shiftDownArrow":this.processDown(e,e.shiftKey);break;case"upArrow":case"shiftUpArrow":this.processUp(e,e.shiftKey);break;case"leftArrow":case"shiftLeftArrow":this.processLeft(e,e.shiftKey);break;case"rightArrow":case"shiftRightArrow":this.processRight(e,e.shiftKey);break;case"ctrlLeftArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Previous");break;case"ctrlRightArrow":this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate","Next");break;case"altOne":case"altTwo":case"altThree":case"altFour":case"altFive":case"altSix":case"altSeven":case"altEight":case"altNine":this.processViewNavigation(e);break;case"enter":this.processEnter(e);break;case"home":this.focusFirstCell();break;case"tab":case"shiftTab":this.processTab(e,e.shiftKey);break;case"delete":this.processDelete();break;case"escape":this.processEscape()}},t.prototype.onCellMouseDown=function(e){if(!e.shiftKey&&(this.initialTarget=this.getClosestCell(e),!this.parent.activeViewOptions.readonly&&"MonthAgenda"!==this.parent.options.currentView&&this.initialTarget&&(e.target.classList.contains("e-work-cells")&&3!==e.which&&(this.parent.removeSelectedClass(),sf.base.EventHandler.add(this.parent.getContentTable(),"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(this.parent.getContentTable(),"mouseup",this.onMoveup,this)),e.target.classList.contains("e-all-day-cells")&&3!==e.which))){this.parent.removeSelectedClass();var t=this.parent.getAllDayRow();sf.base.EventHandler.add(t,"mousemove",this.onMouseSelection,this),sf.base.EventHandler.add(t,"mouseup",this.onMoveup,this)}},t.prototype.onMouseSelection=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));sf.base.addClass(t,"e-allow-select");var i=this.parent.boundaryValidation(e.pageY,e.pageX);if(i.bottom||i.top||i.left||i.right){var n=this.parent.element.querySelector(".e-content-wrap"),s=n.offsetHeight<=n.scrollHeight&&n.scrollTop>=0&&n.scrollTop+n.offsetHeight<=n.scrollHeight,r=n.offsetWidth<=n.scrollWidth&&n.scrollLeft>=0&&n.scrollLeft+n.offsetWidth<=n.scrollWidth;s&&(i.top||i.bottom)&&(n.scrollTop+=i.top?-e.target.offsetHeight:e.target.offsetHeight),r&&(i.left||i.right)&&(n.scrollLeft+=i.left?-e.target.offsetWidth:e.target.offsetWidth)}var o=this.getClosestCell(e);o&&this.selectCells(!0,o)},t.prototype.getClosestCell=function(e){return sf.base.closest(e.target,".e-work-cells,.e-all-day-cells")},t.prototype.onMoveup=function(e){var t=[].slice.call(this.parent.element.querySelectorAll(".e-appointment"));if(sf.base.removeClass(t,"e-allow-select"),e.target.classList.contains("e-work-cells")&&(sf.base.EventHandler.remove(this.parent.getContentTable(),"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(this.parent.getContentTable(),"mouseup",this.onMoveup)),e.target.classList.contains("e-all-day-cells")){var i=this.parent.getAllDayRow();sf.base.EventHandler.remove(i,"mousemove",this.onMouseSelection),sf.base.EventHandler.remove(i,"mouseup",this.onMoveup)}if(!this.isPreventAction(e)){var n=sf.base.closest(e.target,".e-work-cells,.e-all-day-cells,.e-header-cells");if(this.parent.activeCellsData=this.getSelectedElements(n),this.parent.options.quickInfoOnSelectionEnd){this.parent.currentCell=n;var s=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e,name:"cellClick"},!0);s.startTime=f(s.startTime),s.endTime=f(s.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",s)}}},t.prototype.processEnter=function(e){if(!this.parent.activeViewOptions.readonly&&!this.isPreventAction(e)){var t=e.target;if(sf.base.closest(t,".e-quick-popup-wrapper"))t.classList.contains("e-event-details")||t.classList.contains("e-event-create")||t.classList.contains("e-event-edit")||t.classList.contains("e-event-delete")||t.classList.contains("e-close")?(t.click(),e.preventDefault()):t.classList.contains("e-subject")&&(this.parent.element.querySelector(".e-event-create").click(),e.preventDefault());else if(t.classList.contains("e-work-cells")||t.classList.contains("e-all-day-cells")){this.parent.activeCellsData=this.getSelectedElements(t),this.parent.currentCell=t;var i=sf.base.extend(this.parent.activeCellsData,{cancel:!1,mouseEventArgs:e});this.parent.options.allowInline?this.parent.inlineModule.cellEdit():(i.startTime=f(i.startTime),i.endTime=f(i.endTime),this.parent.dotNetRef.invokeMethodAsync("TriggerCellClick",i))}else t.classList.contains("e-inline-subject")?this.parent.inlineCrudActions(t):t.classList.contains("e-appointment")||t.classList.contains("e-more-event-close")||t.classList.contains("e-all-day-appointment-section")||t.classList.contains("e-more-indicator")?t.click():t.classList.contains("e-header-date")&&this.processEscape()}},t.prototype.getSelectedElements=function(e){var t;if(this.selectedCells.length>1&&e.classList.contains("e-selected-cell")){var i=this.parent.getCellDetails(this.selectedCells[0]),n=this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);i.endTime=n.endTime,i.element=e,t=i}else t=this.parent.getCellDetails(e);return t},t.prototype.getCells=function(e,t,i){var n=this.parent.getContentTable(),s=[].slice.call(n.querySelectorAll("td")),r=n.rows.length,o=n.rows[0].cells.length;if(t.classList.contains("e-all-day-cells")){var a=this.parent.getAllDayRow();s=[].slice.call(a.cells),r=1,o=a.cells.length}var l=s.indexOf(t),c=s.indexOf(i),p=[];if(e){for(var h=0;h<o;h++)for(var u=0;u<r;u++)p.push(s[o*u+h]);l=p.indexOf(t),c=p.indexOf(i)}if(l>c){var d=l;l=c,c=d}return(e?p:s).slice(l,c+1)},t.prototype.focusFirstCell=function(){if("Agenda"===this.parent.options.currentView){var e=this.parent.getContentTable().querySelector(".e-agenda-cells");return e.setAttribute("tabindex","0"),void e.focus()}if(this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.isTimelineView()){var t=this.parent.element.querySelector(".e-content-table tr:not(.e-hidden) .e-work-cells:not(.e-resource-group-cells)");this.selectCells(!1,t)}else this.selectCells(!1,this.parent.getWorkCellElements()[0])},t.prototype.isInverseTableSelect=function(){return this.parent.activeView.isInverseTableSelect},t.prototype.selectCells=function(e,t){this.parent.removeSelectedClass();var i=t instanceof Array?t.slice(-1)[0]:t;if(e){var n=void 0;!this.parent.options.allowMultiRowSelection&&["Day","Week","WorkWeek","Month","TimelineDay","TimelineWeek","TimelineWorkWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1&&(i=i.parentElement.children[this.initialTarget.cellIndex]);var s=this.getCells(this.isInverseTableSelect(),this.initialTarget,i);if(this.parent.activeViewOptions.group.resources.length>0){n=this.initialTarget.getAttribute("data-group-index");for(var r=[],o=0,a=s;o<a.length;o++){(u=a[o]).getAttribute("data-group-index")===n&&r.push(u)}s=r}if(this.parent.options.allowMultiCellSelection||(s=[this.initialTarget]),this.selectedCells=s,s.length>2&&!i.classList.contains("e-all-day-cells")){var l=this.getAllDayCells(s);if(this.parent.activeViewOptions.group.resources.length>0){for(var c=[],p=0,h=l;p<h.length;p++){var u;(u=h[p]).getAttribute("data-group-index")===n&&c.push(u)}l=c}s=s.concat(l)}i.getAttribute("data-group-index")!==n&&this.parent.activeViewOptions.group.resources.length>0&&(i=this.selectedCells[this.selectedCells.length-1]),this.parent.addSelectedClass(s,i)}else this.initialTarget=i,this.selectedCells=[i],this.parent.addSelectedClass([i],i)},t.prototype.selectAppointment=function(e,t){var i=this.getAppointmentElements();if(!(i.length<0)){var n;if(this.parent.eventBase.removeSelectedAppointmentClass(),t.classList.contains("e-appointment")){var s=i.indexOf(t);n=i[e?s-1:s+1]}else n=e?i[i.length-1]:i[0];n&&(this.parent.eventBase.addSelectedAppointments([n]),n.focus(),sf.base.addClass([n],"e-active-appointment-agenda"))}},t.prototype.selectAppointmentElementFromWorkCell=function(e,t){this.parent.eventBase.removeSelectedAppointmentClass(),this.parent.removeSelectedClass()},t.prototype.getAllDayCells=function(e){var t=this.parent.getAllDayRow();if(!t)return[];var i=e[0],n=e[e.length-1],s=this.parent.getCellDetails(i);return this.parent.getCellDetails(n).endTime.getTime()-s.startTime.getTime()>=864e5?[].slice.call(t.cells).slice(i.cellIndex,n.cellIndex+1):[]},t.prototype.getAppointmentElements=function(){return[].slice.call(this.parent.element.querySelectorAll(".e-appointment"))},t.prototype.getAppointmentElementsByGuid=function(e){return[].slice.call(this.parent.element.querySelectorAll('div[data-guid="'+e+'"]'))},t.prototype.getUniqueAppointmentElements=function(){var e=this.getAppointmentElements(),t=[];return e.map((function(e){return e.getAttribute("data-guid")})).filter((function(i,n,s){s.indexOf(i)===n&&t.push(e[n])})),t},t.prototype.getWorkCellFromAppointmentElement=function(e){return null},t.prototype.processViewNavigation=function(e){var t=parseInt(e.key,10)-1,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-toolbar .e-toolbar-item.e-views"));t<i.length&&i[t].click()},t.prototype.processUp=function(t,i){if(!i||!this.parent.isTimelineView()&&"MonthAgenda"!==this.parent.options.currentView){var n=t.target,s=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector(".e-more-popup-wrapper"),a=this.getQuickPopupElement();if(s.length>0&&!t.target.classList.contains("e-work-cells")&&(n=s[s.length-1]),r.length>0&&!o.classList.contains(e)&&!a.classList.contains(e)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass()),n)if(n.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+e)){var l=this.parent.getTableRows(),c=l.indexOf(n.parentElement);c>0&&c<l.length&&this.selectCells(i,l[c-1].cells[n.cellIndex])}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!0,n)}},t.prototype.processDown=function(t,i){if(!i||!this.parent.isTimelineView()&&"MonthAgenda"!==this.parent.options.currentView){var n=t.target,s=this.parent.getSelectedElements(),r=this.parent.eventBase.getSelectedAppointments(),o=this.parent.element.querySelector(".e-more-popup-wrapper"),a=this.getQuickPopupElement();s.length>0&&!t.target.classList.contains("e-work-cells")&&(n=s[s.length-1]),r.length>0&&!o.classList.contains(e)&&!a.classList.contains(e)&&-1!==["Day","Week","WorkWeek","Month"].indexOf(this.parent.options.currentView)&&(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass());var l=this.parent.getTableRows();if(n)if(n.classList.contains("e-work-cells")&&!this.parent.element.querySelector("."+e)){var c=l.indexOf(n.parentElement);c>=0&&c<l.length-1&&this.selectCells(i,l[c+1].cells[n.cellIndex])}else"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||this.selectAppointment(!1,n)}},t.prototype.processLeftRight=function(e){var t=this.parent.getContentTable(),i=e.parentNode.sectionRowIndex;return{element:t,rowIndex:i,columnIndex:e.cellIndex,maxIndex:t.rows[i].cells.length}},t.prototype.getQuickPopupElement=function(){return(this.parent.isAdaptive?document.body:this.parent.element).querySelector(".e-quick-popup-wrapper")},t.prototype.isCancelLeftRightAction=function(t,i){if("Agenda"===this.parent.options.currentView||i&&"MonthAgenda"===this.parent.options.currentView)return!0;if(this.isPreventAction(t)&&i)return!0;var n=this.parent.element.querySelector(".e-more-popup-wrapper"),s=this.getQuickPopupElement();return!(!n.classList.contains(e)&&!s.classList.contains(e))},t.prototype.processRight=function(e,t){if(!this.isCancelLeftRightAction(e,t)){var i,n=this.parent.getSelectedElements(),s=this.parent.eventBase.getSelectedAppointments(),r=e.target;if(n.length>0&&!r.classList.contains("e-work-cells")&&!r.classList.contains("e-all-day-cells")&&(r=n[n.length-1]),!(s.length>0)||(r=this.getWorkCellFromAppointmentElement(s[s.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),r))if(r.classList.contains("e-work-cells")&&e.target.classList.contains("e-work-cells")){var o=this.processLeftRight(r);if(o.columnIndex>=0&&o.columnIndex<o.maxIndex-1)i=this.calculateNextPrevDate(r,o.element.rows[o.rowIndex].cells[r.cellIndex+1],"right"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i);else if(o.columnIndex===o.maxIndex-1)if(!this.isInverseTableSelect()&&o.rowIndex<o.element.rows.length-1)i=this.calculateNextPrevDate(r,o.element.rows[o.rowIndex+1].cells[0],"right"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i);else if(!t)this.isInverseTableSelect()&&o.rowIndex}else if(r.classList.contains("e-all-day-cells")){var a=r.cellIndex,l=this.parent.getAllDayRow(),c=l.cells.length;a>=0&&a<c-1&&this.selectCells(t,l.cells[a+1])}}},t.prototype.processLeft=function(e,t){if(!this.isCancelLeftRightAction(e,t)){var i,n=e.target,s=this.parent.getSelectedElements();s.length>0&&!n.classList.contains("e-work-cells")&&!n.classList.contains("e-all-day-cells")&&(n=s[s.length-1]);var r=this.parent.eventBase.getSelectedAppointments();if(!(r.length>0)||(n=this.getWorkCellFromAppointmentElement(r[r.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),n))if(e.target.classList.contains("e-work-cells")&&n.classList.contains("e-work-cells")){var o=this.processLeftRight(n);o.columnIndex>0&&o.columnIndex<o.maxIndex?(i=this.calculateNextPrevDate(n,o.element.rows[o.rowIndex].cells[n.cellIndex-1],"left"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i)):0===o.columnIndex&&!this.isInverseTableSelect()&&o.rowIndex>0&&(i=this.calculateNextPrevDate(n,o.element.rows[o.rowIndex-1].cells[o.maxIndex-1],"left"),sf.base.isNullOrUndefined(i)||this.selectCells(t,i))}else if(n.classList.contains("e-all-day-cells")){var a=n.cellIndex,l=this.parent.getAllDayRow(),c=l.cells.length;a>0&&a<c&&this.selectCells(t,l.cells[a-1])}}},t.prototype.calculateNextPrevDate=function(e,t,i){var n=this.initialTarget.getAttribute("data-group-index");if(this.parent.activeViewOptions.group.resources.length>0&&"Month"===this.parent.options.currentView&&e&&t&&t.getAttribute("data-group-index")!==n){var s=this.parent.getDateFromElement(e),r="right"===i?new Date(s.setDate(s.getDate()+1)):new Date(s.setDate(s.getDate()-1));t=[].slice.call(this.parent.element.querySelectorAll('td[data-date="'+this.parent.getMsFromDate(r).toString()+'"][data-group-index="'+n+'"]'))[0]}return t},t.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll('a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])'))},t.prototype.processTabOnPopup=function(e,t){var i=this,n=this.getFocusableElements(t),s=(n=n.filter((function(e){var t=i.parent.element.querySelector(".e-popup-footer");return t&&t.offsetParent?!(e.classList.contains("e-edit")||e.classList.contains("e-delete")):!(e.classList.contains("e-event-edit")||e.classList.contains("e-event-delete"))})))[0],r=n[n.length-1];sf.base.isNullOrUndefined(r)||document.activeElement!==r||e.shiftKey||(e.preventDefault(),s.focus()),!sf.base.isNullOrUndefined(s)&&document.activeElement===s&&e.shiftKey&&(e.preventDefault(),r.focus())},t.prototype.processTab=function(t,i){var n=t.target,s=sf.base.closest(n,".e-quick-popup-wrapper,.e-more-popup-wrapper");if(s&&s.classList.contains(e))return s.classList.contains("e-more-popup-wrapper")&&this.parent.eventBase.removeSelectedAppointmentClass(),void this.processTabOnPopup(t,s);if(n.classList.contains("e-schedule"))this.parent.eventBase.removeSelectedAppointmentClass();else{if(!n.classList.contains("e-appointment")){var r=this.parent.getSelectedElements();return r.length>0&&!n.classList.contains("e-appointment")?(n=r[r.length-1],this.selectAppointmentElementFromWorkCell(i,n),void t.preventDefault()):void 0}var o=[].slice.call(this.parent.element.querySelectorAll(".e-appointment")),a=this.parent.eventBase.getSelectedAppointments();if(a.length>0&&(n=a[a.length-1]),this.parent.eventBase.removeSelectedAppointmentClass(),!i&&n.getAttribute("data-guid")===o[o.length-1].getAttribute("data-guid")||i&&n.getAttribute("data-guid")===o[0].getAttribute("data-guid"))return;"Agenda"!==this.parent.options.currentView&&"MonthAgenda"!==this.parent.options.currentView||(this.selectAppointment(i,n),t.preventDefault())}},t.prototype.processDelete=function(){var e=document.activeElement;if("MonthAgenda"===this.parent.options.currentView){var t=this.parent.eventBase.getSelectedEvents().element;e=t&&sf.base.isNullOrUndefined(t.length)?t:t[0]}if(e&&e.classList.contains("e-appointment")){if(sf.base.addClass([e],"e-appointment-border"),this.parent.activeEventData=this.parent.eventBase.getSelectedEvents(),this.parent.activeViewOptions.readonly||e.classList.contains("e-read-only"))return;this.parent.dotNetRef.invokeMethodAsync("ProcessDelete",this.parent.activeEventData.guid)}},t.prototype.processEscape=function(){this.parent.onClosePopup(),this.parent.onMoreEventPopupClose(),this.parent.headerPopup&&this.parent.headerPopup.hide(),this.parent.inlineModule&&this.parent.inlineModule.removeInlineAppointmentElement()},t.prototype.isPreventAction=function(e){var t=sf.base.closest(e.target,".e-resource-group-cells");return!(!this.parent.isTimelineView()||sf.base.isNullOrUndefined(t))},t.prototype.destroy=function(){this.keyboardModule.destroy()},t}(),Q=function(){function e(e){this.daysVariation=0,this.parent=e,this.actionObj={X:0,Y:0,groupIndex:0,cellWidth:0,cellHeight:0,slotInterval:0,interval:0,actionIndex:0,cloneElement:[],originalElement:[],action:null,isAllDay:null,excludeSelectors:null,index:0,navigationInterval:null,scrollInterval:null},this.scrollArgs={element:null,width:0,height:0},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1}}return e.prototype.calculateIntervalTime=function(e){var t=new Date(+e);return t.setMinutes(Math.floor(t.getMinutes()/this.actionObj.interval)*this.actionObj.interval),t},e.prototype.getContentAreaDimension=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=[].slice.call(e.querySelector("tr").children);!this.parent.isTimelineView()&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.isAdaptive&&(t=this.getResourceElements(t));var i=t[0].getBoundingClientRect(),n=t.slice(-1)[0].getBoundingClientRect();return{bottom:e.scrollHeight-5,left:this.parent.options.enableRtl?n.left:i.left,right:this.parent.options.enableRtl?i.right:n.right,top:0}},e.prototype.getPageCoordinates=function(e){var t=e.event;return t&&t.changedTouches?t.changedTouches[0]:e.changedTouches?e.changedTouches[0]:t||e},e.prototype.getIndex=function(e){var t=[].slice.call(this.parent.getContentTable().querySelector("tr").children),i={minIndex:0,maxIndex:t.length-1};if("resize"===this.actionObj.action&&this.parent.activeViewOptions.group.resources.length>0&&!this.parent.uiStateValues.isGroupAdaptive&&!this.parent.isTimelineView()){var n=this.getResourceElements(t);i.minIndex=n[0].cellIndex,i.maxIndex=n.slice(-1)[0].cellIndex}return e<i.minIndex&&(e=i.minIndex),e>i.maxIndex&&(e=i.maxIndex),e},e.prototype.updateTimePosition=function(e){for(var t=0,i=this.actionObj.cloneElement;t<i.length;t++){var n=i[t].querySelector(".e-time");n&&(n.innerHTML=this.parent.getTimeString(this.actionObj.start)+" - "+this.parent.getTimeString(this.actionObj.end))}if(this.parent.activeViewOptions.timeScale.enable&&this.parent.isAdaptive&&"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView){var s=this.parent.element.querySelector(".e-clone-time-indicator");if(!s){s=sf.base.createElement("div",{className:"e-clone-time-indicator"});var r=this.parent.isTimelineView()?"e-date-header-wrap":"e-time-cells-wrap";this.parent.element.querySelector("."+r).appendChild(s)}s.innerHTML=this.parent.getTimeString(e);var o=0;if(this.parent.isTimelineView())if(this.parent.options.enableRtl){var a=parseInt(this.actionObj.clone.style.right,10);o="drag"===this.actionObj.action||this.resizeEdges.left?a+this.actionObj.clone.offsetWidth:a,s.style.right=sf.base.formatUnit(o)}else{var l=parseInt(this.actionObj.clone.style.left,10);o="drag"===this.actionObj.action||this.resizeEdges.left?l:l+this.actionObj.clone.offsetWidth,s.style.left=sf.base.formatUnit(o)}else o="drag"===this.actionObj.action||this.resizeEdges.top?this.actionObj.clone.offsetTop:this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight,s.style.top=sf.base.formatUnit(o)}},e.prototype.getResourceElements=function(e){var t=this;return e.filter((function(e){return parseInt(e.getAttribute("data-group-index"),10)===t.actionObj.groupIndex}))},e.prototype.getOriginalElement=function(e){var t,i=e.getAttribute("data-guid");if(e.offsetParent&&e.offsetParent.classList.contains("e-more-event-popup")||this.parent.isTimelineView())t=[].slice.call(this.parent.element.querySelectorAll('[data-guid="'+i+'"]'));else{var n=sf.base.closest(e,"tr");t=[].slice.call(n.querySelectorAll('[data-guid="'+i+'"]'))}return t},e.prototype.createCloneElement=function(e){var t=sf.base.createElement("div",{innerHTML:e.outerHTML}).children[0],i=["e-schedule-event-clone"];return i.push("drag"===this.actionObj.action?"e-drag-clone":"e-resize-clone"),"Month"!==this.parent.options.currentView&&"TimelineMonth"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||i.push("e-month-event"),sf.base.addClass([t],i),sf.base.addClass([e],"e-event-action"),sf.base.isNullOrUndefined(e.parentElement)||e.parentElement.appendChild(t),t.style.width=sf.base.formatUnit(t.offsetWidth-2),this.parent.options.eventDragArea&&"drag"===this.actionObj.action&&document.querySelector(this.parent.options.eventDragArea).appendChild(t),sf.base.setStyleAttribute(t,{border:"0px"}),""!==e.style.backgroundColor&&sf.base.setStyleAttribute(t,{backgroundColor:e.style.backgroundColor}),t},e.prototype.removeCloneElementClasses=function(){var e=this.actionObj.originalElement;"Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)||(e=[].slice.call(this.parent.element.querySelectorAll(".e-event-action"))),sf.base.removeClass(e,"e-event-action")},e.prototype.removeCloneElement=function(){this.actionObj.originalElement=[];for(var e=0,t=this.actionObj.cloneElement;e<t.length;e++){var i=t[e];sf.base.isNullOrUndefined(i.parentNode)||sf.base.remove(i)}this.actionObj.cloneElement=[];var n=this.parent.element.querySelector(".e-clone-time-indicator");n&&sf.base.remove(n)},e.prototype.getCursorElement=function(e){var t=this.getPageCoordinates(e);return document.elementFromPoint(t.clientX,t.clientY)},e.prototype.autoScroll=function(){var e=this.parent.element.querySelector(".e-content-wrap"),t=e.offsetHeight<=e.scrollHeight,i=e.offsetWidth<=e.scrollWidth,n=t&&e.scrollTop>=0&&e.scrollTop+e.offsetHeight<=e.scrollHeight,s=i&&e.scrollLeft>=0&&e.scrollLeft+e.offsetWidth<=e.scrollWidth;n&&(this.scrollEdges.top||this.scrollEdges.bottom)&&(e.scrollTop+=this.scrollEdges.top?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollHeight!==e.offsetHeight+e.scrollTop&&e.scrollTop>0&&(this.actionObj.Y+=this.scrollEdges.top?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy)),s&&(this.scrollEdges.left||this.scrollEdges.right)&&(e.scrollLeft+=this.scrollEdges.left?-this.actionObj.scroll.scrollBy:this.actionObj.scroll.scrollBy,"resize"===this.actionObj.action&&e.scrollWidth!==e.offsetWidth+e.scrollLeft&&e.scrollLeft>0&&(this.actionObj.X+=this.scrollEdges.left?this.actionObj.scroll.scrollBy:-this.actionObj.scroll.scrollBy))},e.prototype.autoScrollValidation=function(e){if(!this.actionObj.scroll.enable)return!1;var t=this.parent.boundaryValidation(this.actionObj.pageY,this.actionObj.pageX);return this.scrollEdges=t,t.bottom||t.top||t.left||t.right},e.prototype.actionClass=function(e){"addClass"===e?sf.base.addClass([this.parent.element],"e-event-action"):sf.base.removeClass([this.parent.element],"e-event-action")},e.prototype.updateScrollPosition=function(e){var t=this;this.actionObj.scroll.enable&&sf.base.isNullOrUndefined(this.actionObj.scrollInterval)&&(this.actionObj.scrollInterval=window.setInterval((function(){if(t.autoScrollValidation(e)&&!t.actionObj.clone.classList.contains("e-all-day-appointment")){if(t.parent.isTimelineView()&&t.parent.activeViewOptions.group.resources.length>0&&t.actionObj.groupIndex<0)return;t.autoScroll(),t.actionObj.action}}),this.actionObj.scroll.timeDelay))},e.prototype.updateOriginalElement=function(e){var t='[data-id="'+e.getAttribute("data-id")+'"]';this.parent.activeViewOptions.group.resources.length>0&&(t=t.concat('[data-group-index = "'+e.getAttribute("data-group-index")+'"]'));var i=[].slice.call(this.parent.element.querySelectorAll(t));sf.base.addClass(i,"e-event-action");var n=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));sf.base.removeClass(n,"e-event-action")},e.prototype.getUpdatedEvent=function(e,t,i){var n=JSON.parse(JSON.stringify(i));return n.startTime=e,n.endTime=t,n},e.prototype.dynamicYearlyEventsRendering=function(e,t){void 0===t&&(t=!1);var i=this.actionObj.cellWidth-7;t&&(this.resizeEdges.left||this.resizeEdges.right)&&(i=this.actionObj.cellWidth*e.count);var n=this.createAppointmentElement(e,this.actionObj.groupIndex,!0);n.setAttribute("drag","true"),sf.base.addClass([n],"e-schedule-event-clone"),sf.base.setStyleAttribute(n,{width:i+"px",border:"0px","pointer-events":"none",position:"absolute",overflow:"hidden",padding:"3px"}),""!==this.actionObj.clone.style.backgroundColor&&sf.base.setStyleAttribute(n,{backgroundColor:this.actionObj.clone.style.backgroundColor});var s=f(o(e.startTime)).getTime(),r='.e-work-cells[data-date="'+s+'"]';this.parent.activeViewOptions.group.resources.length>0&&(r='.e-work-cells[data-date="'+s+'"][data-group-index="'+this.actionObj.groupIndex+'"]');var a=this.parent.element.querySelector(r);if(t){var l=this.actionObj.cellHeight*e.count-a.querySelector(".e-date-header").offsetHeight-7;(this.resizeEdges.right||this.resizeEdges.left)&&(l=parseInt(this.actionObj.clone.style.height,10)),sf.base.setStyleAttribute(n,{height:l+"px"})}this.renderElement(a,n,!0),this.actionObj.cloneElement.push(a.querySelector(".e-appointment-wrapper"))},e.prototype.dynamicEventsRendering=function(e){var t=this.parent.activeView.renderDates,i=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),n=this.parent.activeViewOptions.workDays;if(this.parent.activeViewOptions.group.resources.length>0)for(var s='.e-work-cells[data-group-index="'+this.actionObj.groupIndex+'"]',r=(i=[].slice.call(this.parent.element.querySelectorAll(s)))[0].querySelectorAll('[data-group-index="'+this.actionObj.groupIndex+'"]').length,a=0,l=0,c=i;l<c.length;l++){var p=c[l];t.push(new Date(p.getAttribute("data-date"))),a<r&&(n.push(t[a].getDay()),a++)}this.monthEvent.dateRender=t,this.monthEvent.getSlotDates(n);for(var h=0,u=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));h<u.length;h++){var d=u[h];sf.base.remove(d)}for(var f=0,g=this.monthEvent.splitEvent(e,t);f<g.length;f++){var m=g[f],v=this.parent.getIndexOfDate(t,o(m.startTime)),b=m.data.count*this.actionObj.cellWidth-7,y=this.createAppointmentElement(m,this.actionObj.groupIndex,!0);y.setAttribute("drag","true"),sf.base.addClass([y],"e-schedule-event-clone"),sf.base.setStyleAttribute(y,{width:b+"px",border:"0px","pointer-events":"none"}),""!==this.actionObj.clone.style.backgroundColor&&sf.base.setStyleAttribute(y,{backgroundColor:this.actionObj.clone.style.backgroundColor});var w=i[v];this.renderElement(w,y,!0),this.actionObj.cloneElement.push(y)}},e.prototype.getReadonlyAttribute=function(e){return e.getAttribute("aria-readonly")},e.prototype.createAppointmentElement=function(e,t,i){void 0===i&&(i=!1);var n=sf.base.createElement("div",{className:"e-appointment",innerHTML:this.cloneEventDetail.outerHTML});return this.parent.activeViewOptions.group.resources.length>0&&n.setAttribute("data-group-index",t.toString()),n},e.prototype.renderElement=function(e,t,i){if(void 0===i&&(i=!1),e.querySelector(".e-appointment-wrapper"))e.querySelector(".e-appointment-wrapper").appendChild(t);else{var n=sf.base.createElement("div",{className:"e-appointment-wrapper"});n.appendChild(t),e.appendChild(n)}},e.prototype.destroy=function(){this.parent.isDestroyed||(this.actionObj={},this.scrollArgs={},this.resizeEdges={left:!1,right:!1,top:!1,bottom:!1},this.scrollEdges={left:!1,right:!1,top:!1,bottom:!1})},e}(),J=(C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t.prototype.wireResizeEvent=function(e){for(var t=0,i=[].slice.call(e.querySelectorAll(".e-event-resize"));t<i.length;t++){var n=i[t];sf.base.EventHandler.clearEvents(n),sf.base.EventHandler.add(n,sf.base.Browser.touchStartEvent,this.resizeStart,this)}},t.prototype.resizeHelper=function(){if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)for(var e=0,t=this.actionObj.originalElement.length;e<t;e++){var i=this.createCloneElement(this.actionObj.originalElement[e]);this.actionObj.cloneElement[e]=i,this.actionObj.element===this.actionObj.originalElement[e]&&(this.actionObj.clone=i)}else this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element]},t.prototype.resizeStart=function(e){var t=this;this.actionObj.action="resize",this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var i=sf.base.closest(e.target,".e-event-resize");this.actionObj.element=sf.base.closest(i,".e-appointment");var n=this.actionObj.element.getAttribute("data-guid"),s={cancel:!1,interval:this.actionObj.interval,scroll:{enable:!0,scrollBy:30,timeDelay:100}},r=JSON.stringify(s);this.parent.dotNetRef.invokeMethodAsync("OnResizeStart",r,n).then((function(n){var s=n.resizeEventArgs;t.actionObj.event=sf.base.extend({},n,null,!0),delete t.actionObj.event.resizeEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var r=sf.base.extend({},t.actionObj.event,null,!0);if(!s.cancel){t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.resizeEdges={left:i.classList.contains("e-left-handler"),right:i.classList.contains("e-right-handler"),top:i.classList.contains("e-top-handler"),bottom:i.classList.contains("e-bottom-handler")},t.actionObj.groupIndex=t.parent.uiStateValues.isGroupAdaptive?t.parent.uiStateValues.groupIndex:0;var o=t.parent.element.querySelector(".e-work-cells");t.actionObj.cellWidth=o.offsetWidth,t.actionObj.cellHeight=o.offsetHeight;var a=t.parent.activeViewOptions.headerRows.map((function(e){return e.option}));if(t.parent.isTimelineView()&&a.length>0&&["Date","Hour"].indexOf(a.slice(-1)[0])<0){for(var l=t.parent.getContentTable().querySelector("tr"),c=0,p=0,h=[].slice.call(l.children);p<h.length;p++){var u=h[p];c+=parseInt(u.getAttribute("colspan"),10)}t.actionObj.cellWidth=l.offsetWidth/c,t.actionObj.cellHeight=l.offsetHeight}var d=t.getPageCoordinates(e);t.actionObj.X=d.pageX,t.actionObj.Y=d.pageY,t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=s.interval,t.actionObj.scroll=s.scroll,t.actionObj.start=r.startTime,t.actionObj.end=r.endTime,t.actionObj.originalElement=t.getOriginalElement(t.actionObj.element),"Month"!==t.parent.options.currentView&&"TimelineYear"!==t.parent.options.currentView&&(t.parent.isTimelineView()||t.parent.activeViewOptions.timeScale.enable)||(t.daysVariation=-1,t.cloneEventDetail=t.actionObj.element.querySelector(".e-appointment-details"),"TimelineYear"!==t.parent.options.currentView&&(t.monthEvent=new V(t.parent)));var f=t.parent.element.querySelector(".e-content-wrap");t.scrollArgs={element:f,width:f.scrollWidth,height:f.scrollHeight},sf.base.EventHandler.add(document,sf.base.Browser.touchMoveEvent,t.resizing,t),sf.base.EventHandler.add(document,sf.base.Browser.touchEndEvent,t.resizeStop,t)}}))},t.prototype.resizing=function(e){if(0===this.parent.element.querySelectorAll(".e-resize-clone").length&&this.resizeHelper(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=this.getPageCoordinates(e);if("Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView){var i=document.documentElement,n=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),s=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);this.actionObj.pageX=t.pageX-n,this.actionObj.pageY=t.pageY-s}else this.actionObj.pageX=t.pageX,this.actionObj.pageY=t.pageY;this.updateScrollPosition(e),this.updateResizingDirection(e)}},t.prototype.updateResizingDirection=function(e){if("Month"!==this.parent.options.currentView&&"TimelineYear"!==this.parent.options.currentView&&(this.parent.isTimelineView()||this.parent.activeViewOptions.timeScale.enable)){var t=this.resizeValidation(e);if(this.resizeEdges.left){if(t)for(var i=this.getLeftRightStyles(e,!0),n=0,s=this.actionObj.cloneElement;n<s.length;n++){var r=s[n];sf.base.setStyleAttribute(r,i),sf.base.addClass([r],"e-left-handler")}this.horizontalResizing(!this.parent.options.enableRtl)}if(this.resizeEdges.right){if(t)for(var o=this.getLeftRightStyles(e,!1),a=0,l=this.actionObj.cloneElement;a<l.length;a++){r=l[a];sf.base.setStyleAttribute(r,o),sf.base.addClass([r],"e-right-handler")}this.horizontalResizing(this.parent.options.enableRtl)}if(this.resizeEdges.top){if(t)for(var c=this.getTopBottomStyles(e,!0),p=0,h=this.actionObj.cloneElement;p<h.length;p++){r=h[p];sf.base.setStyleAttribute(r,c),sf.base.addClass([r],"e-top-handler")}this.verticalResizing(!0)}if(this.resizeEdges.bottom){if(t)for(var u=this.getTopBottomStyles(e,!1),d=0,f=this.actionObj.cloneElement;d<f.length;d++){r=f[d];sf.base.setStyleAttribute(r,u),sf.base.addClass([r],"e-bottom-handler")}this.verticalResizing(!1)}}else this.monthResizing()},t.prototype.monthResizing=function(){this.removeCloneElement();var e=document.elementFromPoint(this.actionObj.pageX,this.actionObj.pageY);if(!sf.base.isNullOrUndefined(e)){var t=this.parent.getDateFromElement(e),i=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(e.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,n=this.actionObj.event.startTime,s=this.actionObj.event.endTime;if(!this.parent.options.enableRtl&&this.resizeEdges.left||this.parent.options.enableRtl&&this.resizeEdges.right||this.resizeEdges.top?n=t:(!this.parent.options.enableRtl&&this.resizeEdges.right||this.parent.options.enableRtl&&this.resizeEdges.left||this.resizeEdges.bottom)&&(s=l(t,1)),i&&n<s){this.actionObj.start=n,this.actionObj.end=s;var r=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.options.currentView?this.yearEventsRendering(r):this.dynamicEventsRendering(r),this.updateOriginalElement(this.actionObj.clone)}else if("TimelineYear"===this.parent.options.currentView)for(var o=0,a=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));o<a.length;o++){var c=a[o];this.actionObj.cloneElement.push(c)}}},t.prototype.yearEventsRendering=function(e){for(var t=0,i=[].slice.call(this.parent.element.querySelectorAll(".e-schedule-event-clone"));t<i.length;t++){var n=i[t];sf.base.remove(n)}var s=new Date(e.endTime),r=0;0===this.parent.activeViewOptions.group.resources.length&&(r=this.getMonthDiff(e.startTime,l(s,-1)));for(var o=0;o<=r;o++){var a=void 0;0===this.parent.activeViewOptions.group.resources.length?a=this.getEventCount(e,this.actionObj.start.getMonth()+o):(a=sf.base.extend({},e,null,!0),s=this.resizeEdges.left||this.resizeEdges.right?l(s,-1):s,a.count=this.getMonthDiff(e.startTime,s)+(this.resizeEdges.top?0:1)),this.dynamicYearlyEventsRendering(a,!0)}},t.prototype.getMonthDiff=function(e,t){var i;return i=12*(t.getFullYear()-e.getFullYear()),i-=e.getMonth(),(i+=t.getMonth())<=0?0:i},t.prototype.getEventCount=function(e,t){var i=new Date(this.parent.options.selectedDate.getFullYear(),t,1),n=l(new Date(this.parent.options.selectedDate.getFullYear(),t+1,0),1),s=sf.base.extend({},e,null,!0),r=s.startTime,o=s.endTime,a=1;return r.getTime()<i.getTime()&&(s.startTime=i),o.getTime()>n.getTime()&&(s.endTime=n),0===this.parent.activeViewOptions.group.resources.length&&(a=Math.ceil((s.endTime.getTime()-s.startTime.getTime())/864e5)),s.count=a,s},t.prototype.resizeStop=function(){sf.base.EventHandler.remove(document,sf.base.Browser.touchMoveEvent,this.resizing),sf.base.EventHandler.remove(document,sf.base.Browser.touchEndEvent,this.resizeStop),clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.removeCloneElementClasses(),this.removeCloneElement(),this.actionClass("removeClass"),this.parent.uiStateValues.action=!1;var e=this.actionObj.element.getAttribute("data-guid"),t=f(this.actionObj.start),i=f(this.actionObj.end);this.parent.dotNetRef.invokeMethodAsync("OnResizeStop",t,i,e)},t.prototype.verticalResizing=function(e){var t=this.actionObj.clone.offsetTop;e||(t+=this.actionObj.clone.offsetHeight);var i=t/this.actionObj.cellHeight*this.actionObj.slotInterval,n=this.actionObj.clone.offsetParent;if(!sf.base.isNullOrUndefined(n)){var s=o(this.parent.getDateFromElement(n));s.setHours(this.parent.activeView.getStartHour().getHours()),s.setMinutes(i+this.parent.activeView.getStartHour().getMinutes()),e?this.actionObj.start=this.calculateIntervalTime(s):this.actionObj.end=this.calculateIntervalTime(s),this.updateTimePosition(s)}},t.prototype.horizontalResizing=function(e){var t,i=this.actionObj.event.startTime,n=this.actionObj.event.endTime;if(this.parent.isTimelineView()){var s=this.parent.getContentTable().querySelector("tr"),r=this.parent.options.currentView;if(this.parent.activeViewOptions.headerRows.length>0){var o=this.parent.activeViewOptions.headerRows.map((function(e){return e.option}));r=o.slice(-1)[0],"TimelineMonth"===this.parent.options.currentView&&"Hour"===r&&(r=o.slice(-2)[0]||"Month")}t=e?i:n;var a=0,c=[].slice.call(s.children),p=!1;if(-1!==["Year","Month","Week","Date"].indexOf(r)){for(var h=0,u=0,d=c;u<d.length;u++){var f=d[u];h+=parseInt(f.getAttribute("colspan"),10)}var g=this.parent.options.enableRtl?parseInt(this.actionObj.clone.style.right,10):parseInt(this.actionObj.clone.style.left,10);e||(g+=this.actionObj.clone.offsetWidth-this.actionObj.cellWidth),a=Math.floor(g/Math.floor(s.offsetWidth/h)),p=(a=e?a:"TimelineMonth"===this.parent.options.currentView?a+1:a)===c.length,a=a<0?0:a>=h?h-1:a}else{var m=this.actionObj.cellWidth;if(a=e?Math.floor(this.actionObj.clone.offsetLeft/this.actionObj.cellWidth):Math.ceil((this.actionObj.clone.offsetLeft+(this.actionObj.clone.offsetWidth-m))/this.actionObj.cellWidth),this.parent.options.enableRtl){var v=0;("TimelineMonth"===r||!this.parent.activeViewOptions.timeScale.enable&&"TimelineMonth"!==this.parent.options.currentView)&&(v=this.actionObj.cellWidth);var b=Math.floor(parseInt(this.actionObj.clone.style.right,10)/this.actionObj.cellWidth)*this.actionObj.cellWidth+(e?0:this.actionObj.clone.offsetWidth-v);a=Math.floor(b/this.actionObj.cellWidth)}p=a===c.length,a=this.getIndex(a)}var y=void 0;if(y=-1!==["Year","Month","Week","Date"].indexOf(r)?new Date(this.parent.activeView.renderDates[a].getTime()):this.parent.getDateFromElement(s.children[a]),-1===["TimelineMonth","Year","Month","Week","Date"].indexOf(r)&&this.parent.activeViewOptions.timeScale.enable){g=this.parent.options.enableRtl?parseFloat(this.actionObj.clone.style.right):parseFloat(this.actionObj.clone.style.left);e||(g+=this.actionObj.clone.offsetWidth);var w=Math.ceil(this.actionObj.slotInterval/this.actionObj.cellWidth*(g-Math.floor(g/this.actionObj.cellWidth)*this.actionObj.cellWidth));w=p||!e&&0===w?this.actionObj.slotInterval:w,(t=new Date(y.getTime())).setMinutes(t.getMinutes()+w),this.updateTimePosition(t)}else t=new Date(y.setHours(t.getHours(),t.getMinutes(),t.getSeconds()))}else{var O=sf.base.closest(this.actionObj.clone,"td").cellIndex,S=Math.ceil((e?this.actionObj.element.offsetWidth:0)/this.actionObj.cellWidth)*this.actionObj.cellWidth,T=(h=Math.ceil((this.actionObj.clone.offsetWidth-S)/this.actionObj.cellWidth),s=sf.base.closest(this.actionObj.clone,"tr"),e?O-h:O+h-1);T=this.getIndex(T),t=this.parent.getDateFromElement(s.children[T]),e?t.setHours(i.getHours(),i.getMinutes(),i.getSeconds()):t.setHours(n.getHours(),n.getMinutes(),n.getSeconds())}if(e)this.actionObj.event.endTime.getTime()-t.getTime()<=0&&(t=new Date(this.actionObj.event.startTime.getTime())),this.actionObj.start=this.parent.activeViewOptions.timeScale.enable?this.calculateIntervalTime(t):t;else{var E=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable||0!==t.getHours()||0!==t.getMinutes()?t:l(t,1);this.actionObj.end=this.parent.activeViewOptions.timeScale.enable&&"Month"!==this.parent.options.currentView?this.calculateIntervalTime(E):E}},t.prototype.getTopBottomStyles=function(e,t){var i=this.parent.element.querySelector(".e-content-wrap"),n=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,s=t?this.actionObj.element.offsetHeight+(this.actionObj.Y-this.actionObj.pageY):this.actionObj.element.offsetHeight+(this.actionObj.pageY-this.actionObj.Y),r=t?this.actionObj.element.offsetTop-(this.actionObj.Y-this.actionObj.pageY):this.actionObj.clone.offsetTop;return s=r<0||this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight>this.scrollArgs.height?this.actionObj.clone.offsetHeight:s,r=r<0?0:r,s=(r=Math.floor(r/n)*n)+s>=i.scrollHeight?i.scrollHeight-r:Math.ceil(s/n)*n,{height:sf.base.formatUnit(s<this.actionObj.cellHeight?this.actionObj.cellHeight:s),top:sf.base.formatUnit(s<this.actionObj.cellHeight&&t?this.actionObj.clone.offsetTop:r),left:"0px",right:"0px",width:"100%"}},t.prototype.getLeftRightStyles=function(e,t){var i={},n=this.parent.isTimelineView(),s=["TimelineDay","TimelineWeek","TimelineWorkWeek"].indexOf(this.parent.options.currentView)>-1&&this.parent.activeViewOptions.timeScale.enable,r=this.actionObj.cellWidth/this.actionObj.slotInterval*this.actionObj.interval,o=t?this.actionObj.X-this.actionObj.pageX:this.actionObj.pageX-this.actionObj.X,a=n?this.actionObj.element.offsetWidth/this.actionObj.cellWidth*this.actionObj.cellWidth:"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.actionObj.element.offsetWidth:Math.ceil(this.actionObj.element.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth,l=a+Math.ceil(o/this.actionObj.cellWidth)*this.actionObj.cellWidth,c=this.parent.options.enableRtl?parseInt(this.actionObj.element.style.right,10):this.actionObj.clone.offsetLeft;s&&(l=a+Math.ceil(o/r)*r,l=Math.ceil((c+l)/r)*r-c,this.actionObj.event.isAllDay=!1);var p=!t&&l+this.actionObj.clone.offsetLeft>this.scrollArgs.width?this.actionObj.clone.offsetWidth:l<this.actionObj.cellWidth?this.actionObj.cellWidth:l;if(this.parent.options.enableRtl){var h=n?parseInt(this.actionObj.element.style.right,10):-(l-this.actionObj.cellWidth);h=n?h:t||h>0?0:h,n&&!t&&(h=(h=Math.ceil((this.actionObj.element.offsetLeft+(this.actionObj.element.offsetWidth+(this.actionObj.pageX-this.actionObj.X)))/r)*r)<0?Math.abs(h):-h),h=h>=this.scrollArgs.width?this.scrollArgs.width-this.actionObj.cellWidth:h,i.right=sf.base.formatUnit(h),p=p+h>this.scrollArgs.width?this.actionObj.clone.offsetWidth:p}else{var u=t?this.actionObj.element.offsetLeft-(this.actionObj.X-this.actionObj.pageX):this.parent.options.enableRtl?this.actionObj.element.offsetLeft:0;n&&(u=t?u:parseInt(this.actionObj.clone.style.left,10),u=this.parent.options.enableRtl?t?u:this.actionObj.pageX<this.actionObj.X-this.actionObj.clone.offsetWidth?parseInt(this.actionObj.clone.style.right,10):u:t&&this.actionObj.pageX>this.actionObj.X+this.actionObj.clone.offsetWidth&&this.actionObj.clone.offsetWidth===this.actionObj.cellWidth?parseInt(this.actionObj.clone.style.left,10):u);var d=u;(u=n?s?t?Math.floor(u/r)*r:u:Math.floor(u/this.actionObj.cellWidth)*this.actionObj.cellWidth:Math.ceil(Math.abs(u)/this.actionObj.cellWidth)*this.actionObj.cellWidth)<0&&(u=0,p=this.actionObj.clone.offsetWidth);var f=Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth;t&&(i.left=sf.base.formatUnit(n?u:t?d<0?-u:Math.ceil((a-f)/this.actionObj.cellWidth)*this.actionObj.cellWidth:u))}return i.width=sf.base.formatUnit(p),i},t.prototype.resizeValidation=function(e){var t=this.getPageCoordinates(e),i=this.getContentAreaDimension(),n=!1;return this.resizeEdges.left&&(n=t.pageX-this.actionObj.cellWidth>=i.left),this.resizeEdges.right&&(n=t.pageX+this.actionObj.cellWidth<=i.right),this.resizeEdges.top&&(n=this.actionObj.clone.offsetTop>=i.top),this.resizeEdges.bottom&&(n=this.actionObj.clone.offsetTop+this.actionObj.clone.offsetHeight<=this.scrollArgs.height),n},t}(Q),$=(A=function(e,t){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}A(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=0,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.widthPerMinute=0,t.heightPerMinute=0,t.minDiff=0,t.isStepDragging=!1,t.isMorePopupOpened=!1,t.isAllDayDrag=!1,t}return $(t,e),t.prototype.wireDragEvent=function(e){e.ej2_instances&&[].slice.call(e.ej2_instances).forEach((function(e){return e.destroy()}));var t=new sf.base.Draggable(e,{abort:".e-event-resize",clone:!0,isDragScroll:!0,enableTapHold:this.parent.isAdaptive,enableTailMode:!!this.parent.options.eventDragArea,cursorAt:this.parent.options.eventDragArea?{left:-20,top:-20}:{left:0,top:0},dragArea:this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea):this.parent.element.querySelector(".e-content-table"),dragStart:this.dragStart.bind(this),drag:this.drag.bind(this),dragStop:this.dragStop.bind(this),enableAutoScroll:!1,helper:this.dragHelper.bind(this),queryPositionInfo:this.dragPosition.bind(this)});t.enableTapHold&&sf.base.Browser.isDevice&&sf.base.Browser.isTouch||sf.base.EventHandler.remove(e,"touchstart",t.initialize)},t.prototype.dragHelper=function(e){return this.setDragActionDefaultValues(),this.actionObj.element=e.element,this.actionObj.action="drag",this.actionObj.clone=this.createCloneElement(this.actionObj.element),this.parent.options.eventDragArea||"Month"===this.parent.options.currentView||!this.parent.activeViewOptions.timeScale.enable||this.parent.isTimelineView()||this.actionObj.element.classList.contains("e-all-day-appointment")||sf.base.setStyleAttribute(this.actionObj.clone,{cursor:"move",left:"0%",right:"0%",width:"100%"}),this.actionObj.clone.style.top=sf.base.formatUnit(this.actionObj.element.offsetTop),this.actionObj.cloneElement=[this.actionObj.clone],this.actionObj.originalElement=[this.actionObj.element],this.actionObj.clone},t.prototype.dragPosition=function(e){if(this.parent.options.eventDragArea)return{left:e.left,top:e.top};var t,i=this.actionObj.cellHeight/this.actionObj.slotInterval*this.actionObj.interval,n=sf.base.formatUnit(0);if((this.parent.isTimelineView()||"Month"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable)&&(n=sf.base.formatUnit(this.actionObj.clone.offsetLeft)),"Month"===this.parent.options.currentView||this.parent.isTimelineView()||!this.parent.activeViewOptions.timeScale.enable||!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup"))t=sf.base.formatUnit(this.actionObj.clone.offsetTop);else if(this.actionObj.clone.classList.contains("e-all-day-appointment"))t=sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop),sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(Math.ceil(this.actionObj.clone.offsetWidth/this.actionObj.cellWidth)*this.actionObj.cellWidth),right:this.parent.options.enableRtl&&sf.base.formatUnit(0)});else{this.actionObj.element.classList.contains("e-all-day-appointment")&&!this.actionObj.clone.classList.contains("e-all-day-appointment")&&sf.base.setStyleAttribute(this.actionObj.clone,{height:sf.base.formatUnit(this.actionObj.cellHeight),width:sf.base.formatUnit(this.actionObj.cellWidth-1),pointerEvents:"none"});var s=parseInt(e.top,10);s=s<0?0:s,t=sf.base.formatUnit(Math.ceil(s/i)*i);var r=this.parent.element.querySelector(".e-content-wrap").scrollHeight,o=parseInt(t,10)+this.actionObj.clone.offsetHeight;o>r&&(t=parseInt(t,10)-(o-r)+"px")}return{left:n,top:t}},t.prototype.setDragActionDefaultValues=function(){this.actionObj.action="drag",this.actionObj.isAllDay=null,this.actionObj.slotInterval=this.parent.activeViewOptions.timeScale.interval/this.parent.activeViewOptions.timeScale.slotCount,this.actionObj.interval=this.actionObj.slotInterval;var e=this.parent.element.querySelector(".e-work-cells");this.actionObj.cellWidth=e.offsetWidth,this.actionObj.cellHeight=e.offsetHeight},t.prototype.dragStart=function(e){var t=this,i=this.actionObj.element.getAttribute("data-guid"),n={cancel:!1,excludeSelectors:null,interval:this.actionObj.interval,navigation:{enable:!1,timeDelay:2e3},scroll:{enable:!0,scrollBy:30,timeDelay:100}},s=JSON.stringify(n);this.parent.dotNetRef.invokeMethodAsync("OnDragStart",s,i).then((function(i){var n=i.dragEventArgs;t.actionObj.isAllDay=i.isAllDay,t.actionObj.event=sf.base.extend({},i,null,!0),delete t.actionObj.event.dragEventArgs,t.actionObj.event.startTime=new Date(t.actionObj.event.startTime),t.actionObj.event.endTime=new Date(t.actionObj.event.endTime);var s=sf.base.extend({},t.actionObj.event,null,!0);if(n.cancel||!sf.base.isNullOrUndefined(t.actionObj.element)&&sf.base.isNullOrUndefined(t.actionObj.element.parentElement)){var r=t.actionObj.element.ej2_instances[0];return sf.base.isNullOrUndefined(r)||r.intDestroy(e.event),t.actionObj.action="",t.removeCloneElementClasses(),void t.removeCloneElement()}e.bindEvents(e.dragElement),t.actionClass("addClass"),t.parent.uiStateValues.action=!0,t.actionObj.start=s.startTime,t.actionObj.end=s.endTime,t.actionObj.groupIndex=parseInt(t.actionObj.element.getAttribute("data-group-index")||"0",10),t.actionObj.interval=n.interval,t.actionObj.navigation=n.navigation,t.actionObj.scroll=n.scroll,t.actionObj.excludeSelectors=n.excludeSelectors;var o=t.parent.element.querySelector(".e-content-wrap");if(t.scrollArgs={element:o,width:o.scrollWidth,height:o.scrollHeight},t.widthPerMinute=t.actionObj.cellWidth/t.actionObj.slotInterval*t.actionObj.interval,t.heightPerMinute=t.actionObj.cellHeight/t.actionObj.slotInterval*t.actionObj.interval,t.widthUptoCursorPoint=0,t.heightUptoCursorPoint=0,t.cursorPointIndex=-1,t.isHeaderRows=!1,t.isTimelineDayProcess=!1,t.minDiff=0,t.isMorePopupOpened=!1,t.daysVariation=-1,t.parent.isTimelineView()||!t.parent.activeViewOptions.timeScale.enable){!sf.base.isNullOrUndefined(t.actionObj.clone.offsetParent)&&t.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")&&(t.isMorePopupOpened=!0);var a=t.parent.activeViewOptions.headerRows;t.isHeaderRows=a.length>0&&"Hour"!==a[a.length-1].option&&"Date"!==a[a.length-1].option,t.isTimelineDayProcess=!t.parent.activeViewOptions.timeScale.enable||t.isHeaderRows||"TimelineMonth"===t.parent.options.currentView||a.length>0&&"Date"===a[a.length-1].option,t.isStepDragging=!t.isTimelineDayProcess&&t.actionObj.slotInterval!==t.actionObj.interval,t.isTimelineDayProcess?t.timelineEventModule=new P(t.parent,"day"):t.timelineEventModule=new P(t.parent,"hour")}if("Month"===t.parent.options.currentView||"TimelineYear"===t.parent.options.currentView||!t.parent.isTimelineView()&&!t.parent.activeViewOptions.timeScale.enable){t.updateOriginalElement(t.actionObj.clone);var l=t.actionObj.clone.querySelector(".e-appointment-details");t.cloneEventDetail=l||t.actionObj.clone.querySelector(".e-subject"),t.monthEvent=new V(t.parent)}"Day"!==t.parent.options.currentView&&"Week"!==t.parent.options.currentView&&"WorkWeek"!==t.parent.options.currentView||(t.verticalEvent=new D(t.parent))}))},t.prototype.drag=function(e){if(this.parent.onQuickPopupClose(),sf.base.isNullOrUndefined(e.target)||!e.target.classList.contains("e-disable-dates")){var t=sf.base.extend({},this.actionObj.event,null,!0),i=this.getPageCoordinates(e);if(this.actionObj.Y=this.actionObj.pageY=i.pageY,this.actionObj.X=this.actionObj.pageX=i.pageX,this.actionObj.target=e.target,this.widthUptoCursorPoint=0===this.widthUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left-this.actionObj.X)/this.widthPerMinute)*this.widthPerMinute:this.widthUptoCursorPoint,this.widthUptoCursorPoint=this.isMorePopupOpened?this.actionObj.cellWidth:this.widthUptoCursorPoint,this.heightUptoCursorPoint=0===this.heightUptoCursorPoint?Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top-this.actionObj.Y)/this.heightPerMinute)*this.heightPerMinute:this.heightUptoCursorPoint,this.isAllDayDrag=this.parent.activeViewOptions.timeScale.enable?this.actionObj.clone.classList.contains("e-all-day-appointment"):this.actionObj.event.isAllDay,this.isStepDragging&&0===this.minDiff&&this.calculateMinutesDiff(t),("Month"===this.parent.options.currentView||this.isAllDayDrag)&&this.daysVariation<0){var n=this.parent.getDateFromElement(this.actionObj.target);if(sf.base.isNullOrUndefined(n))this.daysVariation=0;else{var s=o(n),r=o(t.startTime);this.daysVariation=(s.getTime()-r.getTime())/864e5}}else this.daysVariation=0;if(this.parent.options.eventDragArea){var a=i.target;this.actionObj.clone.style.top=sf.base.formatUnit(a.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(a.offsetLeft),sf.base.closest(a,".e-schedule")?"Week"!==this.parent.options.currentView&&"WorkWeek"!==this.parent.options.currentView&&"Day"!==this.parent.options.currentView&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.element.offsetWidth)):(this.actionObj.clone.style.height="",this.actionObj.clone.style.width="")}this.updateScrollPosition(e),this.updateNavigatingPosition(e),this.updateDraggingDateTime(e);var l={data:t,event:e,element:this.actionObj.element,startTime:this.actionObj.start,endTime:this.actionObj.end};this.parent.activeViewOptions.group.resources.length>0&&(l.groupIndex=this.actionObj.groupIndex)}},t.prototype.calculateMinutesDiff=function(e){this.parent.options.enableRtl?this.minDiff=(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint)/this.widthPerMinute*this.actionObj.interval:this.minDiff=this.widthUptoCursorPoint/this.widthPerMinute*this.actionObj.interval;var t=e.startTime,i=p(this.parent.activeView.renderDates[0],this.parent.activeView.getStartHour(),this.parent.activeView.getEndHour());i.startHour.getTime()>t.getTime()&&(this.minDiff=this.minDiff+(i.startHour.getTime()-t.getTime())/6e4)},t.prototype.dragStop=function(e){if(this.removeCloneElementClasses(),this.removeCloneElement(),clearInterval(this.actionObj.navigationInterval),this.actionObj.navigationInterval=null,clearInterval(this.actionObj.scrollInterval),this.actionObj.scrollInterval=null,this.actionClass("removeClass"),this.parent.uiStateValues.action=!1,this.actionObj.action=null,!this.isAllowDrop(e)){var t=this.actionObj.element.getAttribute("data-guid"),i=f(this.actionObj.start),n=f(this.actionObj.end),s=!(this.parent.activeViewOptions.group.resources.length>0)||parseInt(this.actionObj.element.getAttribute("data-group-index"),10)===this.actionObj.groupIndex,r=this.parent.activeViewOptions.group.resources.length>0?this.actionObj.groupIndex:-1,o=[];if(this.parent.activeViewOptions.group.resources.length>0&&this.parent.activeViewOptions.group.allowGroupEdit)if(-1===(o=this.getOriginalElement(this.actionObj.element).map((function(e){return parseInt(e.getAttribute("data-group-index"),10)}))).indexOf(this.actionObj.groupIndex)){var a=parseInt(this.actionObj.clone.getAttribute("data-group-index"),10);(o=o.filter((function(e){return e!==a}))).push(this.actionObj.groupIndex)}else o=[];this.parent.dotNetRef.invokeMethodAsync("OnDragStop",i,n,t,r,s,this.actionObj.isAllDay,o)}},t.prototype.updateNavigatingPosition=function(e){var t=this;if(this.actionObj.navigation.enable){var i=this.parent.getCurrentTime();sf.base.isNullOrUndefined(this.actionObj.navigationInterval)&&(this.actionObj.navigationInterval=window.setInterval((function(){if(i){var n=t.parent.getCurrentTime().getSeconds(),s=i.getSeconds()+t.actionObj.navigation.timeDelay/1e3;(s=s>=60?s-60:s)===n&&(i=t.parent.getCurrentTime(),t.viewNavigation(e),t.updateDraggingDateTime(e))}}),this.actionObj.navigation.timeDelay))}},t.prototype.updateDraggingDateTime=function(e){!sf.base.isNullOrUndefined(this.actionObj.clone.offsetParent)&&this.actionObj.clone.offsetParent.classList.contains("e-more-event-popup")?this.morePopupEventDragging(e):this.parent.isTimelineView()&&"TimelineYear"!==this.parent.options.currentView?(this.timelineEventModule.dateRender=this.parent.activeView.renderDates,this.timelineEventModule.cellWidth=this.actionObj.cellWidth,this.timelineEventModule.getSlotDates(),this.actionObj.cellWidth=this.isHeaderRows?this.timelineEventModule.cellWidth:this.actionObj.cellWidth,this.calculateTimelineTime(e)):"Month"===this.parent.options.currentView||"TimelineYear"===this.parent.options.currentView||!this.parent.isTimelineView()&&!this.parent.activeViewOptions.timeScale.enable?this.calculateVerticalDate(e):this.calculateVerticalTime(e)},t.prototype.navigationWrapper=function(){if(this.parent.isTimelineView()){var e=void 0,t=(e=this.parent.activeViewOptions.group.resources.length>0?this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index):this.parent.element.querySelector(".e-appointment-container")).querySelector(".e-appointment-wrapper");t||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),e.appendChild(t)),t.appendChild(this.actionObj.clone)}else if("Month"!==this.parent.options.currentView&&this.parent.activeViewOptions.timeScale.enable){var i=this.actionObj.clone.classList.contains("e-all-day-appointment")?".e-all-day-appointment-wrapper":".e-appointment-wrapper";if(this.parent.element.querySelectorAll(i).item(this.actionObj.index).appendChild(this.actionObj.clone),".e-all-day-appointment-wrapper"===i){var n=this.getAllDayEventHeight(),s=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(s[0].offsetHeight<n)for(var r=0,o=s;r<o.length;r++){o[r].style.height=(n+2)/12+"em"}this.actionObj.clone.style.height=sf.base.formatUnit(n)}this.actionObj.height=parseInt(this.actionObj.clone.style.height,0)}else{var a=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));this.actionObj.index=this.parent.activeView.renderDates.length<this.actionObj.index?this.parent.activeView.renderDates.length-1:this.actionObj.index;var l=a[this.actionObj.index].querySelector(".e-appointment-wrapper");l||(l=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a[this.actionObj.index].appendChild(l)),l.appendChild(this.actionObj.clone)}},t.prototype.viewNavigation=function(e){var t,i=this.parent.element.querySelector(".e-content-wrap");i&&(!this.scrollEdges.top&&!this.scrollEdges.bottom||sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper"))&&(0===i.scrollLeft&&Math.round(this.actionObj.X)<=Math.round(i.getBoundingClientRect().left+this.actionObj.cellWidth+window.pageXOffset)?t=this.parent.options.enableRtl?"Next":"Previous":Math.round(i.scrollLeft)+i.clientWidth===i.scrollWidth&&Math.round(this.actionObj.X)>=Math.round(i.getBoundingClientRect().right-this.actionObj.cellWidth+window.pageXOffset)&&(t=this.parent.options.enableRtl?"Previous":"Next"),t&&this.parent.dotNetRef.invokeMethodAsync("OnDateNavigate",t))},t.prototype.morePopupEventDragging=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"td")))){var t=sf.base.extend({},this.actionObj.event,null,!0),i=t.endTime.getTime()-t.startTime.getTime(),n=sf.base.closest(e.target,"td"),s=this.parent.getDateFromElement(n),r=new Date(s.getTime());r.setMilliseconds(i),this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10)),this.actionObj.start=new Date(s.getTime()),this.actionObj.end=new Date(r.getTime()),this.actionObj.clone.style.top=sf.base.formatUnit(n.offsetParent.offsetTop),this.actionObj.clone.style.left=sf.base.formatUnit(n.offsetLeft),this.actionObj.clone.style.width=sf.base.formatUnit(n.offsetWidth);var o,a=n;if(this.parent.isTimelineView()){var l=sf.base.closest(n,"tr").rowIndex;a=this.parent.element.querySelectorAll(".e-appointment-container").item(l)}(o=a.querySelector(".e-appointment-wrapper"))||(o=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a.appendChild(o)),this.appendCloneElement(o)}},t.prototype.calculateVerticalTime=function(e){if(!(sf.base.isNullOrUndefined(this.actionObj.target)||this.actionObj.target&&sf.base.isNullOrUndefined(sf.base.closest(this.actionObj.target,"tr"))||!sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")&&!sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))){this.parent.activeViewOptions.timeScale.enable&&this.swapDragging(e);var t=this.parent.element.querySelector(".e-content-wrap"),i=sf.base.extend({},this.actionObj.event,null,!0),n=i.startTime,s=i.endTime.getTime()-n.getTime(),r=Math.floor(parseInt(this.actionObj.clone.style.top,10)/this.actionObj.cellHeight)*this.actionObj.cellHeight;r=r<0?0:r,(this.scrollEdges.top||this.scrollEdges.bottom)&&(r=this.scrollEdges.top?t.scrollTop-this.heightUptoCursorPoint+this.actionObj.cellHeight:t.scrollTop+t.offsetHeight-this.actionObj.clone.offsetHeight+(this.actionObj.clone.offsetHeight-this.heightUptoCursorPoint),r=Math.round(r/this.actionObj.cellHeight)*this.actionObj.cellHeight,this.actionObj.clone.style.top=sf.base.formatUnit(r));var a,c,p=r/this.actionObj.cellHeight,h=this.actionObj.cellHeight/this.actionObj.slotInterval,u=parseInt(this.actionObj.clone.style.top,10)-r;if(this.isAllDayDrag)a=this.parent.element.querySelector(".e-all-day-row");else a=[].slice.call(this.parent.getContentTable().querySelectorAll("tr"))[p];(sf.base.closest(this.actionObj.target,"td").classList.contains("e-work-cells")||sf.base.closest(this.actionObj.target,"td").classList.contains("e-all-day-cells"))&&(c=sf.base.closest(this.actionObj.target,"td").cellIndex);var d=sf.base.isNullOrUndefined(c)?sf.base.closest(this.actionObj.clone,"td").cellIndex:c;if(this.actionObj.index=d,!sf.base.isNullOrUndefined(a)){var f,g,m=a.children[d];this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(m.getAttribute("data-group-index"),10)),this.parent.activeViewOptions.timeScale.enable&&!this.isAllDayDrag?(this.appendCloneElement(this.getEventWrapper(d)),(f=this.parent.getDateFromElement(m)).setMinutes(f.getMinutes()+u/h),g=new Date(f.getTime()),this.actionObj.element.classList.contains("e-all-day-appointment")?g.setMinutes(g.getMinutes()+this.actionObj.slotInterval):g.setMilliseconds(s)):((f=this.parent.getDateFromElement(m)).setDate(f.getDate()-this.daysVariation),f.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),(g=new Date(f.getTime())).setMilliseconds(s),!this.actionObj.element.classList.contains("e-all-day-appointment")&&this.actionObj.clone.classList.contains("e-all-day-appointment")&&(g=l(o(g),1)),this.updateAllDayEvents(f,g,this.parent.activeViewOptions.group.byDate?d:void 0)),this.actionObj.start=new Date(+f),this.actionObj.end=new Date(+g);var v=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);this.updateEventHeight(v),this.updateTimePosition(this.actionObj.start)}}},t.prototype.updateEventHeight=function(e){},t.prototype.updateAllDayEvents=function(e,t,i){this.parent.eventBase.slots=[];var n=this.getUpdatedEvent(e,t,this.actionObj.event),s=this.parent.activeView.renderDates;this.parent.eventBase.slots.push(this.parent.activeView.renderDates.map((function(e){return+e}))),this.parent.activeViewOptions.group.resources.length>0&&(this.parent.eventBase.slots=[],this.parent.eventBase.slots.push(s.map((function(e){return+e}))));var r=this.parent.eventBase.splitEvent(n,s),o='.e-all-day-cells[data-date="'+this.parent.getMsFromDate(r[0].startTime)+'"]';this.parent.activeViewOptions.group.resources.length>0&&(o=o.concat('[data-group-index = "'+this.actionObj.groupIndex+'"]'));var a=[].slice.call(this.parent.element.querySelectorAll(o));if(a.length>0||!sf.base.isNullOrUndefined(i)){var l=sf.base.isNullOrUndefined(i)?a[0].cellIndex:i;this.appendCloneElement(this.getEventWrapper(l)),this.actionObj.clone.style.width=sf.base.formatUnit(r[0].data.count*this.actionObj.cellWidth)}},t.prototype.swapDragging=function(e){var t=sf.base.closest(this.actionObj.target,"td").cellIndex;if(sf.base.closest(this.actionObj.target,".e-date-header-wrap")&&!sf.base.closest(this.actionObj.clone,".e-all-day-appointment-wrapper")){sf.base.addClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!0;var i=this.getAllDayEventHeight(),n=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells:first-child"));if(n[0].offsetHeight<i)for(var s=0,r=n;s<r.length;s++){r[s].style.height=(i+2)/12+"em"}sf.base.setStyleAttribute(this.actionObj.clone,{width:sf.base.formatUnit(this.actionObj.cellWidth),height:sf.base.formatUnit(i),top:sf.base.formatUnit(this.parent.element.querySelector(".e-all-day-row").offsetTop)})}if(sf.base.closest(this.actionObj.target,".e-work-cells")&&!sf.base.closest(this.actionObj.clone,".e-day-wrapper")){sf.base.removeClass([this.actionObj.clone],"e-all-day-appointment"),this.appendCloneElement(this.getEventWrapper(t)),this.actionObj.isAllDay=!1;var o=0===this.actionObj.element.offsetHeight?this.actionObj.height:this.actionObj.element.offsetHeight;sf.base.setStyleAttribute(this.actionObj.clone,{left:sf.base.formatUnit(0),height:sf.base.formatUnit(o),width:sf.base.formatUnit(this.actionObj.cellWidth)})}},t.prototype.calculateVerticalDate=function(e){if(!(sf.base.isNullOrUndefined(e.target)||e.target&&sf.base.isNullOrUndefined(sf.base.closest(e.target,"tr"))||e.target&&"DIV"===e.target.tagName)){this.removeCloneElement();var t=sf.base.extend({},this.actionObj.event,null,!0),i=t.endTime.getTime()-t.startTime.getTime(),n=sf.base.closest(this.actionObj.target,"td");if(!sf.base.isNullOrUndefined(n)){var s=n.parentElement;this.actionObj.index=s.rowIndex*s.children.length+n.cellIndex,n=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"))[this.actionObj.index];var r=this.parent.getDateFromElement(n);if(!sf.base.isNullOrUndefined(r)){this.parent.activeViewOptions.group.resources.length>0&&(this.actionObj.groupIndex=parseInt(n.getAttribute("data-group-index"),10));var a=new Date(r.setDate(r.getDate()-this.daysVariation)),l=new Date(a.getTime()),c=new Date(l.getTime()),p=t.startTime.getTime()-o(t.startTime).getTime();l=new Date(l.getTime()+p),c=new Date(l.getTime()+i),this.actionObj.start=new Date(l.getTime()),this.actionObj.end=new Date(c.getTime())}}var h=this.getUpdatedEvent(this.actionObj.start,this.actionObj.end,this.actionObj.event);"TimelineYear"===this.parent.options.currentView?this.dynamicYearlyEventsRendering(h):this.dynamicEventsRendering(h)}},t.prototype.calculateTimelineTime=function(e){var t,i=sf.base.extend({},this.actionObj.event,null,!0),n=i.endTime.getTime()-i.startTime.getTime(),s=this.parent.options.enableRtl?Math.abs(this.actionObj.clone.offsetLeft)-this.actionObj.clone.offsetWidth:parseInt(this.actionObj.clone.style.left,10);s=Math.floor(s/this.actionObj.cellWidth)*this.actionObj.cellWidth,this.parent.options.enableRtl&&(t=Math.abs(parseInt(this.actionObj.clone.style.right,10)),this.actionObj.clone.style.right=sf.base.formatUnit(t)),s=this.getOffsetValue(s,t);var r=this.getColumnIndex(s),a=Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().left)/this.actionObj.cellWidth);this.parent.options.enableRtl&&(a=Math.abs(Math.floor((this.actionObj.pageX-this.actionObj.clone.getBoundingClientRect().right)/this.actionObj.cellWidth))-1),this.cursorPointIndex<0&&this.cursorIndex(e,i,s,a);var l=this.parent.getContentTable().querySelector("tr"),c=this.getCursorCurrentIndex(r,a,l);c=c<0?0:c;var p=this.isHeaderRows?new Date(this.timelineEventModule.dateRender[c].getTime()):this.parent.getDateFromElement(l.children[c]);if(this.isStepDragging){var h=this.getWidthDiff(l,c);if(0!==h){var u=Math.round(h/this.widthPerMinute);p.setMinutes(p.getMinutes()+u*this.actionObj.interval),p.setMinutes(p.getMinutes()-this.minDiff)}else p=this.actionObj.start}else p.setMinutes(p.getMinutes()-this.cursorPointIndex*(this.isTimelineDayProcess?1440:this.actionObj.slotInterval));if(p=this.calculateIntervalTime(p),this.isTimelineDayProcess){var d=i.startTime;p.setHours(d.getHours(),d.getMinutes(),d.getSeconds())}var f=new Date(p.getTime());f.setMilliseconds(n);var g=this.getUpdatedEvent(p,f,this.actionObj.event),m=this.timelineEventModule.splitEvent(g,this.timelineEventModule.dateRender),v=m[0].data,b=this.getStartTime(m[0],v),y=this.getEndTime(m[0],v),w=this.timelineEventModule.getEventWidth(b,y,i.isAllDay,v.count),O=this.parent.getIndexOfDate(this.timelineEventModule.dateRender,o(new Date(b.getTime())));O=O<0?0:O;var S=this.timelineEventModule.getPosition(b,y,i.isAllDay,O);this.parent.options.enableRtl?this.actionObj.clone.style.right=sf.base.formatUnit(S):this.actionObj.clone.style.left=sf.base.formatUnit(S),this.isMorePopupOpened||(this.actionObj.clone.style.width=sf.base.formatUnit(w)),this.parent.activeViewOptions.group.resources.length>0&&this.calculateResourceGroupingPosition(e),this.actionObj.start=new Date(p.getTime()),this.actionObj.end=new Date(f.getTime()),this.updateTimePosition(this.actionObj.start)},t.prototype.getStartTime=function(e,t){var i=e.startTime,n=p(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return i=n.startHour.getTime()>=t.startTime?n.startHour:n.endHour.getTime()<=t.startTime?this.getNextDay(n.startHour,t):t.startTime,t.trimStartTime=e.isAllDay?n.startHour:t.startTime,i},t.prototype.getNextDay=function(e,t){for(var i,n=1;n<=this.timelineEventModule.dateRender.length;n++)if(i=l(e,n),-1!==this.parent.getIndexOfDate(this.timelineEventModule.dateRender,o(new Date(e.getTime()))))return t.count=t.count-1,i;return i},t.prototype.getEndTime=function(e,t){var i=e.endTime,n=p(i,this.timelineEventModule.startHour,this.timelineEventModule.endHour);return i=n.endHour.getTime()<=t.endTime?n.endHour:t.endTime,t.trimEndTime=e.isAllDay?n.endHour:t.endTime,i},t.prototype.getOffsetValue=function(e,t){if(this.scrollEdges.left||this.scrollEdges.right){var i=this.parent.element.querySelector(".e-content-wrap");this.parent.options.enableRtl?(t=i.offsetWidth-i.scrollLeft,this.scrollEdges.right?t=t-i.offsetWidth+this.actionObj.clone.offsetWidth-(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint):(t+=this.widthUptoCursorPoint)-this.widthUptoCursorPoint>=i.scrollWidth&&(this.actionObj.clone.style.width=sf.base.formatUnit(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint+this.actionObj.cellWidth),t=i.scrollLeft-i.scrollWidth),this.actionObj.clone.style.left=sf.base.formatUnit(t)):(this.scrollEdges.left?(e=i.scrollLeft-this.widthUptoCursorPoint+this.actionObj.cellWidth,i.scrollLeft+i.offsetWidth>=i.offsetWidth?i.scrollLeft=i.scrollLeft-1:0===this.actionObj.clone.offsetLeft&&(e=i.scrollLeft)):e=i.scrollLeft+i.offsetWidth-this.actionObj.clone.offsetWidth+(this.actionObj.clone.offsetWidth-this.widthUptoCursorPoint),e=e<0?0:e,this.actionObj.clone.style.left=sf.base.formatUnit(e))}return e},t.prototype.getWidthDiff=function(e,t){var i=this.scrollArgs.element.getBoundingClientRect();if(i.left<=this.actionObj.pageX&&i.right>=this.actionObj.pageX){var n=e.children[t].offsetLeft,s=this.actionObj.pageX-i.left;return this.parent.options.enableRtl?n+this.actionObj.cellWidth-(this.scrollArgs.element.scrollLeft+s):this.scrollArgs.element.scrollLeft+s-n}return 0},t.prototype.getColumnIndex=function(e){var t=Math.floor(e/this.actionObj.cellWidth);return this.isHeaderRows?t:this.getIndex(t)},t.prototype.getCursorCurrentIndex=function(e,t,i){var n=e+t;if(this.isHeaderRows){var s=Math.floor(i.offsetWidth/this.actionObj.cellWidth);return n>s-1?s-1:n}return n>i.children.length-1?i.children.length-1:n},t.prototype.cursorIndex=function(e,t,i,n){var s=sf.base.closest(e.target,".e-work-cells");if(sf.base.isNullOrUndefined(s)||this.isMorePopupOpened)this.cursorPointIndex=0;else{var r=this.parent.getDateFromElement(s);if(this.isHeaderRows){var o=Math.floor(i/this.actionObj.cellWidth);r=new Date(this.timelineEventModule.dateRender[o+n].getTime())}var a=r.getTime()-new Date(t.startTime).getTime();if(this.isTimelineDayProcess)this.cursorPointIndex=Math.abs(Math.ceil(a/864e5));else{var l=Math.floor(a/6e4/(this.actionObj.slotInterval/this.actionObj.cellWidth));this.cursorPointIndex=Math.floor(l/this.actionObj.cellWidth),this.cursorPointIndex=this.cursorPointIndex<0?0:this.cursorPointIndex}}},t.prototype.calculateResourceGroupingPosition=function(e){var t=this.parent.element.querySelector(".e-content-wrap"),n=[].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)")),s=i(t.querySelector("table"));s=sf.base.isNullOrUndefined(s)?0:s;var r=this.parent.options.rowAutoHeight?~~(t.querySelector("table").offsetHeight/n.length):this.actionObj.cellHeight,o=Math.floor(Math.floor(this.actionObj.Y+(t.scrollTop-s-window.scrollY)-t.getBoundingClientRect().top)/r);o=o<0?0:o>n.length-1?n.length-1:o,this.actionObj.index=o;var a=this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(o),l=a.querySelector(".e-appointment-wrapper");l||(l=sf.base.createElement("div",{className:"e-appointment-wrapper"}),a.appendChild(l)),this.appendCloneElement(l);var c=sf.base.closest(e.target,"td");this.actionObj.groupIndex=c&&!isNaN(parseInt(c.getAttribute("data-group-index"),10))?parseInt(c.getAttribute("data-group-index"),10):this.actionObj.groupIndex;var p=n[o].offsetTop;if(this.parent.options.rowAutoHeight){var h=this.getCursorElement(e);h&&(p=h.classList.contains("e-work-cells")?h.offsetTop:h.offsetParent.classList.contains("e-appointment")?h.offsetParent.offsetTop:p)}this.actionObj.clone.style.top=sf.base.formatUnit(p)},t.prototype.appendCloneElement=function(e){this.parent.options.eventDragArea?document.querySelector(this.parent.options.eventDragArea).appendChild(this.actionObj.clone):e.appendChild(this.actionObj.clone)},t.prototype.getEventWrapper=function(e){var t,i=this.actionObj.clone.classList.contains("e-all-day-appointment");if(this.parent.activeViewOptions.timeScale.enable){var n=i?".e-all-day-appointment-wrapper":".e-appointment-wrapper";t=this.parent.element.querySelectorAll(n).item(e)}else{var s=this.parent.element.querySelectorAll(".e-work-cells").item(e);(t=s.querySelector(".e-appointment-wrapper"))||(t=sf.base.createElement("div",{className:"e-appointment-wrapper"}),s.appendChild(t))}return t},t.prototype.getAllDayEventHeight=function(){var e=sf.base.createElement("div",{className:"e-appointment"});this.parent.element.querySelector(".e-all-day-appointment-wrapper").appendChild(e);var t=e.offsetHeight;return sf.base.remove(e),t},t.prototype.isAllowDrop=function(e){if(!this.actionObj.excludeSelectors)return!1;for(var t=!1,i=0,n=this.actionObj.excludeSelectors.split(",");i<n.length;i++){var s=n[i];if(e.target.classList.contains(s)){t=!0;break}}return t},t}(Q),te=function(){function e(e){this.translateY=0,this.itemSize=60,this.bufferCount=3,this.renderedLength=0,this.averageRowHeight=0,this.startIndex=0,this.previousTop=0,this.parent=e}return e.prototype.getRenderedCount=function(){var e=this.parent.element.querySelector(".e-content-table");return this.renderedLength=e.querySelector("tbody").children.length,this.renderedLength},e.prototype.triggerScrolling=function(){this.parent.dotNetRef.invokeMethodAsync("OnContentUpdate",this.startIndex)},e.prototype.setTranslateValue=function(){var e=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline");this.setItemSize(),this.setVirtualTrackHeight(e),this.setTranslate(e,t,i,n),t.scrollTop=e.scrollTop},e.prototype.setVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-virtual-track");if(t){var i=parseInt(e.getAttribute("data-expanded-count"),10);t.style.height=i*this.itemSize+"px"}},e.prototype.updateVirtualScrollHeight=function(){var e=this.parent.element.querySelector(".e-virtual-track"),t=this.parent.element.querySelector(".e-resource-column-wrap"),i=(parseInt(t.getAttribute("data-rendered-index"),10),parseInt(t.getAttribute("data-expanded-index"),10),parseInt(t.getAttribute("data-expanded-count"),10)),n=this.parent.element.querySelector(".e-content-table");this.renderedLength=n.querySelector("tbody").children.length,e.style.height=n.offsetHeight+(i-this.renderedLength)*n.offsetHeight/this.renderedLength+"px",this.averageRowHeight=e.offsetHeight/i},e.prototype.updateVirtualTrackHeight=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap"),i=parseInt(t.getAttribute("data-rendered-index"),10),n=parseInt(t.getAttribute("data-expanded-index"),10),s=this.getRenderedCount()+(n-i),r=parseInt(t.getAttribute("data-expanded-count"),10);s=s>r?r:s,e.style.height=s*this.itemSize+"px"},e.prototype.setItemSize=function(){this.itemSize=t(this.parent.activeView.element,"e-work-cells")||this.itemSize},e.prototype.beforeInvoke=function(e,t,i,n){var s=this;window.clearTimeout(this.timeValue),this.timeValue=window.setTimeout((function(){s.triggerScrolling()}),250),this.setTranslate(e,t,i,n),this.previousTop=t.scrollTop},e.prototype.virtualScrolling=function(){this.parent.quickPopup&&this.parent.quickPopup.hide(),this.parent.morePopup&&this.parent.morePopup.hide();var e=this.parent.element.querySelector(".e-resource-column-wrap"),t=this.parent.element.querySelector(".e-content-wrap"),i=this.parent.element.querySelector(".e-event-table"),n=this.parent.element.querySelector(".e-current-timeline"),s=this.parent.element.querySelector(".e-content-table");this.renderedLength=e.querySelector("tbody").children.length;var r=parseInt(e.querySelector("tbody td").getAttribute("data-group-index"),10),o=this.parent.options.rowAutoHeight?s.offsetHeight-t.offsetHeight:this.bufferCount*this.itemSize;sf.base.addClass([t],"e-transition"),this.setItemSize(),t.scrollTop-this.translateY<0?(this.upScroll(t,r),this.beforeInvoke(e,t,i,n)):t.scrollTop-this.translateY>o&&(this.downScroll(t),this.previousTop!==t.scrollTop&&this.beforeInvoke(e,t,i,n))},e.prototype.upScroll=function(e,t){var i=~~(e.scrollTop/this.itemSize);if(this.parent.options.rowAutoHeight&&(i=i>t?t-this.bufferCount:i),i=i>0?i:0,0===t)this.translateY=e.scrollTop;else{var n=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize;this.translateY=e.scrollTop-this.bufferCount*n>0?e.scrollTop-this.bufferCount*n:0}this.startIndex=i},e.prototype.downScroll=function(e){var t=this.parent.element.querySelector(".e-resource-column-wrap");if(t.getAttribute("data-rendered-index")===t.getAttribute("data-expanded-index"))return null;var i=this.parent.options.rowAutoHeight?this.averageRowHeight:this.itemSize,n=~~(e.scrollTop/i),s=n+this.renderedLength,r=parseInt(t.getAttribute("data-expanded-count"),10);s=s>r?n+(r-n):s,this.translateY=e.scrollTop,this.translateY>r*i-this.renderedLength*i&&(this.translateY=r*i-this.renderedLength*i),this.startIndex=s-this.renderedLength},e.prototype.setTranslate=function(e,t,i,n){sf.base.setStyleAttribute(e.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(t.querySelector("table"),{transform:"translateY("+this.translateY+"px)"}),sf.base.setStyleAttribute(i,{transform:"translateY("+this.translateY+"px)"}),sf.base.isNullOrUndefined(n)||sf.base.setStyleAttribute(n,{transform:"translateY("+this.translateY+"px)"})},e}(),ie=function(){function e(e){this.parent=e}return e.prototype.inlineEdit=function(e,t,i){if(void 0===i&&(i=null),"Cell"===e)this.removeInlineAppointmentElement(),this.cellEdit();else{if(t)return;var n=this.parent.element.querySelector('.e-appointment[data-guid="'+i+'"]');this.parent.element.querySelector(".e-more-popup-wrapper")&&this.parent.element.querySelector(".e-more-popup-wrapper").classList.contains("e-popup-open")&&(n=this.parent.element.querySelector('.e-more-popup-wrapper .e-appointment[data-guid="'+i+'"]')),this.parent.element.querySelector(".e-inline-subject")!==n.querySelector(".e-inline-subject")&&this.removeInlineAppointmentElement(),this.eventEdit(n)}},e.prototype.cellEdit=function(){var e=this.generateEventData(),t=this.parent.activeCellsData.element.cellIndex,i=this.getEventDaysCount(e);i>1&&(i=Math.round(i),t-=--i);var n=new Date(""+e.startTime).getTime(),s=new Date(""+e.endTime).getTime(),r=e.groupIndex||0;if("Day"===this.parent.options.currentView||"Week"===this.parent.options.currentView||"WorkWeek"===this.parent.options.currentView){var o=e.startTime.getDay();this.createVerticalViewInline(e,o,r,t)}else"Month"===this.parent.options.currentView?this.createMonthViewInline(e,r,n,s):this.createTimelineViewInline(e,n,s,r);var a=this.parent.element.querySelector(".e-inline-subject");a&&a.focus()},e.prototype.createInlineAppointmentElement=function(){var e=sf.base.createElement("div",{className:"e-appointment e-inline-appointment"}),t=sf.base.createElement("div",{className:"e-appointment-details"});e.appendChild(t);var i=sf.base.createElement("input",{className:"e-inline-subject"});return t.appendChild(i),e},e.prototype.removeInlineAppointmentElement=function(){var e=[].slice.call(this.parent.element.querySelectorAll(".e-inline-appointment"));e.length>0&&e.forEach((function(e){return sf.base.remove(e)}));var t=this.parent.element.querySelector(".e-inline-subject");if(t){var i=sf.base.closest(t,".e-appointment");sf.base.removeClass([i.querySelector(".e-subject")],"e-disable"),sf.base.remove(t)}},e.prototype.createVerticalViewInline=function(e,t,i,n){var s=this.getEventDaysCount(e),r=new D(this.parent);r.initializeValues();if(s>=1){r.allDayElement=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-cells"));var o=[].slice.call(this.parent.element.querySelectorAll(".e-all-day-appointment")),a=0;o.length>0&&(a=Math.floor(this.parent.element.querySelector(".e-all-day-row").getBoundingClientRect().height/o[0].offsetHeight)-1),r.allDayLevel=a,r.renderAllDayEvents(e,0,i,n)}else r.renderNormalEvents(e,0,i,n)},e.prototype.createMonthViewInline=function(e,i,n,s){var r=this.getEventDaysCount(e),o=this.parent.eventBase.cloneEventObject(e,n,s,r,!1,!1),a=new V(this.parent);a.dateRender=this.parent.activeView.renderDates;var l=this.parent.activeView.renderDates,c=this.parent.activeViewOptions.workDays;this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+i+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells")),a.cellWidth=a.workCells[0].offsetWidth,a.cellHeight=a.workCells[0].offsetHeight,a.eventHeight=t(this.parent.element,"e-appointment"),a.getSlotDates(c);for(var p=a.getRenderedDates(l),h=0,u=a.splitEvent(o,p||l);h<u.length;h++){var d=u[h];a.renderEvents(d,i)}this.parent.element.querySelector(".e-inline-subject").focus()},e.prototype.createTimelineViewInline=function(e,i,n,s){var r=this.getEventDaysCount(e),o=this.parent.eventBase.cloneEventObject(e,i,n,r,!1,!1),a=new P(this.parent,this.parent.activeViewOptions.timeScale.enable?"hour":"day");a.dateRender=this.parent.activeView.renderDates,a.eventContainers=[].slice.call(this.parent.element.querySelectorAll(".e-appointment-container")),this.parent.activeCellsData.groupIndex>=0?a.workCells=[].slice.call(this.parent.element.querySelectorAll('.e-work-cells[data-group-index="'+s+'"]')):a.workCells=[].slice.call(this.parent.element.querySelectorAll(".e-work-cells"));var l=this.parent.element.querySelector(".e-work-cells");a.inlineValue=this.parent.options.allowInline,a.cellWidth=l.offsetWidth,a.cellHeight=l.offsetHeight;var c=0===this.parent.element.querySelectorAll(".e-content-table tbody tr").length?0:this.parent.element.querySelectorAll(".e-content-table tbody tr")[0].children.length;a.slotsPerDay=c/a.dateRender.length,a.eventHeight=t(a.parent.element,"e-appointment"),a.renderEvents(o,s)},e.prototype.getEventDaysCount=function(e){var t=e.startTime,i=e.endTime;return Math.abs(i.getTime()-t.getTime())/864e5},e.prototype.generateEventData=function(e){var t=this.parent.element.querySelector(".e-inline-subject"),i=t?t.value:e?e.innerHTML:"",n={};return n.subject=i,n.startTime=this.parent.activeCellsData.startTime,n.endTime=this.parent.activeCellsData.endTime,n.isAllDay=this.parent.activeCellsData.isAllDay,this.parent.activeCellsData.groupIndex>=0&&(n.groupIndex=this.parent.activeCellsData.groupIndex),n},e.prototype.eventEdit=function(e){var t,i=this.parent.element.querySelector(".e-inline-subject");if(i)t=i.value;else{var n=e.querySelector(".e-subject"),s=e.querySelector(".e-time");if(t=n.innerText,i=sf.base.createElement("input",{className:"e-inline-subject",attrs:{value:t}}),sf.base.addClass([n],"e-disable"),sf.base.closest(e,".e-more-popup-wrapper"))e.insertBefore(i,n);else if(["Agenda","MonthAgenda"].indexOf(this.parent.options.currentView)>-1){var r=e.querySelector(".e-subject-wrap");r.insertBefore(i,r.firstChild)}else{var o=["TimelineWeek","TimelineMonth"].indexOf(this.parent.options.currentView)>-1?".e-inner-wrap":".e-appointment-details";e.querySelector(o).insertBefore(i,s)}}i.focus(),i.setSelectionRange(t.length,t.length)},e}(),ne=function(){function t(e,t,i,n){this.element=e,this.element.blazor__instance=this,this.dotNetRef=n,this.options=t,this.activeViewOptions=i,this.isAdaptive=sf.base.Browser.isDevice,this.uiStateValues={expand:!1,isInitial:!0,left:0,top:0,isGroupAdaptive:!1,isIgnoreOccurrence:!1,groupIndex:0,action:!1,isBlock:!1},this.render()}return t.prototype.render=function(e){void 0===e&&(e=!1),this.setHeight(),this.workCellAction=new G(this),this.initializeLayout(this.options.currentView),this.eventBase=new H(this),this.options.allowKeyboardInteraction&&!this.keyboardInteractionModule?this.keyboardInteractionModule=new K(this):!this.options.allowKeyboardInteraction&&this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.options.allowDragAndDrop&&(this.dragAndDropModule=new ee(this)),this.options.allowResizing&&(this.resizeModule=new Z(this)),this.options.allowInline&&(this.inlineModule=new ie(this)),e||this.wireEvents()},t.prototype.initializeLayout=function(e){switch(this.activeView&&this.activeView.destroy(),e){case"Day":case"Week":case"WorkWeek":this.activeView=new M(this);break;case"TimelineDay":case"TimelineWorkWeek":case"TimelineWeek":this.activeView=new W(this);break;case"Month":this.activeView=new R(this);break;case"MonthAgenda":this.activeView=new N(this);break;case"TimelineMonth":this.activeView=new z(this);break;case"Year":case"TimelineYear":this.activeView=new Y(this);break;case"Agenda":this.activeView=new X(this)}this.activeView&&(this.uiStateValues.isGroupAdaptive=this.isAdaptive&&this.activeViewOptions.group.resources.length>0&&this.activeViewOptions.group.enableCompactView,this.virtualScrollModule&&(this.virtualScrollModule=null),-1!==this.options.currentView.indexOf("Timeline")&&this.activeViewOptions.allowVirtualScrolling&&this.activeViewOptions.group.resources.length>0&&!this.uiStateValues.isGroupAdaptive&&(this.virtualScrollModule=new te(this),this.uiStateValues.top=0),this.globalize=new sf.base.Internationalization(this.options.locale),this.activeView.getRenderDates(),this.activeView.renderLayout())},t.prototype.scrollContentReady=function(e){if(this.virtualScrollModule){if(e){this.virtualScrollModule.updateVirtualTrackHeight(this.element.querySelector(".e-virtual-track"));var t=this.element.querySelector(".e-current-timeline");sf.base.isNullOrUndefined(t)||(t.style.height=this.element.querySelector(".e-content-table").offsetHeight+"px");var i={cssProperties:this.getCssProperties()};return void this.onScrollUiUpdate(i)}this.virtualScrollModule.setTranslateValue()}},t.prototype.scrollToResource=function(e,t){var i=this.element.querySelector(".e-content-wrap");if(this.options.currentView.indexOf("Timeline")<0||"TimelineYear"===this.options.currentView&&"Horizontal"===this.activeViewOptions.orientation){t=this.activeViewOptions.group.byDate?t+1:t;var n=this.element.querySelectorAll(".e-date-header-wrap tbody tr")[t];i.scrollLeft=n.children[e].offsetLeft}else if(this.virtualScrollModule&&"TimelineYear"!==this.options.currentView){var s=this.element.querySelector(".e-virtual-track"),r=this.element.querySelector(".e-resource-column-wrap"),o=Math.round(s.offsetHeight/parseInt(r.getAttribute("data-expanded-count"),10));if(i.scrollTop=e*o-(this.virtualScrollModule.bufferCount-1)*o,this.virtualScrollModule.virtualScrolling(),this.options.rowAutoHeight)(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=i.scrollTop<a.offsetTop?a.offsetTop:i.scrollTop+a.offsetTop);else i.scrollTop=e*o}else{var a;(a=this.element.querySelector('.e-work-cells[data-group-index="'+e+'"]'))&&!a.parentElement.classList.contains("e-hidden")&&(i.scrollTop=a.offsetTop)}},t.prototype.dataReady=function(e,t){this.activeView&&this.activeView.onDataReady({},e,t)},t.prototype.isTimelineView=function(){return-1!==this.options.currentView.indexOf("Timeline")},t.prototype.isAllDayCell=function(e){return!(!(["Month","TimelineMonth","TimelineYear","MonthAgenda"].indexOf(this.options.currentView)>-1||e.classList.contains("e-all-day-cells")||e.classList.contains("e-header-cells"))&&this.activeViewOptions.timeScale.enable)||!!(this.isTimelineView()&&this.activeViewOptions.headerRows.length>0&&"Hour"!==this.activeViewOptions.headerRows.slice(-1)[0].option)},t.prototype.getDateFromElement=function(e){var t=e.getAttribute("data-date");if(!sf.base.isNullOrUndefined(t)){var i=parseInt(t,10),n=new Date(i),s=new Date(+n+6e4*n.getTimezoneOffset());return new Date(s.getTime()+6e4*(s.getTimezoneOffset()-n.getTimezoneOffset()))}},t.prototype.getMsFromDate=function(e){return new Date(+e-6e4*e.getTimezoneOffset()).getTime()},t.prototype.getTimeString=function(e){return this.globalize.formatDate(e,{format:this.options.timeFormat,type:"time"})},t.prototype.getDateTime=function(e){return e instanceof Date?new Date(e.getTime()):new Date(e)},t.prototype.getStartEndTime=function(e){if(!sf.base.isNullOrUndefined(e)&&""!==e){var t=this.resetTime(this.getCurrentTime()),i=e.split(":");return 2===i.length&&t.setHours(parseInt(i[0],10),parseInt(i[1],10),0),t}return null},t.prototype.resetTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.prototype.getCurrentTime=function(){return new Date},t.prototype.boundaryValidation=function(e,t){var i={left:!1,right:!1,top:!1,bottom:!1},n=this.element.querySelector(".e-content-wrap").getBoundingClientRect();return e<n.top+30+window.pageYOffset&&e>n.top+window.pageYOffset&&(i.top=!0),e>n.bottom-30+window.pageYOffset&&e<n.bottom+window.pageYOffset&&(i.bottom=!0),t<n.left+30+window.pageXOffset&&t>n.left+window.pageXOffset&&(i.left=!0),t>n.right-30+window.pageXOffset&&t<n.right+window.pageXOffset&&(i.right=!0),i},t.prototype.onCellMouseDown=function(e){this.keyboardInteractionModule&&this.keyboardInteractionModule.onCellMouseDown(e)},t.prototype.getNavigateView=function(){return this.isTimelineView()?"TimelineMonth"===this.options.currentView||"TimelineYear"===this.options.currentView?"TimelineDay":"Agenda":"Day"},t.prototype.addSelectedClass=function(e,t){for(var i=0,n=e;i<n.length;i++){n[i].setAttribute("aria-selected","true")}sf.base.addClass(e,"e-selected-cell"),t&&(t.setAttribute("tabindex","0"),t.focus())},t.prototype.removeSelectedClass=function(){for(var e=this.getSelectedElements(),t=0,i=e;t<i.length;t++){var n=i[t];n.setAttribute("aria-selected","false"),n.removeAttribute("tabindex")}sf.base.removeClass(e,"e-selected-cell")},t.prototype.setWorkHours=function(e,t,i,n){var s;s=this.getWorkHourCells(e,t,i,n),sf.base.addClass(s,"e-work-hours")},t.prototype.resetWorkHours=function(e,t,i,n){if(void 0===e&&(e=this.activeView.renderDates),e&&t&&i){var s=this.getWorkHourCells(e,t,i,n);sf.base.removeClass(s,"e-work-hours")}else{var r=[].slice.call(this.element.querySelectorAll(".e-work-hours"));sf.base.removeClass(r,"e-work-hours")}},t.prototype.getWorkHourCells=function(e,t,i,n){if(["Agenda","MonthAgenda","Month","TimelineMonth"].indexOf(this.options.currentView)>-1)return[];var s=this.getStartEndTime(t),r=this.getStartEndTime(i),o=this.getContentTable();if(sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(r)||!o)return[];s.setMilliseconds(0),r.setMilliseconds(0);var a=this.activeView.getStartHour();s<a&&(s=a);var l=this.activeView.getEndHour();r>l&&(r=l);for(var c=6e4*this.activeViewOptions.timeScale.interval/this.activeViewOptions.timeScale.slotCount,p=Math.round((s.getTime()-a.getTime())/c),h=Math.ceil((r.getTime()-a.getTime())/c),u=p,d=h,f=[],g=0,m=e;g<m.length;g++){var v=m[g];v=this.getDateTime(v),this.resetTime(v);var b=this.activeView.renderDates,y=this.getIndexOfDate(b,v);if(y>=0){if(this.isTimelineView()){var w=Math.round((l.getTime()-a.getTime())/c);p=u+y*w,h=d+y*w}for(var O=p;O<h;O++)if(this.isTimelineView()){var S=sf.base.isNullOrUndefined(n)?0:n;f.push(o.rows[S].cells[O])}else if(sf.base.isNullOrUndefined(n))f.push(o.rows[O].cells[y]);else{var T=[].slice.call(o.rows[O].querySelectorAll('.e-work-cells[data-group-index="'+n+'"]'));f.push(T[y])}}}return f},t.prototype.getCellDetails=function(e){var t=e instanceof Array?e:[e],i=sf.base.getElement(t[0]),n=sf.base.getElement(t.slice(-1)[0]),s=this.getDateFromElement(i),r=this.getDateFromElement(n);if(!sf.base.isNullOrUndefined(s)&&!sf.base.isNullOrUndefined(r)){var o=this.isTimelineView()&&!sf.base.isNullOrUndefined(n.getAttribute("colSpan"))&&this.activeViewOptions.headerRows.length>0,a=o?parseInt(n.getAttribute("colSpan"),10):1,c={startTime:s,endTime:r=!this.activeViewOptions.timeScale.enable||o||n.classList.contains("e-all-day-cells")||n.classList.contains("e-header-cells")?l(new Date(r.getTime()),a):this.activeView.getEndDateFromStartDate(r),isAllDay:this.isAllDayCell(i),element:i},p=i.getAttribute("data-group-index");return sf.base.isNullOrUndefined(p)||(c.groupIndex=parseInt(p,10)),c}},t.prototype.getSelectedElements=function(){return[].slice.call(this.element.querySelectorAll(".e-selected-cell"))},t.prototype.selectCell=function(e){this.removeSelectedClass(),this.addSelectedClass([e],e)},t.prototype.getAllDayRow=function(){return this.element.querySelector(".e-all-day-row")},t.prototype.getTableRows=function(){return[].slice.call(this.element.querySelectorAll(".e-content-table tbody tr:not(.e-hidden)"))},t.prototype.getWorkCellElements=function(){return[].slice.call(this.element.querySelectorAll(".e-work-cells"))},t.prototype.getContentTable=function(){return this.element.querySelector(".e-content-table tbody")},t.prototype.getIndexOfDate=function(e,t){return e.map(Number).indexOf(+t)},t.prototype.setHeight=function(){this.element.style.height=sf.base.formatUnit(this.options.height)},t.prototype.setDimensions=function(){this.setHeight();var e={cssProperties:this.getCssProperties()};this.onScrollUiUpdate(e)},t.prototype.getCssProperties=function(){return{border:this.options.enableRtl?"borderLeftWidth":"borderRightWidth",padding:this.options.enableRtl?"paddingLeft":"paddingRight",rtlBorder:this.options.enableRtl?"borderRightWidth":"borderLeftWidth",rtlPadding:this.options.enableRtl?"paddingRight":"paddingLeft"}},t.prototype.onScrollUiUpdate=function(e){this.activeView&&this.activeView.onScrollUiUpdate(e)},t.prototype.onVirtualScroll=function(){this.virtualScrollModule&&this.virtualScrollModule.virtualScrolling()},t.prototype.removeNewEventElement=function(){var e=this.element.querySelector(".e-new-event");sf.base.isNullOrUndefined(e)||sf.base.remove(e)},t.prototype.closeSidebar=function(e){var t=this.element.querySelector(".e-sidebar");sf.base.closest(e.target,".e-icon-menu,.e-sidebar")&&t&&t.classList.contains("e-open")&&e.preventDefault()},t.prototype.closeHeaderPopup=function(e){var t=sf.base.closest(e.target,".e-date-range,.e-header-popup,.e-day,.e-selected"),i=this.element.querySelector(".e-header-popup");sf.base.isNullOrUndefined(t)&&i&&this.headerPopup&&this.headerPopup.hide()},t.prototype.closeQuickPopup=function(e){var t=".e-quick-popup-wrapper,.e-header-cells,.e-all-day-cells,.e-work-cells,.e-appointment,.e-popup",i=sf.base.closest(e.target,t),n=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(i)&&(n&&n.childElementCount>0&&this.quickPopup&&this.quickPopup.hide(),sf.base.closest(e.target,".e-appointment,.e-header-cells")&&this.removeNewEventElement(),!sf.base.closest(e.target,t)&&this.quickPopup&&(this.quickPopup.hide(),this.removeNewEventElement()))},t.prototype.beforeOpenEditor=function(){this.onClosePopup(),this.removeNewEventElement()},t.prototype.createCalendarPopup=function(){var t=this.element.querySelector(".e-header-popup");t&&!this.headerPopup&&(this.headerPopup=new sf.popups.Popup(t,{actionOnScroll:"hide",targetType:"relative",relateTo:this.isAdaptive?this.element.querySelector(".e-schedule-toolbar"):this.element.querySelector(".e-date-range"),position:{X:"left",Y:"bottom"},enableRtl:this.options.enableRtl}),this.headerPopup.isStringTemplate=!0),this.headerPopup&&(this.headerPopup.element.classList.contains(e)?this.headerPopup.hide():this.headerPopup.show())},t.prototype.createQuickPopup=function(e){if(this.isAdaptive&&sf.base.isNullOrUndefined(e)){var t=this.element.querySelector(".e-new-event");return sf.base.isNullOrUndefined(t)&&(t=sf.base.createElement("div",{className:"e-new-event",innerHTML:'<div class="e-title">New Event</div>'})),void this.currentCell.appendChild(t)}var i,n=this.element.querySelector(".e-quick-popup-wrapper");sf.base.isNullOrUndefined(e)||(i=!0,this.currentCell=this.element.querySelector('.e-appointment[data-guid="'+e+'"]'),this.activeEventData={element:this.currentCell,guid:[e]}),sf.base.isNullOrUndefined(this.currentCell)&&(this.currentCell=this.element.querySelector(".e-table-container")),(this.currentCell.classList.contains("e-work-cells")||this.currentCell.classList.contains("e-all-day-cells"))&&0===this.getSelectedElements().length&&this.selectCell(this.currentCell),n&&!this.quickPopup&&(this.quickPopup=new sf.popups.Popup(n,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,relateTo:this.currentCell,open:this.quickPopupOpen.bind(this),hideAnimation:this.isAdaptive?{name:"ZoomOut"}:{name:"FadeOut",duration:150},showAnimation:this.isAdaptive?{name:"ZoomIn"}:{name:"FadeIn",duration:150},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"none",Y:"fit"},position:this.isAdaptive||this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1004:3}),this.quickPopup.isStringTemplate=!0),this.quickPopup&&(this.isAdaptive&&sf.base.addClass([this.quickPopup.element],"e-device"),this.quickPopup.relateTo=this.currentCell,i&&this.applyEventColor(),this.adjustPopupPosition())},t.prototype.applyEventColor=function(){var e="";e="Agenda"===this.options.currentView||"MonthAgenda"===this.options.currentView?this.options.enableRtl?"border-right-color":"border-left-color":"background-color";var t=this.activeEventData.element.style[e];if(""!==t){var i=this.quickPopup.element.querySelector(".e-popup-header");this.quickPopup.element.querySelector(".e-popup-footer")&&(i=this.quickPopup.element.querySelector(".e-subject"))&&(i.style.borderLeftColor=t,t="rgba("+t.match(/\d+/g).join()+",0.3)"),i&&(i.style.backgroundColor=t)}},t.prototype.inlineEdit=function(e,t,i){void 0===i&&(i=null),this.inlineModule.inlineEdit(e,t,i)},t.prototype.inlineCrudActions=function(e){if(sf.base.closest(e,".e-inline-appointment")){var t=this.inlineModule.generateEventData(e);t.startTime=f(t.startTime),t.endTime=f(t.endTime),this.dotNetRef.invokeMethodAsync("AddInlineAppointment",t,t.groupIndex)}else{var i=e.value;this.dotNetRef.invokeMethodAsync("SaveInlineAppointment",i)}this.inlineModule.removeInlineAppointmentElement()},t.prototype.quickPopupOpen=function(){if(this.isAdaptive)this.quickPopup.element.style.top="0px";else if(this.quickPopup.element.querySelector(".e-cell-popup")){var e=this.quickPopup.element.querySelector(".e-subject");e&&e.focus()}else{var t=this.quickPopup.element.querySelector(".e-event-edit");t&&t.focus();var i=this.quickPopup.element.querySelector(".e-edit");i&&i.focus()}},t.prototype.adjustPopupPosition=function(){var e=this.quickPopup.element.style.display;if(this.quickPopup.element.style.display="block",this.isAdaptive)this.quickPopup.element.removeAttribute("style"),this.quickPopup.element.style.display="block",this.quickPopup.element.style.height=sf.base.formatUnit(this.isTapHold?65:window.innerHeight);else{this.quickPopup.offsetX=10,this.quickPopup.collision={X:this.options.enableRtl?"flip":"none",Y:"fit"},this.quickPopup.position={X:this.options.enableRtl?"left":"right",Y:"top"},this.quickPopup.dataBind(),this.quickPopup.refreshPosition(null,!0);var t=sf.popups.isCollide(this.quickPopup.element,this.element);if(t.indexOf(this.options.enableRtl?"left":"right")>-1)this.quickPopup.offsetX=-this.currentCell.offsetWidth-10-this.quickPopup.element.offsetWidth,this.quickPopup.dataBind(),sf.popups.isCollide(this.quickPopup.element,this.element).indexOf("left")>-1&&(this.quickPopup.position={X:"center",Y:"center"},this.quickPopup.collision={X:"fit",Y:"fit"},this.quickPopup.offsetX=-this.quickPopup.element.offsetWidth/2,this.quickPopup.dataBind());if(this.virtualScrollModule&&(t.indexOf("top")>-1||t.indexOf("bottom")>-1)){var n=i(this.element.querySelector(".e-content-wrap table"));this.quickPopup.offsetY=n,this.quickPopup.dataBind()}}this.quickPopup.element.style.display=e,this.quickPopup.dataBind(),this.quickPopup.show()},t.prototype.onQuickPopupClose=function(){this.isTapHold=!1,this.quickPopup&&this.quickPopup.element.classList.contains(e)&&this.quickPopup.hide(),this.eventBase.focusElement()},t.prototype.onClosePopup=function(){this.quickPopup&&this.quickPopup.hide(),this.eventBase.focusElement()},t.prototype.createMoreEventPopup=function(e,t){var i=this.element.querySelector(".e-more-popup-wrapper");if(i&&!this.morePopup&&(this.morePopup=new sf.popups.Popup(i,{targetType:this.isAdaptive?"container":"relative",enableRtl:this.options.enableRtl,hideAnimation:{name:"ZoomOut",duration:300},showAnimation:{name:"ZoomIn",duration:300},collision:this.isAdaptive?{X:"fit",Y:"fit"}:this.options.enableRtl?{X:"flip",Y:"fit"}:{X:"flip",Y:"flip"},viewPortElement:this.isAdaptive?document.body:this.element,zIndex:this.isAdaptive?1002:2}),this.morePopup.isStringTemplate=!0),this.morePopup){for(var n=this.morePopup.element.querySelectorAll(".e-appointment"),s=0;s<n.length;s++){var r=n[s];this.eventBase.wireAppointmentEvents(r,"TimelineYear"===this.options.currentView,!0)}this.morePopup.relateTo=this.element.querySelector("."+e+'[data-date="'+t+'"]'),this.morePopup.show()}},t.prototype.onMoreEventPopupClose=function(){this.morePopup&&this.morePopup.element.classList.contains(e)&&(this.onQuickPopupClose(),this.morePopup.hide())},t.prototype.getTooltipPosition=function(e,t){var i,n=(i=t?this.element.querySelector(".e-quick-popup-wrapper"):document.querySelector("#"+this.element.id+"_dialog_wrapper .e-dlg-content")).querySelector("#"+e).getBoundingClientRect(),s=i.getBoundingClientRect(),r={};r[e]="top:"+(n.bottom-s.top+i.scrollTop+9)+"px;left:"+(n.left-s.left+i.scrollLeft+n.width/2)+"px;",this.dotNetRef.invokeMethodAsync("ErrorPositioning",r,t)},t.prototype.scrollTo=function(e,t){t=sf.base.isNullOrUndefined(t)?t:this.getDateTime(t),this.activeView.scrollToDate&&sf.base.isNullOrUndefined(e)&&t?this.activeView.scrollToDate(t):this.activeView.scrollToHour&&this.activeView.scrollToHour(e,t)},t.prototype.print=function(){var e=this.element,t=this.options.currentView,i=e.cloneNode(!0);function n(e){return"MonthAgenda"===t?e.querySelector(".e-appointment-wrap"):e.querySelector(".e-content-wrap")}i.id=this.element.id+"_print",document.body.appendChild(i);var s=n(this.element),r=s.scrollTop,o=s.scrollLeft,a=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style")),l="";a.forEach((function(e){l+=e.outerHTML}));var c=sf.base.createElement("div");i.style.width=this.element.offsetWidth+"px";var p=100*Math.round(parseInt(i.style.width,10)/100);c.appendChild(i);var h=window.open("","print","height=550,width="+p+",tabbar=no");h.document.write("<!DOCTYPE html> <html><head>"+l+"</head><body>"+c.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),h.document.close(),h.focus(),setTimeout((function(){var e=n(h.document.body);e.scrollLeft=o,e.scrollTop=r;var i=h.document.querySelector(".e-date-header-wrap");(-1!==t.indexOf("Timeline")&&(i.scrollLeft=o),"Day"===t||"Week"===t||"WorkWeek"===t)&&(h.document.querySelector(".e-time-cells-wrap").scrollTop=r,i.scrollLeft=o);"Month"===t&&(i.scrollLeft=o),h.print(),h.close()}),2e3)},t.prototype.wireEvents=function(){this.wireTouchEvents(),sf.base.EventHandler.add(window,"resize",this.onScheduleResize,this),sf.base.EventHandler.add(window,"orientationchange",this.onScheduleResize,this),sf.base.EventHandler.add(document,sf.base.Browser.touchStartEvent,this.onDocumentClick,this)},t.prototype.unwireEvents=function(){this.unwireTouchEvents(),sf.base.EventHandler.remove(window,"resize",this.onScheduleResize),sf.base.EventHandler.remove(window,"orientationchange",this.onScheduleResize),sf.base.EventHandler.remove(document,sf.base.Browser.touchStartEvent,this.onDocumentClick)},t.prototype.wireTouchEvents=function(){var e=this.element.querySelector(".e-table-container");e&&sf.base.isNullOrUndefined(this.touchObj)&&(this.touchObj=new sf.base.Touch(e,{tapHold:this.tapHoldHandler.bind(this)}))},t.prototype.unwireTouchEvents=function(){this.touchObj&&this.touchObj.destroy()},t.prototype.tapHoldHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-appointment");if(!sf.base.isNullOrUndefined(t)&&this.isAdaptive){var i=t.getAttribute("data-guid");return this.isTapHold=!0,this.selectedElements=[].slice.call(this.element.querySelectorAll(".e-appointment-border")),this.eventBase.getSelectedEventElements(t),void this.dotNetRef.invokeMethodAsync("OnTapHold",i,this.isTapHold)}},t.prototype.onScheduleResize=function(){this.onClosePopup(),this.morePopup&&this.morePopup.hide(),this.activeView.resetColWidth(),this.onScrollUiUpdate({cssProperties:this.getCssProperties(),isPreventScrollUpdate:!0}),this.dataReady()},t.prototype.onDocumentClick=function(t){if(this.options.allowInline){var i=this.element.querySelector(".e-inline-subject");i&&""!==i.value?this.inlineCrudActions(i):this.inlineModule.removeInlineAppointmentElement()}this.closeHeaderPopup(t),this.closeSidebar(t),this.closeQuickPopup(t),this.eventBase&&this.eventBase.appointmentBorderRemove(t);var n=t.target;!this.morePopup||sf.base.closest(n,".e-more-popup-wrapper")||n.classList.contains("e-more-indicator")||sf.base.closest(n,"."+e)||sf.base.closest(n,".e-work-cells")||this.morePopup.hide()},t.prototype.setPersistence=function(){if(this.options.enablePersistence){var e={selectedDate:this.options.selectedDate,currentView:this.options.currentView},t=this.element.querySelector(".e-content-wrap");sf.base.isNullOrUndefined(t)||(e.top=t.scrollTop,e.left=t.scrollLeft),window.localStorage.setItem(this.element.id,JSON.stringify(e))}},t.prototype.destroy=function(){this.isDestroyed=!0,this.setPersistence(),this.unwireEvents(),this.headerPopup&&this.headerPopup.destroy(),this.quickPopup&&this.quickPopup.destroy(),this.morePopup&&this.morePopup.destroy(),this.keyboardInteractionModule&&this.keyboardInteractionModule.destroy(),this.activeView&&(this.activeView.destroy(),this.activeView=null)},t}();return{initialize:function(e,t,i,n){e&&(t.selectedDate=new Date(t.selectedDate),t.minDate=new Date(t.minDate),t.maxDate=new Date(t.maxDate),sf.base.isNullOrUndefined(i.group.resources)&&(i.group.resources=[]),e.blazor__instance?(e.blazor__instance.options=t,e.blazor__instance.activeViewOptions=i,e.blazor__instance.render(!0),e.blazor__instance.setPersistence()):(new ne(e,t,i,n),n.invokeMethodAsync("TriggerCreatedEvent")))},loadCldr:function(e){sf.base.loadCldr(JSON.parse(e))},createCalendarPopup:function(e){e&&e.blazor__instance&&e.blazor__instance.createCalendarPopup()},exportSave:function(e,t){if(navigator.msSaveBlob){for(var i=window.atob(t),n=new Uint8Array(i.length),s=0;s<i.length;s++)n[s]=i.charCodeAt(s);var r=new Blob([n.buffer],{type:"application/octet-stream"});navigator.msSaveBlob(r,e)}else{var o=document.createElement("a");o.download=e,o.href="data:application/octet-stream;base64,"+t,document.body.appendChild(o),o.click(),document.body.removeChild(o)}},exportToICS:function(e,t){var i=new Blob([e],{type:"data:text/calendar;charset=utf8"});if(t=(t||"Calendar")+".ics",navigator.msSaveBlob)navigator.msSaveBlob(i,t);else{var n=document.createElementNS("http://www.w3.org/1999/xhtml","a");n.download=t,n.href=URL.createObjectURL(i);var s=document.createEvent("MouseEvent");s.initEvent("click",!0,!0),n.dispatchEvent(s),setTimeout((function(){URL.revokeObjectURL(n.href),n.href=void 0}))}},scrollTo:function(e,t,i){e&&e.blazor__instance&&e.blazor__instance.scrollTo(t,i)},destroy:function(e){e&&e.blazor__instance&&e.blazor__instance.destroy()},validation:function(e,t,i){e&&e.blazor__instance&&e.blazor__instance.getTooltipPosition(t,i)},createQuickPopup:function(e,t){e&&e.blazor__instance&&e.blazor__instance.createQuickPopup(t)},adjustPopupPosition:function(e){e&&e.blazor__instance&&e.blazor__instance.adjustPopupPosition()},closeQuickInfoPopup:function(e){e&&e.blazor__instance&&e.blazor__instance.onQuickPopupClose()},createMoreEventPopup:function(e,t,i){e&&e.blazor__instance&&e.blazor__instance.createMoreEventPopup(t,i)},moreEventPopupClose:function(e){e&&e.blazor__instance&&e.blazor__instance.onMoreEventPopupClose()},dataReady:function(e,t,i,n){e&&e.blazor__instance&&(e.blazor__instance.uiStateValues.isGroupAdaptive=t,e.blazor__instance.dataReady(i,n))},beforeOpenEditor:function(e){e&&e.blazor__instance&&e.blazor__instance.beforeOpenEditor()},scrollContentReady:function(e,t){e&&e.blazor__instance&&e.blazor__instance.scrollContentReady(t)},scrollToResource:function(e,t,i){e&&e.blazor__instance&&e.blazor__instance.scrollToResource(t,i)},printSchedule:function(e){e&&e.blazor__instance&&e.blazor__instance.print()},inlineEdit:function(e,t,i,n){void 0===n&&(n=null),e&&e.blazor__instance&&e.blazor__instance.inlineEdit(t,i,n)},setWorkHours:function(e,t,i,n,s){e&&e.blazor__instance&&e.blazor__instance.setWorkHours(t,i,n,s)},resetWorkHours:function(e,t,i,n,s){e&&e.blazor__instance&&e.blazor__instance.resetWorkHours(t,i,n,s)},getSelectedDetails:function(e,t){if(e&&e.blazor__instance){if(t)return(i=[].slice.call(e.querySelectorAll(".e-appointment-border"))).forEach((function(e){(void 0).push(e.getAttribute("data-guid"))})),JSON.stringify(void 0);var i=e.blazor__instance.getSelectedElements(),n=e.blazor__instance.getCellDetails(i);return n.startTime=f(n.startTime),n.endTime=f(n.endTime),JSON.stringify(n)}return null},getTargetDetails:function(e,t,i,n){if(e&&e.blazor__instance){var s=document.elementFromPoint(t,i),r=void 0;if(s&&"event"==n){if(r=sf.base.closest(s,".e-appointment"))return JSON.stringify(r.getAttribute("data-guid"))}else if(s&&"cell"==n){if(r=sf.base.closest(s,".e-header-cells,.e-all-day-cells,.e-work-cells")){var o=e.blazor__instance.getCellDetails(r);return o.startTime=f(o.startTime),o.endTime=f(o.endTime),JSON.stringify(o)}}else if(s&&"resource"==n)return r=sf.base.closest(s,".e-resource-cells"),JSON.stringify(r.getAttribute("data-group-index"));return null}return null}}}()}});